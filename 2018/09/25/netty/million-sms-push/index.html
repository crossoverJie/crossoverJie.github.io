

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://s2.loli.net/2025/08/15/WXCrTGSPe8a17B5.png">
  <link rel="icon" href="https://s2.loli.net/2025/08/15/WXCrTGSPe8a17B5.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="crossoverJie">
  <meta name="keywords" content="">
  
    <meta name="description" content="ÂâçË®ÄÈ¶ñÂÖàËøüÂà∞ÁöÑÁ•ùÂ§ßÂÆ∂‰∏≠ÁßãÂø´‰πê„ÄÇ ÊúÄËøë‰∏ÄÂë®Â§öÊ≤°ÊúâÊõ¥Êñ∞‰∫Ü„ÄÇÂÖ∂ÂÆûÊàë‰∏ÄÁõ¥ÊÉ≥ÊÜã‰∏Ä‰∏™Â§ßÊãõÔºåÂàÜ‰∫´‰∏Ä‰∫õÂ§ßÂÆ∂ÊÑüÂÖ¥Ë∂£ÁöÑÂπ≤Ë¥ß„ÄÇ Èâ¥‰∫éÊúÄËøëÊàë‰∏™‰∫∫ÁöÑÂ∑•‰ΩúÂÜÖÂÆπÔºå‰∫éÊòØÂà©Áî®Ëøô‰∏âÂ§©Â∞èÈïøÂÅáÊÜã‰∫Ü‰∏Ä‰∏™Âá∫Êù•ÔºàÂÖ∂ÂÆûÊòØÁé©‰∫Ü‰∏§Â§©ü§£Ôºâ„ÄÇ  ÂÖàÁÆÄÂçïËØ¥‰∏ãÊú¨Ê¨°ÁöÑ‰∏ªÈ¢òÔºåÁî±‰∫éÊàëÊúÄËøëÂÅöÁöÑÊòØÁâ©ËÅîÁΩëÁõ∏ÂÖ≥ÁöÑÂºÄÂèëÂ∑•‰ΩúÔºåÂÖ∂‰∏≠Â∞±‰∏çÂÖç‰ºöÈÅáÂà∞ÂíåËÆæÂ§áÁöÑ‰∫§‰∫í„ÄÇ ÊúÄ‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÂ∞±ÊòØË¶ÅÊúâ‰∏Ä‰∏™Á≥ªÁªüÊù•ÊîØÊåÅËÆæÂ§áÁöÑÊé•ÂÖ•„ÄÅÂêëËÆæÂ§áÊé®ÈÄÅÊ∂àÊÅØÔºõÂêåÊó∂ËøòÂæóÊª°Ë∂≥Â§ßÈáèËÆæÂ§áÊé•ÂÖ•ÁöÑÈúÄÊ±Ç„ÄÇ ÊâÄ‰ª•Êú¨Ê¨°ÂàÜ‰∫´ÁöÑÂÜÖÂÆπ">
<meta property="og:type" content="article">
<meta property="og:title" content="ËÆæËÆ°‰∏Ä‰∏™Áôæ‰∏áÁ∫ßÁöÑÊ∂àÊÅØÊé®ÈÄÅÁ≥ªÁªü">
<meta property="og:url" content="http://crossoverjie.top/2018/09/25/netty/million-sms-push/index.html">
<meta property="og:site_name" content="crossoverJie&#39;s Blog">
<meta property="og:description" content="ÂâçË®ÄÈ¶ñÂÖàËøüÂà∞ÁöÑÁ•ùÂ§ßÂÆ∂‰∏≠ÁßãÂø´‰πê„ÄÇ ÊúÄËøë‰∏ÄÂë®Â§öÊ≤°ÊúâÊõ¥Êñ∞‰∫Ü„ÄÇÂÖ∂ÂÆûÊàë‰∏ÄÁõ¥ÊÉ≥ÊÜã‰∏Ä‰∏™Â§ßÊãõÔºåÂàÜ‰∫´‰∏Ä‰∫õÂ§ßÂÆ∂ÊÑüÂÖ¥Ë∂£ÁöÑÂπ≤Ë¥ß„ÄÇ Èâ¥‰∫éÊúÄËøëÊàë‰∏™‰∫∫ÁöÑÂ∑•‰ΩúÂÜÖÂÆπÔºå‰∫éÊòØÂà©Áî®Ëøô‰∏âÂ§©Â∞èÈïøÂÅáÊÜã‰∫Ü‰∏Ä‰∏™Âá∫Êù•ÔºàÂÖ∂ÂÆûÊòØÁé©‰∫Ü‰∏§Â§©ü§£Ôºâ„ÄÇ  ÂÖàÁÆÄÂçïËØ¥‰∏ãÊú¨Ê¨°ÁöÑ‰∏ªÈ¢òÔºåÁî±‰∫éÊàëÊúÄËøëÂÅöÁöÑÊòØÁâ©ËÅîÁΩëÁõ∏ÂÖ≥ÁöÑÂºÄÂèëÂ∑•‰ΩúÔºåÂÖ∂‰∏≠Â∞±‰∏çÂÖç‰ºöÈÅáÂà∞ÂíåËÆæÂ§áÁöÑ‰∫§‰∫í„ÄÇ ÊúÄ‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÂ∞±ÊòØË¶ÅÊúâ‰∏Ä‰∏™Á≥ªÁªüÊù•ÊîØÊåÅËÆæÂ§áÁöÑÊé•ÂÖ•„ÄÅÂêëËÆæÂ§áÊé®ÈÄÅÊ∂àÊÅØÔºõÂêåÊó∂ËøòÂæóÊª°Ë∂≥Â§ßÈáèËÆæÂ§áÊé•ÂÖ•ÁöÑÈúÄÊ±Ç„ÄÇ ÊâÄ‰ª•Êú¨Ê¨°ÂàÜ‰∫´ÁöÑÂÜÖÂÆπ">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2018/09/23/5ba7ae180e8eb.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d1370be06.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d12d78ed4.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d12e1b5d7.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d12ecbb45.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d1350fb4b.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d1365b83e.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d1370be06.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d1380b0c9.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d138d15b4.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d139d90f4.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d14032c0d.jpg">
<meta property="og:image" content="https://i.loli.net/2019/05/08/5cd1d14187619.jpg">
<meta property="article:published_time" content="2018-09-25T00:01:14.000Z">
<meta property="article:modified_time" content="2025-08-18T07:09:25.272Z">
<meta property="article:author" content="crossoverJie">
<meta property="article:tag" content="Kafka">
<meta property="article:tag" content="Redis">
<meta property="article:tag" content="Zookeeper">
<meta property="article:tag" content="Êé®ÈÄÅ">
<meta property="article:tag" content="Ë∑ØÁî±Á≠ñÁï•">
<meta property="article:tag" content="Ê≥®ÂÜåÂèëÁé∞">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i.loli.net/2018/09/23/5ba7ae180e8eb.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>ËÆæËÆ°‰∏Ä‰∏™Áôæ‰∏áÁ∫ßÁöÑÊ∂àÊÅØÊé®ÈÄÅÁ≥ªÁªü - crossoverJie&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ‰∏ªÈ¢ò‰æùËµñÁöÑÂõæÊ†áÂ∫ìÔºå‰∏çË¶ÅËá™Ë°å‰øÆÊîπ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"crossoverjie.top","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"Qv6ckEtL1pe3PJD10qoOLKtg-gzGzoHsz","app_key":"NXiHFodQfmI8oxkK6IThhjrF","server_url":"https://qv6cketl.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="crossoverJie's Blog" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>crossoverJie&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/crossoverjie" target="_self">
                <i class="iconfont icon-github-fill"></i>
                <span>github</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/crossoverjie/gscript" target="_self">
                <i class="iconfont icon-code"></i>
                <span>gscript</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/crossoverjie/cim" target="_self">
                <i class="iconfont icon-telegram-fill"></i>
                <span>cim</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://space.bilibili.com/42339430" target="_self">
                <i class="iconfont icon-bilibili-fill"></i>
                <span>vlog</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://s2.loli.net/2025/08/15/JGUlLi6WoOQMREp.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="ËÆæËÆ°‰∏Ä‰∏™Áôæ‰∏áÁ∫ßÁöÑÊ∂àÊÅØÊé®ÈÄÅÁ≥ªÁªü"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        crossoverJie
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2018-09-25 00:01" pubdate>
          September 25, 2018 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.9k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          33 mins
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> views
        </span>
        
      
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">ËÆæËÆ°‰∏Ä‰∏™Áôæ‰∏áÁ∫ßÁöÑÊ∂àÊÅØÊé®ÈÄÅÁ≥ªÁªü</h1>
            
            
              <div class="markdown-body">
                
                <p><img src="https://i.loli.net/2018/09/23/5ba7ae180e8eb.jpg" srcset="/img/loading.gif" lazyload alt="business-communication-computer-261706.jpg"></p>
<h1 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h1><p>È¶ñÂÖàËøüÂà∞ÁöÑÁ•ùÂ§ßÂÆ∂‰∏≠ÁßãÂø´‰πê„ÄÇ</p>
<p>ÊúÄËøë‰∏ÄÂë®Â§öÊ≤°ÊúâÊõ¥Êñ∞‰∫Ü„ÄÇÂÖ∂ÂÆûÊàë‰∏ÄÁõ¥ÊÉ≥ÊÜã‰∏Ä‰∏™Â§ßÊãõÔºåÂàÜ‰∫´‰∏Ä‰∫õÂ§ßÂÆ∂ÊÑüÂÖ¥Ë∂£ÁöÑÂπ≤Ë¥ß„ÄÇ</p>
<p>Èâ¥‰∫éÊúÄËøëÊàë‰∏™‰∫∫ÁöÑÂ∑•‰ΩúÂÜÖÂÆπÔºå‰∫éÊòØÂà©Áî®Ëøô‰∏âÂ§©Â∞èÈïøÂÅáÊÜã‰∫Ü‰∏Ä‰∏™Âá∫Êù•ÔºàÂÖ∂ÂÆûÊòØÁé©‰∫Ü‰∏§Â§©ü§£Ôºâ„ÄÇ</p>
<hr>
<p>ÂÖàÁÆÄÂçïËØ¥‰∏ãÊú¨Ê¨°ÁöÑ‰∏ªÈ¢òÔºåÁî±‰∫éÊàëÊúÄËøëÂÅöÁöÑÊòØÁâ©ËÅîÁΩëÁõ∏ÂÖ≥ÁöÑÂºÄÂèëÂ∑•‰ΩúÔºåÂÖ∂‰∏≠Â∞±‰∏çÂÖç‰ºöÈÅáÂà∞ÂíåËÆæÂ§áÁöÑ‰∫§‰∫í„ÄÇ</p>
<p>ÊúÄ‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÂ∞±ÊòØË¶ÅÊúâ‰∏Ä‰∏™Á≥ªÁªüÊù•ÊîØÊåÅËÆæÂ§áÁöÑÊé•ÂÖ•„ÄÅÂêëËÆæÂ§áÊé®ÈÄÅÊ∂àÊÅØÔºõÂêåÊó∂ËøòÂæóÊª°Ë∂≥Â§ßÈáèËÆæÂ§áÊé•ÂÖ•ÁöÑÈúÄÊ±Ç„ÄÇ</p>
<p>ÊâÄ‰ª•Êú¨Ê¨°ÂàÜ‰∫´ÁöÑÂÜÖÂÆπ‰∏ç‰ΩÜÂèØ‰ª•Êª°Ë∂≥Áâ©ËÅîÁΩëÈ¢ÜÂüüÂêåÊó∂ËøòÊîØÊåÅ‰ª•‰∏ãÂú∫ÊôØÔºö</p>
<ul>
<li>Âü∫‰∫é <code>WEB</code> ÁöÑËÅäÂ§©Á≥ªÁªüÔºàÁÇπÂØπÁÇπ„ÄÅÁæ§ËÅäÔºâ„ÄÇ</li>
<li><code>WEB</code> Â∫îÁî®‰∏≠ÈúÄÊ±ÇÊúçÂä°Á´ØÊé®ÈÄÅÁöÑÂú∫ÊôØ„ÄÇ</li>
<li>Âü∫‰∫é SDK ÁöÑÊ∂àÊÅØÊé®ÈÄÅÂπ≥Âè∞„ÄÇ</li>
</ul>
<h1 id="ÊäÄÊúØÈÄâÂûã"><a href="#ÊäÄÊúØÈÄâÂûã" class="headerlink" title="ÊäÄÊúØÈÄâÂûã"></a>ÊäÄÊúØÈÄâÂûã</h1><p>Ë¶ÅÊª°Ë∂≥Â§ßÈáèÁöÑËøûÊé•Êï∞„ÄÅÂêåÊó∂ÊîØÊåÅÂèåÂÖ®Â∑•ÈÄö‰ø°ÔºåÂπ∂‰∏îÊÄßËÉΩ‰πüÂæóÊúâ‰øùÈöú„ÄÇ</p>
<p>Âú® Java ÊäÄÊúØÊ†à‰∏≠ËøõË°åÈÄâÂûãÈ¶ñÂÖàËá™ÁÑ∂ÊòØÊéíÈô§Êéâ‰∫Ü‰º†Áªü <code>IO</code>„ÄÇ</p>
<p>ÈÇ£Â∞±Âè™ÊúâÈÄâ NIO ‰∫ÜÔºåÂú®Ëøô‰∏™Â±ÇÈù¢ÂÖ∂ÂÆûÈÄâÊã©‰πü‰∏çÂ§öÔºåËÄÉËôëÂà∞Á§æÂå∫„ÄÅËµÑÊñôÁª¥Êä§Á≠âÊñπÈù¢ÊúÄÁªàÈÄâÊã©‰∫Ü Netty„ÄÇ</p>
<p>ÊúÄÁªàÁöÑÊû∂ÊûÑÂõæÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d1370be06.jpg" srcset="/img/loading.gif" lazyload></p>
<span id="more"></span>

<p>Áé∞Âú®ÁúãÁùÄËíôÊ≤°ÂÖ≥Á≥ªÔºå‰∏ãÊñá‰∏Ä‰∏Ä‰ªãÁªç„ÄÇ</p>
<h1 id="ÂçèËÆÆËß£Êûê"><a href="#ÂçèËÆÆËß£Êûê" class="headerlink" title="ÂçèËÆÆËß£Êûê"></a>ÂçèËÆÆËß£Êûê</h1><p>Êó¢ÁÑ∂ÊòØ‰∏Ä‰∏™Ê∂àÊÅØÁ≥ªÁªüÔºåÈÇ£Ëá™ÁÑ∂ÂæóÂíåÂÆ¢Êà∑Á´ØÂÆö‰πâÂ•ΩÂèåÊñπÁöÑÂçèËÆÆÊ†ºÂºè„ÄÇ</p>
<p>Â∏∏ËßÅÂíåÁÆÄÂçïÁöÑÊòØ HTTP ÂçèËÆÆÔºå‰ΩÜÊàë‰ª¨ÁöÑÈúÄÊ±Ç‰∏≠Êúâ‰∏ÄÈ°πÈúÄË¶ÅÊòØÂèåÂÖ®Â∑•ÁöÑ‰∫§‰∫íÊñπÂºèÔºåÂêåÊó∂ HTTP Êõ¥Â§öÁöÑÊòØÊúçÂä°‰∫éÊµèËßàÂô®„ÄÇÊàë‰ª¨ÈúÄË¶ÅÁöÑÊòØ‰∏Ä‰∏™Êõ¥Âä†Á≤æÁÆÄÁöÑÂçèËÆÆÔºåÂáèÂ∞ëËÆ∏Â§ö‰∏çÂøÖË¶ÅÁöÑÊï∞ÊçÆ‰º†Ëæì„ÄÇ</p>
<p>Âõ†Ê≠§ÊàëËßâÂæóÊúÄÂ•ΩÊòØÂú®Êª°Ë∂≥‰∏öÂä°ÈúÄÊ±ÇÁöÑÊÉÖÂÜµ‰∏ãÂÆöÂà∂Ëá™Â∑±ÁöÑÁßÅÊúâÂçèËÆÆÔºåÂú®ÊàëËøô‰∏™Âú∫ÊôØ‰∏ãÂÖ∂ÂÆûÊúâÊ†áÂáÜÁöÑÁâ©ËÅîÁΩëÂçèËÆÆ„ÄÇ</p>
<p>Â¶ÇÊûúÊòØÂÖ∂‰ªñÂú∫ÊôØÂèØ‰ª•ÂÄüÈâ¥Áé∞Âú®ÊµÅË°åÁöÑ <code>RPC</code> Ê°ÜÊû∂ÂÆöÂà∂ÁßÅÊúâÂçèËÆÆÔºå‰ΩøÂæóÂèåÊñπÈÄö‰ø°Êõ¥Âä†È´òÊïà„ÄÇ</p>
<p>‰∏çËøáÊ†πÊçÆËøôÊÆµÊó∂Èó¥ÁöÑÁªèÈ™åÊù•ÁúãÔºå‰∏çÁÆ°ÊòØÂì™ÁßçÊñπÂºèÈÉΩÂæóÂú®ÂçèËÆÆ‰∏≠È¢ÑÁïôÂÆâÂÖ®Áõ∏ÂÖ≥ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p>ÂçèËÆÆÁõ∏ÂÖ≥ÁöÑÂÜÖÂÆπÂ∞±‰∏çËøáËÆ®ËÆ∫‰∫ÜÔºåÊõ¥Â§ö‰ªãÁªçÂÖ∑‰ΩìÁöÑÂ∫îÁî®„ÄÇ</p>
<h1 id="ÁÆÄÂçïÂÆûÁé∞"><a href="#ÁÆÄÂçïÂÆûÁé∞" class="headerlink" title="ÁÆÄÂçïÂÆûÁé∞"></a>ÁÆÄÂçïÂÆûÁé∞</h1><p>È¶ñÂÖàËÄÉËôëÂ¶Ç‰ΩïÂÆûÁé∞ÂäüËÉΩÔºåÂÜçÊù•ÊÄùËÄÉÁôæ‰∏áËøûÊé•ÁöÑÊÉÖÂÜµ„ÄÇ</p>
<h2 id="Ê≥®ÂÜåÈâ¥ÊùÉ"><a href="#Ê≥®ÂÜåÈâ¥ÊùÉ" class="headerlink" title="Ê≥®ÂÜåÈâ¥ÊùÉ"></a>Ê≥®ÂÜåÈâ¥ÊùÉ</h2><p>Âú®ÂÅöÁúüÊ≠£ÁöÑÊ∂àÊÅØ‰∏ä„ÄÅ‰∏ãË°å‰πãÂâçÈ¶ñÂÖàË¶ÅËÄÉËôëÁöÑÂ∞±ÊòØÈâ¥ÊùÉÈóÆÈ¢ò„ÄÇ</p>
<p>Â∞±ÂÉè‰Ω†‰ΩøÁî®ÂæÆ‰ø°‰∏ÄÊ†∑ÔºåÁ¨¨‰∏ÄÊ≠•ÊÄé‰πà‰πüÂæóÊòØÁôªÂΩïÂêßÔºå‰∏çËÉΩÊó†ËÆ∫ÊòØË∞ÅÈÉΩÂèØ‰ª•Áõ¥Êé•ËøûÊé•Âà∞Âπ≥Âè∞„ÄÇ</p>
<p>ÊâÄ‰ª•Á¨¨‰∏ÄÊ≠•ÂæóÊòØÊ≥®ÂÜåÊâçË°å„ÄÇ</p>
<p>Â¶Ç‰∏äÈù¢Êû∂ÊûÑÂõæ‰∏≠ÁöÑ <code>Ê≥®ÂÜå/Èâ¥ÊùÉ</code> Ê®°Âùó„ÄÇÈÄöÂ∏∏Êù•ËØ¥ÈÉΩÈúÄË¶ÅÂÆ¢Êà∑Á´ØÈÄöËøá <code>HTTP</code> ËØ∑Ê±Ç‰º†ÈÄí‰∏Ä‰∏™ÂîØ‰∏ÄÊ†áËØÜÔºåÂêéÂè∞Èâ¥ÊùÉÈÄöËøá‰πãÂêé‰ºöÂìçÂ∫î‰∏Ä‰∏™ <code>token</code>ÔºåÂπ∂Â∞ÜËøô‰∏™ <code>token</code> ÂíåÂÆ¢Êà∑Á´ØÁöÑÂÖ≥Á≥ªÁª¥Êä§Âà∞ <code>Redis</code> ÊàñËÄÖÊòØ DB ‰∏≠„ÄÇ</p>
<p>ÂÆ¢Êà∑Á´ØÂ∞ÜËøô‰∏™ token ‰πü‰øùÂ≠òÂà∞Êú¨Âú∞Ôºå‰ªäÂêéÁöÑÊØè‰∏ÄÊ¨°ËØ∑Ê±ÇÈÉΩÂæóÂ∏¶‰∏äËøô‰∏™ token„ÄÇ‰∏ÄÊó¶Ëøô‰∏™ token ËøáÊúüÔºåÂÆ¢Êà∑Á´ØÈúÄË¶ÅÂÜçÊ¨°ËØ∑Ê±ÇËé∑Âèñ token„ÄÇ</p>
<p>Èâ¥ÊùÉÈÄöËøá‰πãÂêéÂÆ¢Êà∑Á´Ø‰ºöÁõ¥Êé•ÈÄöËøá<code>TCP ÈïøËøûÊé•</code>Âà∞Âõæ‰∏≠ÁöÑ <code>push-server</code> Ê®°Âùó„ÄÇ</p>
<p>Ëøô‰∏™Ê®°ÂùóÂ∞±ÊòØÁúüÊ≠£Â§ÑÁêÜÊ∂àÊÅØÁöÑ‰∏ä„ÄÅ‰∏ãË°å„ÄÇ</p>
<h2 id="‰øùÂ≠òÈÄöÈÅìÂÖ≥Á≥ª"><a href="#‰øùÂ≠òÈÄöÈÅìÂÖ≥Á≥ª" class="headerlink" title="‰øùÂ≠òÈÄöÈÅìÂÖ≥Á≥ª"></a>‰øùÂ≠òÈÄöÈÅìÂÖ≥Á≥ª</h2><p>Âú®ËøûÊé•Êé•ÂÖ•‰πãÂêéÔºåÁúüÊ≠£Â§ÑÁêÜ‰∏öÂä°‰πãÂâçÈúÄË¶ÅÂ∞ÜÂΩìÂâçÁöÑÂÆ¢Êà∑Á´ØÂíå Channel ÁöÑÂÖ≥Á≥ªÁª¥Êä§Ëµ∑Êù•„ÄÇ</p>
<p>ÂÅáËÆæÂÆ¢Êà∑Á´ØÁöÑÂîØ‰∏ÄÊ†áËØÜÊòØÊâãÊú∫Âè∑Á†ÅÔºåÈÇ£Â∞±ÈúÄË¶ÅÊääÊâãÊú∫Âè∑Á†ÅÂíåÂΩìÂâçÁöÑ Channel Áª¥Êä§Âà∞‰∏Ä‰∏™ Map ‰∏≠„ÄÇ</p>
<p>ËøôÁÇπÂíå‰πãÂâç <a target="_blank" rel="noopener" href="http://t.cn/EPcNHFZ">SpringBoot Êï¥ÂêàÈïøËøûÊé•ÂøÉË∑≥Êú∫Âà∂</a> Á±ª‰ºº„ÄÇ</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d12d78ed4.jpg" srcset="/img/loading.gif" lazyload></p>
<p>ÂêåÊó∂‰∏∫‰∫ÜÂèØ‰ª•ÈÄöËøá Channel Ëé∑ÂèñÂà∞ÂÆ¢Êà∑Á´ØÂîØ‰∏ÄÊ†áËØÜÔºàÊâãÊú∫Âè∑Á†ÅÔºâÔºåËøòÈúÄË¶ÅÂú® Channel ‰∏≠ËÆæÁΩÆÂØπÂ∫îÁöÑÂ±ûÊÄßÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">putClientId</span><span class="hljs-params">(Channel channel, String clientId)</span> &#123;<br>    channel.attr(CLIENT_ID).set(clientId);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Ëé∑ÂèñÊó∂ÊâãÊú∫Âè∑Á†ÅÊó∂Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getClientId</span><span class="hljs-params">(Channel channel)</span> &#123;<br>    <span class="hljs-keyword">return</span> (String)getAttribute(channel, CLIENT_ID);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ËøôÊ†∑ÂΩìÊàë‰ª¨ÂÆ¢Êà∑Á´Ø‰∏ãÁ∫øÁöÑÊó∂‰æøÂèØ‰ª•ËÆ∞ÂΩïÁõ∏ÂÖ≥Êó•ÂøóÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">telNo</span> <span class="hljs-operator">=</span> NettyAttrUtil.getClientId(ctx.channel());<br>NettySocketHolder.remove(telNo);<br>log.info(<span class="hljs-string">&quot;ÂÆ¢Êà∑Á´Ø‰∏ãÁ∫øÔºåTelNo=&quot;</span> +  telNo);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>ËøôÈáåÊúâ‰∏ÄÁÇπÈúÄË¶ÅÊ≥®ÊÑèÔºöÂ≠òÊîæÂÆ¢Êà∑Á´Ø‰∏é Channel ÂÖ≥Á≥ªÁöÑ Map ÊúÄÂ•ΩÊòØÈ¢ÑËÆæÂ•ΩÂ§ßÂ∞èÔºàÈÅøÂÖçÁªèÂ∏∏Êâ©ÂÆπÔºâÔºåÂõ†‰∏∫ÂÆÉÂ∞ÜÊòØ‰ΩøÁî®ÊúÄ‰∏∫È¢ëÁπÅÂêåÊó∂‰πüÊòØÂç†Áî®ÂÜÖÂ≠òÊúÄÂ§ßÁöÑ‰∏Ä‰∏™ÂØπË±°„ÄÇ</p>
</blockquote>
<h2 id="Ê∂àÊÅØ‰∏äË°å"><a href="#Ê∂àÊÅØ‰∏äË°å" class="headerlink" title="Ê∂àÊÅØ‰∏äË°å"></a>Ê∂àÊÅØ‰∏äË°å</h2><p>Êé•‰∏ãÊù•ÂàôÊòØÁúüÊ≠£ÁöÑ‰∏öÂä°Êï∞ÊçÆ‰∏ä‰º†ÔºåÈÄöÂ∏∏Êù•ËØ¥Á¨¨‰∏ÄÊ≠•ÊòØÈúÄË¶ÅÂà§Êñ≠‰∏ä‰º†Ê∂àÊÅØËæìÂÖ•‰ªÄ‰πà‰∏öÂä°Á±ªÂûã„ÄÇ</p>
<p>Âú®ËÅäÂ§©Âú∫ÊôØ‰∏≠ÔºåÊúâÂèØËÉΩ‰∏ä‰º†ÁöÑÊòØÊñáÊú¨„ÄÅÂõæÁâá„ÄÅËßÜÈ¢ëÁ≠âÂÜÖÂÆπ„ÄÇ</p>
<p>ÊâÄ‰ª•Êàë‰ª¨ÂæóËøõË°åÂå∫ÂàÜÔºåÊù•ÂÅö‰∏çÂêåÁöÑÂ§ÑÁêÜÔºõËøôÂ∞±ÂíåÂÆ¢Êà∑Á´ØÂçèÂïÜÁöÑÂçèËÆÆÊúâÂÖ≥‰∫Ü„ÄÇ</p>
<ul>
<li>ÂèØ‰ª•Âà©Áî®Ê∂àÊÅØÂ§¥‰∏≠ÁöÑÊüê‰∏™Â≠óÊÆµËøõË°åÂå∫ÂàÜ„ÄÇ</li>
<li>Êõ¥ÁÆÄÂçïÁöÑÂ∞±ÊòØ‰∏Ä‰∏™ <code>JSON</code> Ê∂àÊÅØÔºåÊãøÂá∫‰∏Ä‰∏™Â≠óÊÆµÁî®‰∫éÂå∫ÂàÜ‰∏çÂêåÊ∂àÊÅØ„ÄÇ</li>
</ul>
<p>‰∏çÁÆ°ÊòØÂì™ÁßçÂè™ÊúâÂèØ‰ª•Âå∫ÂàÜÂá∫Êù•Âç≥ÂèØ„ÄÇ</p>
<h3 id="Ê∂àÊÅØËß£Êûê‰∏é‰∏öÂä°Ëß£ËÄ¶"><a href="#Ê∂àÊÅØËß£Êûê‰∏é‰∏öÂä°Ëß£ËÄ¶" class="headerlink" title="Ê∂àÊÅØËß£Êûê‰∏é‰∏öÂä°Ëß£ËÄ¶"></a>Ê∂àÊÅØËß£Êûê‰∏é‰∏öÂä°Ëß£ËÄ¶</h3><p>Ê∂àÊÅØÂèØ‰ª•Ëß£Êûê‰πãÂêé‰æøÊòØÂ§ÑÁêÜ‰∏öÂä°ÔºåÊØîÂ¶ÇÂèØ‰ª•ÊòØÂÜôÂÖ•Êï∞ÊçÆÂ∫ì„ÄÅË∞ÉÁî®ÂÖ∂‰ªñÊé•Âè£Á≠â„ÄÇ</p>
<p>Êàë‰ª¨ÈÉΩÁü•ÈÅìÂú® Netty ‰∏≠Â§ÑÁêÜÊ∂àÊÅØ‰∏ÄËà¨ÊòØÂú® <code>channelRead()</code> ÊñπÊ≥ï‰∏≠„ÄÇ</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d12e1b5d7.jpg" srcset="/img/loading.gif" lazyload></p>
<p>Âú®ËøôÈáåÂèØ‰ª•Ëß£ÊûêÊ∂àÊÅØÔºåÂå∫ÂàÜÁ±ªÂûã„ÄÇ</p>
<p>‰ΩÜÂ¶ÇÊûúÊàë‰ª¨ÁöÑ‰∏öÂä°ÈÄªËæë‰πüÂÜôÂú®ÈáåÈù¢ÔºåÈÇ£ËøôÈáåÁöÑÂÜÖÂÆπÂ∞ÜÊòØÂ∑®Â§öÊó†ÊØî„ÄÇ</p>
<p>ÁîöËá≥Êàë‰ª¨ÂàÜ‰∏∫Â•ΩÂá†‰∏™ÂºÄÂèëÊù•Â§ÑÁêÜ‰∏çÂêåÁöÑ‰∏öÂä°ÔºåËøôÊ†∑Â∞Ü‰ºöÂá∫Áé∞ËÆ∏Â§öÂÜ≤Á™Å„ÄÅÈöæ‰ª•Áª¥Êä§Á≠âÈóÆÈ¢ò„ÄÇ</p>
<p>ÊâÄ‰ª•ÈùûÂ∏∏ÊúâÂøÖË¶ÅÂ∞ÜÊ∂àÊÅØËß£Êûê‰∏é‰∏öÂä°Â§ÑÁêÜÂÆåÂÖ®ÂàÜÁ¶ªÂºÄÊù•„ÄÇ</p>
<blockquote>
<p>ËøôÊó∂Èù¢ÂêëÊé•Âè£ÁºñÁ®ãÂ∞±ÂèëÊå•‰ΩúÁî®‰∫Ü„ÄÇ</p>
</blockquote>
<p>ËøôÈáåÁöÑÊ†∏ÂøÉ‰ª£Á†ÅÂíå <a href="https://crossoverjie.top/2018/09/03/wheel/cicada1/#%E9%85%8D%E7%BD%AE%E4%B8%9A%E5%8A%A1-Action">„ÄåÈÄ†‰∏™ËΩÆÂ≠ê„Äç‚Äî‚Äîcicada(ËΩªÈáèÁ∫ß WEB Ê°ÜÊû∂)</a> ÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ</p>
<p>ÈÉΩÊòØÂÖàÂÆö‰πâ‰∏Ä‰∏™Êé•Âè£Áî®‰∫éÂ§ÑÁêÜ‰∏öÂä°ÈÄªËæëÔºåÁÑ∂ÂêéÂú®Ëß£ÊûêÊ∂àÊÅØ‰πãÂêéÈÄöËøáÂèçÂ∞ÑÂàõÂª∫ÂÖ∑‰ΩìÁöÑÂØπË±°ÊâßË°åÂÖ∂‰∏≠ÁöÑ<code>Â§ÑÁêÜÂáΩÊï∞</code>Âç≥ÂèØ„ÄÇ</p>
<p>ËøôÊ†∑‰∏çÂêåÁöÑ‰∏öÂä°„ÄÅ‰∏çÂêåÁöÑÂºÄÂèë‰∫∫ÂëòÂè™ÈúÄË¶ÅÂÆûÁé∞Ëøô‰∏™Êé•Âè£ÂêåÊó∂ÂÆûÁé∞Ëá™Â∑±ÁöÑ‰∏öÂä°ÈÄªËæëÂç≥ÂèØ„ÄÇ</p>
<p>‰º™‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d12ecbb45.jpg" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d1350fb4b.jpg" srcset="/img/loading.gif" lazyload></p>
<p>ÊÉ≥Ë¶Å‰∫ÜËß£ cicada ÁöÑÂÖ∑‰ΩìÂÆûÁé∞ËØ∑ÁÇπÂáªËøôÈáåÔºö</p>
<p><a target="_blank" rel="noopener" href="https://github.com/TogetherOS/cicada">https://github.com/TogetherOS/cicada</a></p>
<p>‰∏äË°åËøòÊúâ‰∏ÄÁÇπÈúÄË¶ÅÊ≥®ÊÑèÔºõÁî±‰∫éÊòØÂü∫‰∫éÈïøËøûÊé•ÔºåÊâÄ‰ª•ÂÆ¢Êà∑Á´ØÈúÄË¶ÅÂÆöÊúüÂèëÈÄÅÂøÉË∑≥ÂåÖÁî®‰∫éÁª¥Êä§Êú¨Ê¨°ËøûÊé•„ÄÇÂêåÊó∂ÊúçÂä°Á´Ø‰πü‰ºöÊúâÁõ∏Â∫îÁöÑÊ£ÄÊü•ÔºåN ‰∏™Êó∂Èó¥Èó¥ÈöîÊ≤°ÊúâÊî∂Âà∞Ê∂àÊÅØ‰πãÂêéÂ∞Ü‰ºö‰∏ªÂä®Êñ≠ÂºÄËøûÊé•ËäÇÁúÅËµÑÊ∫ê„ÄÇ</p>
<p>ËøôÁÇπ‰ΩøÁî®‰∏Ä‰∏™ <code>IdleStateHandler</code> Â∞±ÂèØÂÆûÁé∞ÔºåÊõ¥Â§öÂÜÖÂÆπÂèØ‰ª•Êü•Áúã <a target="_blank" rel="noopener" href="http://t.cn/EPcNHFZ">Netty(‰∏Ä) SpringBoot Êï¥ÂêàÈïøËøûÊé•ÂøÉË∑≥Êú∫Âà∂</a>„ÄÇ</p>
<h2 id="Ê∂àÊÅØ‰∏ãË°å"><a href="#Ê∂àÊÅØ‰∏ãË°å" class="headerlink" title="Ê∂àÊÅØ‰∏ãË°å"></a>Ê∂àÊÅØ‰∏ãË°å</h2><p>Êúâ‰∫Ü‰∏äË°åËá™ÁÑ∂‰πüÊúâ‰∏ãË°å„ÄÇÊØîÂ¶ÇÂú®ËÅäÂ§©ÁöÑÂú∫ÊôØ‰∏≠ÔºåÊúâ‰∏§‰∏™ÂÆ¢Êà∑Á´ØËøû‰∏ä‰∫Ü <code>push-server</code>,‰ªñ‰ª¨Áõ¥Êé•ÈúÄË¶ÅÁÇπÂØπÁÇπÈÄö‰ø°„ÄÇ</p>
<p>ËøôÊó∂ÁöÑÊµÅÁ®ãÊòØÔºö</p>
<ul>
<li>A Â∞ÜÊ∂àÊÅØÂèëÈÄÅÁªôÊúçÂä°Âô®„ÄÇ</li>
<li>ÊúçÂä°Âô®Êî∂Âà∞Ê∂àÊÅØ‰πãÂêéÔºåÂæóÁü•Ê∂àÊÅØÊòØË¶ÅÂèëÈÄÅÁªô BÔºåÈúÄË¶ÅÂú®ÂÜÖÂ≠ò‰∏≠ÊâæÂà∞ B ÁöÑ Channel„ÄÇ</li>
<li>ÈÄöËøá B ÁöÑ Channel Â∞Ü A ÁöÑÊ∂àÊÅØËΩ¨Âèë‰∏ãÂéª„ÄÇ</li>
</ul>
<p>ËøôÂ∞±ÊòØ‰∏Ä‰∏™‰∏ãË°åÁöÑÊµÅÁ®ã„ÄÇ</p>
<p>ÁîöËá≥ÁÆ°ÁêÜÂëòÈúÄË¶ÅÁªôÊâÄÊúâÂú®Á∫øÁî®Êà∑ÂèëÈÄÅÁ≥ªÁªüÈÄöÁü•‰πüÊòØÁ±ª‰ººÔºö</p>
<p>ÈÅçÂéÜ‰øùÂ≠òÈÄöÈÅìÂÖ≥Á≥ªÁöÑ MapÔºåÊå®‰∏™ÂèëÈÄÅÊ∂àÊÅØÂç≥ÂèØ„ÄÇËøô‰πüÊòØ‰πãÂâçÈúÄË¶ÅÂ≠òÊîæÂà∞ Map ‰∏≠ÁöÑ‰∏ªË¶ÅÂéüÂõ†„ÄÇ</p>
<p>‰º™‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d1365b83e.jpg" srcset="/img/loading.gif" lazyload></p>
<p>ÂÖ∑‰ΩìÂèØ‰ª•ÂèÇËÄÉÔºö</p>
<p><a target="_blank" rel="noopener" href="https://github.com/crossoverJie/netty-action/">https://github.com/crossoverJie/netty-action/</a></p>
<h1 id="ÂàÜÂ∏ÉÂºèÊñπÊ°à"><a href="#ÂàÜÂ∏ÉÂºèÊñπÊ°à" class="headerlink" title="ÂàÜÂ∏ÉÂºèÊñπÊ°à"></a>ÂàÜÂ∏ÉÂºèÊñπÊ°à</h1><p>ÂçïÊú∫ÁâàÁöÑÂÆûÁé∞‰∫ÜÔºåÁé∞Âú®ÁùÄÈáçËÆ≤ËÆ≤Â¶Ç‰ΩïÂÆûÁé∞Áôæ‰∏áËøûÊé•„ÄÇ</p>
<p>Áôæ‰∏áËøûÊé•ÂÖ∂ÂÆûÂè™ÊòØ‰∏Ä‰∏™ÂΩ¢ÂÆπËØçÔºåÊõ¥Â§öÁöÑÊòØÊÉ≥Ë°®ËææÂ¶Ç‰ΩïÊù•ÂÆûÁé∞‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÊñπÊ°àÔºåÂèØ‰ª•ÁÅµÊ¥ªÁöÑÊ∞¥Âπ≥ÊãìÂ±ï‰ªéËÄåËÉΩÊîØÊåÅÊõ¥Â§öÁöÑËøûÊé•„ÄÇ</p>
<p>ÂÜçÂÅöËøô‰∏™‰∫ãÂâçÈ¶ñÂÖàÂæóÊêûÊ∏ÖÊ•öÊàë‰ª¨ÂçïÊú∫ÁâàÁöÑËÉΩÊîØÊåÅÂ§öÂ∞ëËøûÊé•„ÄÇÂΩ±ÂìçËøô‰∏™ÁöÑÂõ†Á¥†Â∞±ÊØîËæÉÂ§ö‰∫Ü„ÄÇ</p>
<ul>
<li>ÊúçÂä°Âô®Ëá™Ë∫´ÈÖçÁΩÆ„ÄÇÂÜÖÂ≠ò„ÄÅCPU„ÄÅÁΩëÂç°„ÄÅLinux ÊîØÊåÅÁöÑÊúÄÂ§ßÊñá‰ª∂ÊâìÂºÄÊï∞Á≠â„ÄÇ</li>
<li>Â∫îÁî®Ëá™Ë∫´ÈÖçÁΩÆÔºåÂõ†‰∏∫ Netty Êú¨Ë∫´ÈúÄË¶Å‰æùËµñ‰∫éÂ†ÜÂ§ñÂÜÖÂ≠òÔºå‰ΩÜÊòØ JVM Êú¨Ë∫´‰πüÊòØÈúÄË¶ÅÂç†Áî®‰∏ÄÈÉ®ÂàÜÂÜÖÂ≠òÁöÑÔºåÊØîÂ¶ÇÂ≠òÊîæÈÄöÈÅìÂÖ≥Á≥ªÁöÑÂ§ß <code>Map</code>„ÄÇËøôÁÇπÈúÄË¶ÅÁªìÂêàËá™Ë∫´ÊÉÖÂÜµËøõË°åË∞ÉÊï¥„ÄÇ</li>
</ul>
<p>ÁªìÂêà‰ª•‰∏äÁöÑÊÉÖÂÜµÂèØ‰ª•ÊµãËØïÂá∫Âçï‰∏™ËäÇÁÇπËÉΩÊîØÊåÅÁöÑÊúÄÂ§ßËøûÊé•Êï∞„ÄÇ</p>
<p>ÂçïÊú∫Êó†ËÆ∫ÊÄé‰πà‰ºòÂåñÈÉΩÊòØÊúâ‰∏äÈôêÁöÑÔºåËøô‰πüÊòØÂàÜÂ∏ÉÂºè‰∏ªË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<h2 id="Êû∂ÊûÑ‰ªãÁªç"><a href="#Êû∂ÊûÑ‰ªãÁªç" class="headerlink" title="Êû∂ÊûÑ‰ªãÁªç"></a>Êû∂ÊûÑ‰ªãÁªç</h2><p>Âú®Â∞ÜÂÖ∑‰ΩìÂÆûÁé∞‰πãÂâçÈ¶ñÂÖàÂæóËÆ≤ËÆ≤‰∏äÊñáË¥¥Âá∫ÁöÑÊï¥‰ΩìÊû∂ÊûÑÂõæ„ÄÇ</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d1370be06.jpg" srcset="/img/loading.gif" lazyload></p>
<p>ÂÖà‰ªéÂ∑¶ËæπÂºÄÂßã„ÄÇ</p>
<p>‰∏äÊñáÊèêÂà∞ÁöÑ <code>Ê≥®ÂÜåÈâ¥ÊùÉ</code> Ê®°Âùó‰πüÊòØÈõÜÁæ§ÈÉ®ÁΩ≤ÁöÑÔºåÈÄöËøáÂâçÁΩÆÁöÑ Nginx ËøõË°åË¥üËΩΩ„ÄÇ‰πãÂâç‰πüÊèêËøá‰∫ÜÂÆÉ‰∏ªË¶ÅÁöÑÁõÆÁöÑÊòØÊù•ÂÅöÈâ¥ÊùÉÂπ∂ËøîÂõû‰∏Ä‰∏™ token ÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p>‰ΩÜÊòØ <code>push-server</code> ÈõÜÁæ§‰πãÂêéÂÆÉÂèàÂ§ö‰∫Ü‰∏Ä‰∏™‰ΩúÁî®„ÄÇÈÇ£Â∞±ÊòØÂæóËøîÂõû‰∏ÄÂè∞ÂèØ‰æõÂΩìÂâçÂÆ¢Êà∑Á´Ø‰ΩøÁî®ÁöÑ <code>push-server</code>„ÄÇ</p>
<p>Âè≥‰æßÁöÑ <code>Âπ≥Âè∞</code> ‰∏ÄËà¨ÊåáÁÆ°ÁêÜÂπ≥Âè∞ÔºåÂÆÉÂèØ‰ª•Êü•ÁúãÂΩìÂâçÁöÑÂÆûÊó∂Âú®Á∫øÊï∞„ÄÅÁªôÊåáÂÆöÂÆ¢Êà∑Á´ØÊé®ÈÄÅÊ∂àÊÅØÁ≠â„ÄÇ</p>
<p>Êé®ÈÄÅÊ∂àÊÅØÂàôÈúÄË¶ÅÁªèËøá‰∏Ä‰∏™Êé®ÈÄÅË∑ØÁî±Ôºà<code>push-server</code>ÔºâÊâæÂà∞ÁúüÊ≠£ÁöÑÊé®ÈÄÅËäÇÁÇπ„ÄÇ</p>
<p>ÂÖ∂‰ΩôÁöÑ‰∏≠Èó¥‰ª∂Â¶ÇÔºöRedis„ÄÅZookeeper„ÄÅKafka„ÄÅMySQL ÈÉΩÊòØ‰∏∫‰∫ÜËøô‰∫õÂäüËÉΩÊâÄÂáÜÂ§áÁöÑÔºåÂÖ∑‰ΩìÁúã‰∏ãÈù¢ÁöÑÂÆûÁé∞„ÄÇ</p>
<h2 id="Ê≥®ÂÜåÂèëÁé∞"><a href="#Ê≥®ÂÜåÂèëÁé∞" class="headerlink" title="Ê≥®ÂÜåÂèëÁé∞"></a>Ê≥®ÂÜåÂèëÁé∞</h2><p>È¶ñÂÖàÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢òÂàôÊòØ <code>Ê≥®ÂÜåÂèëÁé∞</code>Ôºå<code>push-server</code> Âèò‰∏∫Â§öÂè∞‰πãÂêéÂ¶Ç‰ΩïÁªôÂÆ¢Êà∑Á´ØÈÄâÊã©‰∏ÄÂè∞ÂèØÁî®ÁöÑËäÇÁÇπÊòØÁ¨¨‰∏Ä‰∏™ÈúÄË¶ÅËß£ÂÜ≥ÁöÑ„ÄÇ</p>
<p>ËøôÂùóÁöÑÂÜÖÂÆπÂÖ∂ÂÆûÂ∑≤ÁªèÂú® <a href="https://crossoverjie.top/2018/08/27/distributed/distributed-discovery-zk/">ÂàÜÂ∏ÉÂºè(‰∏Ä) ÊêûÂÆöÊúçÂä°Ê≥®ÂÜå‰∏éÂèëÁé∞</a> ‰∏≠ËØ¶ÁªÜËÆ≤Ëøá‰∫Ü„ÄÇ</p>
<p>ÊâÄÊúâÁöÑ <code>push-server</code> Âú®ÂêØÂä®Êó∂ÂÄôÈúÄË¶ÅÂ∞ÜËá™Ë∫´ÁöÑ‰ø°ÊÅØÊ≥®ÂÜåÂà∞ Zookeeper ‰∏≠„ÄÇ</p>
<p><code>Ê≥®ÂÜåÈâ¥ÊùÉ</code> Ê®°Âùó‰ºöËÆ¢ÈòÖ Zookeeper ‰∏≠ÁöÑËäÇÁÇπÔºå‰ªéËÄåÂèØ‰ª•Ëé∑ÂèñÊúÄÊñ∞ÁöÑÊúçÂä°ÂàóË°®„ÄÇÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d1380b0c9.jpg" srcset="/img/loading.gif" lazyload></p>
<p>‰ª•‰∏ãÊòØ‰∏Ä‰∫õ‰º™‰ª£Á†ÅÔºö</p>
<p>Â∫îÁî®ÂêØÂä®Ê≥®ÂÜå Zookeeper„ÄÇ</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d138d15b4.jpg" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d139d90f4.jpg" srcset="/img/loading.gif" lazyload></p>
<p>ÂØπ‰∫é<code>Ê≥®ÂÜåÈâ¥ÊùÉ</code>Ê®°ÂùóÊù•ËØ¥Âè™ÈúÄË¶ÅËÆ¢ÈòÖËøô‰∏™ Zookeeper ËäÇÁÇπÔºö</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d14032c0d.jpg" srcset="/img/loading.gif" lazyload></p>
<h3 id="Ë∑ØÁî±Á≠ñÁï•"><a href="#Ë∑ØÁî±Á≠ñÁï•" class="headerlink" title="Ë∑ØÁî±Á≠ñÁï•"></a>Ë∑ØÁî±Á≠ñÁï•</h3><p>Êó¢ÁÑ∂ËÉΩËé∑ÂèñÂà∞ÊâÄÊúâÁöÑÊúçÂä°ÂàóË°®ÔºåÈÇ£Â¶Ç‰ΩïÈÄâÊã©‰∏ÄÂè∞ÂàöÂ•ΩÂêàÈÄÇÁöÑ <code>push-server</code> ÁªôÂÆ¢Êà∑Á´Ø‰ΩøÁî®Âë¢Ôºü</p>
<p>Ëøô‰∏™ËøáÁ®ãÈáçÁÇπË¶ÅËÄÉËôë‰ª•‰∏ãÂá†ÁÇπÔºö</p>
<ul>
<li>Â∞ΩÈáè‰øùËØÅÂêÑ‰∏™ËäÇÁÇπÁöÑËøûÊé•ÂùáÂåÄ„ÄÇ</li>
<li>Â¢ûÂà†ËäÇÁÇπÊòØÂê¶Ë¶ÅÂÅö Rebalance„ÄÇ</li>
</ul>
<p>È¶ñÂÖà‰øùËØÅÂùáË°°Êúâ‰ª•‰∏ãÂá†ÁßçÁÆóÊ≥ïÔºö</p>
<ul>
<li>ËΩÆËØ¢„ÄÇÊå®‰∏™Â∞ÜÂêÑ‰∏™ËäÇÁÇπÂàÜÈÖçÁªôÂÆ¢Êà∑Á´Ø„ÄÇ‰ΩÜ‰ºöÂá∫Áé∞Êñ∞Â¢ûËäÇÁÇπÂàÜÈÖç‰∏çÂùáÂåÄÁöÑÊÉÖÂÜµ„ÄÇ</li>
<li>Hash ÂèñÊ®°ÁöÑÊñπÂºè„ÄÇÁ±ª‰ºº‰∫é HashMapÔºå‰ΩÜ‰πü‰ºöÂá∫Áé∞ËΩÆËØ¢ÁöÑÈóÆÈ¢ò„ÄÇÂΩìÁÑ∂‰πüÂèØ‰ª•ÂÉè HashMap ÈÇ£Ê†∑ÂÅö‰∏ÄÊ¨° RebalanceÔºåËÆ©ÊâÄÊúâÁöÑÂÆ¢Êà∑Á´ØÈáçÊñ∞ËøûÊé•„ÄÇ‰∏çËøáËøôÊ†∑‰ºöÂØºËá¥ÊâÄÊúâÁöÑËøûÊé•Âá∫Áé∞‰∏≠Êñ≠ÈáçËøûÔºå‰ª£‰ª∑ÊúâÁÇπÂ§ß„ÄÇ</li>
<li>Áî±‰∫é Hash ÂèñÊ®°ÊñπÂºèÁöÑÈóÆÈ¢òÂ∏¶Êù•‰∫Ü<a href="https://crossoverjie.top/%2F2018%2F01%2F08%2FConsistent-Hash%2F"><code>‰∏ÄËá¥ÊÄß Hash</code>ÁÆóÊ≥ï</a>Ôºå‰ΩÜ‰æùÁÑ∂‰ºöÊúâ‰∏ÄÈÉ®ÂàÜÁöÑÂÆ¢Êà∑Á´ØÈúÄË¶Å Rebalance„ÄÇ</li>
<li>ÊùÉÈáç„ÄÇÂèØ‰ª•ÊâãÂä®Ë∞ÉÊï¥ÂêÑ‰∏™ËäÇÁÇπÁöÑË¥üËΩΩÊÉÖÂÜµÔºåÁîöËá≥ÂèØ‰ª•ÂÅöÊàêËá™Âä®ÁöÑÔºåÂü∫‰∫éÁõëÊéßÂΩìÊüê‰∫õËäÇÁÇπË¥üËΩΩËæÉÈ´òÂ∞±Ëá™Âä®Ë∞É‰ΩéÊùÉÈáçÔºåË¥üËΩΩËæÉ‰ΩéÁöÑÂèØ‰ª•ÊèêÈ´òÊùÉÈáç„ÄÇ</li>
</ul>
<p>ËøòÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÊòØÔºö</p>
<blockquote>
<p>ÂΩìÊàë‰ª¨Âú®ÈáçÂêØÈÉ®ÂàÜÂ∫îÁî®ËøõË°åÂçáÁ∫ßÊó∂ÔºåÂú®ËØ•ËäÇÁÇπ‰∏äÁöÑÂÆ¢Êà∑Á´ØÊÄé‰πàÂ§ÑÁêÜÔºü</p>
</blockquote>
<p>Áî±‰∫éÊàë‰ª¨ÊúâÂøÉË∑≥Êú∫Âà∂ÔºåÂΩìÂøÉË∑≥‰∏çÈÄö‰πãÂêéÂ∞±ÂèØ‰ª•ËÆ§‰∏∫ËØ•ËäÇÁÇπÂá∫Áé∞ÈóÆÈ¢ò‰∫Ü„ÄÇÈÇ£Â∞±ÂæóÈáçÊñ∞ËØ∑Ê±Ç<code>Ê≥®ÂÜåÈâ¥ÊùÉ</code>Ê®°ÂùóËé∑Âèñ‰∏Ä‰∏™ÂèØÁî®ÁöÑËäÇÁÇπ„ÄÇÂú®Âº±ÁΩëÊÉÖÂÜµ‰∏ãÂêåÊ†∑ÈÄÇÁî®„ÄÇ</p>
<p>Â¶ÇÊûúËøôÊó∂ÂÆ¢Êà∑Á´ØÊ≠£Âú®ÂèëÈÄÅÊ∂àÊÅØÔºåÂàôÈúÄË¶ÅÂ∞ÜÊ∂àÊÅØ‰øùÂ≠òÂà∞Êú¨Âú∞Á≠âÂæÖËé∑ÂèñÂà∞Êñ∞ÁöÑËäÇÁÇπ‰πãÂêéÂÜçÊ¨°ÂèëÈÄÅ„ÄÇ</p>
<h2 id="ÊúâÁä∂ÊÄÅËøûÊé•"><a href="#ÊúâÁä∂ÊÄÅËøûÊé•" class="headerlink" title="ÊúâÁä∂ÊÄÅËøûÊé•"></a>ÊúâÁä∂ÊÄÅËøûÊé•</h2><p>Âú®ËøôÊ†∑ÁöÑÂú∫ÊôØ‰∏≠‰∏çÂÉèÊòØ HTTP ÈÇ£Ê†∑ÊòØÊó†Áä∂ÊÄÅÁöÑÔºåÊàë‰ª¨ÂæóÊòéÁ°ÆÁöÑÁü•ÈÅìÂêÑ‰∏™ÂÆ¢Êà∑Á´ØÂíåËøûÊé•ÁöÑÂÖ≥Á≥ª„ÄÇ</p>
<p>Âú®‰∏äÊñáÁöÑÂçïÊú∫Áâà‰∏≠Êàë‰ª¨Â∞ÜËøô‰∏™ÂÖ≥Á≥ª‰øùÂ≠òÂà∞Êú¨Âú∞ÁöÑÁºìÂ≠ò‰∏≠Ôºå‰ΩÜÂú®ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏≠ÊòæÁÑ∂Ë°å‰∏çÈÄö‰∫Ü„ÄÇ</p>
<p>ÊØîÂ¶ÇÂú®Âπ≥Âè∞ÂêëÂÆ¢Êà∑Á´ØÊé®ÈÄÅÊ∂àÊÅØÁöÑÊó∂ÂÄôÔºåÂÆÉÂæóÈ¶ñÂÖàÁü•ÈÅìËøô‰∏™ÂÆ¢Êà∑Á´ØÁöÑÈÄöÈÅì‰øùÂ≠òÂú®Âì™Âè∞ËäÇÁÇπ‰∏ä„ÄÇ</p>
<p>ÂÄüÂä©Êàë‰ª¨‰ª•ÂâçÁöÑÁªèÈ™åÔºåËøôÊ†∑ÁöÑÈóÆÈ¢òËá™ÁÑ∂ÂæóÂºïÂÖ•‰∏Ä‰∏™Á¨¨‰∏âÊñπ‰∏≠Èó¥‰ª∂Áî®Êù•Â≠òÊîæËøô‰∏™ÂÖ≥Á≥ª„ÄÇ</p>
<p>‰πüÂ∞±ÊòØÊû∂ÊûÑÂõæ‰∏≠ÁöÑÂ≠òÊîæ<code>Ë∑ØÁî±ÂÖ≥Á≥ªÁöÑ Redis</code>ÔºåÂú®ÂÆ¢Êà∑Á´ØÊé•ÂÖ• <code>push-server</code> Êó∂ÈúÄË¶ÅÂ∞ÜÂΩìÂâçÂÆ¢Êà∑Á´ØÂîØ‰∏ÄÊ†áËØÜÂíåÊúçÂä°ËäÇÁÇπÁöÑ <code>ip+port</code> Â≠òËøõ <code>Redis</code>„ÄÇ</p>
<p>ÂêåÊó∂Âú®ÂÆ¢Êà∑Á´Ø‰∏ãÁ∫øÊó∂ÂÄôÂæóÂú® Redis ‰∏≠Âà†ÊéâËøô‰∏™ËøûÊé•ÂÖ≥Á≥ª„ÄÇ</p>
<blockquote>
<p>ËøôÊ†∑Âú®ÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÂêÑ‰∏™ËäÇÁÇπÂÜÖÂ≠ò‰∏≠ÁöÑ map ÂÖ≥Á≥ªÂä†Ëµ∑Êù•Â∫îËØ•Ê≠£Â•ΩÁ≠â‰∫é Redis ‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ</p>
</blockquote>
<p>‰º™‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://i.loli.net/2019/05/08/5cd1d14187619.jpg" srcset="/img/loading.gif" lazyload></p>
<p>ËøôÈáåÂ≠òÊîæË∑ØÁî±ÂÖ≥Á≥ªÁöÑÊó∂ÂÄô‰ºöÊúâÂπ∂ÂèëÈóÆÈ¢òÔºåÊúÄÂ•ΩÊòØÊç¢‰∏∫‰∏Ä‰∏™ <code>lua</code> ËÑöÊú¨„ÄÇ</p>
<h2 id="Êé®ÈÄÅË∑ØÁî±"><a href="#Êé®ÈÄÅË∑ØÁî±" class="headerlink" title="Êé®ÈÄÅË∑ØÁî±"></a>Êé®ÈÄÅË∑ØÁî±</h2><p>ËÆæÊÉ≥ËøôÊ†∑‰∏Ä‰∏™Âú∫ÊôØÔºöÁÆ°ÁêÜÂëòÈúÄË¶ÅÁªôÊúÄËøëÊ≥®ÂÜåÁöÑÂÆ¢Êà∑Á´ØÊé®ÈÄÅ‰∏Ä‰∏™Á≥ªÁªüÊ∂àÊÅØ‰ºöÊÄé‰πàÂÅöÔºü</p>
<blockquote>
<p>ÁªìÂêàÊû∂ÊûÑÂõæ</p>
</blockquote>
<p>ÂÅáËÆæËøôÊâπÂÆ¢Êà∑Á´ØÊúâ 10W ‰∏™ÔºåÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜËøôÊâπÂè∑Á†ÅÈÄöËøá<code>Âπ≥Âè∞</code>‰∏ãÁöÑ <code>Nginx</code> ‰∏ãÂèëÂà∞‰∏Ä‰∏™Êé®ÈÄÅË∑ØÁî±‰∏≠„ÄÇ</p>
<p>‰∏∫‰∫ÜÊèêÈ´òÊïàÁéáÁîöËá≥ÂèØ‰ª•Â∞ÜËøôÊâπÂè∑Á†ÅÂÜçÊ¨°ÂàÜÊï£Âà∞ÊØè‰∏™ <code>push-route</code> ‰∏≠„ÄÇ</p>
<p>ÊãøÂà∞ÂÖ∑‰ΩìÂè∑Á†Å‰πãÂêéÂÜçÊ†πÊçÆÂè∑Á†ÅÁöÑÊï∞ÈáèÂêØÂä®Â§öÁ∫øÁ®ãÁöÑÊñπÂºèÂéª‰πãÂâçÁöÑË∑ØÁî± Redis ‰∏≠Ëé∑ÂèñÂÆ¢Êà∑Á´ØÊâÄÂØπÂ∫îÁöÑ <code>push-server</code>„ÄÇ</p>
<p>ÂÜçÈÄöËøá HTTP ÁöÑÊñπÂºèË∞ÉÁî® <code>push-server</code> ËøõË°åÁúüÊ≠£ÁöÑÊ∂àÊÅØ‰∏ãÂèëÔºàNetty ‰πüÂæàÂ•ΩÁöÑÊîØÊåÅ HTTP ÂçèËÆÆÔºâ„ÄÇ</p>
<p>Êé®ÈÄÅÊàêÂäü‰πãÂêéÈúÄË¶ÅÂ∞ÜÁªìÊûúÊõ¥Êñ∞Âà∞Êï∞ÊçÆÂ∫ì‰∏≠Ôºå‰∏çÂú®Á∫øÁöÑÂÆ¢Êà∑Á´ØÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°ÂÜçÊ¨°Êé®ÈÄÅÁ≠â„ÄÇ</p>
<h2 id="Ê∂àÊÅØÊµÅËΩ¨"><a href="#Ê∂àÊÅØÊµÅËΩ¨" class="headerlink" title="Ê∂àÊÅØÊµÅËΩ¨"></a>Ê∂àÊÅØÊµÅËΩ¨</h2><p>‰πüËÆ∏Êúâ‰∫õÂú∫ÊôØÂØπ‰∫éÂÆ¢Êà∑Á´Ø‰∏äË°åÁöÑÊ∂àÊÅØÈùûÂ∏∏ÁúãÈáçÔºåÈúÄË¶ÅÂÅöÊåÅ‰πÖÂåñÔºåÂπ∂‰∏îÊ∂àÊÅØÈáèÈùûÂ∏∏Â§ß„ÄÇ</p>
<p>Âú® <code>push-sever</code> ÂÅö‰∏öÂä°ÊòæÁÑ∂‰∏çÂêàÈÄÇÔºåËøôÊó∂ÂÆåÂÖ®ÂèØ‰ª•ÈÄâÊã© Kafka Êù•Ëß£ËÄ¶„ÄÇ</p>
<p>Â∞ÜÊâÄÊúâ‰∏äË°åÁöÑÊï∞ÊçÆÁõ¥Êé•ÂæÄ Kafka Èáå‰∏¢ÂêéÂ∞±‰∏çÁÆ°‰∫Ü„ÄÇ</p>
<p>ÂÜçÁî±Ê∂àË¥πÁ®ãÂ∫èÂ∞ÜÊï∞ÊçÆÂèñÂá∫ÂÜôÂÖ•Êï∞ÊçÆÂ∫ì‰∏≠Âç≥ÂèØ„ÄÇ</p>
<p>ÂÖ∂ÂÆûËøôÂùóÂÜÖÂÆπ‰πüÂæàÂÄºÂæóËÆ®ËÆ∫ÔºåÂèØ‰ª•ÂÖàÁúãËøôÁØá‰∫ÜËß£‰∏ãÔºö<a href="https://crossoverjie.top/2018/08/29/java-senior/OOM-Disruptor/">Âº∫Â¶Ç Disruptor ‰πüÂèëÁîüÂÜÖÂ≠òÊ∫¢Âá∫Ôºü</a></p>
<p>ÂêéÁª≠Ë∞àÂà∞ Kafka ÂÜçÂÅöËØ¶ÁªÜ‰ªãÁªç„ÄÇ</p>
<h1 id="ÂàÜÂ∏ÉÂºèÈóÆÈ¢ò"><a href="#ÂàÜÂ∏ÉÂºèÈóÆÈ¢ò" class="headerlink" title="ÂàÜÂ∏ÉÂºèÈóÆÈ¢ò"></a>ÂàÜÂ∏ÉÂºèÈóÆÈ¢ò</h1><p>ÂàÜÂ∏ÉÂºèËß£ÂÜ≥‰∫ÜÊÄßËÉΩÈóÆÈ¢ò‰ΩÜÂç¥Â∏¶Êù•‰∫ÜÂÖ∂‰ªñÈ∫ªÁÉ¶„ÄÇ</p>
<h2 id="Â∫îÁî®ÁõëÊéß"><a href="#Â∫îÁî®ÁõëÊéß" class="headerlink" title="Â∫îÁî®ÁõëÊéß"></a>Â∫îÁî®ÁõëÊéß</h2><p>ÊØîÂ¶ÇÂ¶Ç‰ΩïÁü•ÈÅìÁ∫ø‰∏äÂá†ÂçÅ‰∏™ <code>push-server</code> ËäÇÁÇπÁöÑÂÅ•Â∫∑Áä∂ÂÜµÔºü</p>
<p>ËøôÊó∂Â∞±ÂæóÁõëÊéßÁ≥ªÁªüÂèëÊå•‰ΩúÁî®‰∫ÜÔºåÊàë‰ª¨ÈúÄË¶ÅÁü•ÈÅìÂêÑ‰∏™ËäÇÁÇπÂΩìÂâçÁöÑÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ„ÄÅGC„ÄÇ</p>
<p>‰ª•ÂèäÊìç‰ΩúÁ≥ªÁªüÊú¨Ë∫´ÁöÑÂÜÖÂ≠ò‰ΩøÁî®ÔºåÊØïÁ´ü Netty Â§ßÈáè‰ΩøÁî®‰∫ÜÂ†ÜÂ§ñÂÜÖÂ≠ò„ÄÇ</p>
<p>ÂêåÊó∂ÈúÄË¶ÅÁõëÊéßÂêÑ‰∏™ËäÇÁÇπÂΩìÂâçÁöÑÂú®Á∫øÊï∞Ôºå‰ª•Âèä Redis ‰∏≠ÁöÑÂú®Á∫øÊï∞„ÄÇÁêÜËÆ∫‰∏äËøô‰∏§‰∏™Êï∞Â∫îËØ•ÊòØÁõ∏Á≠âÁöÑ„ÄÇ</p>
<p>ËøôÊ†∑‰πüÂèØ‰ª•Áü•ÈÅìÁ≥ªÁªüÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÂèØ‰ª•ÁÅµÊ¥ªÁöÑÁª¥Êä§Ëøô‰∫õËäÇÁÇπÊï∞Èáè„ÄÇ</p>
<h2 id="Êó•ÂøóÂ§ÑÁêÜ"><a href="#Êó•ÂøóÂ§ÑÁêÜ" class="headerlink" title="Êó•ÂøóÂ§ÑÁêÜ"></a>Êó•ÂøóÂ§ÑÁêÜ</h2><p>Êó•ÂøóËÆ∞ÂΩï‰πüÂèòÂæóÂºÇÂ∏∏ÈáçË¶Å‰∫ÜÔºåÊØîÂ¶ÇÂì™Â§©ÂèçÈ¶àÊúâ‰∏™ÂÆ¢Êà∑Á´Ø‰∏ÄÁõ¥Ëøû‰∏ç‰∏äÔºå‰Ω†ÂæóÁü•ÈÅìÈóÆÈ¢òÂá∫Âú®Âì™Èáå„ÄÇ</p>
<p>ÊúÄÂ•ΩÊòØÁªôÊØèÊ¨°ËØ∑Ê±ÇÈÉΩÂä†‰∏ä‰∏Ä‰∏™ traceID ËÆ∞ÂΩïÊó•ÂøóÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÄöËøáËøô‰∏™Êó•ÂøóÂú®ÂêÑ‰∏™ËäÇÁÇπ‰∏≠Êü•ÁúãÂà∞Â∫ïÊòØÂç°Âú®‰∫ÜÂì™Èáå„ÄÇ</p>
<p>‰ª•Âèä ELK Ëøô‰∫õÂ∑•ÂÖ∑ÈÉΩÂæóÁî®Ëµ∑Êù•ÊâçË°å„ÄÇ</p>
<h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><p>Êú¨Ê¨°ÊòØÁªìÂêàÊàëÊó•Â∏∏ÁªèÈ™åÂæóÂá∫ÁöÑÔºåÊúâ‰∫õÂùëÂèØËÉΩÂú®Â∑•‰Ωú‰∏≠Âπ∂Ê≤°ÊúâË∏©Âà∞ÔºåÊâÄÊúâËøò‰ºöÊúâ‰∏Ä‰∫õÈÅóÊºèÁöÑÂú∞Êñπ„ÄÇ</p>
<p>Â∞±ÁõÆÂâçÊù•ÁúãÊÉ≥ÂÅö‰∏Ä‰∏™Á®≥ÂÆöÁöÑÊé®ÈÄÅÁ≥ªÁªüÂÖ∂ÂÆûÊòØÊØîËæÉÈ∫ªÁÉ¶ÁöÑÔºåÂÖ∂‰∏≠Ê∂âÂèäÂà∞ÁöÑÁÇπÈùûÂ∏∏Â§öÔºåÂè™ÊúâÁúüÊ≠£ÂÅöËøá‰πãÂêéÊâç‰ºöÁü•ÈÅì„ÄÇ</p>
<p>ÁúãÂÆå‰πãÂêéËßâÂæóÊúâÂ∏ÆÂä©ÁöÑËøòËØ∑‰∏çÂêùËΩ¨ÂèëÂàÜ‰∫´„ÄÇ</p>
<p><strong>Ê¨¢ËøéÂÖ≥Ê≥®ÂÖ¨‰ºóÂè∑‰∏ÄËµ∑‰∫§ÊµÅÔºö</strong></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Netty/" class="category-chain-item">Netty</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Kafka/" class="print-no-link">#Kafka</a>
      
        <a href="/tags/Redis/" class="print-no-link">#Redis</a>
      
        <a href="/tags/Zookeeper/" class="print-no-link">#Zookeeper</a>
      
        <a href="/tags/%E6%8E%A8%E9%80%81/" class="print-no-link">#Êé®ÈÄÅ</a>
      
        <a href="/tags/%E8%B7%AF%E7%94%B1%E7%AD%96%E7%95%A5/" class="print-no-link">#Ë∑ØÁî±Á≠ñÁï•</a>
      
        <a href="/tags/%E6%B3%A8%E5%86%8C%E5%8F%91%E7%8E%B0/" class="print-no-link">#Ê≥®ÂÜåÂèëÁé∞</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ËÆæËÆ°‰∏Ä‰∏™Áôæ‰∏áÁ∫ßÁöÑÊ∂àÊÅØÊé®ÈÄÅÁ≥ªÁªü</div>
      <div>http://crossoverjie.top/2018/09/25/netty/million-sms-push/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>crossoverJie</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>September 25, 2018</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2018/10/09/wheel/cicada4/" title="„ÄåÈÄ†‰∏™ËΩÆÂ≠ê„Äç‚Äî‚Äîcicada ËÆæËÆ°ÂÖ®Â±Ä‰∏ä‰∏ãÊñá">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">„ÄåÈÄ†‰∏™ËΩÆÂ≠ê„Äç‚Äî‚Äîcicada ËÆæËÆ°ÂÖ®Â±Ä‰∏ä‰∏ãÊñá</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2018/09/14/wheel/cicada3/" title="„ÄåÈÄ†‰∏™ËΩÆÂ≠ê„Äç‚Äî‚Äîcicada ËÆæËÆ°‰∏Ä‰∏™ÈÖçÁΩÆÊ®°Âùó">
                        <span class="hidden-mobile">„ÄåÈÄ†‰∏™ËΩÆÂ≠ê„Äç‚Äî‚Äîcicada ËÆæËÆ°‰∏Ä‰∏™ÈÖçÁΩÆÊ®°Âùó</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script type="text/javascript">
        var disqus_config = function() {
          this.page.url = 'http://crossoverjie.top/2018/09/25/netty/million-sms-push/';
          this.page.identifier = '/2018/09/25/netty/million-sms-push/';
        };
        Fluid.utils.loadComments('#disqus_thread', function() {
          var d = document, s = d.createElement('script');
          s.src = '//' + 'crossoverjie' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        ¬© 2016 ‚Äì 2025 | ÊÄªËÆøÈóÆÈáè 
        <span id="busuanzi_value_site_pv"></span>
         Ê¨°
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        ÊÄªËÆøÂÆ¢Êï∞ 
        <span id="busuanzi_value_site_uv"></span>
         ‰∫∫
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ‰∏ªÈ¢òÁöÑÂêØÂä®È°πÔºåÂ∞ÜÂÆÉ‰øùÊåÅÂú®ÊúÄÂ∫ïÈÉ® -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
