<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>crossoverJie&#39;s Blog</title>
  
  <subtitle>baller</subtitle>
  <link href="http://crossoverjie.top/atom.xml" rel="self"/>
  
  <link href="http://crossoverjie.top/"/>
  <updated>2023-10-27T09:35:51.091Z</updated>
  <id>http://crossoverjie.top/</id>
  
  <author>
    <name>crossoverJie</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ä¸‰æœŸ</title>
    <link href="http://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/"/>
    <id>http://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/</id>
    <published>2023-10-27T09:28:25.000Z</published>
    <updated>2023-10-27T09:35:51.091Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/27/pLbBGguZfWicwUj.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/">20231022ï¼šç¬¬äºŒæœŸ</a><span id="more"></span></li></ul><h2 id="Understanding-The-Linux-TTY-Subsystem"><a href="#Understanding-The-Linux-TTY-Subsystem" class="headerlink" title="Understanding The Linux TTY Subsystem"></a>Understanding The Linux TTY Subsystem</h2><p>URL: <a href="https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/">https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/</a><br><img src="https://s2.loli.net/2023/10/25/bnzXueWDiyfLdc4.png"><br>æœ¬æ–‡è®²è§£äº† Linux TTY çš„å†å²æ•…äº‹å’Œæ¥æºã€‚</p><ol><li>TTY æ˜¯ teletype çš„ç®€å†™ï¼Œç”µä¼ æ‰“å°æœºï¼›æœ€æ—©æ˜¯åœ¨äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜å‘æŒ¥é‡è¦ä½œç”¨ã€‚</li><li>60 å¹´ä»£çš„è®¡ç®—æœºä½¿ç”¨äº†teletype ä½œä¸ºè¾“å…¥ç»ˆç«¯ã€‚</li><li>åç»­éšç€æŠ€æœ¯è¿›æ­¥ä½¿ç”¨äº†è½¯ä»¶æ¨¡æ‹Ÿæ›¿ä»£äº†ç‰©ç†çš„ç”µä¼ æ‰“å°æœºã€‚</li><li>TTY æ—©èµ·ä½äº Linux çš„å†…æ ¸ç©ºé—´ï¼Œå¯¼è‡´ç¼ºä¹çµæ´»æ€§ï¼Œåç»­ç§»åŠ¨åˆ°äº†ç”¨æˆ·ç©ºé—´ã€‚</li><li>ä¹‹ååˆå‡ºç°äº† shellï¼Œç”¨æˆ·ä½¿ç”¨ shell ç™»å½•ç³»ç»Ÿæ—¶ä¼šåˆ†é…ä¸€ä¸ª TTY ç»™ shellé•œåƒæ“ä½œã€‚</li><li>TTY ä½œä¸º shell çš„ç¡¬ä»¶è¿è¡Œç¯å¢ƒï¼Œæ­é…åœ¨ä¸€èµ·æä¾›äº†åŸºç¡€çš„ Linux æ“ä½œç¯å¢ƒã€‚</li></ol><h2 id="100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯"><a href="#100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯" class="headerlink" title="100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯"></a>100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯</h2><p>URL: <a href="https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/">https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/</a><br>æœ¬æ–‡åœ¨ä¹‹å‰ä»‹ç» TTY èƒŒæ™¯çŸ¥è¯†çš„å‰æä¸‹ï¼Œè®²è§£ä½¿ç”¨ 100 è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯çš„ Appã€‚<br>æœ€ç»ˆä½¿ç”¨æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/10/27/dUYHwo1nufDgli7.png"></p><ol><li>ç¬¬ä¸€æ­¥ä½¿ç”¨äº†  Go  çš„ä¸€ä¸ª GUI åº“ <code>fyne</code> æ¸²æŸ“äº†ä¸€ä¸ªæ™®é€šæ–‡æœ¬æ¡†</li><li>è®²è§£äº†ä¸€ä¸ªç»ˆç«¯å’Œå†…æ ¸é€šè®¯çš„æµç¨‹å›¾<br><img src="https://s2.loli.net/2023/10/27/DP8qJwjEBIcyMFQ.png" alt="image.png"></li><li>PTY master è·å–ç”¨æˆ·è¾“å…¥å‘é€ç»™ PTY slaverï¼Œslave ä¼šæ‰§è¡Œæœ€ç»ˆçš„ shellï¼Œå¹¶å°†æ‰§è¡Œç»“æœè¿”å›åˆ° PTY master</li><li>è¿™é‡Œä½¿ç”¨äº†  Go  çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“å®ç°äº† PTY çš„åŠŸèƒ½<br><img src="https://s2.loli.net/2023/10/27/1LmBXSg6hlNGDkq.png" alt="image.png"></li><li>ä½¿ç”¨ <code>fyne</code> è·å–é”®ç›˜äº‹ä»¶ï¼Œç¼“å­˜ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œç›´åˆ°æ£€æµ‹åˆ°è¾“å…¥äº†å›è½¦é”®ï¼Œæ­¤æ—¶å°†ç¼“å­˜å†…å®¹å‘å¾€ pty</li><li>ä¼˜åŒ–å“åº”ç»“æœï¼Œç›®å‰åªèƒ½è¾“å‡ºæœ€æ–°çš„ä¸€è¡Œå†…å®¹ï¼Œæ‰€ä»¥æ–°å¢ä¸€ä¸ªç¼“å†²åŒºå­˜æ”¾å†å²è¾“å‡ºã€‚<br><img src="https://s2.loli.net/2023/10/27/9fhpFxztEAXjdun.png" alt="image.png"><br>æœ€ç»ˆä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿç»ˆç«¯ä¾¿å®ç°äº†ï¼Œå½“ç„¶åŠŸèƒ½è¿˜å¾ˆç®€å•ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥åœ¨è¿™åŸºç¡€ä¸ŠæŒç»­ä¼˜åŒ–ã€‚</li></ol><h2 id="æ··æ²Œå·¥ç¨‹"><a href="#æ··æ²Œå·¥ç¨‹" class="headerlink" title="æ··æ²Œå·¥ç¨‹"></a>æ··æ²Œå·¥ç¨‹</h2><blockquote><p>æœ€è¿‘åœ¨å¤ç°ä¸€ä¸ªå¯èƒ½çš„ç½‘ç»œé—®é¢˜çš„æ—¶å€™ï¼Œæ¥è§¦åˆ°äº†æ··æ²Œå·¥ç¨‹ï¼Œä»¥ä¸‹æ˜¯æˆ‘å¯¹å®ƒçš„ä¸€äº›ç†è§£</p></blockquote><p>æ··æ²Œå·¥ç¨‹ï¼ˆChaos-Meshï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„æ··æ²Œå¹³å°ï¼Œ<code>æ··æ²Œ</code>è¿™è¯å¯èƒ½ä¸å¥½ç†è§£ï¼Œä¸è¿‡é€šè¿‡ä»–æ‰€æä¾›çš„åŠŸèƒ½å°±çŸ¥é“å…·ä½“æ˜¯å¹²ä»€ä¹ˆçš„äº†ã€‚</p><p>æ ¸å¿ƒåŠŸèƒ½æ˜¯æä¾›äº†ä¸€äº›åˆ—çš„æ•…éšœæ³¨å…¥ï¼Œæ¯”å¦‚ï¼š</p><ul><li>Pod æ•…éšœï¼šé‡å¯ã€OOMç­‰</li><li>ç½‘ç»œæ•…éšœï¼šå»¶è¿Ÿã€ä¸¢åŒ…ã€æ–­ç½‘</li><li>DNS æ•…éšœ</li><li>HTTP æ•…éšœ</li><li>ç”šè‡³è¿˜èƒ½æ¨¡æ‹Ÿ JVM æ•…éšœ<br><img src="https://s2.loli.net/2023/10/27/JcxZdUfARIPDXWh.png" alt="image.png"></li></ul><blockquote><p>è¿™æ˜¯å¯¹ä¸€ä¸ª Pod çš„ http è¯·æ±‚ 80 ç«¯å£è¿›è¡Œä¸­æ–­çš„é…ç½®ã€‚</p></blockquote><p>é€šè¿‡è¿™äº›åŠŸèƒ½å¯ä»¥çœ‹å‡ºå®ƒæ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿæ•…éšœå¹³å°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ƒçš„ç®¡ç†å°è¿›è¡Œä¸°å¯Œçš„æ•…éšœæ¨¡æ‹Ÿï¼Œå¯ä»¥åœ¨å¼€å‘æµ‹è¯•è¿‡ç¨‹ä¸­å¢å¼ºæˆ‘ä»¬ç³»ç»Ÿçš„å¥å£®æ€§ã€‚</p><h2 id="Hacking-Your-iTerm-Boost-your-command-line-productivity-byâ€¦-by-Chandan-Kumar-Better-Programming"><a href="#Hacking-Your-iTerm-Boost-your-command-line-productivity-byâ€¦-by-Chandan-Kumar-Better-Programming" class="headerlink" title="Hacking Your iTerm. Boost your command line productivity byâ€¦ | by Chandan Kumar | Better Programming"></a>Hacking Your iTerm. Boost your command line productivity byâ€¦ | by Chandan Kumar | Better Programming</h2><p>URL: <a href="https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf">https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf</a></p><blockquote><p>ä½œè€…åˆ†äº«äº†å®ƒä½¿ç”¨ç»ˆç«¯çš„ä¸€äº›æŠ€å·§å’Œå·¥å…·</p></blockquote><h3 id="iTerm"><a href="#iTerm" class="headerlink" title="iTerm"></a>iTerm</h3><p>æ¨èä½¿ç”¨ <code>iTerm</code> è¿™ä¸ªå°±ä¸å¤šè¯´äº†</p><h3 id="powerlevel10k"><a href="#powerlevel10k" class="headerlink" title="powerlevel10k"></a>powerlevel10k</h3><p><img src="https://s2.loli.net/2023/10/27/4OKyMHjQwRBT9Ui.png" alt="image.png"></p><p> powerlevel10k æ˜¯ä¸€ä¸ª zsh ä¸»é¢˜ï¼Œæä¾›äº†è®¸å¤šè‡ªå®šä¹‰çš„é€‰é¡¹ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯å®šåˆ¶ã€‚<br><a href="https://github.com/romkatv/powerlevel10k">https://github.com/romkatv/powerlevel10k</a></p><h3 id="Syntax-highlighting"><a href="#Syntax-highlighting" class="headerlink" title="Syntax highlighting"></a>Syntax highlighting</h3><p><img src="https://s2.loli.net/2023/10/27/4rzmkBG3OD1LvXP.png" alt="image.png"><br>è¯­æ³•é«˜äº®å¯ä»¥è®©è‡ªå·±çŸ¥é“è¾“å…¥æ˜¯å¦æ­£ç¡®<br><a href="https://github.com/zsh-users/zsh-syntax-highlighting">https://github.com/zsh-users/zsh-syntax-highlighting</a></p><h3 id="Auto-suggestion"><a href="#Auto-suggestion" class="headerlink" title="Auto-suggestion"></a>Auto-suggestion</h3><p>è‡ªåŠ¨æç¤ºæ’ä»¶ï¼Œå¯ä»¥ç±»ä¼¼äº IDE çš„æ–¹å¼ä½¿ç”¨å‘½ä»¤è¡Œï¼Œè¿™ä¸ªè¿˜è›®å¥½ç”¨çš„ã€‚<br><img src="https://miro.medium.com/v2/resize:fit:4800/0*HbzHqgfrcPT7VvUE.gif"><br><a href="https://github.com/zsh-users/zsh-autosuggestions">https://github.com/zsh-users/zsh-autosuggestions</a></p><h3 id="Autojump"><a href="#Autojump" class="headerlink" title="Autojump"></a>Autojump</h3><p><img src="https://s2.loli.net/2023/10/27/TKcgMWXSmBiD2kj.png" alt="image.png"><br>è‡ªåŠ¨è·³è½¬ï¼Œå¯ä»¥æ›´å¿«çš„è·³è½¬åˆ°æˆ‘ä»¬å°ä½¿ç”¨çš„ç›®å½•ï¼Œæé«˜æ•ˆç‡ã€‚<br><a href="https://github.com/wting/autojump">https://github.com/wting/autojump</a></p><h3 id="iTerm-çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®"><a href="#iTerm-çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®" class="headerlink" title="iTerm çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®"></a>iTerm çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®</h3><ul><li>æ–°çª—å£ â€”Â <code>âŒ˜</code>Â +Â <code>T</code></li><li>å…³é—­çª—å£ â€”Â <code>âŒ˜</code>Â +Â <code>W</code>Â </li><li>åˆ‡æ¢ Tab<code>âŒ˜</code>Â +Â <code>Number Key</code>Â â€” (Â <code>âŒ˜2</code>Â åˆ‡æ¢åˆ°ç¬¬äºŒä¸ª Tab)</li><li>å‚ç›´åˆ†å‰²çª—å£ (same profile) â€”Â <code>âŒ˜</code>Â +Â <code>D</code></li><li>æ°´å¹³åˆ†å‰²çª—å£(same profile) â€”Â <code>âŒ˜</code>Â +Â <code>Shift</code>Â +Â <code>D</code>Â </li><li>æ ¹æ®é¡ºåºåˆ‡æ¢çª—å£ â€”Â <code>âŒ˜</code>Â +Â <code>]</code>Â ,Â <code>âŒ˜</code>Â +Â <code>[</code></li><li>ä¸Šä¸€ä¸ª tab<code>âŒ˜</code>+Â <code>&lt;-</code>Â â€” </li><li>ä¸‹ä¸€ä¸ªçª—å£<code>âŒ˜</code>+Â <code>-&gt;</code></li><li>æœ€å¤§åŒ–çª—å£<code>âŒ˜</code>Â +Â <code>Shift</code>Â +Â <code>Enter</code></li></ul><h2 id="å½“æˆ‘ä»¬èŠ-Kubernetes-Operator-æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ-äº‘åŸç”Ÿ-å¾æ–°å¤-InfoQç²¾é€‰æ–‡ç« "><a href="#å½“æˆ‘ä»¬èŠ-Kubernetes-Operator-æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ-äº‘åŸç”Ÿ-å¾æ–°å¤-InfoQç²¾é€‰æ–‡ç« " class="headerlink" title="å½“æˆ‘ä»¬èŠ Kubernetes Operator æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ_äº‘åŸç”Ÿ_å¾æ–°å¤_InfoQç²¾é€‰æ–‡ç« "></a>å½“æˆ‘ä»¬èŠ Kubernetes Operator æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ_äº‘åŸç”Ÿ_å¾æ–°å¤_InfoQç²¾é€‰æ–‡ç« </h2><p>URL: <a href="https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR">https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR</a></p><blockquote><p>ä½œè€…è®²è§£äº† Dockerã€Helmã€Operatorã€kubernetes Controller ä¹‹é—´çš„å…³ç³»ä»¥åŠä¸€äº›æ ¸å¿ƒæ¦‚å¿µã€‚</p></blockquote><ol><li>Dockerçš„æ ¸å¿ƒä»·å€¼æ˜¯æä¾›äº†æ ‡å‡†åŒ–çš„äº¤ä»˜æµç¨‹ï¼Œç°åœ¨å‡ ä¹æ²¡äººå†äº¤ä»˜æºç äº†</li><li>Operator å’Œ Docker ç±»ä¼¼çš„æ˜¯æ ‡å‡†åŒ–äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„äº¤ä»˜æµç¨‹ã€‚</li><li>Helm ä¹Ÿå¯ä»¥åšåˆ†å¸ƒå¼ç³»ç»Ÿäº¤ä»˜ï¼Œä½†ä»–æ›´ä¾§é‡äºåè°ƒå¤šä¸ªèµ„æºç®¡ç†ï¼Œæ¯”å¦‚å¯ä»¥è®© A Pod å¯åŠ¨ä¹‹åå†å¯åŠ¨ B Podã€‚</li><li>ä½† Helm æ— æ³•æ„ŸçŸ¥æ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œæ—¶çŠ¶æ€ï¼Œè€Œ <code>Operator</code> åˆ™å¯ä»¥ï¼Œé€šè¿‡è¿™ä¸ªæ„ŸçŸ¥å¯ä»¥è‡ªåŠ¨å®ç°æ‰©å®¹ã€æ•…éšœæ¢å¤ã€å¼‚å¸¸å¤„ç†ç­‰å·¥ä½œï¼Œåœ¨å®ç°äº† Helm çš„è‡ªåŠ¨åŒ–çš„åŒæ—¶è¿˜å®ç°äº†æ™ºèƒ½åŒ–ã€‚</li><li><code>Operator</code> æ˜¯å¤„äºä¸€ä¸ªç¬¬ä¸‰æ–¹è§†è§’è§‚å¯Ÿæ•´ä¸ªç³»ç»Ÿï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ‹¿åˆ°å…¨å±€çš„ä¿¡æ¯ï¼Œä»è€Œæœ€ç»ˆè¾¾åˆ°å£°æ˜çŠ¶æ€çš„ä¸€ä¸ªç›®çš„ã€‚</li><li><code>Operator</code> å¯ä»¥å½“åšå¦ä¸€ç§ <code>Controller</code>ï¼Œå¯ä»¥ç†è§£ä¸ºç¬¬ä¸‰æ–¹çš„ <code>controller</code>ï¼Œä¸€èˆ¬æ˜¯è¿ç»´æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ã€‚</li><li><code>Operator</code> å¯ä»¥å°†ä»¥å¾€è¿ç»´çš„ç»éªŒæ²‰æ·€ä¸ºä»£ç ï¼Œæ›´åˆ©äºæ¨è¿› Devã€Ops åˆå¹¶ä¸º <code>DevOps</code>ã€‚</li></ol><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/">https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/</a></li><li><a href="https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/">https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/</a></li><li><a href="https://chaos-mesh.org/zh/docs/">https://chaos-mesh.org/zh/docs/</a></li><li><a href="https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf">https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf</a></li><li><a href="https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR">https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/27/pLbBGguZfWicwUj.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/&quot;&gt;20231022ï¼šç¬¬äºŒæœŸ&lt;/a&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬äºŒæœŸ</title>
    <link href="http://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/"/>
    <id>http://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/</id>
    <published>2023-10-22T08:22:13.000Z</published>
    <updated>2023-10-22T11:21:47.713Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/22/1nblhKQu6o4HMjk.png" alt="image.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li></ul><span id="more"></span><h2 id="Google-Software-Engineer-Interview-Experience-â€”-OfferğŸŒŸğŸŒŸğŸŒŸ"><a href="#Google-Software-Engineer-Interview-Experience-â€”-OfferğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Google Software Engineer Interview Experience â€” OfferğŸŒŸğŸŒŸğŸŒŸ"></a>Google Software Engineer Interview Experience â€” OfferğŸŒŸğŸŒŸğŸŒŸ</h2><blockquote><p>è°·æ­Œè½¯ä»¶å·¥ç¨‹å¸ˆçš„é¢è¯•ç»éªŒã€‚</p></blockquote><p>ä½œè€…èƒŒæ™¯ï¼š2020 å¹´æ¯•ä¸šäº MIT Puneï¼ˆå°åº¦åŸå¸‚ï¼‰ï¼Œå°†è¿‘ 3å¹´çš„å¼€å‘ç»éªŒ<br>åœ¨è¿™æ¬¡æ‹¿åˆ° Google offer ä¹‹å‰å‚ä¸è¿‡3ï½4 æ¬¡ Google é¢è¯•ï¼Œä¸Šä¸€æ¬¡æ˜¯2019 å¹´ã€‚<br>å› ä¸ºæœ‰ä¹‹å‰çš„é¢è¯•ç»éªŒï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡äº†ç”µè¯é¢è¯•ï¼Œç›´æ¥å‡†å¤‡ç°åœºé¢è¯•ã€‚</p><p>ä½œè€…èŠ±äº†ä¸‰å‘¨æ—¶é—´åšå‡†å¤‡ã€‚</p><h3 id="1st-Leetcode-Medium-Coding-45min"><a href="#1st-Leetcode-Medium-Coding-45min" class="headerlink" title="1st Leetcode Medium Coding(45min)"></a>1st Leetcode Medium Coding(45min)</h3><p>ä¸»é¢˜ï¼š</p><ul><li>æ·±åº¦ä¼˜å…ˆæŸ¥è¯¢</li><li>å¹¿åº¦ä¼˜å…ˆæŸ¥è¯¢</li><li>å“ˆå¸Œè¡¨ç›¸å…³ã€‚<br>ä¸é¢è¯•å®˜äº¤æµä½œè€…çš„æ–¹æ³•ï¼Œæœ€ç»ˆé¡ºåˆ©è¿‡äº†ç¬¬ä¸€è½®ã€‚</li></ul><h3 id="2nd-Leetcode-Medium-Coding-45min"><a href="#2nd-Leetcode-Medium-Coding-45min" class="headerlink" title="2nd Leetcode Medium Coding(45min)"></a>2nd Leetcode Medium Coding(45min)</h3><p>ä¸»é¢˜ï¼š</p><ul><li>æ»‘åŠ¨çª—å£</li><li>å“ˆå¸Œè¡¨</li><li>å­—ç¬¦ä¸²<br>ä½œè€…åˆšå¼€å§‹ç”¨äº†ä¸€ä¸ªæš´åŠ›è§£æ³•ï¼Œç»è¿‡æ€è€ƒåå¾—å‡ºä¸€ä¸ªæœ€ä¼˜è§£ã€‚<br>å…¶ä»–çš„é—®é¢˜éƒ½å¾—å‡ºäº†æ­£ç¡®çš„æ—¶é—´å¤æ‚åº¦ã€‚</li></ul><h3 id="3rd-Leetcode-Hard-Coding-45min"><a href="#3rd-Leetcode-Hard-Coding-45min" class="headerlink" title="3rd Leetcode Hard Coding(45min)"></a>3rd Leetcode Hard Coding(45min)</h3><p>ä¸»é¢˜ï¼š</p><ul><li>å¹¿åº¦ä¼˜å…ˆæŸ¥è¯¢</li><li>å †æ’åºï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰</li><li>çŸ©é˜µ</li><li>æ•°ç»„<br>è¿™è½®é¢è¯•æ¯”è¾ƒæœ‰éš¾åº¦ï¼Œåœ¨é¢è¯•å®˜çš„æé†’ä¸‹å®Œæˆäº†ã€‚</li></ul><h3 id="4th-è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®"><a href="#4th-è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®" class="headerlink" title="4th è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®"></a>4th è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®</h3><p>è¿™ä¸€è½®å°±æ˜¯ä¸€äº›è¡Œä¸ºé¢è¯•ï¼Œè®¨è®ºäº†ä¸€äº›è¿‡å»çš„ç»å†ï¼Œå’Œå‡è®¾çš„ä¸€äº›æƒ…å†µã€‚<br>ä½œè€…ä½¿ç”¨äº† STAR(Situation, Task, Action, Result) è¿›è¡Œäº†å›ç­”ï¼Œæ•´ä¸ªè¿‡ç¨‹æ¯”è¾ƒé¡ºåˆ©ã€‚</p><p>è¯„è®ºåŒºï¼š</p><ul><li>å¸Œæœ›å¯ä»¥åˆ†äº«ä¸‹è‡ªå·±å‡†å¤‡çš„èµ„æ–™</li><li>æ²¡æœ‰ç³»ç»Ÿè®¾è®¡é¢˜å—ï¼Ÿ</li></ul><blockquote><p>çœ‹æ¥å›½é™…ä¸€çº¿å¤§å‚å¯¹ç®—æ³•çš„è€ƒå¯Ÿå æ¯”ä¹Ÿæ˜¯éå¸¸é«˜çš„ï¼Œä½†ä½œè€…å¯èƒ½ä¹Ÿæœ‰ä¸€äº›è€ƒè™‘æ²¡æœ‰æ”¾å‡ºé¢è¯•çš„å…·ä½“é¢˜ç›®ã€‚</p></blockquote><h2 id="From-JetBrains-to-Vim-A-modern-Vim-configuration-and-plugin-set-by-devsjc-Sep-2023-MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#From-JetBrains-to-Vim-A-modern-Vim-configuration-and-plugin-set-by-devsjc-Sep-2023-MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="From JetBrains to Vim: A modern Vim configuration and plugin set | by devsjc | Sep, 2023 | MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>From JetBrains to Vim: A modern Vim configuration and plugin set | by devsjc | Sep, 2023 | MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h2><p>ä½œè€…ä» JetBrains åˆ‡æ¢åˆ° Vimï¼Œåœ¨ Vim ä¸­ä¸»è¦ä½¿ç”¨åˆ°çš„æ’ä»¶ã€‚<br><img src="https://s2.loli.net/2023/10/20/GsWbix7aUzlMQ6t.png" alt="image.png"><br>ä½œè€…æ˜¯ç”±äº Vim ä½œè€…çš„ç¦»ä¸–æ‰å†³å®šèŠ±æ—¶é—´ç ”ç©¶ä¸‹ Vimï¼Œä»¥ä¸‹æ˜¯ä»–å¸¸ç”¨çš„ä¸€äº›æ’ä»¶ï¼š</p><h3 id="Plugin-kristijanhusak-x2F-vim-packager"><a href="#Plugin-kristijanhusak-x2F-vim-packager" class="headerlink" title="Plugin:Â kristijanhusak&#x2F;vim-packager"></a>Plugin:Â <a href="https://github.com/kristijanhusak/vim-packager"><strong>kristijanhusak&#x2F;vim-packager</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/DsRxePkVrEMUtio.png" alt="image.png"><br>ä»åå­—å¯ä»¥çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†æ’ä»¶ã€‚</p><h3 id="Plugin-junegunn-x2F-fzf-vim"><a href="#Plugin-junegunn-x2F-fzf-vim" class="headerlink" title="Plugin:Â junegunn&#x2F;fzf.vim"></a>Plugin:Â <a href="https://github.com/junegunn/fzf.vim"><strong>junegunn&#x2F;fzf.vim</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/CzrZPsWBORpEiHn.png" alt="image.png"><br>æ¨¡ç³Šæœç´¢æ’ä»¶ã€‚</p><h3 id="Plugin-yegappan-x2F-lsp"><a href="#Plugin-yegappan-x2F-lsp" class="headerlink" title="Plugin:Â yegappan&#x2F;lsp"></a>Plugin:Â <a href="https://github.com/yegappan/lsp"><strong>yegappan&#x2F;lsp</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/fPC9sqQNbXjcuwY.png" alt="image.png"></p><p>è¿™ä¸ªæ’ä»¶åŠŸèƒ½å¼ºå¤§ï¼š</p><ul><li>è‡ªåŠ¨è¡¥å…¨</li><li>å˜é‡å£°æ˜è·³è½¬</li><li>é‡å‘½åå˜é‡<blockquote><p>å…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è§ IDE ä¸€äº›åŸºæœ¬åŠŸèƒ½</p></blockquote></li></ul><h3 id="Plugin-dense-analysis-x2F-ale"><a href="#Plugin-dense-analysis-x2F-ale" class="headerlink" title="Plugin:Â dense-analysis&#x2F;ale"></a>Plugin:Â <a href="https://github.com/dense-analysis/ale"><strong>dense-analysis&#x2F;ale</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/cdJfVMWm8vA2wqO.png" alt="image.png"><br>é”™è¯¯æç¤ºæ’ä»¶ï¼Œå¯ä»¥é«˜äº®å¹¶ä¿®å¤é”™è¯¯ã€‚</p><h3 id="Plugin-907th-x2F-vim-auto-save"><a href="#Plugin-907th-x2F-vim-auto-save" class="headerlink" title="Plugin:Â 907th&#x2F;vim-auto-save"></a>Plugin:Â <a href="https://github.com/907th/vim-auto-save"><strong>907th&#x2F;vim-auto-save</strong></a></h3><p>è‡ªåŠ¨ä¿å­˜æ’ä»¶ï¼Œä½œè€…ä» IDE åˆ‡æ¢åˆ° Vim åä¸èƒ½è‡ªåŠ¨ä¿å­˜ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥å¼¥è¡¥è¿™ä¸ªç¼ºå¤±ã€‚</p><h3 id="Plugin-jiangmiao-x2F-auto-pairs"><a href="#Plugin-jiangmiao-x2F-auto-pairs" class="headerlink" title="Plugin:Â jiangmiao&#x2F;auto-pairs"></a>Plugin:Â <a href="https://github.com/jiangmiao/auto-pairs"><strong>jiangmiao&#x2F;auto-pairs</strong></a></h3><p>è‡ªåŠ¨æ·»åŠ ã€åˆ é™¤æˆå¯¹çš„æ‹¬å·ï¼Œå¼•å·ç­‰ç¬¦å·ã€‚</p><h3 id="Plugin-airblade-x2F-vim-gitgutter"><a href="#Plugin-airblade-x2F-vim-gitgutter" class="headerlink" title="Plugin:Â airblade&#x2F;vim-gitgutter"></a>Plugin:Â <a href="https://github.com/airblade/vim-gitgutter"><strong>airblade&#x2F;vim-gitgutter</strong></a></h3><p>ç”¨äºæ˜¾ç¤º git é¢æ¿çš„æ’ä»¶ï¼Œæ¯”è¾ƒæäº¤è®°å½•ã€å¯¹æ¯”ç­‰ã€‚</p><h3 id="Plugin-bluz71-x2F-vim-mistfly-statusline"><a href="#Plugin-bluz71-x2F-vim-mistfly-statusline" class="headerlink" title="Plugin:Â bluz71&#x2F;vim-mistfly-statusline"></a>Plugin:Â <a href="https://github.com/bluz71/vim-mistfly-statusline"><strong>bluz71&#x2F;vim-mistfly-statusline</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/qX2cEQ3rDCu5sZP.png" alt="image.png"><br>ç”¨äºæ˜¾ç¤ºä¸€äº›çŠ¶æ€ï¼Œæ¯”å¦‚ vim æ¨¡å¼ã€git ç­‰ã€‚</p><p>å¯ä»¥å‘ç°å¤§éƒ¨åˆ†çš„æ’ä»¶åŠŸèƒ½ IDE éƒ½æ˜¯è‡ªå¸¦çš„ï¼Œè€Œä½œè€…ä¹‹æ‰€ä»¥é€‰æ‹© Vim ä¹Ÿæ˜¯å› ä¸ºä»–æ›´åŠ çš„è½»é‡ï¼Œç›¸å¯¹äº <code>Jetbrains</code> å®¶çš„ IDE æ¥è¯´ã€‚</p><h2 id="Building-your-brand-How-I-reached-10k-subscribers-in-6-months"><a href="#Building-your-brand-How-I-reached-10k-subscribers-in-6-months" class="headerlink" title="Building your brand: How I reached 10k subscribers in 6 months"></a>Building your brand: How I reached 10k subscribers in 6 months</h2><blockquote><p>ä½œè€…è®²è¿°äº†ä»–ç”¨äº†åŠå¹´æ—¶é—´åšçš„Â newsletterÂ ä¸ªäººå“ç‰Œè·å¾—äº† 1wä¸ªè®¢é˜…çš„ç»å†ï¼š</p></blockquote><p><img src="https://s2.loli.net/2023/10/22/CaZWOu6iMrxb8PE.png" alt="image.png"></p><p>1.Â åšè¿™ä¸ªè¿‡ç¨‹ä¸­æ”¶è·äº†ä¸¤ä¸ªå¥½å¤„ï¼Œå¦‚æœä½ æƒ³æŒæ¡æŸæ ·æŠ€èƒ½ï¼Œé‚£æ•™ä¼šåˆ«äººæ˜¯æœ€å¿«çš„ï¼Œä¹Ÿå°±æ˜¯åšåˆ†äº«</p><p>2.Â å¯ä»¥å’Œæœ‰è®¸å¤šä¸åŒè§‚ç‚¹çš„äººäº¤æµï¼Œè·å¾—ä¸åŒçš„æ”¶è·</p><p>3.Â å’Œè®¸å¤šäººä¿æŒäº†è¿æ¥ï¼Œè·å¾—èµåŠ©ã€é¢è¯•æœºä¼š</p><p>4.Â å…¬å¼€å­¦ä¹ ï¼šå…¬å¼€åˆ†äº«ä½ å­¦åˆ°çš„å’Œä½ ç›´åˆ°çš„ä¸œè¥¿ã€‚</p><p>5.Â é•¿æœŸåšæŒåˆé€‚ä½ çš„æ–¹æ³•å»å­¦ä¹ æ²‰æ·€ä¸€ä»¶äº‹æƒ…</p><h2 id="How-companies-Ship-code-to-ProductionğŸŒŸğŸŒŸğŸŒŸ"><a href="#How-companies-Ship-code-to-ProductionğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="HowÂ companiesÂ ShipÂ codeÂ toÂ ProductionğŸŒŸğŸŒŸğŸŒŸ"></a>HowÂ companiesÂ ShipÂ codeÂ toÂ ProductionğŸŒŸğŸŒŸğŸŒŸ</h2><p><img src="https://s2.loli.net/2023/10/22/vonCAaQWdqgS6HU.png" alt="image.png"></p><blockquote><p>ä¼ä¸šå¦‚ä½•ä»£ç äº¤ä»˜åˆ°ç”Ÿäº§ç¯å¢ƒ:</p></blockquote><p>1.Â äº§å“è´Ÿè´£äººåˆ›å»ºéœ€æ±‚</p><p>2.Â å’Œç ”å‘äººå‘˜è®¨è®ºéœ€æ±‚</p><p>3.Â å¼€å‘éœ€æ±‚</p><p>4.Â æ„å»ºæ‰“åŒ…ï¼Œéœ€è¦é€šè¿‡å•å…ƒæµ‹è¯•ã€è¦†ç›–ç‡ã€SonarÂ æ‰«æç­‰æµç¨‹</p><p>5.Â æ„å»ºæˆåŠŸåå‘å¸ƒåˆ°å¼€å‘ç¯å¢ƒ</p><p>6.Â å¯èƒ½ä¼šæœ‰å¤šä¸ªå›¢é˜Ÿåœ¨å¼€å‘ä¸åŒçš„åˆ†æ”¯ï¼Œæ‰€ä»¥éœ€è¦å°†ä»£ç éƒ¨ç½²åˆ° QA1ã€QA2</p><p>7.Â æµ‹è¯•å›¢é˜Ÿä¼šåˆ°ä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•ç¯å¢ƒæ‰§è¡Œå›å½’æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•</p><p>8.Â æµ‹è¯•é€šè¿‡åä¼šéƒ¨ç½²åˆ°Â UATÂ ç¯å¢ƒ</p><p>9.Â UATÂ æµ‹è¯•é€šè¿‡åï¼Œå°†ä¼šæŒ‰ç…§å‘å¸ƒè®¡åˆ’å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ</p><p>10.Â SREÂ å›¢é˜Ÿè´Ÿè´£å¯¹ç”Ÿäº§ç¯å¢ƒè¿›è¡Œè¿ç»´å’Œç›‘æ§</p><blockquote><p>åœ¨å›½å†…è¿™ç®—æ˜¯ä¸€ä¸ªä¸­å¤§å‹å›¢é˜Ÿçš„äº¤ä»˜æµç¨‹äº†ï¼Œéœ€è¦å°å‹å›¢é˜Ÿå¯èƒ½å¹¶ä¸ä¼šæœ‰å•æµ‹ã€ä»£ç æ‰«æã€å¤šä¸ªæµ‹è¯•ç¯å¢ƒã€SRE ç­‰æµç¨‹ã€‚</p></blockquote><h2 id="Understanding-Database-TypesğŸŒŸğŸŒŸğŸŒŸ"><a href="#Understanding-Database-TypesğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Understanding Database TypesğŸŒŸğŸŒŸğŸŒŸ"></a>Understanding Database TypesğŸŒŸğŸŒŸğŸŒŸ</h2><p>ä»‹ç»äº†ç›®å‰æµè¡Œçš„æ•°æ®åº“ç±»å‹ï¼š<br><img src="https://s2.loli.net/2023/10/22/lQJDZ9KAIeNuqiW.png" alt="image.png"></p><ul><li>å…³ç³»å‹æ•°æ®åº“<ul><li>MySQL</li><li>Oracle</li><li>SQL Server</li><li>PG</li></ul></li><li>æ—¶åºæ•°æ®åº“<ul><li>InfluxDB</li><li>TimeScale DB</li><li>Graphite</li><li>Prometheus</li></ul></li><li>NoSQL æ•°æ®åº“<ul><li>MongoDB</li><li>Cassandra</li><li>Redis</li><li>Couchbase<br><img src="https://s2.loli.net/2023/10/22/6vgpl1Y9G8EqsF2.png" alt="image.png"></li></ul></li></ul><blockquote><p>æ˜¯ä¸€ç¯‡ç§‘æ™®æ–‡ç« ï¼Œä½†å› ä¸ºæ˜¯ä¸€ä¸ªä»˜è´¹è®¢é˜…çš„ Newsletter æˆ‘ä¹Ÿå°±æ²¡æœ‰çœ‹è¿‡ï¼Œå¯¹è¿™äº›æ•°æ®åº“ç±»å‹çš„æ•´ç†è¿˜æ˜¯æ¯”è¾ƒå®Œå–„çš„ã€‚</p></blockquote><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://medium.com/@lahotipranali/google-software-engineer-interview-experience-offer-25e4eb6a0a5c">https://medium.com/@lahotipranali/google-software-engineer-interview-experience-offer-25e4eb6a0a5c</a></li><li><a href="https://medium.com/@devsjc/from-jetbrains-to-vim-a-modern-vim-configuration-and-plugin-set-d58472a7d53d">https://medium.com/@devsjc/from-jetbrains-to-vim-a-modern-vim-configuration-and-plugin-set-d58472a7d53d</a></li><li><a href="https://careercutler.substack.com/p/building-your-brand-how-i-reached">https://careercutler.substack.com/p/building-your-brand-how-i-reached</a></li><li><a href="https://blog.bytebytego.com/p/ep81-how-companies-ship-code-to-production?utm_source=post-email-title&amp;publication_id=817132&amp;post_id=137944253&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email">https://blog.bytebytego.com/p/ep81-how-companies-ship-code-to-production?utm_source=post-email-title&amp;publication_id=817132&amp;post_id=137944253&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email</a></li><li><a href="https://blog.bytebytego.com/p/understanding-database-types">https://blog.bytebytego.com/p/understanding-database-types</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/22/1nblhKQu6o4HMjk.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
    <category term="Tech" scheme="http://crossoverjie.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¼˜é›…é‡å¯ kubernetes çš„ Pod</title>
    <link href="http://crossoverjie.top/2023/10/19/ob/k8s-restart-pod/"/>
    <id>http://crossoverjie.top/2023/10/19/ob/k8s-restart-pod/</id>
    <published>2023-10-19T02:58:44.000Z</published>
    <updated>2023-10-19T10:34:44.918Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/19/IW8kEDatFlMhz1O.png" alt="restart pod.png"></p><p>æœ€è¿‘åœ¨å‡çº§æœåŠ¡ç½‘æ ¼ Istioï¼Œå‡çº§åæœ‰ä¸ªå¿…è¦çš„æµç¨‹å°±æ˜¯éœ€è¦é‡å¯æ•°æ®é¢çš„æ‰€æœ‰çš„ Podï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡çš„ Podï¼Œè¿™æ ·æ‰èƒ½å°†è¿™äº› Pod çš„ sidecar æ›´æ–°ä¸ºæ–°ç‰ˆæœ¬ã€‚</p><span id="more"></span><h1 id="æ–¹æ¡ˆ-1"><a href="#æ–¹æ¡ˆ-1" class="headerlink" title="æ–¹æ¡ˆ 1"></a>æ–¹æ¡ˆ 1</h1><p>å› ä¸ºæˆ‘ä»¬ä¸åŒç¯å¢ƒçš„ Pod æ•°ä¸å°‘ï¼Œä¸å¯èƒ½æ‰‹åŠ¨ä¸€ä¸ªä¸ªé‡å¯ï¼›ä¹‹å‰ä¹Ÿåšè¿‡ç±»ä¼¼çš„æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete --all pods --namespace=dev</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥ä¸€é”®å°† dev è¿™ä¸ªå‘½åç©ºé—´ä¸‹çš„ Pod åˆ æ‰ï¼Œkubernetes ä¹‹åä¼šè‡ªåŠ¨å°†è¿™äº› Pod é‡å¯ï¼Œä¿è¯å’Œåº”ç”¨çš„å¯ç”¨æ€§ã€‚</p><p>ä½†è¿™æœ‰ä¸ªå¤§é—®é¢˜æ˜¯å¯¹ <code>kubernetes</code> çš„è°ƒåº¦å‹åŠ›è¾ƒå¤§ï¼Œä¸€èˆ¬ä¸€ä¸ª <code>namespace</code> ä¸‹å°‘è¯´ä¹Ÿæ˜¯å‡ ç™¾ä¸ª Podï¼Œå…¨éƒ¨éœ€è¦é‡æ–°è°ƒåº¦å¯åŠ¨å¯¹ <code>kubernetes</code> çš„è´Ÿè½½ä¼šå¾ˆé«˜ï¼Œç¨æœ‰ä¸æ…å°±ä¼šæœ‰ä¸¥é‡çš„åæœã€‚</p><p>æ‰€ä»¥å½“æ—¶æˆ‘çš„ç¬¬ä¸€ç‰ˆæ–¹æ¡ˆæ˜¯éå†æ‰€æœ‰çš„  deploymentï¼Œåˆ é™¤ä¸€ä¸ª Pod åä¼‘çœ  5 åˆ†é’Ÿå†åˆ ä¸‹ä¸€ä¸ªï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">deployments, err := clientSet.AppsV1().Deployments(ns).List(ctx, metav1.ListOptions&#123;&#125;)  </span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> err  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, deployment := <span class="keyword">range</span> deployments.Items &#123;</span><br><span class="line">podList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;  </span><br><span class="line">    LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),  </span><br><span class="line">&#125;)</span><br><span class="line">err = clientSet.CoreV1().Pods(pod.Namespace).Delete(ctx, pod.Name, metav1.DeleteOptions&#123;&#125;)  </span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> err  </span><br><span class="line">&#125;  </span><br><span class="line">log.Printf(<span class="string">&quot;    Pod %s rebuild success.\n&quot;</span>, pod.Name)</span><br><span class="line">time.Sleep(time.Minute * <span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h2><p>è¿™ä¸ªæ–¹æ¡ˆç¡®å®æ˜¯ç®€å•ç²—æš´ï¼Œä½†åœ¨æµ‹è¯•çš„æ—¶å€™å°±å‘ç°äº†é—®é¢˜ã€‚</p><p>å½“æŸäº›ä¸šåŠ¡åªæœ‰ä¸€ä¸ª Pod çš„æ—¶å€™ï¼Œç›´æ¥åˆ æ‰ä¹‹åè¿™ä¸ªä¸šåŠ¡å°±æŒ‚äº†ï¼Œæ²¡æœ‰å¤šä½™çš„å‰¯æœ¬å¯ä»¥æä¾›æœåŠ¡äº†ã€‚</p><p><strong>è¿™è‚¯å®šæ˜¯ä¸èƒ½æ¥å—çš„ã€‚</strong></p><p>ç”šè‡³è¿˜æœ‰åˆ é™¤ä¹‹åæ²¡æœ‰é‡å¯æˆåŠŸçš„ï¼š</p><ul><li>é•¿æœŸæ²¡æœ‰é‡å¯å¯¼è‡´é•œåƒç¼“å­˜æ²¡æœ‰äº†ï¼Œç”šè‡³é•œåƒå·²ç»è¢«åˆ é™¤äº†ï¼Œè¿™ç§æ ¹æœ¬å°±æ²¡æ³•å¯åŠ¨æˆåŠŸã€‚</li><li>ä¹Ÿæœ‰ä¸€äº› Pod æœ‰ <code>Init-Container</code> ä¼šåœ¨å¯åŠ¨çš„æ—¶å€™åšä¸€äº›äº‹æƒ…ï¼Œå¦‚æœå¤±è´¥äº†ä¹Ÿæ˜¯æ²¡æ³•å¯åŠ¨æˆåŠŸçš„ã€‚<br>æ€»ä¹‹å°±æ˜¯æœ‰å¤šç§æƒ…å†µå¯¼è‡´ä¸€ä¸ª Pod æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œè¿™åœ¨çº¿ä¸Šå°±ä¼šç›´æ¥å¯¼è‡´ç”Ÿäº§é—®é¢˜ï¼Œæ‰€ä»¥æ–¹æ¡ˆä¸€è‚¯å®šæ˜¯ä¸èƒ½ç”¨çš„ã€‚</li></ul><h1 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h1><p>ä¸ºæ­¤æˆ‘å°±å‡†å¤‡äº†æ–¹æ¡ˆäºŒï¼š</p><p><img src="https://s2.loli.net/2023/10/19/reKiba4XtWSnP6z.png" alt="image.png"></p><ul><li>å…ˆå°†å‰¯æœ¬æ•°+1ï¼Œè¿™æ˜¯ä¼šæ–°å¢ä¸€ä¸ª Podï¼Œä¹Ÿä¼šä½¿ç”¨æœ€æ–°çš„ sidecar é•œåƒã€‚</li><li>ç­‰å¾…æ–°å»ºçš„ Pod é‡å¯æˆåŠŸã€‚</li><li>é‡å¯æˆåŠŸååˆ é™¤åŸæœ‰çš„ Podã€‚</li><li>å†å°†å‰¯æœ¬æ•°è¿˜åŸä¸ºä¹‹å‰çš„æ•°é‡ã€‚</li></ul><p>è¿™æ ·å¯ä»¥å°†åŸæœ‰çš„ Pod å¹³æ»‘çš„é‡å¯ï¼ŒåŒæ—¶å¦‚æœæ–°çš„ Pod å¯åŠ¨å¤±è´¥ä¹Ÿä¸ä¼šç»§ç»­é‡å¯å…¶ä»– <code>Deployment</code> çš„ Podï¼Œè€çš„ Pod ä¹Ÿæ˜¯ä¸€ç›´ä¿ç•™çš„ï¼Œå¯¹æœåŠ¡æœ¬èº«æ²¡æœ‰ä»»ä½•å½±å“ã€‚</p><h2 id="å­˜åœ¨çš„é—®é¢˜-1"><a href="#å­˜åœ¨çš„é—®é¢˜-1" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h2><p>çœ‹èµ·æ¥æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ï¼Œå°±æ˜¯å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæµç¨‹å¾ˆç¹çï¼Œè¿™é‡Œæˆ‘è´´äº†éƒ¨åˆ†æ ¸å¿ƒä»£ç ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RebuildDeploymentV2</span><span class="params">(ctx context.Context, clientSet kubernetes.Interface, ns <span class="type">string</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">deployments, err := clientSet.AppsV1().Deployments(ns).List(ctx, metav1.ListOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, deployment := <span class="keyword">range</span> deployments.Items &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Print each Deployment</span></span><br><span class="line">log.Printf(<span class="string">&quot;Ready deployment: %s\n&quot;</span>, deployment.Name)</span><br><span class="line"></span><br><span class="line">originPodList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;</span><br><span class="line">LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Check if there are any Pods</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(originPodList.Items) == <span class="number">0</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;No pod in %s\n&quot;</span>, deployment.Name)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Skip Pods that have already been upgraded</span></span><br><span class="line">updateSkip := <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> _, container := <span class="keyword">range</span> pod.Spec.Containers &#123;</span><br><span class="line"><span class="keyword">if</span> container.Name == <span class="string">&quot;istio-proxy&quot;</span> &amp;&amp; container.Image == <span class="string">&quot;proxyv2:1.x.x&quot;</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;  Pod: %s Container: %s has already upgrade, skip\n&quot;</span>, pod.Name, container.Name)</span><br><span class="line">updateSkip = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> updateSkip &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Scale the Deployment, create a new pod.</span></span><br><span class="line">scale, err := clientSet.AppsV1().Deployments(ns).GetScale(ctx, deployment.Name, metav1.GetOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">scale.Spec.Replicas = scale.Spec.Replicas + <span class="number">1</span></span><br><span class="line">_, err = clientSet.AppsV1().Deployments(ns).UpdateScale(ctx, deployment.Name, scale, metav1.UpdateOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait for pods to be scaled</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">podList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;</span><br><span class="line">LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(podList.Items) != <span class="type">int</span>(scale.Spec.Replicas) &#123;</span><br><span class="line">time.Sleep(time.Second * <span class="number">10</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait for pods to be running</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">podList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;</span><br><span class="line">LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">isPending := <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> _, item := <span class="keyword">range</span> podList.Items &#123;</span><br><span class="line"><span class="keyword">if</span> item.Status.Phase != v1.PodRunning &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;Deployment: %s Pod: %s Not Running Status: %s\n&quot;</span>, deployment.Name, item.Name, item.Status.Phase)</span><br><span class="line">isPending = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> isPending == <span class="literal">true</span> &#123;</span><br><span class="line">time.Sleep(time.Second * <span class="number">10</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remove origin pod</span></span><br><span class="line"><span class="keyword">for</span> _, pod := <span class="keyword">range</span> originPodList.Items &#123;</span><br><span class="line">err = clientSet.CoreV1().Pods(ns).Delete(context.Background(), pod.Name, metav1.DeleteOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">&quot;Remove origin %s success.\n&quot;</span>, pod.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Recover scale</span></span><br><span class="line">newScale, err := clientSet.AppsV1().Deployments(ns).GetScale(ctx, deployment.Name, metav1.GetOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">newScale.Spec.Replicas = newScale.Spec.Replicas - <span class="number">1</span></span><br><span class="line">newScale.ResourceVersion = <span class="string">&quot;&quot;</span></span><br><span class="line">newScale.UID = <span class="string">&quot;&quot;</span></span><br><span class="line">_, err = clientSet.AppsV1().Deployments(ns).UpdateScale(ctx, deployment.Name, newScale, metav1.UpdateOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">&quot;Depoloyment %s rebuild success.\n&quot;</span>, deployment.Name)</span><br><span class="line">log.Println()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹çš„å‡ºæ¥ä»£ç æ˜¯æ¯”è¾ƒå¤šçš„ã€‚</p><h1 id="æœ€ç»ˆæ–¹æ¡ˆ"><a href="#æœ€ç»ˆæ–¹æ¡ˆ" class="headerlink" title="æœ€ç»ˆæ–¹æ¡ˆ"></a>æœ€ç»ˆæ–¹æ¡ˆ</h1><p>æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•å‘¢ï¼Œå½“æˆ‘æŠŠä¸Šè¿°çš„æ–¹æ¡ˆå’Œé¢†å¯¼æ²Ÿé€šåä»–äººéƒ½å‚»äº†ï¼Œè¿™ä¹Ÿå¤ªå¤æ‚äº†ï¼š<code>kubectl</code> ä¸æ˜¯æœ‰ä¸€ä¸ªç›´æ¥æ»šåŠ¨é‡å¯çš„å‘½ä»¤å—ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â¯ k rollout -h</span><br><span class="line">Manage the rollout of one or many resources.</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  <span class="built_in">history</span>       View rollout <span class="built_in">history</span></span><br><span class="line">  pause         Mark the provided resource as paused</span><br><span class="line">  restart       Restart a resource</span><br><span class="line">  resume        Resume a paused resource</span><br><span class="line">  status        Show the status of the rollout</span><br><span class="line">  undo          Undo a previous rollout</span><br></pre></td></tr></table></figure><p><code>kubectl rollout restart deployment/abc</code><br>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥å°† <code>abc</code> è¿™ä¸ª <code>deployment</code> è¿›è¡Œæ»šåŠ¨æ›´æ–°ï¼Œè¿™ä¸ªæ›´æ–°æ“ä½œå‘ç”Ÿåœ¨  kubernetes çš„æœåŠ¡ç«¯ï¼Œæ‰§è¡Œçš„æ­¥éª¤å’Œæ–¹æ¡ˆäºŒå·®ä¸å¤šï¼Œåªæ˜¯ kubernetes å®ç°çš„æ¯”æˆ‘çš„æ›´åŠ ä¸¥è°¨ã€‚</p><p>åæ¥æˆ‘åœ¨æŸ¥çœ‹ <code>Istio</code> çš„å®˜æ–¹å‡çº§æŒ‡å—ä¸­ä¹Ÿæ˜¯æåˆ°äº†è¿™ä¸ªå‘½ä»¤ï¼š<br><img src="https://s2.loli.net/2023/10/19/IjckD8GK2pzXfyn.png" alt="image.png"></p><blockquote><p>æ‰€ä»¥è¿˜æ˜¯å¾—å¥½å¥½çœ‹å®˜æ–¹æ–‡æ¡£</p></blockquote><h2 id="æ•´åˆ-kubectl"><a href="#æ•´åˆ-kubectl" class="headerlink" title="æ•´åˆ kubectl"></a>æ•´åˆ kubectl</h2><p>æ—¢ç„¶æœ‰ç°æˆçš„äº†ï¼Œé‚£å°±å°†è¿™ä¸ªå‘½ä»¤æ•´åˆåˆ°æˆ‘çš„è„šæœ¬é‡Œå³å¯ï¼Œå†éå† namespace ä¸‹çš„ deployment çš„æ—¶å€™å¾ªç¯è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p><p>ä½†è¿™ä¸ª <code>rollout</code> å‘½ä»¤åœ¨ <code>kubernetes</code> çš„ <code>client-go</code> çš„ <code>SDK</code> ä¸­æ˜¯æ²¡æœ‰è¿™ä¸ª API çš„ã€‚</p><p>æ‰€ä»¥æˆ‘åªæœ‰å‚è€ƒ kubectl çš„æºç ï¼Œå°†è¿™éƒ¨åˆ†åŠŸèƒ½å¤åˆ¶è¿‡æ¥ï¼›ä¸è¿‡å¥½åœ¨å¯ä»¥ç›´æ¥ä¾èµ– kubect åˆ°æˆ‘çš„é¡¹ç›®é‡Œã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">require (  </span><br><span class="line">    k8s.io/api v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/apimachinery v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/cli-runtime v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/client-<span class="keyword">go</span> v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/klog/v2 v2<span class="number">.100</span><span class="number">.1</span>  </span><br><span class="line">    k8s.io/kubectl v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/19/7beuKWadX8M9y5c.png" alt="image.png"></p><p>æºç é‡Œä½¿ç”¨åˆ°çš„ <code>RestartOptions</code> ç»“æ„ä½“æ˜¯å…¬å…±è®¿é—®çš„ï¼Œæ‰€ä»¥æˆ‘å°±å‚è€ƒå®ƒæºç é­”æ”¹äº†ä¸€ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRollOutRestart</span><span class="params">(t *testing.T)</span></span> &#123;  </span><br><span class="line">    kubeConfigFlags := defaultConfigFlags()  </span><br><span class="line">    streams, _, _, _ := genericiooptions.NewTestIOStreams()  </span><br><span class="line">    ns := <span class="string">&quot;dev&quot;</span>  </span><br><span class="line">    kubeConfigFlags.Namespace = &amp;ns  </span><br><span class="line">    matchVersionKubeConfigFlags := cmdutil.NewMatchVersionFlags(kubeConfigFlags)  </span><br><span class="line">    f := cmdutil.NewFactory(matchVersionKubeConfigFlags)  </span><br><span class="line">    deploymentName := <span class="string">&quot;deployment/abc&quot;</span>  </span><br><span class="line">    r := &amp;rollout.RestartOptions&#123;  </span><br><span class="line">       PrintFlags: genericclioptions.NewPrintFlags(<span class="string">&quot;restarted&quot;</span>).WithTypeSetter(scheme.Scheme),  </span><br><span class="line">       Resources:  []<span class="type">string</span>&#123;deploymentName&#125;,  </span><br><span class="line">       IOStreams:  streams,  </span><br><span class="line">    &#125;  </span><br><span class="line">    err := r.Complete(f, <span class="literal">nil</span>, []<span class="type">string</span>&#123;deploymentName&#125;)  </span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">       log.Fatal(err)  </span><br><span class="line">    &#125;  </span><br><span class="line">    err = r.RunRestart()  </span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">       log.Fatal(err)  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆåœ¨å‡ æ¬¡ debug åç»ˆäºå¯ä»¥è¿è¡Œäº†ï¼Œåªéœ€è¦å°†è¿™éƒ¨åˆ†é€»è¾‘ç§»åŠ¨åˆ°å¾ªç¯é‡Œï¼ŒåŠ ä¸Š <code>sleep</code> ä¾¿å¯ä»¥æœ‰è§„å¾‹çš„é‡å¯ Pod äº†ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://istio.io/latest/docs/setup/upgrade/canary/#data-plane">https://istio.io/latest/docs/setup/upgrade/canary/#data-plane</a></li><li><a href="https://github.com/kubernetes/kubectl/blob/master/pkg/cmd/rollout/rollout_restart.go">https://github.com/kubernetes/kubectl/blob/master/pkg/cmd/rollout/rollout_restart.go</a></li></ul><p>#Blog #K8s </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/19/IW8kEDatFlMhz1O.png&quot; alt=&quot;restart pod.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘åœ¨å‡çº§æœåŠ¡ç½‘æ ¼ Istioï¼Œå‡çº§åæœ‰ä¸ªå¿…è¦çš„æµç¨‹å°±æ˜¯éœ€è¦é‡å¯æ•°æ®é¢çš„æ‰€æœ‰çš„ Podï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡çš„ Podï¼Œè¿™æ ·æ‰èƒ½å°†è¿™äº› Pod çš„ sidecar æ›´æ–°ä¸ºæ–°ç‰ˆæœ¬ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/OB/k8s/"/>
    
    
    <category term="client-go" scheme="http://crossoverjie.top/tags/client-go/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ kubernetes ç¯å¢ƒä¸­å®ç° gRPC è´Ÿè½½å‡è¡¡</title>
    <link href="http://crossoverjie.top/2023/10/16/ob/k8s-grpc-lb/"/>
    <id>http://crossoverjie.top/2023/10/16/ob/k8s-grpc-lb/</id>
    <published>2023-10-16T07:55:50.000Z</published>
    <updated>2023-10-17T06:01:48.484Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/16/wJiKvMAaWUyOCpX.png" alt="Istio-grpc-lb.png"></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰æ®µæ—¶é—´å†™è¿‡ä¸€ç¯‡ <code>gRPC</code> çš„å…¥é—¨æ–‡ç« ï¼Œåœ¨æœ€åè¿˜ç•™äº†ä¸€ä¸ªå‘æ²¡æœ‰å¡«ï¼š<br><img src="https://s2.loli.net/2023/10/16/41I2RZXeQanFgdB.png" alt="image.png"><br>ä¹Ÿå°±æ˜¯ <code>gRPC</code> çš„è´Ÿè½½å‡è¡¡é—®é¢˜ï¼Œå› ä¸ºå½“æ—¶çš„ä¸šåŠ¡è¯·æ±‚é‡ä¸ç®—å¤§ï¼Œå†åŠ ä¸Šå…¬å¸æ²¡æœ‰å¯¹ Istio è¿™ç±»æœåŠ¡ç½‘æ ¼æ¯”è¾ƒç†Ÿæ‚‰çš„å¤§ç‰›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå°±ä¸€ç›´æ‹–ç€æ²¡æœ‰è§£å†³ï¼Œä¾ç„¶åªæ˜¯ä½¿ç”¨äº† kubernetes çš„ service è¿›è¡Œè´Ÿè½½ï¼Œå¥½åœ¨ä¹Ÿæ²¡æœ‰å‡ºä»€ä¹ˆé—®é¢˜ã€‚</p><span id="more"></span><p>ç”±äºç°åœ¨æ¢äº†å…¬å¸åä¹Ÿéœ€è¦ç»´æŠ¤å…¬å¸çš„æœåŠ¡ç½‘æ ¼æœåŠ¡ï¼Œç»“åˆå…¬å¸å†…éƒ¨å¯¹ Istio çš„ä½¿ç”¨ç°åœ¨ç»ˆäºä¸å†åœç•™åœ¨ç†è®ºé˜¶æ®µäº†ã€‚</p><p>æ‰€ä»¥ä¹Ÿç»ˆæœ‰æœºä¼šå°†è¿™ä¸ªå‘å¡«äº†ã€‚</p><h1 id="gRPC-è´Ÿè½½å‡è¡¡"><a href="#gRPC-è´Ÿè½½å‡è¡¡" class="headerlink" title="gRPC è´Ÿè½½å‡è¡¡"></a>gRPC è´Ÿè½½å‡è¡¡</h1><h2 id="è´Ÿè½½ä¸å‡è¡¡"><a href="#è´Ÿè½½ä¸å‡è¡¡" class="headerlink" title="è´Ÿè½½ä¸å‡è¡¡"></a>è´Ÿè½½ä¸å‡è¡¡</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å…ˆæ¥å›é¡¾ä¸‹èƒŒæ™¯ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ <code>gRPC</code> è´Ÿè½½ä¸å‡è¡¡çš„é—®é¢˜ã€‚<br>ç”±äº <code>gRPC</code> æ˜¯åŸºäº HTTP&#x2F;2 åè®®çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¼šä¿æŒé•¿é“¾æ¥ï¼Œä¸€æ—¦é“¾æ¥å»ºç«‹æˆåŠŸåå°±ä¼šä¸€ç›´ä½¿ç”¨è¿™ä¸ªè¿æ¥å¤„ç†åç»­çš„è¯·æ±‚ã€‚</p><p><img src="https://s2.loli.net/2023/10/16/NxJqPM49vAgEBtX.png" alt="image.png"></p><p>é™¤éæˆ‘ä»¬æ¯æ¬¡è¯·æ±‚ä¹‹åéƒ½æ–°å»ºä¸€ä¸ªè¿æ¥ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚</p><p>æ‰€ä»¥è¦è§£å†³ <code>gRPC</code> çš„è´Ÿè½½å‡è¡¡é€šå¸¸æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p><ul><li>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡</li><li>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡<br>åœ¨ <code>gRPC</code> è¿™ä¸ªåœºæ™¯æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ä¸æ˜¯å¾ˆåˆé€‚ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½éœ€è¦ç»è¿‡ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œè¿™æ ·å®ƒå°±æˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆï¼Œæ‰€ä»¥æ›´æ¨èä½¿ç”¨å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€‚</li></ul><p>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç›®å‰ä¹Ÿæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œæœ€å¸¸è§ä¹Ÿæ˜¯ä¼ ç»Ÿæ–¹æ¡ˆã€‚<br><img src="https://s2.loli.net/2023/10/16/x31gJLImRlfXa9i.png" alt="image.png"><br>è¿™é‡Œä»¥ Dubbo çš„è°ƒç”¨è¿‡ç¨‹ä¸ºä¾‹ï¼Œè°ƒç”¨çš„æ—¶å€™éœ€è¦ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–åˆ°æä¾›è€…çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯æœ¬åœ°æ ¹æ®ä¸€å®šçš„è´Ÿè½½å‡è¡¡ç®—æ³•å¾—å‡ºä¸€ä¸ªèŠ‚ç‚¹ç„¶åå‘èµ·è¯·æ±‚ã€‚</p><p>æ¢æˆ <code>gRPC</code> ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œè¿™é‡Œä»¥ <code>go-zero</code> è´Ÿè½½å‡è¡¡çš„åŸç†ä¸ºä¾‹ï¼š<br><img src="https://s2.loli.net/2023/10/16/PLnyAKsmDZQRoeh.png" alt="image.png"></p><p>gRPC å®˜æ–¹åº“ä¹Ÿæä¾›äº†å¯¹åº”çš„è´Ÿè½½å‡è¡¡æ¥å£ï¼Œä½†æˆ‘ä»¬ä¾ç„¶éœ€è¦è‡ªå·±ç»´æŠ¤æœåŠ¡åˆ—è¡¨ç„¶ååœ¨å®¢æˆ·ç«¯ç¼–å†™è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œè¿™é‡Œæœ‰ä¸ªå®˜æ–¹ demo:</p><p><a href="https://github.com/grpc/grpc-go/blob/87eb5b7502493f758e76c4d09430c0049a81a557/examples/features/load_balancing/client/main.go">https://github.com/grpc/grpc-go/blob/87eb5b7502493f758e76c4d09430c0049a81a557/examples/features/load_balancing&#x2F;client&#x2F;main.go</a></p><p>ä½†åˆ‡æ¢åˆ° kubernetes ç¯å¢ƒä¸­æ—¶å†ä½¿ç”¨ä»¥ä¸Šçš„æ–¹å¼å°±ä¸å¤Ÿä¼˜é›…äº†ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ kubernetes çš„ç›®çš„å°±æ˜¯ä¸æƒ³å†é¢å¤–çš„ç»´æŠ¤è¿™ä¸ªå®¢æˆ·ç«¯åŒ…ï¼Œè¿™éƒ¨åˆ†èƒ½åŠ›æœ€å¥½æ˜¯ç”± kubernetes è‡ªå·±å°±èƒ½æä¾›ã€‚</p><p>ä½†é—æ†¾çš„æ˜¯ kubernetes æä¾›çš„ service åªæ˜¯åŸºäº L4 çš„è´Ÿè½½ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½åªèƒ½å°†è¯·æ±‚å‘å¾€åŒä¸€ä¸ª Provider èŠ‚ç‚¹ã€‚</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>è¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ªå°ç¨‹åºæ¥éªŒè¯è´Ÿè½½ä¸å‡è¡¡çš„ç¤ºä¾‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create gRPC server</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">   <span class="keyword">var</span> port = <span class="string">&quot;:50051&quot;</span>  </span><br><span class="line">   lis, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, port)  </span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">      log.Fatalf(<span class="string">&quot;failed to listen: %v&quot;</span>, err)  </span><br><span class="line">   &#125;  </span><br><span class="line">   s := grpc.NewServer()  </span><br><span class="line">   pb.RegisterGreeterServer(s, &amp;server&#123;&#125;)  </span><br><span class="line">   <span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;  </span><br><span class="line">      log.Fatalf(<span class="string">&quot;failed to serve: %v&quot;</span>, err)  </span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">      log.Printf(<span class="string">&quot;served on %s \n&quot;</span>, port)  </span><br><span class="line">   &#125;  </span><br><span class="line">&#125;()</span><br><span class="line"><span class="comment">// server is used to implement helloworld.GreeterServer.  </span></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span> &#123;  </span><br><span class="line">   pb.UnimplementedGreeterServer  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// SayHello implements helloworld.GreeterServer  </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span></span> SayHello(ctx context.Context, in *pb.HelloRequest) (*pb.HelloReply, <span class="type">error</span>) &#123;  </span><br><span class="line">   log.Printf(<span class="string">&quot;Received: %v&quot;</span>, in.GetName())  </span><br><span class="line">   name, _ := os.Hostname()  </span><br><span class="line">   <span class="comment">// Return hostname of Server</span></span><br><span class="line">   <span class="keyword">return</span> &amp;pb.HelloReply&#123;Message: fmt.Sprintf(<span class="string">&quot;hostname:%s, in:%s&quot;</span>, name, in.Name)&#125;, <span class="literal">nil</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åŒä¸€ä¸ª gRPC è¿æ¥å‘èµ·ä¸€æ¬¡ gRPC è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›å®ƒçš„ <code>hostname</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (  </span><br><span class="line">   once sync.Once  </span><br><span class="line">   c    pb.GreeterClient  </span><br><span class="line">)  </span><br><span class="line">http.HandleFunc(<span class="string">&quot;/grpc_client&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;  </span><br><span class="line">   once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">      service := r.URL.Query().Get(<span class="string">&quot;name&quot;</span>)  </span><br><span class="line">      conn, err := grpc.Dial(fmt.Sprintf(<span class="string">&quot;%s:50051&quot;</span>, service), grpc.WithInsecure(), grpc.WithBlock())  </span><br><span class="line">      <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">         log.Fatalf(<span class="string">&quot;did not connect: %v&quot;</span>, err)  </span><br><span class="line">      &#125;  </span><br><span class="line">      c = pb.NewGreeterClient(conn)  </span><br><span class="line">   &#125;)  </span><br><span class="line">  </span><br><span class="line">   <span class="comment">// Contact the server and print out its response.  </span></span><br><span class="line">   name := <span class="string">&quot;world&quot;</span>  </span><br><span class="line">   ctx, cancel := context.WithTimeout(context.Background(), time.Second)  </span><br><span class="line">   <span class="keyword">defer</span> cancel()  </span><br><span class="line">   g, err := c.SayHello(ctx, &amp;pb.HelloRequest&#123;Name: name&#125;)  </span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">      log.Fatalf(<span class="string">&quot;could not greet: %v&quot;</span>, err)  </span><br><span class="line">   &#125;  </span><br><span class="line">   fmt.Fprint(w, fmt.Sprintf(<span class="string">&quot;Greeting: %s&quot;</span>, g.GetMessage()))  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª service ç”¨äºç»™ <code>gRPC</code> æä¾›åŸŸåï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">native-tools-2</span></span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">selector:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">native-tools-2</span></span><br><span class="line">  <span class="attr">ports:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span>  </span><br><span class="line">      <span class="attr">port:</span> <span class="number">8081</span>  </span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8081</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grpc</span>  </span><br><span class="line">      <span class="attr">port:</span> <span class="number">50051</span>  </span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">50051</span></span><br></pre></td></tr></table></figure><p>åŒæ—¶å°†æˆ‘ä»¬çš„ gRPC server éƒ¨ç½²ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œå†éƒ¨ç½²äº†ä¸€ä¸ªå®¢æˆ·ç«¯èŠ‚ç‚¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â¯ k get pod</span><br><span class="line">NAME                                READY   STATUS    RESTARTS</span><br><span class="line">native-tools-2-d6c454689-52wgd      1/1     Running   0              </span><br><span class="line">native-tools-2-d6c454689-67rx4      1/1     Running   0              </span><br><span class="line">native-tools-2-d6c454689-zpwxt      1/1     Running   0              </span><br><span class="line">native-tools-65c5bd87fc-2fsmc       2/2     Running   0             </span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿›å…¥å®¢æˆ·ç«¯èŠ‚ç‚¹æ‰§è¡Œå¤šæ¬¡ grpc è¯·æ±‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">k <span class="built_in">exec</span> -it native-tools-65c5bd87fc-2fsmc bash</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br></pre></td></tr></table></figure><p>ä¼šå‘ç°æ¯æ¬¡è¯·æ±‚çš„éƒ½æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ <code>native-tools-2-d6c454689-zpwxt</code>ï¼Œè¿™ä¹Ÿå°±è¯æ˜äº†åœ¨ kubernetes ä¸­ç›´æ¥ä½¿ç”¨ gRPC è´Ÿè½½æ˜¯ä¸å‡è¡¡çš„ï¼Œä¸€æ—¦è¿æ¥å»ºç«‹åå°±åªèƒ½å°†è¯·æ±‚å‘å¾€é‚£ä¸ªèŠ‚ç‚¹ã€‚</p><h2 id="ä½¿ç”¨-Istio"><a href="#ä½¿ç”¨-Istio" class="headerlink" title="ä½¿ç”¨ Istio"></a>ä½¿ç”¨ Istio</h2><p>Istio å¯ä»¥æ‹¿æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¢åˆ°ä¸€ä¸ªæ³¨å…¥äº† Istio çš„ namespace ä¸‹è¿˜æ˜¯åŒæ ·çš„ ä»£ç ï¼ŒåŒæ ·çš„ service èµ„æºè¿›è¡Œæµ‹è¯•ã€‚</p><blockquote><p>å…³äºå¼€å¯ namespace çš„ Istio æ³¨å…¥ä¼šåœ¨åç»­æ›´æ–°ï¼Œç°åœ¨æ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š<br><a href="https://istio.io/latest/docs/setup/additional-setup/sidecar-injection/">https://istio.io/latest/docs/setup/additional-setup/sidecar-injection/</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-xprjz, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-xprjz, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-xprjz, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-nz8h5, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-nz8h5, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°åŒæ ·çš„è¯·æ±‚å·²ç»è¢«è´Ÿè½½åˆ°äº†å¤šä¸ª server åç«¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸å†å•ç‹¬ç»´æŠ¤ä¸€ä¸ªå®¢æˆ·ç«¯ SDK çš„æƒ…å†µä¸‹å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚</p><h2 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>å…¶å®æœ¬è´¨ä¸Š Istio ä¹Ÿæ˜¯å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„ä¸€ç§å®ç°ã€‚<br><img src="https://s2.loli.net/2023/10/16/XOU1TGtvm7PeJ8o.png" alt="image.png"><br>ä»¥ Istio çš„æ¶æ„å›¾ä¸ºä¾‹ï¼š</p><ul><li>æ¯ä¸€ä¸ª Pod ä¸‹ä¼šæ–°å¢ä¸€ä¸ª <code>Proxy</code> çš„ <code>container</code>ï¼Œæ‰€æœ‰çš„æµé‡å…¥å£å’Œå‡ºå£éƒ½ä¼šç»è¿‡å®ƒã€‚</li><li>å®ƒä¼šä»æ§åˆ¶å¹³é¢ <code>Istiod</code> ä¸­æ‹¿åˆ°æœåŠ¡çš„æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ <code>kubernetes</code> ä¸­çš„ serviceã€‚</li><li>å‘ç”Ÿè¯·æ±‚æ—¶ç”± proxy å®¹å™¨ä¸­çš„ <code>Envoy</code> è¿›è¡Œæœ€ç»ˆçš„è´Ÿè½½è¯·æ±‚ã€‚</li></ul><p>å¯ä»¥åœ¨ä½¿ç”¨äº† Istio çš„ Pod ä¸­æŸ¥çœ‹åˆ°å…·ä½“çš„å®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ k get pod native-tools-2-5fbf46cf54-5m7dl -n istio-test-2 -o json | jq <span class="string">&#x27;.spec.containers[].name&#x27;</span></span><br><span class="line"><span class="string">&quot;istio-proxy&quot;</span></span><br><span class="line"><span class="string">&quot;native-tools-2&quot;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°è¿™é‡Œå­˜åœ¨ä¸€ä¸ª <code>istio-proxy</code> çš„å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ <code>sidecar</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠåŸæœ¬çš„ SDK é‡Œçš„åŠŸèƒ½å…¨éƒ¨äº¤ç»™ Istio å»å¤„ç†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å½“ç„¶ Istio çš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ç»Ÿä¸€ç½‘å…³ï¼Œå¤„ç†ä¸œè¥¿ã€å—åŒ—å‘æµé‡ã€‚</li><li>ç°åº¦å‘å¸ƒ</li><li>æµé‡æ§åˆ¶</li><li>æ¥å£ç²’åº¦çš„è¶…æ—¶é…ç½®</li><li>è‡ªåŠ¨é‡è¯•ç­‰</li></ul><p>è¿™æ¬¡åªæ˜¯ä¸€ä¸ªå¼€èƒƒèœï¼Œæ›´å¤šå…³äº <code>Istio</code> çš„å†…å®¹ä¼šåœ¨åç»­æ›´æ–°ï¼Œæ¯”å¦‚ä¼šä»å¦‚ä½•åœ¨ <code>kubernetes</code> é›†ç¾¤ä¸­å®‰è£… <code>Istio</code> è®²èµ·ï¼Œå¸¦å¤§å®¶ä¸€æ­¥æ­¥ä½¿ç”¨å¥½ <code>Istio</code>ã€‚</p><p>æœ¬æ–‡ç›¸å…³æºç ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p><p><sub>å‚è€ƒé“¾æ¥ï¼š</sub></p><ul><li><a href="https://istio.io/latest/docs/setup/getting-started/">https://istio.io/latest/docs/setup/getting-started/</a></li><li><a href="https://segmentfault.com/a/1190000042295402">https://segmentfault.com/a/1190000042295402</a></li><li><a href="https://go-zero.dev/docs/tutorials/service/governance/lb">https://go-zero.dev/docs/tutorials/service/governance/lb</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/16/wJiKvMAaWUyOCpX.png&quot; alt=&quot;Istio-grpc-lb.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‰æ®µæ—¶é—´å†™è¿‡ä¸€ç¯‡ &lt;code&gt;gRPC&lt;/code&gt; çš„å…¥é—¨æ–‡ç« ï¼Œåœ¨æœ€åè¿˜ç•™äº†ä¸€ä¸ªå‘æ²¡æœ‰å¡«ï¼š&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/16/41I2RZXeQanFgdB.png&quot; alt=&quot;image.png&quot;&gt;&lt;br&gt;ä¹Ÿå°±æ˜¯ &lt;code&gt;gRPC&lt;/code&gt; çš„è´Ÿè½½å‡è¡¡é—®é¢˜ï¼Œå› ä¸ºå½“æ—¶çš„ä¸šåŠ¡è¯·æ±‚é‡ä¸ç®—å¤§ï¼Œå†åŠ ä¸Šå…¬å¸æ²¡æœ‰å¯¹ Istio è¿™ç±»æœåŠ¡ç½‘æ ¼æ¯”è¾ƒç†Ÿæ‚‰çš„å¤§ç‰›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå°±ä¸€ç›´æ‹–ç€æ²¡æœ‰è§£å†³ï¼Œä¾ç„¶åªæ˜¯ä½¿ç”¨äº† kubernetes çš„ service è¿›è¡Œè´Ÿè½½ï¼Œå¥½åœ¨ä¹Ÿæ²¡æœ‰å‡ºä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/OB/k8s/"/>
    
    
    <category term="gRPC" scheme="http://crossoverjie.top/tags/gRPC/"/>
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ä¸€æœŸ</title>
    <link href="http://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/"/>
    <id>http://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/</id>
    <published>2023-10-13T08:22:13.000Z</published>
    <updated>2023-10-18T02:54:40.821Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/13/qHMR6zDI529ZsEf.png" alt="Newsletter01.png"></p><p>æˆ‘è‡ªå·±å¹³æ—¶æœ‰æ¯å¤©é˜…è¯»æ–‡ç« çš„ä¹ æƒ¯ï¼Œä¹Ÿä¼šå°†è¿™äº›æ–‡ç« ä¿å­˜èµ·æ¥å¹¶åšä¸€äº›è®°å½•ï¼Œä»Šå¤©åœ¨çœ‹é˜®ä¸€å³°çš„ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠæ—¶çªç„¶æƒ³åˆ°æˆ‘ä¹Ÿå¯ä»¥å°†è¿™äº›çœ‹è¿‡çš„è§‰å¾—ä¸é”™çš„å†…å®¹åˆ†äº«å‡ºæ¥ã€‚<br><img src="https://s2.loli.net/2023/10/13/TaQZ2MyX4xEIedR.png" alt="image.png"></p><p>é¡ºä¾¿ä¹Ÿå¯ä»¥è®©å¤§ä¼™å‚ä¸ç•™ä¸‹è‡ªå·±è§‰å¾—ä¸é”™çš„å†…å®¹ï¼Œäº’ç›¸å­¦ä¹ ã€‚</p><span id="more"></span><p>ä»¥ä¸‹ä¾¿æ˜¯ç¬¬ä¸€æœŸçš„å†…å®¹ï¼š</p><h1 id="Istio-ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#Istio-ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Istio ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ ğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://jimmysong.io/blog/demystifying-the-load-balancing-in-istio/">Istio ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ</a> ğŸŒŸğŸŒŸğŸŒŸ</h1><p>1.Â ä»‹ç»äº†å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡ç«¯è´Ÿè½½å‡è¡¡çš„ç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯ã€‚<br>2.Â å¼•ç”³å‡ºÂ IstioÂ ä½¿ç”¨Â EnvoyÂ åšå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„æ–¹æ¡ˆã€‚<br>3.Â ä»‹ç»Â IstioÂ æ”¯æŒçš„ä¸€äº›è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚<br>4.Â å¦‚ä½•ä¸ºå…·ä½“çš„æœåŠ¡é…ç½®è´Ÿè½½å‡è¡¡ï¼Œä»¥åŠå¦‚ä½•ç¼–å†™ <code>DestinationRule</code>Â <code>å’ŒVirtualService</code></p><h1 id="ç†è§£-gRPC-åè®®ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#ç†è§£-gRPC-åè®®ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="ç†è§£ gRPC åè®®ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://taoshu.in/grpc.html">ç†è§£ gRPC åè®®</a>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><p>1.Â é¦–å…ˆæ˜¯ä»‹ç»äº†Â JSONÂ ç¼–ç çš„ç¼ºç‚¹ï¼Œå¯è¯»æ€§é«˜ï¼Œä½†æ€§èƒ½å·®ã€‚<br>2.Â PBÂ æ€§èƒ½å¥½ï¼Œä½†å¯è¯»æ€§å·®ï¼ŒåŒæ—¶è¿˜éœ€è¦é…å¥—å·¥å…·ï¼Œæ¯”å¦‚Â .protoÂ æ ¼å¼Â IDLÂ æ–‡ä»¶æ¥åšé¢å¤–çš„æ¥å£æè¿°ã€‚<br>3.Â æ¥å£è¯·æ±‚æ˜¯åº•å±‚ä¾ç„¶æ˜¯Â httpÂ åè®®ï¼Œä¸è¿‡æ˜¯ http&#x2F;2Â åè®®ï¼Œä½†æ˜¯è¯·æ±‚çš„æ˜ å°„æ˜¯ç›´æ¥ä½¿ç”¨Â .protoÂ æ–‡ä»¶çš„æè¿°ã€‚<br>4.Â æ¶ˆæ¯æ ¼å¼æè¿°äº†æ¶ˆæ¯ä½“å‰æœ‰äº”ä¸ªå­—èŠ‚ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚æè¿°äº†æ˜¯å¦å‹ç¼©ï¼Œåç»­å››ä¸ªå­—èŠ‚æè¿°äº†æ¶ˆæ¯å¤§å°ã€‚<br>5.Â å› ä¸ºæ˜¯Â streamÂ åè®®çš„å…³ç³»ï¼Œæ‰åŠ äº†è¿™äº”ä¸ªå­—èŠ‚ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯åŒä¸€ä¸ªè¿æ¥ï¼Œä¸ºäº†è¦åŒºåˆ†ä¸åŒçš„è¯·æ±‚å°±éœ€è¦åœ¨è¿™äº”ä¸ªå­—èŠ‚æ¥åŒºåˆ†äº†ã€‚</p><h1 id="Protocol-Buffers-ç¼–ç ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#Protocol-Buffers-ç¼–ç ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Protocol BuffersÂ ç¼–ç ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://taoshu.in/pb-encoding.html">Protocol BuffersÂ ç¼–ç </a>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><blockquote><p>é…åˆä¸Šä¸€ç¯‡ä¸€èµ·é˜…è¯»æ›´åŠ </p></blockquote><p>è¯¦ç»†è®²è§£äº†Â PBÂ ç¼–ç çš„åŸç†ã€‚<br>1.Â å®šé•¿æ•°æ®éƒ½æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯è§£å†³å˜é•¿å­—ç¬¦ä¸²çš„é—®é¢˜ã€‚<br>2.Â ä»¥Â <code>websocket</code>Â ä¸ºä¾‹ï¼Œ<code>websocket</code>Â çš„æ˜¯ä¸‰æŒ¡å˜é€Ÿï¼Œè€ŒÂ PBÂ å¼•å…¥äº†Â â€¨VarIntsÂ å®ç°äº†æ— çº§å˜é€Ÿï¼Œ<strong>ä½†å‰ææ˜¯å­—æ®µä¸èƒ½å¤ªå¤š</strong>ã€‚<br>3.Â ä½¿ç”¨äº†Â TagÂ ä»£æ›¿äº†å­—æ®µåï¼Œä½†åå¤„å°±æ˜¯è§£ç å¿…é¡»éœ€è¦Â PBÂ æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯éœ€è¦é€šè¿‡Â PBÂ æ–‡ä»¶ç”Ÿæˆç›®æ ‡è¯­è¨€ã€‚<br>4.Â åŒæ—¶Â TagÂ ä¹Ÿä¸èƒ½æ›´æ”¹ï¼Œæ›´æ”¹åè§£ç ç«¯å¾—åŒæ­¥æ›´æ–°ã€‚</p><h1 id="The-top-7-software-engineering-workflow-tips-I-wish-I-knew-earlier-ğŸ§°-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#The-top-7-software-engineering-workflow-tips-I-wish-I-knew-earlier-ğŸ§°-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="The top 7 software engineering workflow tips I wish I knew earlier ğŸ§° ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>The top 7 software engineering workflow tips I wish I knew earlier ğŸ§° ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><blockquote><p>ä½œè€…ä½¿ç”¨å¤šå¹´çš„æé«˜å·¥ä½œæ•ˆç‡çš„ä¸ƒä¸ªä¹ æƒ¯<br>1.Â GitÂ ç›¸å…³ï¼Œåˆ«åï¼Œæˆ‘è§‰å¾—å¯¹æˆ‘æ¥è¯´æ˜¯è‡ªåŠ¨è¡¥å…¨+å†å²è®°å½•æ›´å¥½ç”¨<br>2.Â ç¼–ç ç›¸å…³ï¼Œåˆ«ç›´æ¥ä½¿ç”¨æŸ¥æ‰¾ï¼Œå¯ä»¥å¤šä½¿ç”¨Â IDEÂ å¿«æ·é”®+AI ç¼–ç¨‹<br>3.Â è®°å½•å­¦åˆ°çš„çŸ¥è¯†ï¼Œæ¯”å¦‚ Notionï¼Œç°åœ¨æˆ‘ä½¿ç”¨Â Obsidian<br>4.Â ä½¿ç”¨Â Todo è®°å½•è‡ªå·±çš„çµæ„Ÿï¼Œè„‘å­ä¸æ˜¯æ‹¿æ¥å­˜å‚¨è¿™äº›ä¸œè¥¿çš„ï¼Œæ˜¯æ‹¿æ¥åšåˆ›é€ åŠ›ç›¸å…³çš„äº‹æƒ…ï¼ˆè¿™ä¸ªæˆ‘ä¹Ÿæ˜¯ä½¿ç”¨çš„ Obsidian æ’ä»¶ Memosï¼‰ã€‚<br>5.Â å¯è§†åŒ–æ²Ÿé€šï¼Œæ¯”å¦‚ä½¿ç”¨æˆªå›¾ Appï¼Œå†™æ–‡æ¡£ç­‰ã€‚<br>6.Â ä½¿ç”¨å¯†ç  Appï¼Œæ¯”å¦‚Â 1Password<br>7.Â ä½¿ç”¨çª—å£ç®¡ç† App</p></blockquote><h1 id="concï¼šGo-è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#concï¼šGo-è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="concï¼šGo è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://github.com/sourcegraph/conc">conc</a>ï¼šGo è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><blockquote><p>Better structured concurrency for go</p></blockquote><p>è¿™æ˜¯é¡¹ç›®çš„ä»‹ç»ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°è£…äº†ä¸€äº›ä½¿ç”¨  goroutine çš„å¸¸ç”¨æ“ä½œï¼š</p><ul><li>ä½¿ç”¨ <code>conc.WaitGroup</code> æ›¿ä»£æ ‡å‡†çš„ <code>sync.WaitGroup</code>ï¼Œå¹¶æä¾›äº†å®‰å…¨è¿è¡Œçš„ç‰¹æ€§ï¼Œä¸ç”¨æ‹…å¿ƒ panicã€‚</li><li>ä½¿ç”¨ <code>pool.ResultPool</code> å¯ä»¥æ‹¿åˆ°æ‰§è¡Œçš„ç»“æœï¼Œ<code>Javaer</code> æ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†ã€‚</li><li><code>iter.Map/iter.ForEach</code> å¯ä»¥ç›´æ¥å¹¶å‘ Map æˆ–è€…æ˜¯è¿­ä»£ sliceã€‚</li></ul><p><img src="https://s2.loli.net/2023/10/13/iwhN8qW5MmpXfQV.png" alt="image.png"><br>è¿™é‡Œä¸¾äº†ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å†™å‡ºä¸€ä¸ªå®‰å…¨çš„ <code>goroutine</code> ç¨‹åºï¼Œå¤§æ¦‚éœ€è¦å†™å·¦è¾¹é‚£ä¹ˆå¤šçš„ä»£ç ï¼Œè€Œä½¿ç”¨ <code>conc</code> ä¼šç®€å•å¾ˆå¤šï¼Œä¹Ÿæ›´åŠ æ˜“è¯»ã€‚</p><p>å…¶å®ä»è¿™é‡Œå°±ä¸éš¾çœ‹å‡ºï¼Œ<code>conc</code> åªæ˜¯å°†è¿™äº›ä»£ç å°è£…å¥½äº†ï¼Œæ„Ÿå…´è¶£çš„ä¹Ÿå¯ä»¥çœ‹çœ‹æºç ï¼Œä»£ç ä¸å¤šï¼Œå¾ˆå¿«å°±å¯ä»¥çœ‹å®Œã€‚</p><blockquote><p>ä»¥ä¸Šå†…å®¹å’Œè¯„åˆ†çº¯ä¸»è§‚å‚è€ƒï¼Œå‡æ²¡æœ‰ä½¿ç”¨ç±»ä¼¼äº ChatGPT è¿™ç±» AI å·¥å…·è¿›è¡Œæ€»ç»“ï¼Œç»å¯¹æ˜¯ä¼ ç»Ÿäººè‚‰é˜…è¯»å½’çº³ï¼ŒåŒ å¿ƒå·¥è‰ºã€‚</p><p>ä¸Šæ¦œæ–‡ç« éƒ½å¾ˆä¸é”™ï¼Œæ¨èå¤§å®¶å»é˜…è¯»åŸæ–‡ã€‚</p></blockquote><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://jimmysong.io/blog/demystifying-the-load-balancing-in-istio/">https://jimmysong.io/blog/demystifying-the-load-balancing-in-istio/</a></li><li><a href="https://github.com/sourcegraph/conc">https://github.com/sourcegraph/conc</a></li><li><a href="https://taoshu.in/pb-encoding.html">https://taoshu.in/pb-encoding.html</a></li><li><a href="https://taoshu.in/grpc.html">https://taoshu.in/grpc.html</a></li><li><a href="https://careercutler.substack.com/p/the-top-7-software-engineering-workflow?ref=dailydev">https://careercutler.substack.com/p/the-top-7-software-engineering-workflow?ref=dailydev</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/13/qHMR6zDI529ZsEf.png&quot; alt=&quot;Newsletter01.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘è‡ªå·±å¹³æ—¶æœ‰æ¯å¤©é˜…è¯»æ–‡ç« çš„ä¹ æƒ¯ï¼Œä¹Ÿä¼šå°†è¿™äº›æ–‡ç« ä¿å­˜èµ·æ¥å¹¶åšä¸€äº›è®°å½•ï¼Œä»Šå¤©åœ¨çœ‹é˜®ä¸€å³°çš„ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠæ—¶çªç„¶æƒ³åˆ°æˆ‘ä¹Ÿå¯ä»¥å°†è¿™äº›çœ‹è¿‡çš„è§‰å¾—ä¸é”™çš„å†…å®¹åˆ†äº«å‡ºæ¥ã€‚&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/13/TaQZ2MyX4xEIedR.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;é¡ºä¾¿ä¹Ÿå¯ä»¥è®©å¤§ä¼™å‚ä¸ç•™ä¸‹è‡ªå·±è§‰å¾—ä¸é”™çš„å†…å®¹ï¼Œäº’ç›¸å­¦ä¹ ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
    <category term="Tech" scheme="http://crossoverjie.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Helm ç®¡ç†åº”ç”¨çš„ä¸€äº› Tips</title>
    <link href="http://crossoverjie.top/2023/10/07/ob/Helm-tips/"/>
    <id>http://crossoverjie.top/2023/10/07/ob/Helm-tips/</id>
    <published>2023-10-07T12:36:14.000Z</published>
    <updated>2023-10-08T09:49:14.476Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/08/9HKS1lNqyGMson5.png" alt="Helm tips.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p><code>Helm</code> æ˜¯ä¸€ä¸ª <strong>Kubernetes</strong> çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæœ‰ç‚¹ç±»ä¼¼äº <code>Mac</code> ä¸Šçš„ <code>brew</code>ï¼Œ<code>Python</code> ä¸­çš„ <code>PIP</code>ï¼›å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¸®æˆ‘ä»¬ç›´æ¥åœ¨ <code>kubernetes</code> ä¸­å®‰è£…æŸä¸ªåº”ç”¨ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–¹ä¾¿çš„åœ¨ k8s é›†ç¾¤å®‰è£…å’Œå¸è½½ <code>MySQL</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm install my-sql oci://registry-1.docker.io/bitnamicharts/mysql -n mysql</span><br><span class="line"></span><br><span class="line">helm uninstall my-mysql -n mysql</span><br></pre></td></tr></table></figure><span id="more"></span><p>å¯¹äºä¸€äº›å¤æ‚çš„åº”ç”¨ä½¿ç”¨ Helm ä¸€é”®å®‰è£…ä¼šæ›´ç®€å•ï¼Œä»¥ Pulsar ä¸¾ä¾‹ï¼š<br><img src="https://s2.loli.net/2023/10/08/ig4koZIFlUT5Bt1.png" alt="image.png"><br>å®ƒæœ‰ç€å¤šä¸ªç»„ä»¶ï¼Œæ¯”å¦‚ bookkeeperã€zookeeperã€brokerã€proxy ç­‰ï¼Œå„ä¸ªç»„ä»¶è¿˜æœ‰ç€ä¾èµ–å…³ç³»ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨å®‰è£…æµç¨‹ä¼šæ¯”è¾ƒç¹çï¼Œè€Œä½¿ç”¨ Helm æ—¶ä¾¿éå¸¸ç®€å•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm repo add apache https://pulsar.apache.org/charts</span><br><span class="line"></span><br><span class="line">helm install my-pulsar apache/pulsar --version 3.0.0 -n pulsar</span><br></pre></td></tr></table></figure><blockquote><p>å½“ç„¶ä»–ä¹Ÿåªæ˜¯å¸®æˆ‘ä»¬ç”Ÿæˆäº†éƒ¨ç½²æ‰€éœ€è¦çš„ yaml æ–‡ä»¶ï¼Œä¹Ÿæ²¡æœ‰å¤ªå¤šé»‘ç§‘æŠ€ã€‚</p></blockquote><h1 id="å‡çº§"><a href="#å‡çº§" class="headerlink" title="å‡çº§"></a>å‡çº§</h1><p>çœ‹ä¼¼ç®€å•çš„å·¥å…·æˆ‘åœ¨å®é™…çº¿ä¸Šä½¿ç”¨çš„æ—¶å€™ä¹Ÿè¸©è¿‡ä¸€ä¸ªå‘ï¼Œæœ€å¤§çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æŸæ¬¡å‡çº§ Pulsar çš„æ—¶å€™ç”Ÿæˆçš„ yaml æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œå¯¼è‡´æ•´ä¸ªé›†ç¾¤è¢«åˆ é™¤äº†ğŸ˜­ã€‚</p><p>è¿˜å¥½æœ€åä½¿ç”¨ <code>helm  rollback version</code> å°†é›†ç¾¤æ¢å¤è¿‡æ¥äº†ï¼Œæˆ‘ä»¬çš„æŒä¹…åŒ–æ•°æ®ä¹Ÿè¿˜åœ¨ã€‚</p><p>è€Œå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯æˆ‘æ‰§è¡Œäº†ä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm upgrade pulsar ./charts/pulsar --version 2.9.2 -f charts/pulsar/values-2.10.3.yaml -n pulsar</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ˜¯å°† <code>pulsar</code> çš„ <code>Helm-Chart</code> æºç ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åä¿®æ”¹ <code>value.yaml</code> çš„æ–¹å¼æ‰§è¡Œå‡çº§çš„ã€‚</p><p>å½“æ—¶æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ²¡æœ‰æ³¨æ„ï¼Œåœ¨ä¸€ä¸ªæ²¡æœ‰ <code>values-2.10.3.yaml</code> æ–‡ä»¶çš„ç›®å½•ä¸‹æ‰§è¡Œçš„ï¼Œå¯¼è‡´ç”Ÿæˆçš„ <code>yaml</code> æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œä¹Ÿå°±å¯¼è‡´ k8s åœ¨ <code>pulsar</code> è¿™ä¸ª <code>namespace</code> ä¸‹åˆ é™¤äº†æ‰€æœ‰çš„èµ„æºã€‚</p><h2 id="æ¨¡æ‹Ÿå‡çº§"><a href="#æ¨¡æ‹Ÿå‡çº§" class="headerlink" title="æ¨¡æ‹Ÿå‡çº§"></a>æ¨¡æ‹Ÿå‡çº§</h2><p>ä¸ºäº†é¿å…ä»Šåå†æ¬¡å‡ºç°ç±»ä¼¼çš„é—®é¢˜ï¼Œéœ€è¦åœ¨å‡çº§å‰å…ˆæ¨¡æ‹Ÿå‡çº§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm upgrade pulsar ./charts/pulsar --version 2.9.2 -f charts/pulsar/values-2.10.3.yaml -n pulsar --dry-run --debug &gt; debug.yaml</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å…³é”®çš„ <code>dry-run</code> å’Œ <code>debug</code> å‚æ•°å¯ä»¥æŒ‡å®šæ¨¡æ‹Ÿå‡çº§å’Œè¾“å‡ºè¯¦ç»†çš„å†…å®¹ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å‡çº§å‰å…ˆæŸ¥çœ‹ <code>debug.yaml</code> é‡Œçš„å†…å®¹æ˜¯ä¸æ˜¯ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><h1 id="å¯¹æ¯”å‡çº§"><a href="#å¯¹æ¯”å‡çº§" class="headerlink" title="å¯¹æ¯”å‡çº§"></a>å¯¹æ¯”å‡çº§</h1><p>ä½†è¿™æ ·å¹¶ä¸èƒ½ç›´è§‚çš„çœ‹å‡ºå“ªäº›åœ°æ–¹æ˜¯æˆ‘ä»¬ä¿®æ”¹çš„ï¼Œè¿˜å¥½ç¤¾åŒºå·²ç»æœ‰äº†ç›¸å…³çš„æ’ä»¶ï¼Œå¯ä»¥å¸®æˆ‘ä»¬é«˜äº®æ˜¾ç¤ºä¿®æ”¹çš„åœ°æ–¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm plugin install https://github.com/databus23/helm-diff</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆå®‰è£…å¥½è¿™ä¸ª helm æ’ä»¶ã€‚</p><p>ç„¶ååœ¨å‡çº§å‰å…ˆä½¿ç”¨è¯¥æ’ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm diff upgrade pulsar ./charts/pulsar --version 2.9.2 -f charts/pulsar/values-2.10.3.yaml -n pulsar</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/08/V1k5gdhLASfq9JR.png" alt="image.png"></p><p>è¿™æ ·å°±å¯ä»¥é«˜äº®æ˜¾ç¤ºå‡ºä¿®æ”¹çš„å†…å®¹ã€‚</p><blockquote><p>ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªå‘½ä»¤ä¼šç›´æ¥å‡çº§ï¼Œå®ƒä¼šè‡ªåŠ¨åŠ ä¸Š â€“dry-run â€“debug å‚æ•°ã€‚</p></blockquote><p>æ›´å¤šå‘½ä»¤å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<br><a href="https://github.com/databus23/helm-diff">https://github.com/databus23/helm-diff</a></p><p>Helm åŠŸèƒ½å¾ˆå¼ºï¼Œåœ¨æ“ä½œç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™å¿…é¡»å¾—è°¨æ…ï¼Œéƒ½æ˜¯è¡€æ·‹æ·‹çš„æ•™è®­å•Šã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/08/9HKS1lNqyGMson5.png&quot; alt=&quot;Helm tips.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;&lt;code&gt;Helm&lt;/code&gt; æ˜¯ä¸€ä¸ª &lt;strong&gt;Kubernetes&lt;/strong&gt; çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæœ‰ç‚¹ç±»ä¼¼äº &lt;code&gt;Mac&lt;/code&gt; ä¸Šçš„ &lt;code&gt;brew&lt;/code&gt;ï¼Œ&lt;code&gt;Python&lt;/code&gt; ä¸­çš„ &lt;code&gt;PIP&lt;/code&gt;ï¼›å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¸®æˆ‘ä»¬ç›´æ¥åœ¨ &lt;code&gt;kubernetes&lt;/code&gt; ä¸­å®‰è£…æŸä¸ªåº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–¹ä¾¿çš„åœ¨ k8s é›†ç¾¤å®‰è£…å’Œå¸è½½ &lt;code&gt;MySQL&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;helm install my-sql oci://registry-1.docker.io/bitnamicharts/mysql -n mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;helm uninstall my-mysql -n mysql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Helm" scheme="http://crossoverjie.top/categories/Helm/"/>
    
    
    <category term="CloudNative" scheme="http://crossoverjie.top/tags/CloudNative/"/>
    
  </entry>
  
  <entry>
    <title>è·Ÿç€æ’­å®¢å­¦è‹±è¯­-Why I use vim ? part two.</title>
    <link href="http://crossoverjie.top/2023/10/06/ob/podcasts-english-1-vim/"/>
    <id>http://crossoverjie.top/2023/10/06/ob/podcasts-english-1-vim/</id>
    <published>2023-10-06T12:54:10.000Z</published>
    <updated>2023-10-06T10:04:51.597Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/05/lx4a2h1KcUyIoHd.png"></p><p>åœ¨ä¸Šä¸€æœŸä½œè€…è®²åˆ°äº†ä»–ä½¿ç”¨ Vim çš„ä¸»è¦åŸå› æ˜¯æé«˜æ•ˆç‡ï¼Œä¸éœ€è¦å†å»ä½¿ç”¨é¼ æ ‡ï¼Œä»Šå¤©æˆ‘ä»¬ç»§ç»­ä¸Šæ¬¡æœªå¬å®Œçš„å†…å®¹ï¼š</p><span id="more"></span><p>if you type Vi, thatâ€™s going to be alias to Vim anyway by default thereâ€™s, not really a good reason for you to use vi that I can think of. The reason I first started using Vim is kind of a <code>silly</code> one, and that is because my brother used it, uh, my brother, Nick, he climbs mountains for a living. Right now, he lives in Seattle and goes up and down rain near when it gets too cold to climb. Rainer? He goes to the other side of the world and leads, climbs up mountains over there, and then comes back again and starts climb a rain air over and over and over again.</p><p>Before he did that, though, he used to do quite a bit of programming, and I remember when I would watch him program because he started programming before me, he looked like a real hacker. He looked like the hackers you see on TV. He never touched the mouse. There was text flying out all over the screen files, opening, closing splits. It was awesome. It was like I wanted to be that person you. Know and He was using vim. I didnâ€™t know it was Vim, but thatâ€™s what he was using. So I opened Vim. I tried to edit some files I was using Eclipse at the time and doing Java.</p><blockquote><p>ä½œè€…é¦–æ¬¡ä½¿ç”¨ Vim çš„ åŸå› æœ‰ç‚¹å‚»ï¼Œå› ä¸ºä»–çš„å“¥å“¥ Nick åšäº†å¾ˆé•¿æ—¶é—´çš„ç¼–ç¨‹ï¼Œä¸€ç›´ä½¿ç”¨çš„éƒ½æ˜¯ Vimï¼Œçœ‹èµ·æ¥å°±è¡Œæ˜¯ç”µè§†é‡ŒçœŸæ­£çš„é»‘å®¢é‚£æ ·ï¼Œä»–ä»ä¸ä½¿ç”¨é¼ æ ‡ï¼Œæ–‡å­—ä¹Ÿåœ¨å±å¹•é‡Œä¹±é£ï¼Œçœ‹èµ·æ¥éå¸¸é…·ã€‚<br>è€Œé‚£ä¸ªæ—¶å€™ä½œè€…è¿˜åœ¨ä½¿ç”¨ eclipse ç¼–å†™ Java</p></blockquote><p>This is like my first year of college, I was taking an introductory to programming class. Itâ€™s the first programming Iâ€™ve ever done, and I thought Eclipse was great. It compiled my code for me. It had buttons for everything, but I didnâ€™t feel like a real hacker when I looked at nick. I mean, granted, he was writing C, which already looks way cooler. He was using Vim as well, and it justÂ <code>impressed</code>Â me, so I try to start opening up some of my Java files, and I have no idea how to do it. No idea how to edit a file I have no idea how to save a file I have no idea how to type in the document for crying out loud.</p><p>If I press keys, it does nothing. Sometimes a delete words, sometimes at pacewords,Â <code>it&#39;s a mess</code>, and this is probably the first experience that everybody has when they start using Vim, because Vim operates completely different than any other text editor Iâ€™ve ever used itâ€™sÂ <code>weird</code>Â them has modes, it has a language, it has objects, subjects, counts, verbs. All that stuff is, like, really weird when you first get started, but once you understand it, itâ€™s a lot of learning upfront everything, just kind of clicks and youâ€™re instantly faster than youâ€™ve ever been before,</p><blockquote><p>eclipse å¾ˆå¥½ç”¨ï¼Œä½†çœ‹èµ·æ¥æ²¡æœ‰ Nick ä½¿ç”¨ Vim é‚£ä¹ˆé…·ï¼Œä½¿å¾—ä½œè€…å°è±¡æ·±åˆ»ã€‚</p><p>å› æ­¤ä»–å°è¯•ä½¿ç”¨ Vim æ¥æ‰“å¼€ Java æ–‡ä»¶ï¼Œä½†å´ä¸çŸ¥é“å¦‚ä½•ç¼–è¾‘ã€åˆ é™¤ã€ä¿å­˜ç­‰åŸºæœ¬æ“ä½œï¼Œå¤§éƒ¨åˆ†åˆæ¬¡ä½¿ç”¨ Vim åº”è¯¥éƒ½ä¼šç¢°åˆ°è¿™äº›é—®é¢˜ï¼Œå®ƒå’Œæˆ‘ä»¬ä½¿ç”¨çš„å…¶ä»–ç¼–è¾‘å™¨å®Œå…¨ä¸åŒï¼Œçœ‹èµ·æ¥æ¯”è¾ƒå¥‡æ€ªã€‚</p><p>ä¸è¿‡ä¸€æ—¦ä½ æŒæ¡å®ƒï¼Œé‚£ä¹ˆä½¿ç”¨æ•ˆç‡å°†ä¼šé£é€Ÿæé«˜ã€‚</p></blockquote><p>for example, letâ€™s say, we wanted to copy a method from one ruby file and put it in another. If I was using sublime text, I would take my mouse. I would select that method Iâ€™d press command c to copy it, and then Iâ€™d click over to where I want the method to be, and Iâ€™d press command v to paste it. Not very bad thatâ€™s pretty fast probably doesnâ€™t take very long, but in Vim, you can do it even faster and without touching your mouse, them has a verb for yanking text itâ€™s not called copying itâ€™s, called yanking.</p><p>It has a movement called inside, so you can yank inside something, and then it has subjects called text blocks, which, in Ruby, those are methods. Vim understands blocks of text if youâ€™re editing a markdown document like, say, a read me, themâ€™ll know where a paragraph starts and where a paragraph ends, if weâ€™re editing a ruby file itâ€™s going to know where a method begins and where a method ends, or where your class begins or where your class ends, so using the Verb Yank, which happens to be the key Y,</p><blockquote><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ sublime è¿™æ ·çš„ç¼–è¾‘å™¨å¤åˆ¶ä¸€ä¸ªæ–¹æ³•æ—¶ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œé¦–å…ˆè¦ç”¨é¼ æ ‡é€‰ä¸­æ–‡æœ¬ï¼Œç„¶åå¤åˆ¶å†ç²˜è´´ã€‚<br>ä½†ä½¿ç”¨ Vim æ—¶ä¸éœ€è¦ä½¿ç”¨é¼ æ ‡ï¼Œè€Œæ˜¯è¢«ç§°ä¸º Yankingï¼Œå½“ç¼–è¾‘  Markdown æ—¶ Vim ä¼šçŸ¥é“æ®µè½çš„å¼€å§‹å’Œç»“å°¾ï¼Œç¼–è¾‘ Ruby æ—¶å¯ä»¥æ–¹æ³•çš„å¼€å§‹å’Œç»“å°¾ã€‚</p></blockquote><p>and then the movement inside, which happens to be the key I, and then the subject paragraph, which is vimâ€™s word for a block of text, you can yank a method. So if I put my cursor inside a ruby method and I type Y I P. For yank inside paragraph, itâ€™s going to copy that method to the clipboard. So by understanding the verb, yank the movement inside and the subject paragraph, we can perform actions really, really quickly, and then if we want to pace it somewhere else, we press the peaky for paste,</p><p>and itâ€™ll stick that text down, so everything in Vim is based on those concepts of verbs, movements and subjects. You also have one more thing you can play with, and that is counts, so if you want to perform something multiple times, in most cases, you can stick a number in front of it like one, two, three, five, and itâ€™s going to do it that many times, understanding those basic concepts, gets you a really long way, and then itâ€™s just a matter of understanding which keys correspond to which verbs and which movements and which subjects,</p><blockquote><p>åœ¨ vim ä¸­åªéœ€è¦å°†å…‰æ ‡ç§»åŠ¨åˆ°æ–¹æ³•ä¸­ï¼Œç„¶åä½¿ç”¨ YIP å°±å¯ä»¥å¤åˆ¶æ•´ä¸ªæ–¹æ³•ã€‚<br>æ‰€ä»¥åªè¦ç†è§£äº†è¿™äº›åŸºæœ¬æ¦‚å¿µå°±å¯ä»¥å¿«é€Ÿæé«˜æ•ˆç‡ã€‚</p></blockquote><p>and that just comes with time, which is the third reason I like to use Vim. Is there so much stuff to learn whenever I get bored? All I got to do is pull up them help, and I could start learning stuff in every little thing, I learn, every little keyboard shortcut, every movement, every subject, gets me a little bit faster, and it doesnâ€™t seem like a lot like the example I gave earlier, of copying and pasting text and sublime with a mouse that doesnâ€™t take very long. But if you add up all those little bits,</p><p>youâ€™re saving a ton of time, a goodÂ <code>analogy</code>Â I like to use is <code>lifting</code> weights if Iâ€™mÂ <code>squatting</code>Â 100 pounds, and I take a little, teeny, tiny two and a half pound plate, and I put it on each side of the barbell I probably wonâ€™t, even notice it, I mean, Iâ€™ll be squatting 105 pounds now, right, thatâ€™s not really that big of a difference, but if I add those two and a half pound plates 60 more times, going in once a day, and doing that, Iâ€™m now squatting 400 pounds, which is a pretty big difference, so those little changes donâ€™t seem like a lot,</p><blockquote><p>æˆ‘å–œæ¬¢ä½¿ç”¨ Vim çš„ä¸€ä¸ªåŸå› æ˜¯å¯ä»¥å­¦åˆ°è®¸å¤šä¸œè¥¿ï¼Œæ¯å­¦ä¸€äº›éƒ½å¯ä»¥è®©è‡ªå·±çš„æ•ˆç‡æé«˜ä¸€ç‚¹ã€‚<br>å°±åƒæ˜¯æˆ‘ä»¬æ·±è¹²ä¸€æ ·ï¼Œæ…¢æ…¢çš„åŠ é‡é‡ï¼Œåå¤å°è¯•æœ€ç»ˆå°±èƒ½å¾—åˆ°å·¨å¤§çš„æå‡ã€‚</p></blockquote><p>but taken as a whole, youâ€™re editing text way faster than people who arenâ€™t using vim. The last reason I like to use Vim is because it runs in the terminal, and this may not seem like a big deal, but it really isÂ <code>cosmetically</code>, itâ€™s nice because you can just pop a terminal open, full screen and have no chrome I use mac os, so Iâ€™ve got that big menu bar on top, itâ€™s really nice to just full screen a terminal and not see anything at all, and have your command line tools and your text editor all running in the same window I happen to use tmucks to manage that stuff I wonâ€™t talk about Tmux and now,</p><p>but I definitely will talk about it in another episode, but even out of the <code>cosmetic</code> reasons, itâ€™s nice to have a text editor that runs in the terminal because youâ€™re not always using your own machine right as web developers, Iâ€™m a web developer, weâ€™re always connecting to remote machines to edit files. Now, why is it that we should be forced to use a different text editor? The nice thing about Vim is it runs in the terminal, so every machine you connect to will likely already have Vim installed, but even if it doesnâ€™t you can install it,</p><p>and you can put your config files over there and you can make it so that no matter where youâ€™re editing text youâ€™re always in the same environment, which is awesome. Before I started using Vim out, connect a remote machines, and, and be forced to use some textset or Iâ€™m not familiar with, and it drove me nuts, but now I sometimes forget Iâ€™m on a remote machine because itâ€™s exactly the same as the machine I use at home, so if youâ€™ve never tried them, or maybe you tried it in the past, and it was super confusing or really turned you off.</p><blockquote><p>æœ€åä¸€ä¸ªä½¿ç”¨ Vim çš„ åŸå› æ˜¯å®ƒå¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼Œä¸ä»…å¯ä»¥ä½¿ç”¨è‡ªå·±çš„è®¾å¤‡ï¼Œè¿˜å¯ä»¥è¿æ¥åˆ°è¿œç¨‹è®¾å¤‡å»ç¼–è¾‘æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œä½¿å¾—æ‰€æœ‰çš„ç¯å¢ƒé…ç½®éƒ½æ˜¯ç›¸åŒçš„</p></blockquote><p>Give it a second shot thereâ€™s, a great stack overflow article that just kind of rehashs a lot of the things I said here, but itâ€™s just itâ€™s also just fun to read it talks about the core concepts of vi, the editor that Vim is based on, and I put a link to that in the shownotes thereâ€™s, also, them casts by Drew Neil, which is a screencast series thatâ€™s totally free, and he covers a lot of advanced concepts heâ€™s got a little bit of beginner stuff in there as well. You can also just open up a terminal and type vim tutor and Vimâ€™s going to give you a little lesson in how to use Vim,</p><p>give it a shot thatâ€™s all Iâ€™ve got for this week, you can find the shownotes at healthy hacker Dot Com, slash one, if you have any questions or feedback, send me a voicemail healthy hacker, Dot Com Slash Voicemail.</p><blockquote><p>åœ¨ stack overflow ä¸­æœ‰ç€å„ç§æ•™ç¨‹ï¼Œå¤§å®¶å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚</p></blockquote><h1 id="ç”Ÿè¯"><a href="#ç”Ÿè¯" class="headerlink" title="ç”Ÿè¯"></a>ç”Ÿè¯</h1><p>The reason I first started using Vim is kind of a <code>silly</code> one<br>æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ Vim çš„åŸå› æœ‰ç‚¹å‚»ã€‚</p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://s2.loli.net/2023/10/06/WKxpPUNT5wZr983.png" alt="image.png"></h2><p><code>it&#39;s a mess</code><br>æç ¸äº†<br><img src="https://s2.loli.net/2023/10/06/Cl6pKGR7e8A54mk.png" alt="image.png"></p><p>a goodÂ <code>analogy</code>Â I like to use is <code>lifting</code> weights if Iâ€™mÂ <code>squatting</code>Â 100 pounds,<br>but it really isÂ <code>cosmetically</code>,<br><img src="https://s2.loli.net/2023/10/06/8DxnNGwmMiyzCbJ.png"></p><p><img src="https://s2.loli.net/2023/10/06/68yEronuJUpm9wW.png" alt="image.png"><br><img src="https://s2.loli.net/2023/10/06/2O86HijZufx9eVW.png"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/05/lx4a2h1KcUyIoHd.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šä¸€æœŸä½œè€…è®²åˆ°äº†ä»–ä½¿ç”¨ Vim çš„ä¸»è¦åŸå› æ˜¯æé«˜æ•ˆç‡ï¼Œä¸éœ€è¦å†å»ä½¿ç”¨é¼ æ ‡ï¼Œä»Šå¤©æˆ‘ä»¬ç»§ç»­ä¸Šæ¬¡æœªå¬å®Œçš„å†…å®¹ï¼š&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Podcasts" scheme="http://crossoverjie.top/categories/OB/Podcasts/"/>
    
    
    <category term="English" scheme="http://crossoverjie.top/tags/English/"/>
    
  </entry>
  
  <entry>
    <title>è·Ÿç€æ’­å®¢å­¦è‹±è¯­-Why I use vim ? part one.</title>
    <link href="http://crossoverjie.top/2023/10/02/ob/podcasts-english-0-vim/"/>
    <id>http://crossoverjie.top/2023/10/02/ob/podcasts-english-0-vim/</id>
    <published>2023-10-02T12:54:10.000Z</published>
    <updated>2023-10-05T15:25:45.382Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/03/kheL1o68m2IyXbU.png" alt="why-use-vim-01.png"></p><p>æœ€è¿‘è¿™æ®µæ—¶é—´åœ¨å­¦è‹±è¯­ï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰ç½‘å‹æ¨èå¯ä»¥å¬è‹±æ–‡æ’­å®¢æé«˜å¬åŠ›æ°´å¹³ã€‚</p><p>æ­£å¥½æˆ‘è‡ªå·±ä¹Ÿæœ‰å¬æ’­å®¢çš„ä¹ æƒ¯ï¼Œåªä¸è¿‡å‡ ä¹éƒ½æ˜¯ä¸­æ–‡ï¼Œä½†ç°åœ¨æˆ‘å·²ç»å°è¯•å¬äº†ä¸€æ®µæ—¶é—´çš„è‹±æ–‡æ’­å®¢ï¼Œè§‰å¾—æ•ˆæœè¿˜ä¸é”™ã€‚</p><p>å¤§éƒ¨åˆ†éƒ½æ˜¯å’Œ IT ç›¸å…³çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸€äº›å…³é”®è¯è¿˜èƒ½å¬æ‡‚ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è‡ªå·±çš„æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œå¦‚æœæ˜¯ä¸€æ¬¡å¬ä¸æ‡‚æˆ‘å°±ä¼šåå¤æ”¶å¬ã€‚<br>è§†é¢‘ç‰ˆï¼š</p><iframe src="//player.bilibili.com/player.html?aid=961634958&bvid=BV1TH4y1Z77L&cid=1287992721&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><span id="more"></span><p>ä»Šå¤©æ¥å¬ç¬¬ä¸€æœŸå†…å®¹ï¼Œè¿™ä½ä½œè€…æ˜¯ä¸€ä½èµ„æ·±å·¥ç¨‹å¸ˆï¼Œè®²è¿°ä»–ä¸ºä»€ä¹ˆä½¿ç”¨ Vim çš„è¿‡ç¨‹ã€‚<br><a href="https://www.healthyhacker.com/2014/07/29/why-i-use-vim/">https://www.healthyhacker.com/2014/07/29/why-i-use-vim/</a></p><p>ä»¥ä¸‹æ˜¯æˆ‘é€šè¿‡è¯­éŸ³è½¬æ–‡å­—çš„å†…å®¹</p><blockquote><p>æˆ‘ä¼šç²¾ç®€ç¿»è¯‘æ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†ï¼Œè¿˜æ˜¯æ¨èå¤§å®¶å»æ”¶å¬åŸå§‹æ’­å®¢ã€‚</p></blockquote><p>Healthy hacker episode one. Welcome to the healthy hacker, where we talk about programming, puzzles, memory, fitness, diet, and everything else that you a healthy hacker , find Interesting. Iâ€™m Chris Hunt, and on the very first episode episode one, Iâ€™m going to answer a question? I get all the time, every conference I go to, every time I start a new job, every time I pair with somebody new. And that is: Chris, why do you use Vim? At of all the text editor on the planet, why do you choose to use Vim?</p><blockquote><p>ä½œè€…åœ¨å„ç§ä¼šè®®å’Œæ–°åŒäº‹çš„æ¥è§¦ä¸­éƒ½ä¼šè¢«é—®åˆ°è¿™ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆä½ ä¼šä½¿ç”¨ vim</p></blockquote><p>Itâ€™s so old it looks like <code>crap</code>. Why do you do it? So Iâ€™m totally going to tell you I have many various reasons why I love using Vim really excited about it, going to answer that question before we do though, we are going to talk about the workout of the week , all right. The workout of the week is a section that, uh, basically, Iâ€™m just going to take a workout Iâ€™ve done recently, and tell you about it, and hopefully you find the time this week to try it yourself, because every single one of these workouts you can do, I promise you. </p><blockquote><p>åœ¨å¼€å§‹ä¹‹å‰å…ˆèŠèŠæœ¬å‘¨çš„é”»ç‚¼</p></blockquote><p>Okay, so this weekâ€™s workout is a workout that Iâ€™ve been doing for several years. You need <code>barely</code> no equipment. All you need is a floor. I do it at least once, when I travel, sometimes twice, sometimes three times. I think there was a point in my life where I was doing this. Work out, like three or four times a day. This is the only thing I was doing. I donâ€™t recommend that, but you should totally give it a shot at least once this week and let me know how you do, because Iâ€™m <code>curious</code>,</p><blockquote><p>è¿™ä¸ªé”»ç‚¼å·²ç»è¿›è¡Œäº†è®¸å¤šå¹´äº†ï¼Œå‡ ä¹ä¸éœ€è¦é¢å¤–çš„è®¾å¤‡ï¼Œåªéœ€è¦ä¸€å—åœ°æ¿ã€‚æ—…è¡Œçš„æ—¶å€™ä¹Ÿä¼šç»§ç»­åšæŒï¼Œå»ºè®®ä½ æœ¬å‘¨è‡³å°‘å¾—å°è¯•ä¸€æ¬¡ã€‚</p></blockquote><p>so letâ€™s get right into it this is  A ten rep pyramid, and Iâ€™ll Iâ€™ll explain what that means. Basically, you want to do each exercise, one time, then two times, then three times, then four times, all the way up to ten, the top of the pyramid ten times, and then you go back down again to one, so nine, a seven until you finally end with one rep of each exercise, so the two exercises are going to do for this workout is a pushup and a shoulder press with no weight on each of these, youâ€™re just doing body weight.</p><blockquote><p>åšä¸€ä¸ªé€’å¢ç»„å’Œé€’å‡ç»„ï¼Œä»æ¯ç»„ä¸€ä¸ªåŠ¨ä½œå¢åŠ åˆ°æ¯ç»„ 10 ä¸ªåŠ¨ä½œï¼Œå†ç”±åä¸ªåŠ¨ä½œä¸€ç»„å‡å°‘åˆ°ä¸€ä¸ªåŠ¨ä½œä¸€ç»„ï¼›<br>æ¯ç»„åšä¸¤ä¸ªåŠ¨ä½œï¼Œä¿¯å§æ’‘ï¼Œå’Œåå§¿æ¨è‚©ï¼Œéƒ½ä¸ç”¨è´Ÿé‡ï¼Œåªéœ€è¦è‡ªé‡å³å¯ã€‚</p></blockquote><p>So Iâ€™m sure, everybody knows what a pushup is. If you donâ€™t check out the show notes, or just do a Google image search, shoulder press you may or may not be as familiar with, but itâ€™s just like it sounds. You take your hands, put them by your shoulders, and then press your hands up into the air again, just to Google. Im in search, youâ€™ll totally get what this is. So the workout is one pushup. One shoulder press, then two pushups, two shoulder presses, then three pushups, then three shoulder presses,</p><blockquote><p>åº”è¯¥éƒ½çŸ¥é“ä¿¯å§æ’‘æ€ä¹ˆåšï¼Œå¦‚æœæ¨è‚©ä¸çŸ¥é“æ€ä¹ˆåšçš„è¯å¯ä»¥å» Googleï¼Œéƒ½æ˜¯æ¯”è¾ƒç®€å•åŠ¨ä½œï¼›<br>æ‰€ä»¥è¿™ä¸ªè®­ç»ƒæ˜¯ä¸€æ¬¡ä¿¯å§æ’‘ï¼Œä¸€æ¬¡æ¨è‚©ä¸ºä¸€ä¸ªåŠ¨ä½œï¼›ç„¶åå¢åŠ åˆ°ä¸¤ä¸ªä¿¯å§æ’‘+æ¨è‚©+ç„¶åæ˜¯ä¸‰ä¸ªä¿¯å§æ’‘+ä¸‰ä¸ªæ¨è‚©ã€‚</p></blockquote><p>then four, five, six, seven, eight 910, and then go back down again, nine, eight, seven, six, and you finish with one push up, one shoulder, press. Now. The goal with this is to go as fast as you possibly can, but take breaks as necessary. I <code>definitely</code> canâ€™t do this without stopping, especially on the pushups part. So do as fast as you can. When I did this this morning, I did it in seven minutes and 28 seconds, so let me know how you do. Iâ€™m super curious if youâ€™ve never done this before, itâ€™s going to seem crazy hard,</p><blockquote><p>ä»¥æ­¤ç±»æ¨åšåˆ°åæ¬¡ï¼Œå†é€’å‡åˆ° 1 ä¸€æ¬¡ï¼Œç›®æ ‡æ˜¯å°½å¯èƒ½çš„å¿«é€Ÿå®Œæˆã€‚<br>ä¼‘æ¯ä¹Ÿæ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œæˆ‘æ— æ³•åšåˆ°ä¸ä¼‘æ¯å…¨éƒ¨å®Œæˆï¼Œç‰¹åˆ«æ˜¯åœ¨ä¿¯å§æ’‘è¿™ä¸ªéƒ¨åˆ†ã€‚<br>éå¸¸å¥½å¥‡ä½ åšå®Œçš„æ„Ÿå—ï¼Œå¦‚æœä½ ä»æ¥æ²¡åšè¿‡çš„è¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚</p></blockquote><p>but I know you can do it. By the time you finished this workout, you will have done 100 pushups and 100 shoulder presses. If it really Really Really is out of your <code>reach</code>, even with breaks, then you can scale this workout, decreasing your pyramid. So instead of doing a ten rep pyramid, do like a six rep pyramid or a Five Rep Pyramid, but with brakes, I know that everybody can do 100 pushups in 100 shoulder presses. It might take you a while, but you can do it, so give it a shot. All right. </p><blockquote><p>ä½†è¶…è¿‡ä½ çš„æ‰¿å—èŒƒå›´æ—¶ï¼Œå¯ä»¥é€‚å½“å‡å°‘ç»„æ•°ã€‚</p></blockquote><p>So now itâ€™s time to answer that question: why do I use Vim? Well, for starters, if youâ€™re going to learn any editor vim is a pretty good <code>investment</code>. Itâ€™s been around for a long time over 20 years. Itâ€™s open source, it runs on everything itâ€™s not like thereâ€™s, a company vested in its future you know it doesnâ€™t cost you money, itâ€™s for as long as Iâ€™m programming, vim is going to be around, so if Iâ€™m going to waste time trying to master a text editor, vim is probably a good choice because itâ€™s not going anywhere</p><p>Iâ€™m not going to have to forget everything Iâ€™ve learned and start learning a different text editor. I can use vim for the rest of my life for all my text editor so itâ€™s a good <code>investment</code> of your time. Now if you do a Google search, you start looking for books for Vim, you might see Vi and Vi is actually an older editor that Vim is based on Vim stands for Vi improved, and most of themâ€™s functionality comes from Vi, so most of us, donâ€™t use Vi, some of the things I really like about vim, that Vi doesnâ€™t have is improved syntax,</p><p>highlighting for the languages I like to use mostly Ruby and Javascript. Nowadays, theyâ€™re spell-checking, so when you use it for typing an emails or typing up a poll request that comes in handy, thereâ€™s splits, so you can view maybe your test and your code at the same time, without having to go back and forth, you have multiple levels of undo and redo them can do diffs, or, as vi canâ€™t do diff, so you can open up two of the same files that are edited at different points of time, and see that diff in red and green itâ€™s pretty nice,</p><blockquote><p>å­¦ä¹  vim æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŠ•èµ„ï¼Œå®ƒæ˜¯å¼€æºçš„å…è´¹çš„ï¼Œå€¼å¾—èŠ±æ—¶é—´å»å­¦ä¹ ã€‚<br>vi æ˜¯ vim çš„å‰èº«ï¼Œvim åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œæ¯”å¦‚è¯­æ³•é«˜äº®ã€è¾“å…¥æ£€æµ‹ç­‰ã€‚<br>vim è¿˜å¯ä»¥åˆ†å±ï¼Œå¯è§†åŒ–å¯¹æ¯”ç­‰</p></blockquote><p>and then you also have scripting Vim script itself, which is, the native script language for Vim is not pretty, but you can also do scripting with other languages, like Perl, Ruby, python and Vim also has a really awesome help system with which vi does not have thereâ€™s also some improvements that Vim ads that I donâ€™t really care about, I mean I took notes, obviously because I donâ€™t have all this stuff memorized, and Iâ€™ve titled this section dumb <code>stuff</code>, because itâ€™s kind of du I donâ€™t care linefolding is one editing of compressed files I donâ€™t really care about that.</p><blockquote><p>Vim è¿˜å†…ç½®äº†è„šæœ¬è¯­è¨€ vimscriptï¼Œå¾ˆå¥½ç”¨çš„å¸®åŠ©ç³»ç»Ÿï¼Œè¿™äº› vi éƒ½æ²¡æœ‰ã€‚</p></blockquote><p>You can edit files over network connections like ssh ftp http. I could say how that would be useful, but Iâ€™ve never wanted or had to do that, and then them also provides a graphical user interface. Usually you open this up using Gvim for graphical Vim, and that provides mouse integration, again, things I donâ€™t care about. One of the main reasons I use Vim is for speed, and not having to touch the mouse, so itâ€™s kind of silly to for me to get excited about that kind of <code>stuff</code>, okay So so thatâ€™s the kind of the differences between Vim and Vi and why everybody uses Vim most computers now.</p><blockquote><p>vim å¯ä»¥é€šè¿‡ç½‘ç»œè¿æ¥æ¥ç¼–è¾‘æ–‡ä»¶ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† GUI ç•Œé¢ï¼Œå¯ä»¥ä½¿ç”¨é¼ æ ‡æ¥æ“ä½œã€‚<br>ä¸è¿‡æˆ‘å¯¹è¿™ä¸ªå¹¶ä¸æ„Ÿå…´è¶£ï¼Œä½¿ç”¨ vim çš„ä¸»è¦åŸå› å°±æ˜¯å› ä¸ºé€Ÿåº¦ï¼Œä¸éœ€è¦åœ¨å»è§¦æ‘¸é¼ æ ‡äº†ï¼ˆè¿™ç¡®å®ä¹Ÿæ˜¯å¤§éƒ¨åˆ†äººä½¿ç”¨ vim çš„åŸå› ï¼‰</p></blockquote><h1 id="ç”Ÿè¯"><a href="#ç”Ÿè¯" class="headerlink" title="ç”Ÿè¯"></a>ç”Ÿè¯</h1><p>Itâ€™s so old it looks likeÂ <code>crap</code>:  å®ƒå·²ç»å¾ˆè€äº†ï¼Œçœ‹èµ·æ¥æ˜¯åƒåœ¾ã€‚<br><code>crap</code>:<br><img src="https://s2.loli.net/2023/10/03/3RZontYrVcDTFGq.png" alt="image.png"></p><p>if youâ€™re going to learn any editor, vim is a pretty goodÂ <code>investment</code>ï¼š<br>å¦‚æœä½ æƒ³å­¦ä¹ ä¸€ä¸ªç¼–è¾‘å™¨ï¼ŒVim æ˜¯ä¸€ä¸ªä¸é”™çš„æŠ•èµ„ã€‚<br><code>investment</code>:<br><img src="https://s2.loli.net/2023/10/03/PjR97l2iYNLtU3g.png" alt="image.png"></p><p>IÂ <code>definitely</code>Â canâ€™t do this without stopping<br>æˆ‘ç»å¯¹ä¸èƒ½ä¸åœä¸‹æ¥<br><code>definitely</code>:<br><img src="https://s2.loli.net/2023/10/03/saTHywQgdti5ePA.png" alt="image.png"></p><p>let me know how you do, because Iâ€™mÂ <code>curious</code>:<br>å‘Šè¯‰æˆ‘ä½ æ˜¯æ€ä¹ˆåšçš„ï¼Œæˆ‘å¾ˆå¥½å¥‡ã€‚<br><code>curious</code><br><img src="https://s2.loli.net/2023/10/03/vWz9ZR6MdLVSrUu.png" alt="image.png"></p><p>You needÂ <code>barely</code>Â no equipment.<br>ä½ å‡ ä¹ä¸éœ€è¦è®¾å¤‡<br><code>barely</code><br><img src="https://s2.loli.net/2023/10/03/9rcKYjITGQgUB4n.png" alt="image.png"></p><p>I donâ€™t have all this <code>stuff</code> memorized:<br>æˆ‘æ²¡æœ‰è®°ä½æ‰€æœ‰è¿™äº›ä¸œè¥¿<br><code>stuff</code><br><img src="https://s2.loli.net/2023/10/03/nP8SpO2DTdHLj31.png" alt="image.png"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/03/kheL1o68m2IyXbU.png&quot; alt=&quot;why-use-vim-01.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘è¿™æ®µæ—¶é—´åœ¨å­¦è‹±è¯­ï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰ç½‘å‹æ¨èå¯ä»¥å¬è‹±æ–‡æ’­å®¢æé«˜å¬åŠ›æ°´å¹³ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¥½æˆ‘è‡ªå·±ä¹Ÿæœ‰å¬æ’­å®¢çš„ä¹ æƒ¯ï¼Œåªä¸è¿‡å‡ ä¹éƒ½æ˜¯ä¸­æ–‡ï¼Œä½†ç°åœ¨æˆ‘å·²ç»å°è¯•å¬äº†ä¸€æ®µæ—¶é—´çš„è‹±æ–‡æ’­å®¢ï¼Œè§‰å¾—æ•ˆæœè¿˜ä¸é”™ã€‚&lt;/p&gt;
&lt;p&gt;å¤§éƒ¨åˆ†éƒ½æ˜¯å’Œ IT ç›¸å…³çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸€äº›å…³é”®è¯è¿˜èƒ½å¬æ‡‚ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è‡ªå·±çš„æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œå¦‚æœæ˜¯ä¸€æ¬¡å¬ä¸æ‡‚æˆ‘å°±ä¼šåå¤æ”¶å¬ã€‚&lt;br&gt;è§†é¢‘ç‰ˆï¼š&lt;/p&gt;
&lt;iframe src=&quot;//player.bilibili.com/player.html?aid=961634958&amp;bvid=BV1TH4y1Z77L&amp;cid=1287992721&amp;p=1&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;&gt; &lt;/iframe&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Podcasts" scheme="http://crossoverjie.top/categories/OB/Podcasts/"/>
    
    
    <category term="English" scheme="http://crossoverjie.top/tags/English/"/>
    
  </entry>
  
  <entry>
    <title>k8så…¥é—¨åˆ°å®æˆ˜-åº”ç”¨é…ç½®</title>
    <link href="http://crossoverjie.top/2023/09/26/ob/k8s-configmap/"/>
    <id>http://crossoverjie.top/2023/09/26/ob/k8s-configmap/</id>
    <published>2023-09-26T06:20:33.000Z</published>
    <updated>2023-09-26T13:24:40.137Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/09/26/b9N2AufHMpqWRKs.png" alt="ConfigMap.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨å‰é¢<a href="https://crossoverjie.top/categories/k8s/">ä¸‰èŠ‚ä¸­</a>å·²ç»è®²åˆ°å¦‚ä½•å°†æˆ‘ä»¬çš„åº”ç”¨éƒ¨ç½²åˆ° k8s é›†ç¾¤å¹¶æä¾›å¯¹å¤–è®¿é—®çš„èƒ½åŠ›ï¼Œxç°åœ¨å¯ä»¥æ»¡è¶³åŸºæœ¬çš„åº”ç”¨å¼€å‘éœ€æ±‚äº†ã€‚</p><p>ç°åœ¨æˆ‘ä»¬éœ€è¦æ›´è¿›ä¸€æ­¥ï¼Œä½¿ç”¨ k8s æä¾›çš„ä¸€äº›å…¶ä»–å¯¹è±¡æ¥æ ‡å‡†åŒ–æˆ‘çš„åº”ç”¨å¼€å‘ã€‚<br>é¦–å…ˆå°±æ˜¯ <code>ConfigMap</code>ï¼Œä»å®ƒçš„åå­—ä¹Ÿå¯ä»¥çœ‹å‡ºè¿™æ˜¯ç”¨äºç®¡ç†é…ç½®çš„å¯¹è±¡ã€‚</p><span id="more"></span><h1 id="ConfigMap"><a href="#ConfigMap" class="headerlink" title="ConfigMap"></a>ConfigMap</h1><p>ä¸ç®¡æˆ‘ä»¬ä¹‹å‰æ˜¯åš <code>Java</code>ã€<code>Go</code> è¿˜æ˜¯ <code>Python</code> å¼€å‘éƒ½ä¼šä½¿ç”¨åˆ°é…ç½®æ–‡ä»¶ï¼Œè€Œ <code>ConfigMap</code> çš„ä½œç”¨å¯ä»¥å°†æˆ‘ä»¬åŸæœ¬å†™åœ¨é…ç½®æ–‡ä»¶é‡Œçš„å†…å®¹è½¬å­˜åˆ° <code>k8s</code> ä¸­ï¼Œç„¶åå’Œæˆ‘ä»¬çš„ <code>Container</code> è¿›è¡Œç»‘å®šã€‚</p><h2 id="å­˜å‚¨åˆ°ç¯å¢ƒå˜é‡"><a href="#å­˜å‚¨åˆ°ç¯å¢ƒå˜é‡" class="headerlink" title="å­˜å‚¨åˆ°ç¯å¢ƒå˜é‡"></a>å­˜å‚¨åˆ°ç¯å¢ƒå˜é‡</h2><p>ç»‘å®šçš„ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯å°†é…ç½®ç›´æ¥å†™å…¥åˆ°ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œæˆ‘å…ˆå®šä¹‰ä¸€ä¸ª <code>ConfigMap</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-configmap</span>  </span><br><span class="line"><span class="attr">data:</span>  </span><br><span class="line">  <span class="attr">PG_URL:</span> <span class="string">&quot;postgres://postgres:postgres@localhost:5432/postgres?sslmode=disable&quot;</span></span><br></pre></td></tr></table></figure><p>é‡ç‚¹æ˜¯ <code>data</code> éƒ¨åˆ†ï¼Œå­˜å‚¨çš„æ˜¯ä¸€ä¸ª <code>KV</code> ç»“æ„çš„æ•°æ®ï¼Œè¿™é‡Œå­˜å‚¨çš„æ˜¯ä¸€ä¸ªæ•°æ®åº“è¿æ¥ã€‚</p><blockquote><p>éœ€è¦æ³¨æ„ï¼ŒKV çš„å¤§å°ä¸èƒ½è¶…è¿‡ 1MB</p></blockquote><p>æ¥ç€å¯ä»¥åœ¨å®¹å™¨å®šä¹‰ä¸­ç»‘å®šè¿™ä¸ª <code>ConfigMap</code> çš„æ‰€æœ‰ <code>KV</code> åˆ°å®¹å™¨çš„ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define all the ConfigMap&#x27;s data as container environment variables </span></span><br><span class="line"><span class="attr">envFrom:</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">configMapRef:</span>  </span><br><span class="line">      <span class="attr">name:</span> <span class="string">k8s-combat-configmap</span></span><br></pre></td></tr></table></figure><p>æˆ‘å°† <code>ConfigMap</code> çš„å®šä¹‰ä¹Ÿæ”¾åœ¨äº†åŒä¸€ä¸ª <a href="https://github.com/crossoverJie/k8s-combat/blob/main/deployment/deployment.yaml">deployment</a> ä¸­ï¼Œç›´æ¥ apply:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ k apply -f deployment/deployment.yaml</span><br><span class="line">deployment.apps/k8s-combat created</span><br><span class="line">configmap/k8s-combat-configmap created</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ <code>ConfigMap</code> ä¹Ÿä¼šè¢«åˆ›å»ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â¯ k get configmap</span><br><span class="line">NAME                   DATA   AGE</span><br><span class="line">k8s-combat-configmap   1      3m17s</span><br><span class="line"></span><br><span class="line">â¯ k describe configmap k8s-combat-configmap</span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">PG_URL:</span><br><span class="line">----</span><br><span class="line">postgres://postgres:postgres@localhost:5432/postgres?sslmode=disable</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°åˆšæ‰å£°æ˜çš„é…ç½®ä¿¡æ¯ã€‚</p><hr><p>åŒæ—¶æˆ‘åœ¨ä»£ç ä¸­ä¹Ÿè¯»å–äº†è¿™ä¸ªç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http.HandleFunc(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;  </span><br><span class="line">   name, _ := os.Hostname()  </span><br><span class="line">   url := os.Getenv(<span class="string">&quot;PG_URL&quot;</span>)   </span><br><span class="line">   fmt.Fprint(w, fmt.Sprintf(<span class="string">&quot;%s-%s&quot;</span>, name, url))  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è®¿é—®è¿™ä¸ªæ¥å£ä¾¿èƒ½æ‹¿åˆ°è¿™ä¸ªç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-combat-7b987bb496-pqt9s:/# curl http://127.0.0.1:8081</span><br><span class="line">k8s-combat-7b987bb496-pqt9s-postgres://postgres:postgres@localhost:5432/postgres?sslmode=disable</span><br><span class="line"></span><br><span class="line">root@k8s-combat-7b987bb496-pqt9s:/# echo $PG_URL</span><br><span class="line">postgres://postgres:postgres@localhost:5432/postgres?sslmode=disable</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨åˆ°æ–‡ä»¶"><a href="#å­˜å‚¨åˆ°æ–‡ä»¶" class="headerlink" title="å­˜å‚¨åˆ°æ–‡ä»¶"></a>å­˜å‚¨åˆ°æ–‡ä»¶</h2><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦å°†è¿™äº›é…ç½®å­˜å‚¨åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚åœ¨ Java ä¸­å¯ä»¥ä½¿ç”¨ <code>spring</code> è¯»å–ï¼Œ<code>Go</code> ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>configor</code> è¿™äº›ç¬¬ä¸‰æ–¹åº“æ¥è¯»å–ï¼Œæ‰€æœ‰é…ç½®éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä¹Ÿæ›´æ–¹ä¾¿ç»´æŠ¤ã€‚</p><p><img src="https://s2.loli.net/2023/09/26/g2IhktH7iwWb8LT.png" alt="image.png"><br>åœ¨ <code>ConfigMap</code> ä¸­æ–°å¢äº†ä¸€ä¸ª <code>key:APP</code> å­˜æ”¾äº†ä¸€ä¸ª <code>yaml</code> æ ¼å¼çš„æ•°æ®ï¼Œç„¶ååœ¨å®¹å™¨ä¸­ä½¿ç”¨ <code>volumes</code> å’Œ <code>volumeMounts</code> å°†æ•°æ®æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„æŒ‡å®šè·¯å¾„<code>/go/bin/app.yaml</code></p><p>apply ä¹‹åæˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨ä¸­æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-combat-7b987bb496-pqt9s:/# cat /go/bin/app.yaml</span><br><span class="line">name: k8s-combat</span><br><span class="line">pulsar:</span><br><span class="line">  url: &quot;pulsar://localhost:6650&quot;</span><br><span class="line">  token: &quot;abc&quot;</span><br></pre></td></tr></table></figure><p>é…ç½®å·²ç»æˆåŠŸæŒ‚è½½åˆ°äº†è¿™ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨ä»£ç ä¸­è¯»å–è¿™äº›æ•°æ®ã€‚</p><h1 id="Secret"><a href="#Secret" class="headerlink" title="Secret"></a>Secret</h1><p>å¯ä»¥çœ‹åˆ° <code>ConfigMap</code> ä¸­æ˜¯æ˜æ–‡å­˜å‚¨æ•°æ®çš„ï¼›</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k describe configmap k8s-combat-configmap</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç›´æ¥æŸ¥çœ‹ã€‚</p><p>å¯¹ä¸€äº›æ•æ„Ÿæ•°æ®å°±ä¸å¤Ÿç”¨äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Secret</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-secret</span>  </span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span>  </span><br><span class="line"><span class="attr">data:</span>  </span><br><span class="line">  <span class="attr">PWD:</span> <span class="string">YWJjCg==</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">env:</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">PG_PWD</span>  </span><br><span class="line">    <span class="attr">valueFrom:</span>  </span><br><span class="line">      <span class="attr">secretKeyRef:</span>  </span><br><span class="line">        <span class="attr">name:</span> <span class="string">k8s-combat-secret</span>  </span><br><span class="line">        <span class="attr">key:</span> <span class="string">PWD</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘æ–°å¢äº†ä¸€ä¸ª <code>Secret</code> ç”¨äºå­˜å‚¨å¯†ç ï¼Œå¹¶åœ¨ <code>container</code> ä¸­ä¹Ÿå°†è¿™ä¸ª <code>key</code> å†™å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ echo &#x27;abc&#x27; | base64</span><br><span class="line">YWJjCg==</span><br></pre></td></tr></table></figure><p><code>Secret</code> ä¸­çš„æ•°æ®éœ€è¦ä½¿ç”¨ <code>base64</code> è¿›è¡Œç¼–ç ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå­˜å‚¨çš„æ˜¯ abc.</p><p>apply ä¹‹åæˆ‘ä»¬å†æŸ¥çœ‹è¿™ä¸ª <code>Secret</code> æ˜¯ä¸èƒ½ç›´æ¥æŸ¥çœ‹åŸå§‹æ•°æ®çš„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â¯ k describe secret k8s-combat-secret</span><br><span class="line">Name:         k8s-combat-secret</span><br><span class="line">Type:  Opaque</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">PWD:  4 bytes</span><br></pre></td></tr></table></figure><p><code>Secret</code> ç›¸æ¯” <code>ConfigMap</code> å¤šäº†ä¸€ä¸ª <code>Type</code> é€‰é¡¹ã€‚<br><img src="https://s2.loli.net/2023/09/26/G25TRcSzCbIVDQ3.png"></p><p>æˆ‘ä»¬ç°é˜¶æ®µåœ¨åº”ç”¨ä¸­ç”¨çš„æœ€å¤šçš„å°±æ˜¯è¿™é‡Œçš„ <code>Opaque</code>ï¼Œå…¶ä»–çš„æš‚æ—¶è¿˜ç”¨ä¸ä¸Šã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ç ”å‘äººå‘˜åŸºæœ¬ä¸Šæ˜¯ä¸ä¼šç›´æ¥æ¥è§¦ <code>ConfigMap</code>ï¼Œä¸€èˆ¬ä¼šç»™å¼€å‘è€…åœ¨ç®¡ç†å°æä¾›ç»´æŠ¤é…ç½®çš„é¡µé¢è¿›è¡Œ CRUDã€‚</p><p>ç”±äº <code>ConfigMap</code> ä¾èµ–äº k8s ä¸æˆ‘ä»¬åº”ç”¨çš„è¯­è¨€æ— å…³ï¼Œæ‰€ä»¥ä¸€äº›é«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚å®æ—¶æ›´æ–°å°±æ— æ³•å®ç°ï¼Œæ¯æ¬¡ä¿®æ”¹åéƒ½å¾—é‡å¯åº”ç”¨æ‰èƒ½ç”Ÿæ•ˆã€‚</p><p>ç±»ä¼¼äº Java ä¸­å¸¸è§çš„é…ç½®ä¸­å¿ƒï¼š<code>Apollo,Nacos</code> ä½¿ç”¨ä¸Šä¼šæœ‰ä¸å°çš„åŒºåˆ«ï¼Œä½†è¿™äº›æ˜¯åº”ç”¨è¯­è¨€å¼ºç»‘å®šçš„ï¼Œå¦‚æœä¸šåŠ¡å¯¹è¿™äº›é…ç½®ä¸­å¿ƒç‰¹æ€§æœ‰å¼ºçƒˆéœ€æ±‚çš„è¯ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚</p><p>ä½†å¦‚æœå›¢é˜Ÿæœ¬èº«å°±æ˜¯å¤šè¯­è¨€ç ”å‘ï¼Œæƒ³è¦é™ä½è¿ç»´å¤æ‚åº¦ <code>ConfigMap</code> è¿˜æ˜¯ä¸äºŒçš„é€‰æ‹©ã€‚</p><p>ä¸‹ä¸€ç« èŠ‚ä¼šæ›´æ–°å¤§å®¶éƒ½å¾ˆæ„Ÿå…´è¶£çš„æœåŠ¡ç½‘æ ¼ <code>Istio</code>ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¤šå¤šç‚¹èµè½¬å‘ğŸ™ğŸ»ã€‚</p><p>æœ¬æ–‡çš„æ‰€æœ‰æºç å’Œèµ„æºæ–‡ä»¶åœ¨è¿™é‡Œå¯ä»¥è®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/26/b9N2AufHMpqWRKs.png&quot; alt=&quot;ConfigMap.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;åœ¨å‰é¢&lt;a href=&quot;https://crossoverjie.top/categories/k8s/&quot;&gt;ä¸‰èŠ‚ä¸­&lt;/a&gt;å·²ç»è®²åˆ°å¦‚ä½•å°†æˆ‘ä»¬çš„åº”ç”¨éƒ¨ç½²åˆ° k8s é›†ç¾¤å¹¶æä¾›å¯¹å¤–è®¿é—®çš„èƒ½åŠ›ï¼Œxç°åœ¨å¯ä»¥æ»¡è¶³åŸºæœ¬çš„åº”ç”¨å¼€å‘éœ€æ±‚äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬éœ€è¦æ›´è¿›ä¸€æ­¥ï¼Œä½¿ç”¨ k8s æä¾›çš„ä¸€äº›å…¶ä»–å¯¹è±¡æ¥æ ‡å‡†åŒ–æˆ‘çš„åº”ç”¨å¼€å‘ã€‚&lt;br&gt;é¦–å…ˆå°±æ˜¯ &lt;code&gt;ConfigMap&lt;/code&gt;ï¼Œä»å®ƒçš„åå­—ä¹Ÿå¯ä»¥çœ‹å‡ºè¿™æ˜¯ç”¨äºç®¡ç†é…ç½®çš„å¯¹è±¡ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/k8s/"/>
    
    
    <category term="ConfigMap" scheme="http://crossoverjie.top/tags/ConfigMap/"/>
    
  </entry>
  
  <entry>
    <title>Go è¯­è¨€å²è¯—çº§æ›´æ–°-å¾ªç¯Bugä¿®å¤</title>
    <link href="http://crossoverjie.top/2023/09/24/ob/go-loop-fix/"/>
    <id>http://crossoverjie.top/2023/09/24/ob/go-loop-fix/</id>
    <published>2023-09-24T10:05:25.000Z</published>
    <updated>2023-09-24T11:45:54.302Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/09/24/rU7IujkPWX1TRQM.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å‰ä¸¤å¤© <code>Golang</code> çš„å®˜æ–¹åšå®¢æ›´æ–°äº†ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://go.dev/blog/loopvar-preview">Fixing For Loops in Go 1.22</a></p><p>çœ‹è¿™ä¸ªæ ‡é¢˜çš„å°±æ˜¯ä¿®å¤äº† Go å¾ªç¯çš„ bugï¼Œè¿™çœŸçš„æ˜¯å²è¯—çº§çš„æ›´æ–°ï¼›æˆ‘èº«è¾¹æ¥è§¦åˆ°çš„å¤§éƒ¨åˆ† Go å¼€å‘è€…éƒ½çŠ¯è¿‡è¿™æ ·çš„é”™è¯¯ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±ï¼Œæ‰€ä»¥å‰ä¸¤å¹´æˆ‘ä¹Ÿå†™è¿‡ç±»ä¼¼çš„åšå®¢ï¼š<br><a href="https://crossoverjie.top/2021/12/28/go/for-mistake/">ç®€å•çš„ for å¾ªç¯ä¹Ÿä¼šè¸©çš„å‘</a></p><span id="more"></span><p>å…ˆæ¥ç®€å•å›é¡¾ä¸‹ä½¿ç”¨ä½¿ç”¨ for å¾ªç¯ä¼šç¢°åˆ°çš„é—®é¢˜ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list := []*Demo&#123;&#123;<span class="string">&quot;a&quot;</span>&#125;, &#123;<span class="string">&quot;b&quot;</span>&#125;&#125;  </span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> list &#123;  </span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">fmt.Println(<span class="string">&quot;name=&quot;</span>+v.Name)  </span><br><span class="line">&#125;()  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">type</span> Demo <span class="keyword">struct</span> &#123;  </span><br><span class="line">Name <span class="type">string</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¢„æœŸçš„ç»“æœåº”è¯¥æ˜¯æ‰“å° <code>a,b</code>ï¼Œä½†å®é™…æ‰“å°çš„å´æ˜¯<code>b,b</code>ã€‚</p><p><img src="https://s2.loli.net/2023/09/24/I98GMk5efvNUDbT.png" alt="image.png"></p><p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1619047">Letâ€™s Encrypt: CAA Rechecking bug</a><br>ç±»ä¼¼çš„é—®é¢˜è¿ <code>mozilla</code> å›¢é˜Ÿä¹Ÿæ²¡èƒ½å¹¸å…ï¼Œæ‰€ä»¥ä¹Ÿç¡®å®æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„é—®é¢˜ï¼Œè¿™æ ·çš„å†™æ³•ç¬¦åˆå¤§éƒ¨åˆ†çš„å¼€å‘è€…çš„ç›´è§‰ï¼Œæ¯•ç«Ÿå…¶ä»–è¯­è¨€è¿™ä¹ˆä½¿ç”¨ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚</p><p>å½“ç„¶åœ¨ç°é˜¶æ®µè¦è§£å†³ä¹Ÿå¾ˆç®€å•ï¼Œè¦ä¹ˆå°±æ˜¯åœ¨ä½¿ç”¨ä¹‹å‰å…ˆå¤åˆ¶ä¸€æ¬¡ï¼Œæˆ–è€…ä½¿ç”¨é—­åŒ…ä¼ å‚ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤åˆ¶</span></span><br><span class="line">Â listÂ :=Â []*Demo&#123;&#123;<span class="string">&quot;a&quot;</span>&#125;,Â &#123;<span class="string">&quot;b&quot;</span>&#125;&#125;  </span><br><span class="line">Â <span class="keyword">for</span>Â _,Â vÂ :=Â <span class="keyword">range</span>Â listÂ &#123;  </span><br><span class="line">Â Â temp:=v  </span><br><span class="line">Â Â <span class="keyword">go</span>Â <span class="function"><span class="keyword">func</span><span class="params">()</span></span>Â &#123;  </span><br><span class="line">Â Â Â fmt.Println(<span class="string">&quot;name=&quot;</span>+temp.Name)  </span><br><span class="line">Â Â &#125;()  </span><br><span class="line">Â &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é—­åŒ…</span></span><br><span class="line">Â listÂ :=Â []*Demo&#123;&#123;<span class="string">&quot;a&quot;</span>&#125;,Â &#123;<span class="string">&quot;b&quot;</span>&#125;&#125;  </span><br><span class="line">Â <span class="keyword">for</span>Â _,Â vÂ :=Â <span class="keyword">range</span>Â listÂ &#123;  </span><br><span class="line">Â Â <span class="keyword">go</span>Â <span class="function"><span class="keyword">func</span><span class="params">(tempÂ *Demo)</span></span>Â &#123;  </span><br><span class="line">Â Â Â fmt.Println(<span class="string">&quot;name=&quot;</span>+temp.Name)  </span><br><span class="line">Â Â &#125;(v)  </span><br><span class="line">Â &#125;</span><br></pre></td></tr></table></figure><p>è¿˜å¥½å®˜æ–¹ä¹Ÿæ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼š<br><img src="https://s2.loli.net/2023/09/24/6NTZSijCofypK54.png" alt="image.png"><br>æ‰€ä»¥åœ¨ 1.22 ä¸­æˆ‘ä»¬å¯ä»¥ä¸ç”¨å†å†™è¿™ä¸ª <code>â€¨â€¨â€¨â€¨v:=v</code>è¿™ä¸ªå¤šä½™çš„å¤åˆ¶è¯­å¥äº†ï¼Œä¹Ÿä¸ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬åœ¨ 1.21 ä¸­å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡é¢„è§ˆè¿™ä¸ªç‰¹æ€§:</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ GOEXPERIMENT=loopvar <span class="keyword">go</span> test</span><br><span class="line">name=b</span><br><span class="line">name=a</span><br></pre></td></tr></table></figure><p>åœ¨ 1.22 å‘å¸ƒåå»ºè®®å¤§å®¶éƒ½å¯ä»¥å‡çº§äº†ï¼Œå°†è¿™ç§æ¶å¿ƒçš„ bug æ‰¼æ€åœ¨æ‘‡ç¯®é‡Œã€‚</p><p>1.22 åå¸¦æ¥äº†ä¸€ä¸ªå¥½æ¶ˆæ¯æ˜¯ä»Šåå°‘äº†ä¸€é“é¢è¯•é¢˜ï¼Œåæ¶ˆæ¯æ˜¯åˆæ–°å¢äº†ä¸€ä¸ª 1.22 ç‰ˆæœ¬å¸¦æ¥äº†å“ªäº›å˜åŒ–çš„é¢è¯•é¢˜ğŸ˜‚</p><p>æ›´å¤šè¯¦æƒ…å¯ä»¥å‚çœ‹å®˜æ–¹æ’­å®¢ï¼š<a href="https://go.dev/blog/loopvar-preview">https://go.dev/blog/loopvar-preview</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/24/rU7IujkPWX1TRQM.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å‰ä¸¤å¤© &lt;code&gt;Golang&lt;/code&gt; çš„å®˜æ–¹åšå®¢æ›´æ–°äº†ä¸€ç¯‡æ–‡ç« ï¼š&lt;a href=&quot;https://go.dev/blog/loopvar-preview&quot;&gt;Fixing For Loops in Go 1.22&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;çœ‹è¿™ä¸ªæ ‡é¢˜çš„å°±æ˜¯ä¿®å¤äº† Go å¾ªç¯çš„ bugï¼Œè¿™çœŸçš„æ˜¯å²è¯—çº§çš„æ›´æ–°ï¼›æˆ‘èº«è¾¹æ¥è§¦åˆ°çš„å¤§éƒ¨åˆ† Go å¼€å‘è€…éƒ½çŠ¯è¿‡è¿™æ ·çš„é”™è¯¯ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±ï¼Œæ‰€ä»¥å‰ä¸¤å¹´æˆ‘ä¹Ÿå†™è¿‡ç±»ä¼¼çš„åšå®¢ï¼š&lt;br&gt;&lt;a href=&quot;https://crossoverjie.top/2021/12/28/go/for-mistake/&quot;&gt;ç®€å•çš„ for å¾ªç¯ä¹Ÿä¼šè¸©çš„å‘&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Golang" scheme="http://crossoverjie.top/categories/Golang/"/>
    
    
    <category term="loop" scheme="http://crossoverjie.top/tags/loop/"/>
    
  </entry>
  
  <entry>
    <title>Github commit ç­¾å+åˆå¹¶ Commit</title>
    <link href="http://crossoverjie.top/2023/09/18/ob/git-tips-rebase/"/>
    <id>http://crossoverjie.top/2023/09/18/ob/git-tips-rebase/</id>
    <published>2023-09-18T09:56:51.000Z</published>
    <updated>2023-09-19T06:36:40.881Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/09/18/gCjw9hZx4Y6cPSn.png" alt="Githubçš„ä¸€ä¸ªå¥‡æŠ€æ·«å·§.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å‰æ®µæ—¶é—´ç»™ <code>VictoriaLogs</code> æäº¤äº†ä¸€ä¸ª PRï¼š<br><a href="https://github.com/VictoriaMetrics/VictoriaMetrics/pull/4934">https://github.com/VictoriaMetrics/VictoriaMetrics/pull/4934</a></p><p>æœ¬æ¥ä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼Œåªç­‰åˆå¹¶äº†ï¼Œä½†åœ¨ä¸´é—¨ä¸€è„šçš„æ—¶å€™ç¤¾åŒºç»´æŠ¤äººå‘˜é—®æˆ‘å¯å¦ç»™ <code>git</code> <code>commit</code> åŠ ä¸Šç­¾åã€‚</p><blockquote><p>äºæ˜¯æˆ‘å°±é»˜é»˜çš„è°ƒè¯•åˆ°äº†å‡Œæ™¨å››ç‚¹ğŸ˜­</p></blockquote><p><img src="https://s2.loli.net/2023/09/18/VXhjU9ypuKP1ZWg.png" alt="image.png"></p><span id="more"></span><p>ä»¥å‰æˆ‘ä¹Ÿæ²¡æ€ä¹ˆæ³¨æ„è¿‡è¿™ä¸ªé€‰é¡¹ï¼Œç»è¿‡ <code>Google</code> åå‘ç° <code>Idea</code> åœ¨æäº¤çš„æ—¶å€™å¯ä»¥è‡ªè¡Œè®¾ç½®ã€‚</p><p><img src="https://s2.loli.net/2023/09/18/QdTetRSNG5c3KVr.png" alt="image.png"><br>å½“æˆ‘å‹¾é€‰äº†è¿™ä¸ªæäº¤æ–°çš„ä»£ç åï¼Œä¾ç„¶è¢«å‘ŠçŸ¥æ²¡æœ‰æ­£ç¡®çš„ç­¾åï¼Œè¿™æ—¶æˆ‘æ‰å‘ç°ç†è§£é”™è¯¯äº†ã€‚</p><h1 id="ä¸º-GitHub-çš„æäº¤ç­¾å"><a href="#ä¸º-GitHub-çš„æäº¤ç­¾å" class="headerlink" title="ä¸º GitHub çš„æäº¤ç­¾å"></a>ä¸º GitHub çš„æäº¤ç­¾å</h1><p>ç»“åˆè¿™ä½ç¤¾åŒºå¤§ä½¬ç»™çš„æ–‡æ¡£ï¼Œä»–æ‰€éœ€è¦çš„æ˜¯æ¯æ¬¡æäº¤çš„ä»£ç éƒ½æ˜¯æœ‰ç­¾åçš„ï¼Œç±»ä¼¼äºè¿™æ ·ï¼š<br><img src="https://s2.loli.net/2023/09/18/26vgVMZmNrPCkqo.png" alt="image.png"></p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ <code>GitHub</code> ç°å® <code>Verified</code> è¿™ä¸ªæ ‡ç­¾ï¼Œé‚£å°±éœ€è¦å¯¹ <code>commit</code> æˆ–è€…æ˜¯æ‰“çš„ <code>tag</code> è¿›è¡Œç­¾åã€‚</p><p>è€Œç­¾åçš„æ–¹å¼æœ‰ä¸‰ç§ï¼š<code>GPG</code>, <code>SSH</code>, <code>S/MIME</code>ï¼Œè¿™é‡Œæˆ‘ä»¥ GPG ç­¾åä¸ºä¾‹ï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2023/09/18/HwDIlL94c51Uz3e.png" alt="image.png"></p><p>å…ˆåœ¨<a href="https://www.gnupg.org/download/">https://www.gnupg.org/download/</a>è¿™é‡Œä¸‹è½½å®‰è£… GPG çš„å‘½ä»¤è¡Œç¨‹åºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --full-generate-key</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç”Ÿæˆ keyï¼Œä¹‹åä¼šæ ¹æ®æç¤ºå½•å…¥ä¸€äº›ä¿¡æ¯ï¼ŒåŒ…å«ä½ çš„ ID å’Œé‚®ç®±ï¼Œå»ºè®®éƒ½å’Œ GitHub çš„ ID é‚®ç®±ä¿æŒä¸€è‡´å³å¯ï¼Œç„¶åä¸€è·¯å›è½¦å®Œäº‹ã€‚</p><p>ä¹‹åå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹åˆšæ‰åˆ›å»ºçš„ Keyï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gpg --list-secret-keys --keyid-format=long</span><br><span class="line">------------------------------------</span><br><span class="line">sec   4096R/3AA5C34371567BD2 2016-03-10 [expires: 2017-03-10]</span><br><span class="line">uid                          Hubot &lt;hubot@example.com&gt;</span><br><span class="line">ssb   4096R/4BB6D45482678BE3 2016-03-10</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦å°† <code>3AA5C34371567BD2</code> è¿™ä¸ª Key çš„ ID å­—ç¬¦ä¸²å¤åˆ¶ï¼Œä¹‹åæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --armor --export 3AA5C34371567BD2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Prints the GPG key ID, <span class="keyword">in</span> ASCII armor format</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¼šæ‰“å°å‡ºå…¬é’¥ï¼Œæˆ‘ä»¬å°†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP PUBLIC KEY BLOCK-----</span><br><span class="line">-----END PGP PUBLIC KEY BLOCK-----</span><br></pre></td></tr></table></figure><p>è¿™äº›æ•°æ®å¤åˆ¶åˆ° GitHub çš„ä¸ªäººè®¾ç½®é¡µé¢ï¼š<br><img src="https://s2.loli.net/2023/09/18/zvMgJcqAnRQjYxG.png" alt="image.png"></p><p>æ­¤æ—¶è¿˜æ²¡å®Œï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥æäº¤ä»£ç çš„ä¹Ÿä¸ä¼šæœ‰ <code>Verified</code> çš„æ ‡ç­¾ã€‚</p><p><img src="https://s2.loli.net/2023/09/18/eST5f1Vad4x8Ou7.png" alt="image.png"></p><p>æˆ‘ä»¬è¿˜éœ€è¦æ‰“å¼€ git çš„ config è®¾ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config commit.gpgsign true</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¨å±€æ‰“å¼€</span></span><br><span class="line">git config --global commit.gpgsign true</span><br><span class="line">git commit -S -m &quot;YOUR_COMMIT_MESSAGE&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>è¿™æ ·æäº¤çš„ Commit å°±ä¼šæ‰“ä¸ŠéªŒè¯çš„æ ‡ç­¾äº†ã€‚<br><img src="https://s2.loli.net/2023/09/18/HKcvrfMozC9YEnx.png" alt="image.png"></p><blockquote><p>-S çš„æ•ˆæœå’Œåœ¨ idea ä¸­é€‰ä¸­ Sign-off çš„æ•ˆæœä¸€æ ·ã€‚</p></blockquote><p>å®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰è¯¦ç»†çš„æ­¥éª¤ï¼š<br><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification">https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification</a></p><h1 id="Squash-åˆå¹¶æäº¤"><a href="#Squash-åˆå¹¶æäº¤" class="headerlink" title="Squash åˆå¹¶æäº¤"></a>Squash åˆå¹¶æäº¤</h1><p>ä¸è¿‡åœ¨æˆ‘è¿™ä¸ª <code>PR</code> çš„èƒŒæ™¯ä¸‹è¿˜æœ‰ä¸€ä¸ªæ­¥éª¤æ²¡æœ‰å®Œæˆï¼Œå°±æ˜¯æˆ‘ä¹‹å‰æäº¤çš„ <code>Commit</code> éƒ½æ²¡è¦éªŒè¯ï¼Œæˆ‘éœ€è¦å°†ä»–ä»¬éƒ½åˆå¹¶ä¸ºä¸€ä¸ªéªŒè¯çš„ Commit ç„¶ååœ¨å¼ºåˆ¶æ¨é€ä¸Šå»ï¼Œè¿™æ ·æ•´ä¸ª <code>git log</code> çœ‹èµ·æ¥æ‰è¶³å¤Ÿç®€æ´ã€‚</p><p>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼Œåªæœ‰ä¸€ä¸ª Commit å­˜åœ¨ã€‚<br><img src="https://s2.loli.net/2023/09/18/1OzjkDwhdWuJS8n.png"></p><p>è¿™æ—¶å€™å°±å¾—éœ€è¦ git rebase å‡ºé©¬äº†ã€‚</p><p><img src="https://s2.loli.net/2023/09/18/vaOPw3gQTtVSoxC.png" alt="image.png"><br>ä»¥åˆšæ‰æµ‹è¯•çš„è¿™ä¸¤ä¸ªæäº¤ä¸ºä¾‹ï¼Œæˆ‘éœ€è¦å°†ä»–ä»¬åˆå¹¶ä¸ºä¸€ä¸ªæäº¤ã€‚</p><p>æˆ‘ä»¬å…ˆä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~N</span><br><span class="line">git rebase -i HEAD~2</span><br></pre></td></tr></table></figure><p>N å°±æ˜¯æˆ‘ä»¬éœ€è¦åˆå¹¶å‡ ä¸ªæäº¤ï¼Œåœ¨æˆ‘è¿™é‡Œå°±æ˜¯ 2.</p><p><img src="https://s2.loli.net/2023/09/18/PN6nUE3BVu48TWF.png" alt="image.png"><br>æˆ‘ä»¬éœ€è¦å°†é™¤äº†ç¬¬ä¸€ä¸ª commit ä¹‹å¤–çš„éƒ½ä¿®æ”¹ä¸º sï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢æ³¨é‡Šé‡Œçš„ <code>squash</code> çš„ç®€å†™ï¼ˆå‹ç¼©çš„æ„æ€ï¼‰ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ª vim çš„äº¤äº’ç¼–è¾‘æ¨¡å¼ï¼Œç¼–è¾‘å®Œæˆä¹‹åä¿å­˜é€€å‡ºã€‚</p><blockquote><p>ä¸ä¼šè¿˜æœ‰ç¨‹åºå‘˜ä¸çŸ¥é“å¦‚ä½•ä¿å­˜ vim é€€å‡ºå§ğŸ•ã€‚</p></blockquote><p>ä¿å­˜ååˆä¼šå¼¹å‡ºä¸€ä¸ªç¼–è¾‘é¡µé¢ï¼Œè®©æˆ‘ä»¬å¡«å†™è¿™æ¬¡å‹ç¼©ä¹‹åçš„æäº¤è®°å½•ï¼Œé»˜è®¤ä¼šå¸®æˆ‘ç”Ÿæˆå¥½ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å…¨éƒ¨åˆ æ‰åé‡å†™ã€‚</p><p><img src="https://s2.loli.net/2023/09/18/YCx5ablcrBmsdiD.png" alt="image.png"></p><p>æˆ‘è¿™é‡Œå°±ç›´æ¥ä½¿ç”¨å®ƒç”Ÿæˆå¥½çš„å°±å¯ä»¥äº†ï¼Œä¾ç„¶è¿˜æ˜¯ä¿å­˜é€€å‡ºã€‚</p><p>æœ€åå†å¼ºè¡Œæ¨é€åˆ°æˆ‘æ‰€åœ¨çš„åˆ†æ”¯å³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin test-rebase -f</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªåˆ†æ”¯çš„æäº¤é¡µé¢ä¹Ÿåªä¼šçœ‹åˆ°åˆšæ‰å¼ºè¡Œæ¨é€çš„è®°å½•äº†ï¼Œåˆšæ‰çš„ä¸¤ä¸ªæäº¤å·²ç»åˆå¹¶ä¸ºè¿™ä¸€ä¸ªäº†ã€‚</p><p><img src="https://s2.loli.net/2023/09/18/ULO3kxgSYErPqle.png" alt="image.png"></p><h1 id="å°†ä¿®æ”¹æäº¤åˆ°å…¶ä»–åˆ†æ”¯"><a href="#å°†ä¿®æ”¹æäº¤åˆ°å…¶ä»–åˆ†æ”¯" class="headerlink" title="å°†ä¿®æ”¹æäº¤åˆ°å…¶ä»–åˆ†æ”¯"></a>å°†ä¿®æ”¹æäº¤åˆ°å…¶ä»–åˆ†æ”¯</h1><p>æœ‰æ—¶å€™çº¿ä¸Šå‡ºç°é—®é¢˜éœ€è¦é©¬ä¸Šä¿®å¤çš„æ—¶å€™ï¼Œæˆ‘ä¼šä¸ä¸‹æ„è¯†çš„ç›´æ¥å°±å¼€å§‹æ”¹äº†ï¼Œç­‰çœŸçš„æäº¤ä»£ç è¢«æ‹’çš„æ—¶å€™æ‰å‘ç°æ˜¯åœ¨ä¸»åˆ†æ”¯ä¸Šã€‚</p><p>æˆ‘è§‰å¾—æœ‰ç±»ä¼¼éœ€æ±‚çš„åœºæ™¯è¿˜ä¸å°‘ï¼Œè¿™æ—¶å€™å°±éœ€è¦å°†å½“å‰åˆ†æ”¯çš„ä¿®æ”¹æäº¤åˆ°ä¸€ä¸ªæ–°çš„åˆ†æ”¯ä¸Šï¼Œæ€»ä¸èƒ½ revert ä¹‹åé‡æ–°å†å†™å§ã€‚</p><p>æ‰€ä»¥é€šå¸¸æˆ‘çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºä¸€ä¸ªåˆ†æ”¯</span></span><br><span class="line">git branch newbranch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å½“å‰åˆ†æ”¯çš„ä¿®æ”¹ä¸´æ—¶ä¿å­˜åˆ°æš‚ç¼“åŒºï¼ŒåŒæ—¶å›æ»šå½“å‰åˆ†æ”¯ã€‚</span></span><br><span class="line">git stash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯</span></span><br><span class="line">git checkout newbranch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä»æš‚ç¼“åŒºä¸­å–å‡ºåˆšæ‰çš„ä¿®æ”¹</span></span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¹‹å‰åˆ†æ”¯çš„ä¿®æ”¹å°±ä¼šåŒæ­¥åˆ°æ–°çš„åˆ†æ”¯ä¸Šäº†ï¼Œå€Ÿç€ä¾¿åœ¨æ–°çš„åˆ†æ”¯ä¸Šç»§ç»­å¼€å‘äº†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å€Ÿç€è¿™ä¸ªæœºä¼šä¹Ÿäº†è§£äº† <code>rebase</code> çš„éªšæ“ä½œæŒºå¤šçš„ï¼Œä¸è¿‡æˆ‘å¹³æ—¶ç”¨çš„æœ€å¤šçš„è¿˜æ˜¯ <code>merge</code>ï¼Œè¿™ä¸ªå€’æ²¡æœ‰å¥½åä¹‹åˆ†ï¼Œåªè¦åŒç»„çš„å¼€å‘è€…éƒ½è¾¾æˆä¸€è‡´å³å¯ã€‚</p><p>#Blog #Github #Git</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/18/gCjw9hZx4Y6cPSn.png&quot; alt=&quot;Githubçš„ä¸€ä¸ªå¥‡æŠ€æ·«å·§.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å‰æ®µæ—¶é—´ç»™ &lt;code&gt;VictoriaLogs&lt;/code&gt; æäº¤äº†ä¸€ä¸ª PRï¼š&lt;br&gt;&lt;a href=&quot;https://github.com/VictoriaMetrics/VictoriaMetrics/pull/4934&quot;&gt;https://github.com/VictoriaMetrics/VictoriaMetrics/pull/4934&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ¥ä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼Œåªç­‰åˆå¹¶äº†ï¼Œä½†åœ¨ä¸´é—¨ä¸€è„šçš„æ—¶å€™ç¤¾åŒºç»´æŠ¤äººå‘˜é—®æˆ‘å¯å¦ç»™ &lt;code&gt;git&lt;/code&gt; &lt;code&gt;commit&lt;/code&gt; åŠ ä¸Šç­¾åã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;äºæ˜¯æˆ‘å°±é»˜é»˜çš„è°ƒè¯•åˆ°äº†å‡Œæ™¨å››ç‚¹ğŸ˜­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/18/VXhjU9ypuKP1ZWg.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="git" scheme="http://crossoverjie.top/categories/git/"/>
    
    
    <category term="rebase" scheme="http://crossoverjie.top/tags/rebase/"/>
    
  </entry>
  
  <entry>
    <title>k8så…¥é—¨åˆ°å®æˆ˜-ä½¿ç”¨Ingress</title>
    <link href="http://crossoverjie.top/2023/09/15/ob/k8s-Ingress/"/>
    <id>http://crossoverjie.top/2023/09/15/ob/k8s-Ingress/</id>
    <published>2023-09-15T09:13:37.000Z</published>
    <updated>2023-09-24T11:31:04.693Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/09/14/Pe7DWCIS2UMKHQ8.png" alt="ingress.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å‰ä¸¤ç« ä¸­æˆ‘ä»¬å°†åº”ç”¨<a href="https://crossoverjie.top/2023/08/31/ob/k8s-0-start/">éƒ¨ç½²</a>åˆ°äº† k8s ä¸­ï¼ŒåŒæ—¶ä¸åŒçš„æœåŠ¡ä¹‹é—´ä¹Ÿå¯ä»¥é€šè¿‡ <a href="https://crossoverjie.top/2023/09/05/ob/k8s-service/">service</a> è¿›è¡Œè°ƒç”¨ï¼Œç°åœ¨è¿˜æœ‰ä¸€ä¸ªæ­¥éª¤å°±æ˜¯å°†æˆ‘ä»¬çš„åº”ç”¨æš´éœ²åˆ°å…¬ç½‘ï¼Œå¹¶æä¾›åŸŸåçš„è®¿é—®ã€‚</p><p>è¿™ä¸€æ­¥ç±»ä¼¼äºæˆ‘ä»¬ä»¥å‰é…ç½® Nginx å’Œç»‘å®šåŸŸåï¼Œæä¾›è¿™ä¸ªèƒ½åŠ›çš„æœåŠ¡åœ¨ k8s ä¸­æˆä¸º Ingressã€‚</p><p>é€šè¿‡è¿™ä¸ªæè¿°å…¶å®ä¹Ÿèƒ½çœ‹å‡º Ingress æ˜¯åè¿ç»´çš„å·¥ä½œï¼Œä½†ä¹Ÿä¸å¦¨ç¢æˆ‘ä»¬ä½œä¸ºç ”å‘å»äº†è§£è¿™éƒ¨åˆ†çš„å†…å®¹ï¼›äº†è§£æ•´ä¸ªç³»ç»Ÿæ˜¯å¦‚ä½•è¿è½¬çš„ä¹Ÿæ˜¯ç ”å‘åº”è¯¥æŒæ¡çš„æŠ€èƒ½ã€‚</p><span id="more"></span><h1 id="å®‰è£…-Ingress-æ§åˆ¶å™¨"><a href="#å®‰è£…-Ingress-æ§åˆ¶å™¨" class="headerlink" title="å®‰è£… Ingress æ§åˆ¶å™¨"></a>å®‰è£… Ingress æ§åˆ¶å™¨</h1><p>åœ¨æ­£å¼ä½¿ç”¨ Ingress ä¹‹å‰éœ€è¦ç»™ k8s å®‰è£…ä¸€ä¸ª Ingress æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬è¿™é‡Œå®‰è£…å®˜æ–¹æä¾›çš„ Ingress-nginx æ§åˆ¶å™¨ã€‚</p><p>å½“ç„¶è¿˜æœ‰ç¤¾åŒºæˆ–è€…ä¼ä¸šæä¾›çš„å„ç§æ§åˆ¶å™¨ï¼š<br><img src="https://s2.loli.net/2023/09/14/i1ebXQNUjxPkLEZ.png" alt="image.png"></p><p>æœ‰ä¸¤ç§å®‰è£…æ–¹å¼: helm æˆ–è€…æ˜¯ç›´æ¥ apply ä¸€ä¸ªèµ„æºæ–‡ä»¶ã€‚</p><p>å…³äº <code>helm</code> æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚å•ç‹¬è®²è§£ã€‚</p><p>è¿™é‡Œå°±ç›´æ¥ä½¿ç”¨èµ„æºæ–‡ä»¶å®‰è£…å³å¯ï¼Œæˆ‘å·²ç»ä¸Šä¼ åˆ° GitHub å¯ä»¥åœ¨è¿™é‡Œè®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat/blob/main/deployment/ingress-nginx.yaml">https://github.com/crossoverJie/k8s-combat/blob/main/deployment/ingress-nginx.yaml</a></p><p>å…¶å®è¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯ç›´æ¥ä»å®˜æ–¹æä¾›çš„å¤åˆ¶è¿‡æ¥çš„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªè·¯å¾„è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">kubectl</span> <span class="string">apply</span> <span class="string">-f</span> <span class="string">https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/cloud/deploy.yaml</span></span><br></pre></td></tr></table></figure><blockquote><p>yaml æ–‡ä»¶çš„å†…å®¹æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><p>ä¸è¿‡è¦æ³¨æ„å®‰è£…ä¹‹åå¯èƒ½å®¹å™¨çŠ¶æ€ä¸€ç›´å¤„äº Pending çŠ¶æ€ï¼ŒæŸ¥çœ‹å®¹å™¨çš„äº‹ä»¶æ—¶ä¼šå‘ç°é•œåƒæ‹‰å–å¤±è´¥ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k describe pod ingress-nginx-controller-7cdfb9988c-lbcst -n ingress-nginx</span><br></pre></td></tr></table></figure><blockquote><p>describe æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹ k8s å¯¹è±¡è¯¦ç»†ä¿¡æ¯çš„å‘½ä»¤ã€‚</p></blockquote><p>åœ¨åˆšæ‰é‚£ä»½ yaml æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°æœ‰å‡ ä¸ªé•œåƒéœ€è¦æ‹‰å–ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåœ¨æœ¬åœ°æ‰‹åŠ¨æ‹‰å–é•œåƒï¼š<br><img src="https://s2.loli.net/2023/09/14/3IsRe2QWcmjTY41.png" alt="image.png"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry.k8s.io/ingress-nginx/controller:v1.8.2</span><br></pre></td></tr></table></figure><p>å¦‚æœä¾ç„¶æ— æ³•æ‹‰å–ï¼Œå¯ä»¥å°è¯•é…ç½®å‡ ä¸ªå›½å†…é•œåƒæºé•œåƒæ‹‰å–ï¼š</p><p><img src="https://s2.loli.net/2023/09/14/uTNDACSWdPp7BVt.png" alt="image.png"></p><blockquote><p>æˆ‘è¿™é‡Œä½¿ç”¨çš„ docker-desktop è‡ªå¸¦çš„ k8sï¼Œæ¨èè¯»è€…æœ‹å‹ä¹Ÿä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚</p></blockquote><h1 id="åˆ›å»º-Ingress"><a href="#åˆ›å»º-Ingress" class="headerlink" title="åˆ›å»º Ingress"></a>åˆ›å»º Ingress</h1><p>ä½¿ç”¨åˆšæ‰çš„ yaml å®‰è£…æˆåŠŸä¹‹åä¼šåœ¨ <code>ingress-nginx</code> å‘½åç©ºé—´ä¸‹åˆ›å»ºä¸€ä¸ª Podï¼Œé€šè¿‡ get å‘½ä»¤æŸ¥çœ‹çŠ¶æ€ä¸º Running å³ä¸ºå®‰è£…æˆåŠŸã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">k get pod -n ingress-nginx</span></span><br><span class="line">NAME                            READY   STATUS    RESTARTS      AGE</span><br><span class="line">ingress-nginx-controller-7cdf   1/1     Running   2 (35h ago)   3d</span><br></pre></td></tr></table></figure><blockquote><p>Namespace ä¹Ÿæ˜¯ k8s å†…ç½®çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå¯¹èµ„æºè¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥ä½¿ç”¨å®ƒæ¥åŒºåˆ†å„ä¸ªä¸åŒçš„ç¯å¢ƒï¼Œæ¯”å¦‚ dev&#x2F;test&#x2F;prod ç­‰ï¼Œä¸åŒå‘½åç©ºé—´ä¸‹çš„èµ„æºä¸ä¼šäº’ç›¸å¹²æ‰°ï¼Œä¸”ç›¸äº’ç‹¬ç«‹ã€‚</p></blockquote><p>ä¹‹åä¾¿å¯ä»¥åˆ›å»º Ingress èµ„æºäº†ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-ingress</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">ingressClassName:</span> <span class="string">nginx</span>  </span><br><span class="line">  <span class="attr">rules:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">www.service1.io</span>  </span><br><span class="line">      <span class="attr">http:</span>  </span><br><span class="line">        <span class="attr">paths:</span>  </span><br><span class="line">          <span class="bullet">-</span> <span class="attr">backend:</span>  </span><br><span class="line">              <span class="attr">service:</span>  </span><br><span class="line">                <span class="attr">name:</span> <span class="string">k8s-combat-service</span>  </span><br><span class="line">                <span class="attr">port:</span>  </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8081</span>  </span><br><span class="line">            <span class="attr">path:</span> <span class="string">/</span>  </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">www.service2.io</span>  </span><br><span class="line">      <span class="attr">http:</span>  </span><br><span class="line">        <span class="attr">paths:</span>  </span><br><span class="line">          <span class="bullet">-</span> <span class="attr">backend:</span>  </span><br><span class="line">              <span class="attr">service:</span>  </span><br><span class="line">                <span class="attr">name:</span> <span class="string">k8s-combat-service-2</span>  </span><br><span class="line">                <span class="attr">port:</span>  </span><br><span class="line">                  <span class="attr">number:</span> <span class="number">8081</span>  </span><br><span class="line">            <span class="attr">path:</span> <span class="string">/</span>  </span><br><span class="line">            <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br></pre></td></tr></table></figure><p>çœ‹è¿™ä¸ªå†…å®¹ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œåˆ›å»ºäº†ä¸€ä¸ª <code>Ingress</code> çš„å¯¹è±¡ï¼Œå…¶ä¸­çš„é‡ç‚¹å°±æ˜¯è¿™é‡Œçš„è§„åˆ™æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚</p><blockquote><p>åœ¨ k8s ä¸­ä»Šåè¿˜ä¼šæ¥è§¦åˆ°å„ç§ä¸åŒçš„ Kind</p></blockquote><p>è¿™é‡Œçš„ <code>ingressClassName: nginx</code>   ä¹Ÿæ˜¯åœ¨åˆšå¼€å§‹å®‰è£…çš„æ§åˆ¶å™¨é‡Œå®šä¹‰çš„åå­—ï¼Œç”±è¿™ä¸ªèµ„æºå®šä¹‰ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">IngressClass</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">labels:</span>  </span><br><span class="line">    <span class="attr">app.kubernetes.io/component:</span> <span class="string">controller</span>  </span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">ingress-nginx</span>  </span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">ingress-nginx</span>  </span><br><span class="line">    <span class="attr">app.kubernetes.io/part-of:</span> <span class="string">ingress-nginx</span>  </span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="number">1.8</span><span class="number">.2</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure><p>å’±ä»¬è¿™ä¸ªè§„åˆ™å¾ˆç®€å•ï¼Œå°±æ˜¯å°†ä¸¤ä¸ªä¸åŒçš„åŸŸåè·¯ç”±åˆ°ä¸¤ä¸ªä¸åŒçš„ serviceã€‚</p><blockquote><p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•åˆåˆ›å»ºäº†ä¸€ä¸ª <code>k8s-combat-service-2</code> çš„ serviceï¼Œå’Œ <code>k8s-combat-service</code> æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ”¹äº†ä¸ªåå­—è€Œå·²ã€‚</p></blockquote><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p>ä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘åœ¨åº”ç”¨é•œåƒä¸­æ–°å¢äº†ä¸€ä¸ªæ¥å£ï¼Œç”¨äºè¿”å›å½“å‰ Pod çš„ hostnameã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http.HandleFunc(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;  </span><br><span class="line">   name, _ := os.Hostname()  </span><br><span class="line">   fmt.Fprint(w, name)  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘å®é™…å¹¶æ²¡æœ‰ <code>www.service1.io/www.service2.io</code> è¿™ä¸¤ä¸ªåŸŸåï¼Œæ‰€ä»¥åªèƒ½åœ¨æœ¬åœ°é…ç½® host è¿›è¡Œæ¨¡æ‹Ÿã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.37 www.service1.io</span><br><span class="line">10.0.0.37 www.service2.io</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘æµ‹è¯•æ‰€ä½¿ç”¨çš„ k8s éƒ¨ç½²åœ¨æˆ‘å®¶é‡Œä¸€å°é™åˆ¶çš„ Mac ä¸Šï¼Œæ‰€ä»¥è¿™é‡Œçš„ IP å®ƒçš„åœ°å€ã€‚</p></blockquote><p>å½“æˆ‘ä»¬åå¤è¯·æ±‚ä¸¤æ¬¡è¿™ä¸ªæ¥å£ï¼Œä¼šæ‹¿åˆ°ä¸¤ä¸ªä¸åŒçš„ hostnameï¼Œä¹Ÿå°±æ˜¯å°†æˆ‘ä»¬çš„è¯·æ±‚è½®è®­è´Ÿè½½åˆ°äº†è¿™ä¸¤ä¸ª service æ‰€ä»£ç†çš„ä¸¤ä¸ª Pod ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â¯ curl http://www.service1.io/</span><br><span class="line"><span class="meta prompt_">k8s-combat-service-79c5579587-b6nlj%</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">â¯ curl http://www.service1.io/</span></span><br><span class="line"><span class="meta prompt_">k8s-combat-service-79c5579587-bk7nw%</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">â¯ curl http://www.service2.io/</span></span><br><span class="line"><span class="meta prompt_">k8s-combat-service-2-7bbf56b4d9-dkj9b%</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">â¯ curl http://www.service2.io/</span></span><br><span class="line">k8s-combat-service-2-7bbf56b4d9-t5l4g</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ describe æŸ¥çœ‹æˆ‘ä»¬çš„ ingress å®šä¹‰ä»¥åŠè·¯ç”±è§„åˆ™ï¼š<br><img src="https://s2.loli.net/2023/09/14/pgZzVb1L4aQTMwn.png" alt="image.png"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">k describe ingress k8s-combat-ingress</span></span><br><span class="line">Name:             k8s-combat-ingress</span><br><span class="line">Labels:           &lt;none&gt;</span><br><span class="line">Namespace:        default</span><br><span class="line">Address:          localhost</span><br><span class="line">Ingress Class:    nginx</span><br><span class="line">Default backend:  &lt;default&gt;</span><br><span class="line">Rules:</span><br><span class="line">  Host             Path  Backends</span><br><span class="line">  ----             ----  --------</span><br><span class="line">  www.service1.io</span><br><span class="line">                   /   k8s-combat-service:8081 (10.1.0.65:8081,10.1.0.67:8081)</span><br><span class="line">  www.service2.io</span><br><span class="line">                   /   k8s-combat-service-2:8081 (10.1.0.63:8081,10.1.0.64:8081)</span><br><span class="line">Annotations:       &lt;none&gt;</span><br><span class="line">Events:            &lt;none&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨æ–°å¢ä¸€ä¸ªåŸŸåè§£æï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.37 www.service3.io</span><br><span class="line">â¯ curl http://www.service3.io/</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;hr&gt;&lt;center&gt;nginx&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>ä¼šç›´æ¥ 404ï¼Œè¿™æ˜¯å› ä¸ºæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªåŸŸåçš„è§„åˆ™ã€‚</p><h1 id="è®¿é—®åŸç†"><a href="#è®¿é—®åŸç†" class="headerlink" title="è®¿é—®åŸç†"></a>è®¿é—®åŸç†</h1><p><img src="https://s2.loli.net/2023/09/14/9JTfp6GP24VmzAK.png" alt="image.png"><br>æ•´ä¸ªçš„è¯·æ±‚è·¯å¾„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶å®æˆ‘ä»¬çš„ Ingress æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ª serviceï¼ˆæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥å¯åŠ¨å¤šä¸ªå‰¯æœ¬æ¥è¿›è¡Œè´Ÿè½½ï¼‰ï¼Œåªæ˜¯ä»–çš„ç±»å‹æ˜¯ <code>LoadBalancer</code>ï¼Œé€šå¸¸è¿™ç§ç±»å‹çš„ service ä¼šç”±äº‘å‚å•†ç»‘å®šä¸€ä¸ªå¤–éƒ¨ IPï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡è¿™ä¸ªå¤–éƒ¨ IP è®¿é—® Ingress äº†ã€‚</p><blockquote><p>è€Œæˆ‘ä»¬åº”ç”¨çš„ service æ˜¯ ClusterIPï¼Œåªèƒ½åœ¨åº”ç”¨å†…éƒ¨è®¿é—®</p></blockquote><p><img src="https://s2.loli.net/2023/09/14/Bu67SlMLak1hirc.png" alt="image.png"></p><p>é€šè¿‡ service çš„ä¿¡æ¯ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ ingress çš„ service ç»‘å®šçš„å¤–éƒ¨ IP æ˜¯ <code>localhost</code>ï¼ˆæœ¬åœ°çš„åŸå› ï¼‰</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>Ingress é€šå¸¸æ˜¯å……å½“ç½‘å…³çš„ä½œç”¨ï¼Œåç»­æˆ‘ä»¬åœ¨ä½¿ç”¨ Istio æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Istio æ‰€æä¾›çš„æ§åˆ¶å™¨æ¥æ›¿æ¢æ‰ Ingress-nginxï¼Œå¯ä»¥æ›´æ–¹ä¾¿çš„ç®¡ç†å†…å¤–ç½‘æµé‡ã€‚</p><p>æœ¬æ–‡çš„æ‰€æœ‰æºç åœ¨è¿™é‡Œå¯ä»¥è®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/14/Pe7DWCIS2UMKHQ8.png&quot; alt=&quot;ingress.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å‰ä¸¤ç« ä¸­æˆ‘ä»¬å°†åº”ç”¨&lt;a href=&quot;https://crossoverjie.top/2023/08/31/ob/k8s-0-start/&quot;&gt;éƒ¨ç½²&lt;/a&gt;åˆ°äº† k8s ä¸­ï¼ŒåŒæ—¶ä¸åŒçš„æœåŠ¡ä¹‹é—´ä¹Ÿå¯ä»¥é€šè¿‡ &lt;a href=&quot;https://crossoverjie.top/2023/09/05/ob/k8s-service/&quot;&gt;service&lt;/a&gt; è¿›è¡Œè°ƒç”¨ï¼Œç°åœ¨è¿˜æœ‰ä¸€ä¸ªæ­¥éª¤å°±æ˜¯å°†æˆ‘ä»¬çš„åº”ç”¨æš´éœ²åˆ°å…¬ç½‘ï¼Œå¹¶æä¾›åŸŸåçš„è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€æ­¥ç±»ä¼¼äºæˆ‘ä»¬ä»¥å‰é…ç½® Nginx å’Œç»‘å®šåŸŸåï¼Œæä¾›è¿™ä¸ªèƒ½åŠ›çš„æœåŠ¡åœ¨ k8s ä¸­æˆä¸º Ingressã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªæè¿°å…¶å®ä¹Ÿèƒ½çœ‹å‡º Ingress æ˜¯åè¿ç»´çš„å·¥ä½œï¼Œä½†ä¹Ÿä¸å¦¨ç¢æˆ‘ä»¬ä½œä¸ºç ”å‘å»äº†è§£è¿™éƒ¨åˆ†çš„å†…å®¹ï¼›äº†è§£æ•´ä¸ªç³»ç»Ÿæ˜¯å¦‚ä½•è¿è½¬çš„ä¹Ÿæ˜¯ç ”å‘åº”è¯¥æŒæ¡çš„æŠ€èƒ½ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/k8s/"/>
    
    
    <category term="Ingress" scheme="http://crossoverjie.top/tags/Ingress/"/>
    
  </entry>
  
  <entry>
    <title>Golang åŸºç¡€é¢è¯•é¢˜ 01</title>
    <link href="http://crossoverjie.top/2023/09/12/ob/Golang-interview-01/"/>
    <id>http://crossoverjie.top/2023/09/12/ob/Golang-interview-01/</id>
    <published>2023-09-12T12:58:03.000Z</published>
    <updated>2023-09-15T18:42:21.149Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/09/12/xJgnyReWs2mp7Pr.png" alt="Golang é¢è¯•é¢˜åˆé›†.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­åˆ†äº«äº† <a href="https://crossoverjie.top/2023/08/17/ob/k8s-question-01/">k8s</a> ç›¸å…³çš„é¢è¯•é¢˜ï¼Œæœ¬æ–‡æˆ‘ä»¬é‡ç‚¹æ¥è®¨è®ºå’Œ k8s å¯†åˆ‡ç›¸å…³çš„ Go è¯­è¨€é¢è¯•é¢˜ã€‚</p><p>è¿™å‡ å¹´éšç€äº‘åŸç”Ÿçš„å…´èµ·ï¼Œå¤§éƒ¨åˆ†åç«¯å¼€å‘è€…ï¼Œç‰¹åˆ«æ˜¯ Java å¼€å‘è€…éƒ½æˆ–å¤šæˆ–å°‘çš„æƒ³å­¦ä¹ ä¸€äº› Go ç›¸å…³çš„æŠ€èƒ½ï¼Œæ‰€ä»¥ä»Šå¤©åˆ†äº«çš„å†…å®¹æ¯”è¾ƒåˆçº§ï¼Œé€‚åˆ Go è¯­è¨€åˆå­¦è€…ã€‚</p><p><img src="https://s2.loli.net/2023/09/12/oheqNwJt3KvsgDM.png" alt="image.png"></p><p>æœ¬æ–‡å†…å®¹ä¾ç„¶æ¥è‡ªäºè¿™ä¸ªä»“åº“<br><a href="https://github.com/bregman-arie/devops-exercises">https://github.com/bregman-arie/devops-exercises</a></p><span id="more"></span><p>ä»¥ä¸‹æ˜¯å…·ä½“å†…å®¹ï¼š</p><blockquote><p>ï¼ˆï¼‰çš„å†…å®¹æ˜¯æˆ‘çš„è¡¥å……éƒ¨åˆ†ã€‚</p></blockquote><h1 id="Go-101"><a href="#Go-101" class="headerlink" title="Go 101"></a>Go 101</h1><h2 id="Go-è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹"><a href="#Go-è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹" class="headerlink" title="Go è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹"></a>Go è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹</h2><ul><li>Go æ˜¯ä¸€ç§å¼ºç±»å‹é™æ€è¯­è¨€ï¼Œå˜é‡çš„ç±»å‹å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™æŒ‡å®šï¼ˆä½†å¯ä»¥ä½¿ç”¨ç±»å‹æ¨å¯¼ï¼‰ï¼Œåœ¨è¿è¡Œæ—¶ä¸èƒ½ä¿®æ”¹å˜é‡ç±»å‹ï¼ˆä¸ <code>Python</code> è¿™ç±»åŠ¨æ€ç±»å‹è¯­è¨€ä¸åŒï¼‰ã€‚</li><li>è¶³å¤Ÿçš„ç®€å•ï¼Œé€šå¸¸ä¸€ä¸ªå‘¨æœ«å°±èƒ½å­¦ä¼š</li><li>ç¼–è¯‘é€Ÿåº¦å¤Ÿå¿«</li><li>å†…ç½®å¹¶å‘ï¼ˆç›¸å¯¹äº Java çš„å¹¶å‘æ¥è¯´éå¸¸ç®€å•ï¼‰</li><li>å†…ç½®åƒåœ¾æ”¶é›†</li><li>å¤šå¹³å°æ”¯æŒ</li><li>å¯ä»¥æ‰“åŒ…åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰è¿è¡Œæ—¶éœ€è¦ä¾èµ–çš„åº“éƒ½ä¼šè¢«æ‰“åŒ…è¿›è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œéå¸¸é€‚åˆäºåˆ†å‘ã€‚</li></ul><h2 id="Go-æ˜¯ä¸€ç§ç¼–è¯‘å‹çš„é™æ€ç±»å‹è¯­è¨€ï¼Œæ­£ç¡®è¿˜æ˜¯é”™è¯¯"><a href="#Go-æ˜¯ä¸€ç§ç¼–è¯‘å‹çš„é™æ€ç±»å‹è¯­è¨€ï¼Œæ­£ç¡®è¿˜æ˜¯é”™è¯¯" class="headerlink" title="Go æ˜¯ä¸€ç§ç¼–è¯‘å‹çš„é™æ€ç±»å‹è¯­è¨€ï¼Œæ­£ç¡®è¿˜æ˜¯é”™è¯¯"></a>Go æ˜¯ä¸€ç§ç¼–è¯‘å‹çš„é™æ€ç±»å‹è¯­è¨€ï¼Œæ­£ç¡®è¿˜æ˜¯é”™è¯¯</h2><p>æ­£ç¡®âœ…</p><h2 id="ä¸ºä»€ä¹ˆæœ‰äº›å‡½æ•°æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„"><a href="#ä¸ºä»€ä¹ˆæœ‰äº›å‡½æ•°æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„" class="headerlink" title="ä¸ºä»€ä¹ˆæœ‰äº›å‡½æ•°æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„"></a>ä¸ºä»€ä¹ˆæœ‰äº›å‡½æ•°æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„</h2><p>è¿™æ˜¯å› ä¸º Go è¯­è¨€ä¸­é¦–å­—æ¯å¤§å†™çš„å‡½æ•°å’Œå˜é‡æ˜¯å¯ä»¥å¯¼å‡ºçš„ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è¢«å…¶ä»–åŒ…æ‰€å¼•ç”¨ï¼›ç±»ä¼¼äº Java ä¸­çš„ <code>public</code> å’Œ <code>private</code> å…³é”®å­—ã€‚</p><h1 id="å˜é‡å’Œæ•°æ®ç±»å‹"><a href="#å˜é‡å’Œæ•°æ®ç±»å‹" class="headerlink" title="å˜é‡å’Œæ•°æ®ç±»å‹"></a>å˜é‡å’Œæ•°æ®ç±»å‹</h1><h2 id="ç®€æ´å’Œå¸¸è§„å£°æ˜å˜é‡æ–¹å¼"><a href="#ç®€æ´å’Œå¸¸è§„å£°æ˜å˜é‡æ–¹å¼" class="headerlink" title="ç®€æ´å’Œå¸¸è§„å£°æ˜å˜é‡æ–¹å¼"></a>ç®€æ´å’Œå¸¸è§„å£°æ˜å˜é‡æ–¹å¼</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  x := <span class="number">2</span> <span class="comment">// åªèƒ½åœ¨å‡½æ•°å†…ä½¿ç”¨ï¼Œè‡ªåŠ¨ç±»å‹æ¨å¯¼</span></span><br><span class="line">  <span class="keyword">var</span> y <span class="type">int</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  fmt.Printf(<span class="string">&quot;x: %v. y: %v&quot;</span>, x, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ­£ç¡®âœ…è¿˜æ˜¯é”™è¯¯âŒ"><a href="#æ­£ç¡®âœ…è¿˜æ˜¯é”™è¯¯âŒ" class="headerlink" title="æ­£ç¡®âœ…è¿˜æ˜¯é”™è¯¯âŒ"></a>æ­£ç¡®âœ…è¿˜æ˜¯é”™è¯¯âŒ</h2><ul><li>å¯ä»¥é‡å¤å£°æ˜å˜é‡âŒï¼ˆå¼ºç±»å‹è¯­è¨€çš„ç‰¹æ€§ï¼‰</li><li>å˜é‡ä¸€æ—¦å£°æ˜ï¼Œå°±å¿…é¡»ä½¿ç”¨âœ…ï¼ˆé¿å…å£°æ˜æ— æ•ˆå˜é‡ï¼Œå¢å¼ºä»£ç å¯è¯»æ€§ï¼‰</li></ul><h2 id="ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> userName</span><br><span class="line">    userName = <span class="string">&quot;user&quot;</span></span><br><span class="line">    fmt.Println(userName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘é”™è¯¯ï¼Œå˜é‡ <code>userName</code> æ²¡æœ‰å£°æ˜ç±»å‹ï¼›ä¿®æ”¹ä¸ºè¿™æ ·æ˜¯å¯ä»¥çš„ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> userName <span class="type">string</span></span><br><span class="line">    userName = <span class="string">&quot;user&quot;</span></span><br><span class="line">    fmt.Println(userName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="var-x-int-2-and-x-2-è¿™ä¸¤ç§å£°æ˜å˜é‡çš„åŒºåˆ«"><a href="#var-x-int-2-and-x-2-è¿™ä¸¤ç§å£°æ˜å˜é‡çš„åŒºåˆ«" class="headerlink" title="var x int = 2Â andÂ x := 2 è¿™ä¸¤ç§å£°æ˜å˜é‡çš„åŒºåˆ«"></a><code>var x int = 2</code>Â andÂ <code>x := 2</code> è¿™ä¸¤ç§å£°æ˜å˜é‡çš„åŒºåˆ«</h2><p>ç»“æœä¸Šæ¥è¯´æ˜¯ç›¸ç­‰çš„ï¼Œä½† <code>x := 2</code>  åªèƒ½åœ¨å‡½æ•°ä½“ç±»å£°æ˜ã€‚</p><h2 id="ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯å£°æ˜ï¼Ÿ"><a href="#ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯å£°æ˜ï¼Ÿ" class="headerlink" title="ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯å£°æ˜ï¼Ÿ"></a>ä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯å£°æ˜ï¼Ÿ</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">x := <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    x = <span class="number">3</span></span><br><span class="line">    fmt.Println(x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘é”™è¯¯ï¼Œ<code>x := 2</code>  ä¸èƒ½åœ¨å‡½æ•°ä½“å¤–ä½¿ç”¨ï¼Œ <code>x = 3</code> æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé™¤éä½¿ç”¨ <code>x := 3</code> è¿›è¡Œç±»å‹æ¨å¯¼ã€‚</p><h2 id="å¦‚ä½•ä½¿ç”¨å˜é‡å£°æ˜å—ï¼ˆè‡³å°‘ä¸‰ä¸ªå˜é‡ï¼‰"><a href="#å¦‚ä½•ä½¿ç”¨å˜é‡å£°æ˜å—ï¼ˆè‡³å°‘ä¸‰ä¸ªå˜é‡ï¼‰" class="headerlink" title="å¦‚ä½•ä½¿ç”¨å˜é‡å£°æ˜å—ï¼ˆè‡³å°‘ä¸‰ä¸ªå˜é‡ï¼‰"></a>å¦‚ä½•ä½¿ç”¨å˜é‡å£°æ˜å—ï¼ˆè‡³å°‘ä¸‰ä¸ªå˜é‡ï¼‰</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">  x <span class="type">bool</span>   = <span class="literal">false</span></span><br><span class="line">  y <span class="type">int</span>    = <span class="number">0</span></span><br><span class="line">  z <span class="type">string</span> = <span class="string">&quot;false&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">&quot;The type of x: %T. The value of x: %v\n&quot;</span>, x, x)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;The type of y: %T. The value of y: %v\n&quot;</span>, y, y)</span><br><span class="line">  fmt.Printf(<span class="string">&quot;The type of z: %T. The value of z: %v\n&quot;</span>, y, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å˜é‡å—é…åˆ <code>go fmt</code> æ ¼å¼åŒ–ä¹‹åçš„ä»£ç å¯¹é½çš„éå¸¸å·¥æ•´ï¼Œå¼ºè¿«ç—‡çš„ç¦éŸ³ã€‚</p><p>Go çš„åŸºç¡€é¢è¯•é¢˜ä¹Ÿè›®å¤šçš„ï¼Œæˆ‘ä»¬å…ˆä»åŸºç¡€çš„å¼€å§‹ï¼Œä»Šååç»§ç»­æ›´æ–°ç›¸å…³é¢è¯•é¢˜ï¼Œéš¾åº¦ä¹Ÿä¼šé€æ¸æé«˜ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹è¯·æŒç»­å…³æ³¨ã€‚<br>#GO #é¢è¯• </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/12/xJgnyReWs2mp7Pr.png&quot; alt=&quot;Golang é¢è¯•é¢˜åˆé›†.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­åˆ†äº«äº† &lt;a href=&quot;https://crossoverjie.top/2023/08/17/ob/k8s-question-01/&quot;&gt;k8s&lt;/a&gt; ç›¸å…³çš„é¢è¯•é¢˜ï¼Œæœ¬æ–‡æˆ‘ä»¬é‡ç‚¹æ¥è®¨è®ºå’Œ k8s å¯†åˆ‡ç›¸å…³çš„ Go è¯­è¨€é¢è¯•é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å‡ å¹´éšç€äº‘åŸç”Ÿçš„å…´èµ·ï¼Œå¤§éƒ¨åˆ†åç«¯å¼€å‘è€…ï¼Œç‰¹åˆ«æ˜¯ Java å¼€å‘è€…éƒ½æˆ–å¤šæˆ–å°‘çš„æƒ³å­¦ä¹ ä¸€äº› Go ç›¸å…³çš„æŠ€èƒ½ï¼Œæ‰€ä»¥ä»Šå¤©åˆ†äº«çš„å†…å®¹æ¯”è¾ƒåˆçº§ï¼Œé€‚åˆ Go è¯­è¨€åˆå­¦è€…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/12/oheqNwJt3KvsgDM.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å†…å®¹ä¾ç„¶æ¥è‡ªäºè¿™ä¸ªä»“åº“&lt;br&gt;&lt;a href=&quot;https://github.com/bregman-arie/devops-exercises&quot;&gt;https://github.com/bregman-arie/devops-exercises&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Golang" scheme="http://crossoverjie.top/categories/Golang/"/>
    
    
    <category term="é¢è¯•" scheme="http://crossoverjie.top/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>k8så…¥é—¨åˆ°å®æˆ˜--è·¨æœåŠ¡è°ƒç”¨</title>
    <link href="http://crossoverjie.top/2023/09/05/ob/k8s-service/"/>
    <id>http://crossoverjie.top/2023/09/05/ob/k8s-service/</id>
    <published>2023-09-05T13:13:28.000Z</published>
    <updated>2023-09-15T18:42:21.018Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/09/05/GbZ1vKQNHY32wzD.png" alt="service.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨åšä¼ ç»Ÿä¸šåŠ¡å¼€å‘çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬çš„æœåŠ¡æä¾›æ–¹æœ‰å¤šä¸ªå®ä¾‹æ—¶ï¼Œå¾€å¾€æˆ‘ä»¬éœ€è¦å°†å¯¹æ–¹çš„æœåŠ¡åˆ—è¡¨ä¿å­˜åœ¨æœ¬åœ°ï¼Œç„¶åé‡‡ç”¨ä¸€å®šçš„ç®—æ³•è¿›è¡Œè°ƒç”¨ï¼›å½“æœåŠ¡æä¾›æ–¹çš„åˆ—è¡¨å˜åŒ–æ—¶è¿˜å¾—åŠæ—¶é€šçŸ¥è°ƒç”¨æ–¹ã€‚</p><span id="more"></span><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span>  </span><br><span class="line">   <span class="attr">url:</span>     </span><br><span class="line">   <span class="bullet">-</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span><span class="string">:8081</span>     </span><br><span class="line">   <span class="bullet">-</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span><span class="string">:8081</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·è‡ªç„¶æ˜¯å¯¹åŒæ–¹éƒ½å¸¦æ¥ä¸å°‘çš„è´Ÿæ‹…ï¼Œæ‰€ä»¥åç»­æ¨å‡ºçš„æœåŠ¡è°ƒç”¨æ¡†æ¶éƒ½ä¼šæƒ³åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>ä»¥ <code>spring cloud</code> ä¸ºä¾‹ï¼š<br><img src="https://s2.loli.net/2023/09/06/IW1jaidQ25Xk9u4.png" alt="image.png"></p><p>æœåŠ¡æä¾›æ–¹ä¼šå‘ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±çš„æœåŠ¡ï¼ˆåç§°ã€IPç­‰ä¿¡æ¯ï¼‰ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™ä¼šå‘æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–ä¸€ä¸ªèŠ‚ç‚¹ä¿¡æ¯ï¼Œç„¶åå‘èµ·è°ƒç”¨ã€‚</p><p>ä½†å½“æˆ‘ä»¬åˆ‡æ¢åˆ° <code>k8s</code> åï¼Œè¿™äº›åŸºç¡€è®¾æ–½éƒ½äº¤ç»™äº† <code>k8s</code> å¤„ç†äº†ï¼Œæ‰€ä»¥ <code>k8s</code> è‡ªç„¶å¾—æœ‰ä¸€ä¸ªç»„ä»¶æ¥è§£å†³æœåŠ¡æ³¨å†Œå’Œè°ƒç”¨çš„é—®é¢˜ã€‚</p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©é‡ç‚¹ä»‹ç»çš„ <code>service</code>ã€‚</p><h1 id="service"><a href="#service" class="headerlink" title="service"></a>service</h1><p>åœ¨ä»‹ç» <code>service</code> ä¹‹å‰æˆ‘å…ˆè°ƒæ•´äº†æºç ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">   http.HandleFunc(<span class="string">&quot;/ping&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;  </span><br><span class="line">      name, _ := os.Hostname()  </span><br><span class="line">      log.Printf(<span class="string">&quot;%s ping&quot;</span>, name)  </span><br><span class="line">      fmt.Fprint(w, <span class="string">&quot;pong&quot;</span>)  </span><br><span class="line">   &#125;)  </span><br><span class="line">   http.HandleFunc(<span class="string">&quot;/service&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;  </span><br><span class="line">      resp, err := http.Get(<span class="string">&quot;http://k8s-combat-service:8081/ping&quot;</span>)  </span><br><span class="line">      <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">         log.Println(err)  </span><br><span class="line">         fmt.Fprint(w, err)  </span><br><span class="line">         <span class="keyword">return</span>  </span><br><span class="line">      &#125;  </span><br><span class="line">      fmt.Fprint(w, resp.Status)  </span><br><span class="line">   &#125;)  </span><br><span class="line">  </span><br><span class="line">   http.ListenAndServe(<span class="string">&quot;:8081&quot;</span>, <span class="literal">nil</span>)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–°å¢äº†ä¸€ä¸ª <code>/service</code> çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¼šé€šè¿‡ service çš„æ–¹å¼è°ƒç”¨æœåŠ¡æä¾›è€…çš„æœåŠ¡ï¼Œç„¶åé‡æ–°æ‰“åŒ…ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make docker</span><br></pre></td></tr></table></figure><p>åŒæ—¶ä¹Ÿæ–°å¢äº†ä¸€ä¸ª <code>deployment-service.yaml</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">labels:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">k8s-combat-service</span> <span class="comment"># é€šè¿‡æ ‡ç­¾é€‰æ‹©å…³è”  </span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span>  </span><br><span class="line">  <span class="attr">selector:</span>  </span><br><span class="line">    <span class="attr">matchLabels:</span>  </span><br><span class="line">      <span class="attr">app:</span> <span class="string">k8s-combat-service</span>  </span><br><span class="line">  <span class="attr">template:</span>  </span><br><span class="line">    <span class="attr">metadata:</span>  </span><br><span class="line">      <span class="attr">labels:</span>  </span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-combat-service</span>  </span><br><span class="line">    <span class="attr">spec:</span>  </span><br><span class="line">      <span class="attr">containers:</span>  </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">k8s-combat-service</span>  </span><br><span class="line">          <span class="attr">image:</span> <span class="string">crossoverjie/k8s-combat:v1</span>  </span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">Always</span>  </span><br><span class="line">          <span class="attr">resources:</span>  </span><br><span class="line">            <span class="attr">limits:</span>  </span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">&quot;1&quot;</span>  </span><br><span class="line">              <span class="attr">memory:</span> <span class="string">100Mi</span>  </span><br><span class="line">            <span class="attr">requests:</span>  </span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">&quot;0.1&quot;</span>  </span><br><span class="line">              <span class="attr">memory:</span> <span class="string">10Mi</span>  </span><br><span class="line"><span class="meta">---  </span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">selector:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">k8s-combat-service</span> <span class="comment"># é€šè¿‡æ ‡ç­¾é€‰æ‹©å…³è”  </span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span>  </span><br><span class="line">  <span class="attr">ports:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8081</span>        <span class="comment"># æœ¬ Service çš„ç«¯å£  </span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8081</span>  <span class="comment"># å®¹å™¨ç«¯å£  </span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">app</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ç›¸åŒçš„é•œåƒéƒ¨ç½²ä¸€ä¸ªæ–°çš„ deploymentï¼Œåç§°ä¸º <code>k8s-combat-service</code>ï¼Œé‡ç‚¹æ˜¯æ–°å¢äº†ä¸€ä¸ª<code>kind: Service</code> çš„å¯¹è±¡ã€‚</p><p>è¿™ä¸ªå°±æ˜¯ç”¨äºå£°æ˜ <code>service</code> çš„ç»„ä»¶ï¼Œåœ¨è¿™ä¸ªç»„ä»¶ä¸­ä¹Ÿæ˜¯ä½¿ç”¨ <code>selector</code> æ ‡ç­¾å’Œ <code>deployment</code> è¿›è¡Œäº†å…³è”ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ª <code>service</code> ç”¨äºæœåŠ¡äºåç§°ç­‰äº <code>k8s-combat-service</code> çš„ <code>deployment</code>ã€‚</p><p>ä¸‹é¢çš„ä¸¤ä¸ªç«¯å£ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œä¸€ä¸ªæ˜¯ä»£ç†çš„ç«¯å£ï¼Œ å¦ä¸€ä¸ªæ˜¯  service è‡ªèº«æä¾›å‡ºå»çš„ç«¯å£ã€‚</p><p>è‡³äº <code>type: ClusterIP</code> æ˜¯ç”¨äºå£°æ˜ä¸åŒç±»å‹çš„ <code>service</code>ï¼Œé™¤æ­¤ä¹‹å¤–çš„ç±»å‹è¿˜æœ‰ï¼š</p><ul><li><a href="https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport"><code>NodePort</code></a></li><li><a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer"><code>LoadBalancer</code></a></li><li><a href="https://kubernetes.io/docs/concepts/services-networking/service/#externalname"><code>ExternalName</code></a><br>ç­‰ç±»å‹ï¼Œé»˜è®¤æ˜¯ <code>ClusterIP</code>ï¼Œç°åœ¨ä¸ç”¨çº ç»“è¿™å‡ ç§ç±»å‹çš„ä½œç”¨ï¼Œåç»­æˆ‘ä»¬åœ¨è®²åˆ° <code>Ingress</code> çš„æ—¶å€™ä¼šå…·ä½“ä»‹ç»ã€‚</li></ul><h2 id="è´Ÿè½½æµ‹è¯•"><a href="#è´Ÿè½½æµ‹è¯•" class="headerlink" title="è´Ÿè½½æµ‹è¯•"></a>è´Ÿè½½æµ‹è¯•</h2><p>æˆ‘ä»¬å…ˆåˆ†åˆ«å°†è¿™ä¸¤ä¸ª <code>deployment</code> éƒ¨ç½²å¥½ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">k apply -f deployment/deployment.yaml</span><br><span class="line">k apply -f deployment/deployment-service.yaml</span><br><span class="line"></span><br><span class="line">â¯ k get pod</span><br><span class="line">NAME                                  READY   STATUS    RESTARTS   AGE</span><br><span class="line">k8s-combat-7867bfb596-67p5m           1/1     Running   0          3h22m</span><br><span class="line">k8s-combat-service-5b77f59bf7-zpqwt   1/1     Running   0          3h22m</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘æ–°å¢äº†ä¸€ä¸ª <code>/service</code> çš„æ¥å£ï¼Œç”¨äºåœ¨ <code>k8s-combat</code> ä¸­é€šè¿‡ <code>service</code> è°ƒç”¨ <code>k8s-combat-service</code> çš„æ¥å£ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp, err := http.Get(<span class="string">&quot;http://k8s-combat-service:8081/ping&quot;</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>k8s-combat-service</code> æœåŠ¡çš„åŸŸåå°±æ˜¯ä»–çš„æœåŠ¡åç§°ã€‚</p><blockquote><p>å¦‚æœæ˜¯è·¨ namespace è°ƒç”¨æ—¶ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªå®Œæ•´åç§°ï¼Œåœ¨åç»­çš„ç« èŠ‚ä¼šæ¼”ç¤ºã€‚</p></blockquote><p>æˆ‘ä»¬æ•´ä¸ªçš„è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/09/06/i12pR3DjC6wnIXQ.png" alt="image.png"></p><p>ç›¸ä¿¡å¤§å®¶ä¹Ÿçœ‹å¾—å‡ºæ¥ç›¸å¯¹äº <code>spring cloud</code> è¿™ç±»å¾®æœåŠ¡æ¡†æ¶æä¾›çš„å®¢æˆ·ç«¯è´Ÿè½½æ–¹å¼ï¼Œ<code>service</code> æ˜¯ä¸€ç§æœåŠ¡ç«¯è´Ÿè½½ï¼Œæœ‰ç‚¹ç±»ä¼¼äº <code>Nginx</code> çš„åå‘ä»£ç†ã€‚</p><p>ä¸ºäº†æ›´ç›´è§‚çš„éªŒè¯è¿™ä¸ªæµç¨‹ï¼Œæ­¤æ—¶æˆ‘å°† <code>k8s-combat-service</code> çš„å‰¯æœ¬æ•°å¢åŠ åˆ° 2ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åªéœ€è¦å†æ¬¡æ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ k apply -f deployment/deployment-service.yaml</span><br><span class="line">deployment.apps/k8s-combat-service configured</span><br><span class="line">service/k8s-combat-service unchanged</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/09/06/ZC8UrjEz6ia1Qgo.png" alt="image.png"></p><blockquote><p>ä¸ç®¡æˆ‘ä»¬å¯¹ <code>deployment</code> çš„åšäº†ä»€ä¹ˆå˜æ›´ï¼Œéƒ½åªéœ€è¦ <code>apply</code> è¿™ä¸ª <code>yaml</code>  æ–‡ä»¶å³å¯ï¼Œ k8s ä¼šè‡ªåŠ¨å°†å½“å‰çš„ <code>deployment</code> è°ƒæ•´ä¸ºæˆ‘ä»¬é¢„æœŸçš„çŠ¶æ€ï¼ˆæ¯”å¦‚è¿™é‡Œçš„å‰¯æœ¬æ•°é‡å¢åŠ ä¸º 2ï¼‰ï¼›è¿™ä¹Ÿå°±æ˜¯ <code>k8s</code> ä¸­å¸¸è¯´çš„<strong>å£°æ˜å¼ API</strong>ã€‚</p></blockquote><p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶ <code>k8s-combat-service</code> çš„å‰¯æœ¬æ•°å·²ç»å˜ä¸ºä¸¤ä¸ªäº†ã€‚<br>å¦‚æœæˆ‘ä»¬æ­¤æ—¶æŸ¥çœ‹è¿™ä¸ª <code>service</code> çš„æè¿°æ—¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ k describe svc k8s-combat-service |grep Endpoints</span><br><span class="line">Endpoints:         192.168.130.133:8081,192.168.130.29:8081</span><br></pre></td></tr></table></figure><p>ä¼šå‘ç°å®ƒå·²ç»ä»£ç†äº†è¿™ä¸¤ä¸ª <code>Pod</code> çš„ IPã€‚</p><p><img src="https://s2.loli.net/2023/09/06/HbjyEcnaeCK6uMJ.png" alt="image.png"><br>æ­¤æ—¶æˆ‘è¿›å…¥äº† <code>k8s-combat-7867bfb596-67p5m</code> çš„å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k exec -it k8s-combat-7867bfb596-67p5m bash</span><br><span class="line">curl http://127.0.0.1:8081/service</span><br></pre></td></tr></table></figure><p>å¹¶æ‰§è¡Œä¸¤æ¬¡ <code>/service</code> æ¥å£ï¼Œå‘ç°è¯·æ±‚ä¼šè½®è®­è¿›å…¥ <code>k8s-combat-service</code> çš„ä»£ç†çš„ IP ä¸­ã€‚</p><p>ç”±äº <code>k8s service</code> æ˜¯åŸºäº <code>TCP/UDP</code> çš„å››å±‚è´Ÿè½½ï¼Œæ‰€ä»¥åœ¨ <code>http1.1</code>  ä¸­æ˜¯å¯ä»¥åšåˆ°è¯·æ±‚çº§çš„è´Ÿè½½å‡è¡¡ï¼Œä½†å¦‚æœæ˜¯ç±»ä¼¼äº <code>gRPC</code> è¿™ç±»é•¿é“¾æ¥å°±æ— æ³•åšåˆ°è¯·æ±‚çº§çš„è´Ÿè½½å‡è¡¡ã€‚</p><p>æ¢å¥è¯è¯´ <code>service</code> åªæ”¯æŒè¿æ¥çº§åˆ«çš„è´Ÿè½½ã€‚</p><p>å¦‚æœè¦æ”¯æŒ <code>gRPC</code>ï¼Œå°±å¾—ä½¿ç”¨ Istio è¿™ç±»æœåŠ¡ç½‘æ ¼ï¼Œç›¸å…³å†…å®¹ä¼šåœ¨åç»­ç« èŠ‚è¯¦è§£ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ€»çš„æ¥è¯´ <code>k8s service</code> æä¾›äº†ç®€æ˜“çš„æœåŠ¡æ³¨å†Œå‘ç°å’Œè´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œå½“æˆ‘ä»¬åªæä¾› http æœåŠ¡æ—¶æ˜¯å®Œå…¨å¤Ÿç”¨çš„ã€‚</p><p>ç›¸å…³çš„æºç å’Œ yaml èµ„æºæ–‡ä»¶éƒ½å­˜åœ¨è¿™é‡Œï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/05/GbZ1vKQNHY32wzD.png&quot; alt=&quot;service.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;åœ¨åšä¼ ç»Ÿä¸šåŠ¡å¼€å‘çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬çš„æœåŠ¡æä¾›æ–¹æœ‰å¤šä¸ªå®ä¾‹æ—¶ï¼Œå¾€å¾€æˆ‘ä»¬éœ€è¦å°†å¯¹æ–¹çš„æœåŠ¡åˆ—è¡¨ä¿å­˜åœ¨æœ¬åœ°ï¼Œç„¶åé‡‡ç”¨ä¸€å®šçš„ç®—æ³•è¿›è¡Œè°ƒç”¨ï¼›å½“æœåŠ¡æä¾›æ–¹çš„åˆ—è¡¨å˜åŒ–æ—¶è¿˜å¾—åŠæ—¶é€šçŸ¥è°ƒç”¨æ–¹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/k8s/"/>
    
    
    <category term="Go" scheme="http://crossoverjie.top/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>k8s å…¥é—¨åˆ°å®æˆ˜--éƒ¨ç½²åº”ç”¨åˆ° k8s</title>
    <link href="http://crossoverjie.top/2023/08/31/ob/k8s-0-start/"/>
    <id>http://crossoverjie.top/2023/08/31/ob/k8s-0-start/</id>
    <published>2023-08-31T14:42:32.000Z</published>
    <updated>2023-09-15T18:42:21.018Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/09/04/ymUpcXZrxfNsT91.png" alt="k8s å…¥é—¨åˆ°å®æˆ˜ 01.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æœ€è¿‘è¿™è¿™æ®µæ—¶é—´æ›´æ–°äº†ä¸€äº› k8s ç›¸å…³çš„åšå®¢å’Œè§†é¢‘ï¼Œä¹Ÿæ”¶åˆ°äº†ä¸€äº›åé¦ˆï¼›å¤§æ¦‚åˆ†ä¸ºè¿™å‡ ç±»ï¼š</p><ul><li>å…¬å¸å·²ç»ç»å†è¿‡æœåŠ¡åŒ–æ”¹é€ äº†ï¼Œä½†è¿˜æœªæ¥è§¦è¿‡äº‘åŸç”Ÿã€‚</li><li>å…¬å¸éƒ¨åˆ†åº”ç”¨è¿›è¡Œäº†äº‘åŸç”Ÿæ”¹é€ ï¼Œä½†å¤§éƒ¨åˆ†å·¥ä½œæ˜¯ç”±åŸºç¡€æ¶æ„å’Œè¿ç»´éƒ¨é—¨æ¨åŠ¨çš„ï¼Œè‡ªå·±åªæ˜¯ä½œä¸ºå¼€å‘å¹¶ä¸äº†è§£å…¶ä¸­çš„ç»†èŠ‚ï¼Œç”šè‡³ k8s ä¹Ÿæ¥è§¦ä¸åˆ°ã€‚</li><li>è¿˜å¤„äºæ¯”è¾ƒä¼ ç»Ÿçš„ä»¥è™šæ‹Ÿæœºéƒ¨ç½²çš„ä¼ ç»Ÿè¿ç»´ä¸ºä¸»ã€‚</li></ul><p>å…¶ä¸­ä»¥ç¬¬äºŒç§å å¤§å¤šæ•°ï¼Œè™½ç„¶å…¬å¸è¿›è¡Œäº†äº‘åŸç”Ÿæ”¹é€ ï¼Œä½†ä¼¼ä¹å’Œçº¯ä¸šåŠ¡ç ”å‘åŒå­¦æ¥è¯´æ²¡æœ‰å¤ªå¤§å…³ç³»ï¼Œè‡ªå·±å·¥ä½œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚</p><p>æ°å¥½æˆ‘ä¹‹å‰æ­£å¥½ä»ä¸šåŠ¡ç ”å‘çš„è§’åº¦è½¬æ¢åˆ°äº†åŸºç¡€æ¶æ„éƒ¨é—¨ï¼Œä¸¤ä¸ªè§’è‰²æˆ‘éƒ½æ¥è§¦è¿‡ï¼Œä¹Ÿå¸®åŠ©è¿‡ä¸€äº›ä¸šåŠ¡ç ”å‘äº†è§£å…¬å¸çš„äº‘åŸç”Ÿæ¶æ„ï¼›</p><p>ä¸ºæ­¤æ‰€ä»¥æˆ‘æƒ³ç³»ç»Ÿæ€§çš„å¸¦å¤§å®¶ä»¥<strong>ç ”å‘</strong>çš„è§’åº¦å¯¹ k8s è¿›è¡Œå®è·µã€‚</p><p>å› ä¸º k8s éƒ¨åˆ†åŠŸèƒ½å…¶å®æ˜¯åè¿ç»´çš„ï¼Œå¯¹ç ”å‘æ¥è¯´ä¼˜å…ˆçº§å¹¶ä¸å¤ªé«˜ï¼›<br>æ‰€ä»¥æˆ‘ä¸å¤ªä¼šæ¶‰åŠä¸€äº› k8s è¿ç»´çš„çŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚å®‰è£…ã€ç»„ä»¶ç­‰æ¨¡å—ï¼›ä¸»è¦ä»¥æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¼šä½¿ç”¨åˆ°çš„ç»„ä»¶è®²èµ·ã€‚</p><span id="more"></span><h1 id="è®¡åˆ’"><a href="#è®¡åˆ’" class="headerlink" title="è®¡åˆ’"></a>è®¡åˆ’</h1><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h2><ul><li>éƒ¨ç½²åº”ç”¨åˆ° k8s</li><li>è·¨æœåŠ¡è°ƒç”¨</li><li>é›†ç¾¤å¤–éƒ¨è®¿é—®</li></ul><h2 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h2><ul><li>å¦‚ä½•ä½¿ç”¨é…ç½®</li><li>æœåŠ¡ç½‘æ ¼å®æˆ˜</li></ul><h2 id="è¿ç»´ä½ çš„åº”ç”¨"><a href="#è¿ç»´ä½ çš„åº”ç”¨" class="headerlink" title="è¿ç»´ä½ çš„åº”ç”¨"></a>è¿ç»´ä½ çš„åº”ç”¨</h2><ul><li>åº”ç”¨æ¢é’ˆ</li><li>æ»šåŠ¨æ›´æ–°ä¸å›æ»š</li><li>ä¼˜é›…é‡‡é›†æ—¥å¿—</li><li>åº”ç”¨å¯è§‚æµ‹æ€§<ul><li>æŒ‡æ ‡å¯è§†åŒ–</li></ul></li></ul><h2 id="k8s-éƒ¨ç½²å¸¸è§ä¸­é—´ä»¶"><a href="#k8s-éƒ¨ç½²å¸¸è§ä¸­é—´ä»¶" class="headerlink" title="k8s éƒ¨ç½²å¸¸è§ä¸­é—´ä»¶"></a>k8s éƒ¨ç½²å¸¸è§ä¸­é—´ä»¶</h2><ul><li>helm ä¸€é”®éƒ¨ç½²</li><li>ç¼–å†™ Operator è‡ªåŠ¨åŒ–åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</li></ul><p><img src="https://s2.loli.net/2023/09/02/BtYcF6jp8u3nzJs.png" alt="image.png"><br>è¿™é‡Œæˆ‘æ•´ç†äº†ä¸€ä¸‹ç›®å½•ï¼Œæ¯ä¸ªç« èŠ‚éƒ½æœ‰åšå®¢+è§†é¢‘é…åˆè§‚çœ‹ï¼Œå¤§å®¶å¯ä»¥æŒ‰ç…§å–œå¥½é€‰æ‹©ã€‚</p><p>å› ä¸ºè¿˜æ¶‰åŠåˆ°äº†è§†é¢‘ï¼Œæ‰€ä»¥åªèƒ½äº‰å–ä¸€å‘¨ä¸¤æ›´ï¼Œåœ¨ä¸¤ä¸ªæœˆå†…å…¨éƒ¨æ›´æ–°å®Œæ¯•ã€‚</p><p>æ ¹æ®æˆ‘è‡ªå·±çš„ç»éªŒï¼Œä»¥ä¸Šå†…å®¹éƒ½æŒæ¡çš„è¯å¯¹ k8s çš„æŒæ¡ä¼šæ›´è¿›ä¸€æ­¥ã€‚</p><h1 id="éƒ¨ç½²åº”ç”¨åˆ°-k8s"><a href="#éƒ¨ç½²åº”ç”¨åˆ°-k8s" class="headerlink" title="éƒ¨ç½²åº”ç”¨åˆ° k8s"></a>éƒ¨ç½²åº”ç”¨åˆ° k8s</h1><p>é¦–å…ˆä»ç¬¬ä¸€ç« ã€éƒ¨ç½²åº”ç”¨åˆ° k8sã€‘å¼€å§‹ï¼Œæˆ‘ä¼šç”¨ Go å†™ä¸€ä¸ªç®€å•çš„ Web åº”ç”¨ï¼Œç„¶åæ‰“åŒ…ä¸ºä¸€ä¸ª Docker é•œåƒï¼Œä¹‹åéƒ¨ç½²åˆ° k8s ä¸­ï¼Œå¹¶å®Œæˆå…¶ä¸­çš„æ¥å£è°ƒç”¨ã€‚</p><h2 id="ç¼–å†™åº”ç”¨"><a href="#ç¼–å†™åº”ç”¨" class="headerlink" title="ç¼–å†™åº”ç”¨"></a>ç¼–å†™åº”ç”¨</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">   http.HandleFunc(<span class="string">&quot;/ping&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;  </span><br><span class="line">      log.Println(<span class="string">&quot;ping&quot;</span>)  </span><br><span class="line">      fmt.Fprint(w, <span class="string">&quot;pong&quot;</span>)  </span><br><span class="line">   &#125;)  </span><br><span class="line">  </span><br><span class="line">   http.ListenAndServe(<span class="string">&quot;:8081&quot;</span>, <span class="literal">nil</span>)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> åº”ç”¨éå¸¸ç®€å•å°±æ˜¯æä¾›äº†ä¸€ä¸ª <code>ping</code>  æ¥å£ï¼Œç„¶åè¿”å›äº†ä¸€ä¸ª <code>pong</code>.</p><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€é˜¶æ®µï¼šç¼–è¯‘ Go ç¨‹åº  </span></span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.19</span> AS dependencies  </span><br><span class="line"><span class="keyword">ENV</span> GOPROXY=https://goproxy.cn,direct  </span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/app  </span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> go.mod .  </span></span><br><span class="line"><span class="comment">#COPY ../../go.sum .  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> --mount=<span class="built_in">type</span>=ssh go mod download  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ç¬¬äºŒé˜¶æ®µï¼šæ„å»ºå¯æ‰§è¡Œæ–‡ä»¶  </span></span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.19</span> AS builder  </span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/app  </span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .  </span></span><br><span class="line"><span class="comment">#COPY --from=dependencies /go/pkg /go/pkg  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> go build  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ç¬¬ä¸‰é˜¶æ®µï¼šéƒ¨ç½²  </span></span><br><span class="line"><span class="keyword">FROM</span> debian:stable-slim  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y curl  </span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /go/src/app/k8s-combat /go/bin/k8s-combat  </span></span><br><span class="line"><span class="keyword">ENV</span> PATH=<span class="string">&quot;/go/bin:$&#123;PATH&#125;&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># å¯åŠ¨ Go ç¨‹åº  </span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;k8s-combat&quot;</span>]</span></span><br></pre></td></tr></table></figure><p> ä¹‹åç¼–å†™äº†ä¸€ä¸ª <code>dockerfile</code> ç”¨äºæ„å»º <code>docker</code> é•œåƒã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">docker:  </span></span><br><span class="line">   @echo <span class="string">&quot;Docker Build...&quot;</span>  </span><br><span class="line">   docker build . -t crossoverjie/k8s-combat:v1 &amp;&amp; docker image push crossoverjie/k8s-combat:v1</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>make docker</code>  ä¼šåœ¨æœ¬åœ°æ„å»ºé•œåƒå¹¶ä¸Šä¼ åˆ° <code>dockerhub</code></p><h2 id="ç¼–å†™-deployment"><a href="#ç¼–å†™-deployment" class="headerlink" title="ç¼–å†™ deployment"></a>ç¼–å†™ deployment</h2><p>ä¸‹ä¸€æ­¥ä¾¿æ˜¯æ•´ä¸ªè¿‡ç¨‹ä¸­æœ€é‡è¦çš„ç¯èŠ‚äº†ï¼Œä¹Ÿæ˜¯å”¯ä¸€å’Œ k8s æ‰“äº¤é“çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯ç¼–å†™ deploymentã€‚</p><iframe src="//player.bilibili.com/player.html?aid=702346697&bvid=BV1Cm4y1n7yG&cid=1235124452&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p>åœ¨ä¹‹å‰çš„è§†é¢‘ã€Šä¸€åˆ†é’Ÿäº†è§£ k8sã€‹ä¸­è®²è¿‡å¸¸è§çš„ç»„ä»¶ï¼š<br><img src="https://s2.loli.net/2023/09/04/hrOUSVsmP2KkNlC.png" alt="image.png"></p><p>å…¶ä¸­æˆ‘ä»¬æœ€å¸¸è§çš„å°±æ˜¯ deploymentï¼Œé€šå¸¸ç”¨äºéƒ¨ç½²æ— çŠ¶æ€åº”ç”¨ï¼›ç°åœ¨è¿˜ä¸å¤ªéœ€è¦äº†è§£å…¶ä»–çš„ç»„ä»¶ï¼Œå…ˆçœ‹çœ‹ deployment å¦‚ä½•ç¼–å†™ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">labels:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">k8s-combat</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span>  </span><br><span class="line">  <span class="attr">selector:</span>  </span><br><span class="line">    <span class="attr">matchLabels:</span>  </span><br><span class="line">      <span class="attr">app:</span> <span class="string">k8s-combat</span>  </span><br><span class="line">  <span class="attr">template:</span>  </span><br><span class="line">    <span class="attr">metadata:</span>  </span><br><span class="line">      <span class="attr">labels:</span>  </span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-combat</span>  </span><br><span class="line">    <span class="attr">spec:</span>  </span><br><span class="line">      <span class="attr">containers:</span>  </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">k8s-combat</span>  </span><br><span class="line">          <span class="attr">image:</span> <span class="string">crossoverjie/k8s-combat:v1</span>  </span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">Always</span>  </span><br><span class="line">          <span class="attr">resources:</span>  </span><br><span class="line">            <span class="attr">limits:</span>  </span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">&quot;1&quot;</span>  </span><br><span class="line">              <span class="attr">memory:</span> <span class="string">300Mi</span>  </span><br><span class="line">            <span class="attr">requests:</span>  </span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">&quot;0.1&quot;</span>  </span><br><span class="line">              <span class="attr">memory:</span> <span class="string">30Mi</span></span><br></pre></td></tr></table></figure><p>å¼€å¤´ä¸¤è¡Œçš„ <code>apiVersion</code>  å’Œ <code>kind</code> å¯ä»¥æš‚æ—¶ä¸è¦å…³æ³¨ï¼Œå°±ç†è§£ä¸º deployment çš„å›ºå®šå†™æ³•å³å¯ã€‚</p><p>metadataï¼šé¡¾åæ€ä¹‰å°±æ˜¯å®šä¹‰å…ƒæ•°æ®çš„åœ°æ–¹ï¼Œå‘Šè¯‰ <code>Pod</code> æˆ‘ä»¬è¿™ä¸ª <code>deployment</code> å«ä»€ä¹ˆåå­—ï¼Œè¿™é‡Œå®šä¹‰ä¸ºï¼š<code>k8s-combat</code></p><p>ä¸­é—´çš„ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">labels:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">k8s-combat</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå°±æ˜¯ç»™è¿™ä¸ª <code>deployment</code> æ‰“ä¸Šæ ‡ç­¾ï¼Œé€šå¸¸æ˜¯å°†è¿™ä¸ªæ ‡ç­¾å’Œå…¶ä»–çš„ç»„ä»¶è¿›è¡Œå…³è”ä½¿ç”¨æ‰æœ‰æ„ä¹‰ï¼Œä¸ç„¶å°±åªæ˜¯ä¸€ä¸ªæ ‡ç­¾è€Œå·²ã€‚</p><blockquote><p>æ ‡ç­¾æ˜¯é”®å€¼å¯¹çš„æ ¼å¼ï¼Œkey, value éƒ½å¯ä»¥è‡ªå®šä¹‰ã€‚</p></blockquote><p>è€Œè¿™é‡Œçš„  <code>app: k8s-combat</code> ä¾¿æ˜¯å’Œä¸‹é¢çš„ spec ä¸‹çš„ selector é€‰æ‹©å™¨åŒ¹é…ï¼Œè¡¨æ˜éƒ½ä½¿ç”¨  <code>app: k8s-combat</code>  è¿›è¡Œå…³è”ã€‚</p><p>è€Œ template ä¸­æ‰€å®šä¹‰çš„æ ‡ç­¾ä¹Ÿæ˜¯ä¸ºäº†è®©é€‰æ‹©å™¨å’Œ template ä¸­çš„å®šä¹‰çš„ Pod è¿›è¡Œå…³è”ã€‚</p><blockquote><p>Pod æ˜¯ k8s ä¸­ç›¸åŒåŠŸèƒ½å®¹å™¨çš„åˆ†ç»„ï¼Œä¸€ä¸ª Pod å¯ä»¥ç»‘å®šå¤šä¸ªå®¹å™¨ï¼Œè¿™é‡Œå°±åªæœ‰æˆ‘ä»¬åº”ç”¨å®¹å™¨ä¸€ä¸ªäº†ï¼›åç»­åœ¨è®²åˆ° istio å’Œæ—¥å¿—é‡‡é›†æ—¶ä¾¿å¯ä»¥çœ‹åˆ°å…¶ä»–çš„å®¹å™¨ã€‚</p></blockquote><p>template ä¸­å®šä¹‰çš„å†…å®¹å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼ŒæŒ‡å®šäº†æˆ‘ä»¬çš„å®¹å™¨æ‹‰å–åœ°å€ï¼Œä»¥åŠæ‰€å ç”¨çš„èµ„æº(<code>cpu/ memory</code>)ã€‚</p><p><code>replicas: 1</code>ï¼šè¡¨ç¤ºåªéƒ¨ç½²ä¸€ä¸ªå‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ„æ€ã€‚</p><h2 id="éƒ¨ç½²åº”ç”¨"><a href="#éƒ¨ç½²åº”ç”¨" class="headerlink" title="éƒ¨ç½²åº”ç”¨"></a>éƒ¨ç½²åº”ç”¨</h2><p>ä¹‹åæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f deployment/deployment.yaml</span><br></pre></td></tr></table></figure><blockquote><p>ç”Ÿäº§ç¯å¢ƒä¸­å¾€å¾€ä¼šä½¿ç”¨äº‘å‚å•†æ‰€æä¾›çš„ k8s ç¯å¢ƒï¼Œæˆ‘ä»¬æœ¬åœ°å¯ä»¥ä½¿ç”¨ <a href="https://minikube.sigs.k8s.io/docs/start/">https://minikube.sigs.k8s.io/docs/start/</a> minikube æ¥æ¨¡æ‹Ÿã€‚</p></blockquote><p>å°±ä¼šåº”ç”¨è¿™ä¸ª deployment åŒæ—¶å°†å®¹å™¨éƒ¨ç½²åˆ° k8s ä¸­ï¼Œä¹‹åä½¿ç”¨:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pod</span><br></pre></td></tr></table></figure><blockquote><p> åœ¨åå° k8s ä¼šæ ¹æ®æˆ‘ä»¬å¡«å†™çš„èµ„æºé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„èŠ‚ç‚¹ï¼Œå°†å½“å‰è¿™ä¸ª Pod éƒ¨ç½²è¿‡å»ã€‚</p></blockquote><p> å°±ä¼šåˆ—å‡ºæˆ‘ä»¬åˆšæ‰éƒ¨ç½²çš„ Pod:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ kubectl get pod</span><br><span class="line">NAME                                READY   STATUS    RESTARTS   AGE</span><br><span class="line">k8s-combat-57f794c59b-7k58n         1/1     Running   0          17h</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl exec -it k8s-combat-57f794c59b-7k58n  bash</span><br></pre></td></tr></table></figure><p>å°±ä¼šè¿›å…¥æˆ‘ä»¬çš„å®¹å™¨ï¼Œè¿™ä¸ªå’Œä½¿ç”¨ docker ç±»ä¼¼ã€‚</p><p>ä¹‹åæ‰§è¡Œ curl å‘½ä»¤ä¾¿å¯ä»¥è®¿é—®æˆ‘ä»¬çš„æ¥å£äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-combat-57f794c59b-7k58n:/# curl http://127.0.0.1:8081/ping</span><br><span class="line">pong</span><br><span class="line">root@k8s-combat-57f794c59b-7k58n:/#</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™æˆ‘ä»¬å†å¼€ä¸€ä¸ªç»ˆç«¯æ‰§è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ kubectl logs -f k8s-combat-57f794c59b-7k58n</span><br><span class="line">2023/09/03 09:28:07 ping</span><br></pre></td></tr></table></figure><p>ä¾¿å¯ä»¥æ‰“å°å®¹å™¨ä¸­çš„æ—¥å¿—ï¼Œå½“ç„¶å‰ææ˜¯åº”ç”¨çš„æ—¥å¿—æ˜¯å†™å…¥åˆ°äº†æ ‡å‡†è¾“å‡ºä¸­ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»¥ä¸Šå°±æ˜¯è¿™ä¸€ç« èŠ‚çš„ä¸»è¦å†…å®¹ï¼Œé‡ç‚¹å°±æ˜¯å°†æˆ‘ä»¬åº”ç”¨ç¨‹åºå‘˜æ‰“åŒ…ä¸º docker é•œåƒåä¸Šä¼ åˆ°é•œåƒä»“åº“ï¼Œå†é…ç½®å¥½ deployment ç”± k8s è¿›è¡Œè°ƒåº¦è¿è¡Œã€‚</p><p>ä¸‹ä¸€ç« ä¸»è¦ä¼šæ¶‰åŠæœåŠ¡å†…éƒ¨çš„è°ƒç”¨ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å…ˆå…³æ³¨èµ·æ¥ã€‚</p><p>ç›¸å…³çš„æºç å’Œ yaml èµ„æºæ–‡ä»¶éƒ½å­˜åœ¨è¿™é‡Œï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p><p>#Blog #K8s </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/09/04/ymUpcXZrxfNsT91.png&quot; alt=&quot;k8s å…¥é—¨åˆ°å®æˆ˜ 01.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;æœ€è¿‘è¿™è¿™æ®µæ—¶é—´æ›´æ–°äº†ä¸€äº› k8s ç›¸å…³çš„åšå®¢å’Œè§†é¢‘ï¼Œä¹Ÿæ”¶åˆ°äº†ä¸€äº›åé¦ˆï¼›å¤§æ¦‚åˆ†ä¸ºè¿™å‡ ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¬å¸å·²ç»ç»å†è¿‡æœåŠ¡åŒ–æ”¹é€ äº†ï¼Œä½†è¿˜æœªæ¥è§¦è¿‡äº‘åŸç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;å…¬å¸éƒ¨åˆ†åº”ç”¨è¿›è¡Œäº†äº‘åŸç”Ÿæ”¹é€ ï¼Œä½†å¤§éƒ¨åˆ†å·¥ä½œæ˜¯ç”±åŸºç¡€æ¶æ„å’Œè¿ç»´éƒ¨é—¨æ¨åŠ¨çš„ï¼Œè‡ªå·±åªæ˜¯ä½œä¸ºå¼€å‘å¹¶ä¸äº†è§£å…¶ä¸­çš„ç»†èŠ‚ï¼Œç”šè‡³ k8s ä¹Ÿæ¥è§¦ä¸åˆ°ã€‚&lt;/li&gt;
&lt;li&gt;è¿˜å¤„äºæ¯”è¾ƒä¼ ç»Ÿçš„ä»¥è™šæ‹Ÿæœºéƒ¨ç½²çš„ä¼ ç»Ÿè¿ç»´ä¸ºä¸»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä¸­ä»¥ç¬¬äºŒç§å å¤§å¤šæ•°ï¼Œè™½ç„¶å…¬å¸è¿›è¡Œäº†äº‘åŸç”Ÿæ”¹é€ ï¼Œä½†ä¼¼ä¹å’Œçº¯ä¸šåŠ¡ç ”å‘åŒå­¦æ¥è¯´æ²¡æœ‰å¤ªå¤§å…³ç³»ï¼Œè‡ªå·±å·¥ä½œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æ°å¥½æˆ‘ä¹‹å‰æ­£å¥½ä»ä¸šåŠ¡ç ”å‘çš„è§’åº¦è½¬æ¢åˆ°äº†åŸºç¡€æ¶æ„éƒ¨é—¨ï¼Œä¸¤ä¸ªè§’è‰²æˆ‘éƒ½æ¥è§¦è¿‡ï¼Œä¹Ÿå¸®åŠ©è¿‡ä¸€äº›ä¸šåŠ¡ç ”å‘äº†è§£å…¬å¸çš„äº‘åŸç”Ÿæ¶æ„ï¼›&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤æ‰€ä»¥æˆ‘æƒ³ç³»ç»Ÿæ€§çš„å¸¦å¤§å®¶ä»¥&lt;strong&gt;ç ”å‘&lt;/strong&gt;çš„è§’åº¦å¯¹ k8s è¿›è¡Œå®è·µã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸º k8s éƒ¨åˆ†åŠŸèƒ½å…¶å®æ˜¯åè¿ç»´çš„ï¼Œå¯¹ç ”å‘æ¥è¯´ä¼˜å…ˆçº§å¹¶ä¸å¤ªé«˜ï¼›&lt;br&gt;æ‰€ä»¥æˆ‘ä¸å¤ªä¼šæ¶‰åŠä¸€äº› k8s è¿ç»´çš„çŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚å®‰è£…ã€ç»„ä»¶ç­‰æ¨¡å—ï¼›ä¸»è¦ä»¥æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¼šä½¿ç”¨åˆ°çš„ç»„ä»¶è®²èµ·ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/k8s/"/>
    
    
    <category term="Go" scheme="http://crossoverjie.top/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ SQL çš„æ–¹å¼æŸ¥è¯¢æ¶ˆæ¯é˜Ÿåˆ—æ•°æ®ä»¥åŠè¸©å‘æŒ‡å—</title>
    <link href="http://crossoverjie.top/2023/08/30/ob/Pulsar-SQL/"/>
    <id>http://crossoverjie.top/2023/08/30/ob/Pulsar-SQL/</id>
    <published>2023-08-30T01:31:53.000Z</published>
    <updated>2023-09-15T18:42:21.017Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/08/30/3iz9yqfuSCn18xk.png" alt="Pulsar-sql.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ä¸ºäº†è®©ä¸šåŠ¡å›¢é˜Ÿå¯ä»¥æ›´å¥½çš„è·Ÿè¸ªè‡ªå·±æ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹çŠ¶æ€ï¼Œéœ€è¦ä¸€ä¸ªç±»ä¼¼äºè¡¨æ ¼è§†å›¾çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œç”¨æˆ·å¯ä»¥ç›´è§‚çš„çœ‹åˆ°å‘é€çš„æ¶ˆæ¯ï¼›åŒæ—¶ç‚¹å‡»è¯¦æƒ…åä¹Ÿèƒ½æŸ¥åˆ°æ¶ˆæ¯çš„æ•´ä¸ªè½¨è¿¹ã€‚</p><blockquote><p> æ¶ˆæ¯åˆ—è¡¨<br><img src="https://s2.loli.net/2023/08/02/l9uvSnqAOxfPer7.png" alt="20230802234405.png"></p></blockquote><span id="more"></span><blockquote><p>ç‚¹å‡»è¯¦æƒ…åæŸ¥çœ‹è½¨è¿¹<br><img src="https://s2.loli.net/2023/08/02/H7pjinzQ5EWR2tF.png" alt="20230802234058.png"></p></blockquote><h1 id="åŸç†ä»‹ç»"><a href="#åŸç†ä»‹ç»" class="headerlink" title="åŸç†ä»‹ç»"></a>åŸç†ä»‹ç»</h1><p>ç”±äº <code>Pulsar</code> å¹¶æ²¡æœ‰å…³ç³»å‹æ•°æ®åº“ä¸­è¡¨çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨ <code>Bookkeeper</code> ä¸­ï¼Œä¸ºäº†æ¨¡æ‹Ÿä½¿ç”¨ SQL æŸ¥è¯¢çš„æ•ˆæœ Pulsar æä¾›äº† <code>Presto</code> (ç°åœ¨å·²ç»æ›´åä¸º <code>Trino</code>)çš„æ’ä»¶ã€‚</p><blockquote><p>Trino æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ SQL æŸ¥è¯¢å¼•æ“ï¼Œå®ƒä¹Ÿæä¾›äº†æ’ä»¶èƒ½åŠ›ï¼Œå¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡ SQL ä»è‡ªå®šä¹‰æ•°æ®æºæŸ¥è¯¢æ•°æ®æ—¶ï¼ŒåŸºäºå®ƒçš„ SPI ç¼–å†™ä¸€ä¸ªæ’ä»¶æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p></blockquote><p>è¿™æ ·ä¾¿å¯ä»¥ç±»ä¼¼äºæŸ¥è¯¢æ•°æ®åº“ä¸€æ ·æŸ¥è¯¢ <code>Pulsar</code> æ•°æ®ï¼š<br><img src="https://s2.loli.net/2023/08/30/1YEtorbwaZAXylL.png" alt="image.png"></p><hr><p><img src="https://s2.loli.net/2023/08/30/u6gc3YxvH94ZDPG.png" alt="image.png"><br>Pulsar æ’ä»¶çš„è¿è¡Œæµç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š</p><ul><li>å¯åŠ¨çš„æ—¶å€™é€šè¿‡ <code>Pulsar-Admin</code> æ¥å£è·å–ä¸€äº›å…ƒæ•°æ®ï¼Œæ¯”å¦‚ Schemeï¼Œtopic åˆ†åŒºä¿¡æ¯ç­‰ã€‚</li><li>ç„¶åä¼šåˆ›å»ºä¸€ä¸ªåªè¯»çš„ Bookkeeper å®¢æˆ·ç«¯ï¼Œç”¨äºè·å–æ•°æ®ã€‚</li><li>ä¹‹åæ ¹æ® SQL æ¡ä»¶è¿‡æ»¤æ•°æ®å³å¯ã€‚</li></ul><p>ç›¸å…³ä»£ç ï¼š<br><img src="https://s2.loli.net/2023/08/30/vr7ED6BYgOsoqxz.png" alt="image.png"><br><img src="https://s2.loli.net/2023/08/30/Np2XD7T9cJAwxQC.png" alt="image.png"></p><h1 id="ä½¿ç”¨-Pulsar-SQL"><a href="#ä½¿ç”¨-Pulsar-SQL" class="headerlink" title="ä½¿ç”¨ Pulsar-SQL"></a>ä½¿ç”¨ Pulsar-SQL</h1><p><img src="https://s2.loli.net/2023/08/30/UBqocsjFvC2yXEe.png" alt="image.png"></p><p>ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œå®˜æ–¹æä¾›äº†ä¸¤ä¸ªå‘½ä»¤ï¼š</p><ul><li>sql-worker: ä¼šå¯åŠ¨ä¸€ä¸ª trino æœåŠ¡ç«¯åŒæ—¶è¿è¡Œäº† Pulsar æ’ä»¶</li><li>sql: å°±æ˜¯ä¸€ä¸ª SQL å‘½ä»¤è¡Œç»ˆç«¯ã€‚</li></ul><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>è‡ªå·±åœ¨æœ¬åœ°è¿è¡Œçš„æ—¶å€™è‡ªç„¶æ˜¯æ²¡é—®é¢˜ï¼Œå¯æ˜¯ä¸€æ—¦æƒ³åœ¨ç”Ÿäº§è¿è¡Œï¼ŒåŒæ—¶å¦‚æœä½ çš„ <code>Pulsar</code> é›†ç¾¤æ˜¯è¿è¡Œå† <code>k8s</code> ç¯å¢ƒä¸­æ—¶å°±ä¼šç¢°åˆ°ä¸€äº›é—®é¢˜ã€‚</p><h3 id="æ— æ³•ä½¿ç”¨ç°æœ‰-Trino-é›†ç¾¤"><a href="#æ— æ³•ä½¿ç”¨ç°æœ‰-Trino-é›†ç¾¤" class="headerlink" title="æ— æ³•ä½¿ç”¨ç°æœ‰ Trino é›†ç¾¤"></a>æ— æ³•ä½¿ç”¨ç°æœ‰ Trino é›†ç¾¤</h3><p>é¦–å…ˆç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚æœç”Ÿäº§ç¯å¢ƒå·²ç»æœ‰äº†ä¸€ä¸ª <code>Trino</code> é›†ç¾¤æƒ³è¦å¤ç”¨çš„æ—¶å€™å°±ä¼šç¢°åˆ°é—®é¢˜ï¼Œå¸¸è§„æµç¨‹æ˜¯å°† <code>Pulsar</code> çš„æ’ä»¶å¤åˆ¶åˆ° <code>Trino</code> çš„ <code>Plugin</code> ç›®å½•ï¼Œç„¶åé‡å¯ <code>Trino</code> åå°±èƒ½ä½¿ç”¨è¯¥æ’ä»¶ã€‚</p><p>å½“ç„¶ç¤¾åŒºä¹Ÿæ˜¯æ”¯æŒè¿™ä¹ˆåšçš„ï¼š<br><img src="https://s2.loli.net/2023/08/30/RqtIvwy5HNsr27M.png" alt="image.png"><br>ä½†æ˜¯å½“æˆ‘å°† Pulsar-plugin å¤åˆ¶åˆ° Trino ä¸­è¿è¡Œçš„æ—¶å€™å´å¤±è´¥äº†ï¼Œæ•´ä½“çš„æµç¨‹å¯ä»¥å‚è€ƒè¿™ä¸ª issueï¼š<br><a href="https://github.com/apache/pulsar/discussions/20941">https://github.com/apache/pulsar/discussions/20941</a></p><p>ç®€å•æ¥è¯´ <code>Trino</code> çš„å®˜æ–¹é•œåƒå’Œ <code>pulsar-plugin</code> å¹¶ä¸èƒ½å…¼å®¹ï¼Œè¿™ä¸ªé—®é¢˜ç›´æ¥å½±å“åˆ°æˆ‘ä»¬æ˜¯å¦å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®ƒã€‚</p><p>ä½†æ˜¯æ‰‹åŠ¨ç¼–è¯‘å‡ºæ¥çš„ <code>Trino</code> æœåŠ¡å’Œæ’ä»¶æ˜¯å…¼å®¹çš„ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚</p><p><img src="https://s2.loli.net/2023/08/30/MswBlVXi12DICr9.png" alt="image.png"></p><p>å› æ­¤æˆ‘åªèƒ½åœ¨æœ¬åœ°ç¼–è¯‘å‡º Trino æœåŠ¡ç«¯å’Œ <code>pulsar-plugin</code> ç„¶åæ‰“åŒ…æˆä¸€ä¸ªé•œåƒæ¥è¿è¡Œäº†ï¼Œå½“ç„¶è¿™æ ·çš„åå¤„å°±æ˜¯æ— æ³•åˆ©ç”¨åˆ°æˆ‘ä»¬ç°æœ‰çš„ <code>Trino</code> é›†ç¾¤ï¼Œåˆå¾—é‡æ–°éƒ¨ç½²ä¸€ä¸ªäº†ã€‚</p><p><img src="https://s2.loli.net/2023/08/30/vG83bleTf1EcCPp.png" alt="image.png"></p><p>æµç¨‹ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼š</p><ul><li>é¦–å…ˆæ˜¯æœ¬åœ°ç¼–è¯‘ <code>Pulsar-SQL</code> æ¨¡å—</li><li>å°†ç”Ÿæˆç‰©å¤åˆ¶åˆ°å½“å‰ç›®å½•</li><li>æ‰§è¡Œ <code>make docker</code> æ‰“å‡º docker é•œåƒå¹¶ä¸Šä¼ åˆ°ç§æœ</li><li>å†æ‰§è¡Œ <code>kubectl</code> å°† trino éƒ¨ç½²åˆ° <code>k8s</code> ç¯å¢ƒä¸­</li></ul><p>æ•´ä¸ªæµç¨‹åšä¸‹æ¥åŠ ä¸Šå’Œç¤¾åŒºçš„æ²Ÿé€šï¼Œæ›´åŠ ç¡®å®šè¿™ä¸ªåŠŸèƒ½åº”è¯¥æ˜¯å¾ˆå°‘æœ‰äººåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„ï¼Œæ¯•ç«Ÿç¬¬ä¸€ä¸ªå‘å°±å¾ˆéº»çƒ¦ï¼Œæ›´åˆ«æåç»­çš„é—®é¢˜äº†ğŸ˜‚ã€‚</p><h3 id="Presto-æ’ä»¶ä¸æ”¯æŒ-AuthToken"><a href="#Presto-æ’ä»¶ä¸æ”¯æŒ-AuthToken" class="headerlink" title="Presto æ’ä»¶ä¸æ”¯æŒ AuthToken"></a>Presto æ’ä»¶ä¸æ”¯æŒ AuthToken</h3><p>ç¬¬äºŒä¸ªé—®é¢˜ä¹Ÿæ˜¯ä¸ªæ·±å‘ï¼Œå½“æˆ‘æŠŠ Trino éƒ¨ç½²å¥½æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ç›´æ¥æŠ›äº†ä¸€ä¸ªè°ƒç”¨ <code>pulsar-admin</code>  æ¥å£è¿æ¥è¶…æ—¶çš„å¼‚å¸¸ã€‚</p><p>ç»“æœæ’æŸ¥äº†åŠå¤©å‘ç°åŸæ¥æ˜¯ <code>pulsar-plugin</code> é‡Œæ²¡æœ‰æä¾› <code>JWT</code> çš„éªŒè¯æ–¹å¼ï¼Œè€Œæˆ‘ä»¬çš„ Pulsar é›†ç¾¤æ°å¥½æ˜¯æ‰“å¼€äº† <code>JWT</code> éªŒè¯çš„ã€‚</p><p>ä¸ºæ­¤æˆ‘åªèƒ½å…ˆåœ¨æœ¬åœ°ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæäº¤äº† PRï¼Œé¢„è®¡ä¼šåœ¨ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬åˆå¹¶å§ï¼š<br><a href="https://github.com/apache/pulsar/pull/20860">https://github.com/apache/pulsar/pull/20860</a></p><h3 id="æ–°åˆ›å»ºçš„-topic-æŸ¥è¯¢å¤±è´¥"><a href="#æ–°åˆ›å»ºçš„-topic-æŸ¥è¯¢å¤±è´¥" class="headerlink" title="æ–°åˆ›å»ºçš„ topic æŸ¥è¯¢å¤±è´¥"></a>æ–°åˆ›å»ºçš„ topic æŸ¥è¯¢å¤±è´¥</h3><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯å½“æŸ¥è¯¢ä¸€ä¸ªæ–°åˆ›å»ºçš„ topic æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šç›´æ¥ blockï¼Œç›¸å…³çš„å¤ç°æµç¨‹åœ¨è¿™é‡Œï¼š<br><a href="https://github.com/apache/pulsar/issues/20910">https://github.com/apache/pulsar/issues/20910</a></p><p><img src="https://s2.loli.net/2023/08/30/nYestcQqRax1NVv.png" alt="image.png"></p><p>è¿™ä¸ªé—®é¢˜è¿˜å¥½ï¼Œä¸æ˜¯å¾ˆè‡´å‘½ï¼Œæ˜¯æˆ‘åœ¨æœ¬åœ°æµ‹è¯•çš„æ—¶å€™æ— æ„é—´å‘ç°çš„ã€‚</p><p>æœ¬åœ°æˆ‘å·²ç»ä¿®å¤äº†ï¼Œåé¢ä¹Ÿæäº¤äº†ä¸€ä¸ª PRï¼Œç›®å‰è¿˜åœ¨è®¨è®ºä¸­ï¼š<br><a href="https://github.com/apache/pulsar/pull/20911">https://github.com/apache/pulsar/pull/20911</a></p><h3 id="æŸ¥è¯¢æ¶ˆæ¯ä¼šä¸¢å¤±æœ€åä¸€æ¡"><a href="#æŸ¥è¯¢æ¶ˆæ¯ä¼šä¸¢å¤±æœ€åä¸€æ¡" class="headerlink" title="æŸ¥è¯¢æ¶ˆæ¯ä¼šä¸¢å¤±æœ€åä¸€æ¡"></a>æŸ¥è¯¢æ¶ˆæ¯ä¼šä¸¢å¤±æœ€åä¸€æ¡</h3><p>è¿™ä¸ªé—®é¢˜ä¹Ÿä¸æ˜¯å¾ˆä¸¥é‡ï¼Œæ•°æ®é‡å°‘çš„æ—¶å€™ä¼šå‘ç°ï¼Œå°±æ˜¯åœ¨æŒ‡å®šäº†æ¶ˆæ¯å‘é€æ—¶é—´çš„æŸ¥è¯¢æ¡ä»¶æ—¶ï¼Œæœ€åä¸€æ¡æ¶ˆæ¯ä¼šè¢«è¿‡æ»¤æ‰ï¼Œç›¸å…³ issue åœ¨è¿™é‡Œï¼š<br><a href="https://github.com/apache/pulsar/issues/20919">https://github.com/apache/pulsar/issues/20919</a><br><img src="https://s2.loli.net/2023/08/30/MPamvyduxrTZRkY.png" alt="image.png"><br>è¿™ä¸ªæˆ‘åªæ˜¯å®šä½åˆ°äº†åŸå› ï¼Œä½†ä¸å¤ªæ¸…æ¥š ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåš(-1)ï¼Œå½±å“ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œå°±æ”¾åœ¨è¿™é‡Œæç½®äº†ã€‚</p><h3 id="Schema-ä¸å…¼å®¹"><a href="#Schema-ä¸å…¼å®¹" class="headerlink" title="Schema ä¸å…¼å®¹"></a>Schema ä¸å…¼å®¹</h3><p>æœ€åå‘ç°çš„ä¸€ä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬çº¿ä¸ŠæŸäº› topic æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ä¼šæŠ›å‡º <code>Not a record: &quot;string&quot;</code>çš„å¼‚å¸¸ï¼Œä½†åªæ˜¯éƒ¨åˆ† topicï¼Œä¹Ÿæ’æŸ¥äº†å¾ˆä¹…ï¼Œæ•´ä¸ªæºç ä¸­æ²¡æœ‰ä»»ä½•ä¸€ä¸ªåœ°æ–¹æœ‰è¿™ä¸ªå¼‚å¸¸ã€‚</p><p><a href="!%5B%5D(https://s2.loli.net/2023/08/30/UBl6OPGzASnfqT2.png)">https://github.com/apache/pulsar/issues/20945</a></p><p><img src="https://s2.loli.net/2023/08/30/UBl6OPGzASnfqT2.png" alt="image.png"></p><p>æ ¹æœ¬åŸå› æ˜¯ç”Ÿäº§è€…ç”Ÿæˆçš„ schema æœ‰é—®é¢˜ï¼Œç±»å‹å·²ç»æ˜¯ JSON äº†ï¼Œä½†æ˜¯ schema å´æ˜¯ stringï¼Œè¿™æ ·å¯¼è‡´ <code>pulsar-plugin</code>  åœ¨ååºåˆ—åŒ– schema çš„æ—¶å€™æŠ›å‡ºäº†å¼‚å¸¸ï¼Œç”±äºæ˜¯ pb ååºåˆ—åŒ–æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ‰€ä»¥æºç ä¸­éƒ½æœç´¢ä¸åˆ°ã€‚</p><blockquote><p>æ²¡æœ‰é—®é¢˜çš„ topic ä½¿ç”¨äº†æ­£ç¡®çš„ schema</p></blockquote><p>åç»­æˆ‘ä¹Ÿåœ¨æœ¬åœ°ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼Œå½“æŠ›å‡ºå¼‚å¸¸åå°±å°† schema é™çº§ä¸ºåŸºæœ¬ç±»å‹è¿›è¡Œè§£æã€‚<br><img src="https://s2.loli.net/2023/08/30/XZfWG2EYHpj5QJb.png" alt="image.png"></p><p>ä¸è¿‡æœ¬è´¨é—®é¢˜è¿˜æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨æœ‰è¯¯ï¼Œå¦‚æœå¯¹ <code>schema</code> ç†è§£ä¸å‡†ç¡®çš„è¯è¿˜æ˜¯å»ºè®®ä½¿ç”¨ <code>byte[]</code> å§ï¼Œè¿™æ ·è‡³å°‘å…¼å®¹æ€§ä¸ä¼šæœ‰é—®é¢˜ã€‚<br>ç›¸å…³ PRï¼š<br><a href="https://github.com/apache/pulsar/pull/20955">https://github.com/apache/pulsar/pull/20955</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><code>Pulsar-SQL</code> æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œåªæ˜¯æˆ‘ä»¬ä½¿ç”¨è¿‡ç¨‹ä¸­ç¡®å®å‘ç°äº†ä¸€äº›é—®é¢˜ï¼Œå¤§éƒ¨åˆ†éƒ½å·²ç»ä¿®å¤äº†ï¼›<br>å¸Œæœ›å¯¹åç»­ä½¿ç”¨è¯¥åŠŸèƒ½çš„æœ‹å‹æœ‰æ‰€å¸®åŠ©ã€‚<br>#Pulsar </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/08/30/3iz9yqfuSCn18xk.png&quot; alt=&quot;Pulsar-sql.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;ä¸ºäº†è®©ä¸šåŠ¡å›¢é˜Ÿå¯ä»¥æ›´å¥½çš„è·Ÿè¸ªè‡ªå·±æ¶ˆæ¯çš„ç”Ÿäº§å’Œæ¶ˆè´¹çŠ¶æ€ï¼Œéœ€è¦ä¸€ä¸ªç±»ä¼¼äºè¡¨æ ¼è§†å›¾çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œç”¨æˆ·å¯ä»¥ç›´è§‚çš„çœ‹åˆ°å‘é€çš„æ¶ˆæ¯ï¼›åŒæ—¶ç‚¹å‡»è¯¦æƒ…åä¹Ÿèƒ½æŸ¥åˆ°æ¶ˆæ¯çš„æ•´ä¸ªè½¨è¿¹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; æ¶ˆæ¯åˆ—è¡¨&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2023/08/02/l9uvSnqAOxfPer7.png&quot; alt=&quot;20230802234405.png&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Pulsar" scheme="http://crossoverjie.top/categories/Pulsar/"/>
    
    
    <category term="SQL" scheme="http://crossoverjie.top/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>VictoriaLogsï¼šä¸€æ¬¾è¶…ä½å ç”¨çš„ ElasticSearch æ›¿ä»£æ–¹æ¡ˆ</title>
    <link href="http://crossoverjie.top/2023/08/23/ob/VictoriaLogs-Intro/"/>
    <id>http://crossoverjie.top/2023/08/23/ob/VictoriaLogs-Intro/</id>
    <published>2023-08-23T07:46:25.000Z</published>
    <updated>2023-09-15T18:42:21.017Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/08/23/t5soejn8vw1aZil.png" alt="image.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å‰æ®µæ—¶é—´æˆ‘ä»¬æƒ³å®ç° <code>Pulsar</code> æ¶ˆæ¯çš„è¿½è¸ªæµç¨‹ï¼Œè¿½è¸ªå®ç°çš„æ•ˆæœå›¾å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/08/02/H7pjinzQ5EWR2tF.png" alt="image.png"></p><p>å®ç°å…¶å®æ¯”è¾ƒç®€å•ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯å¦‚ä½•å­˜å‚¨æ¶ˆæ¯ã€‚</p><blockquote><p>æ¶ˆæ¯çš„è¯»å–æˆ‘ä»¬æ˜¯é€šè¿‡ Pulsar è‡ªå¸¦çš„ BrokerInterceptor å®ç°çš„ï¼Œå¯¹è¿™ä¸ªæ„Ÿå…´è¶£çš„æœ‹å‹åé¢ä¼šå•ç‹¬åšä¸€ä¸ªåˆ†äº«ã€‚</p></blockquote><span id="more"></span><p>æ ¹æ®è¿™é‡Œçš„æ˜¾ç¤ºå†…å®¹æˆ‘ä»¬å¤§æ¦‚éœ€è¦å­˜å‚¨è¿™äº›ä¿¡æ¯ï¼š</p><ul><li>å®¢æˆ·ç«¯åœ°å€</li><li>æ¶ˆæ¯å‘å¸ƒæ—¶é—´</li><li>åˆ†å‘æ¶ˆè´¹è€…ã€è®¢é˜…è€…åç§°</li><li>ACK æ¶ˆè´¹è€…ã€è®¢é˜…è€…åç§°</li><li>æ¶ˆæ¯ ID<br>æœ€ç»ˆæ‹äº†ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/08/23/MWbVcu6dm1NfaAB.png" alt="image.png"></li></ul><p>éƒ½ä»¥ä¸¤ä¸ª <code>consumer</code> è®¡ç®—ï¼š<br>ä¸€æ¡æ¶ˆæ¯å ç”¨å†…å­˜ï¼š<code>140+ 535*2 + 536*2 =2282byte</code><br>å­˜å‚¨ä¸‰å¤©ï¼š<code>TPS * 86400 * 3</code>&#x3D;<code>TPS*259200</code> æ¡<br>æ€»å­˜å‚¨ï¼š<br><code>2282*TPS*259200â‰ˆ ç™¾GB</code></p><p>æ ¹æ®æˆ‘ä»¬çš„ <code>TPS</code> è®¡ç®—ï¼Œä¸‰å¤©çš„å¤§æ¦‚ä¼šä½¿ç”¨åˆ° ä¸Šç™¾ G çš„å­˜å‚¨ï¼Œè¿™æ ·é¦–å…ˆå°±æ’é™¤äº† <code>Redis</code> è¿™ç§å†…å­˜å‹æ•°æ®åº“ã€‚</p><p>åŒæ ·çš„æ¢æˆ <code>MySQL</code> å­˜å‚¨ä¹Ÿä¸åˆ’ç®—ï¼Œå› ä¸ºå…¶å®è¿™äº›æ•°æ®å¹¶ä¸ç®—é‚£ä¹ˆé‡è¦ã€‚</p><p>åšäº†å‡ ä¸ªæŠ€æœ¯é€‰å‹éƒ½ä¸å¤ªæ»¡æ„ï¼Œä¸æ˜¯èµ„æºå¼€é”€å¤ªå¤§å°±æ˜¯æ²¡æœ‰ç›¸å…³çš„è¿ç»´ç»éªŒã€‚</p><p>åé¢åœ¨é¢†å¯¼çš„æé†’ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ <code>VictoriaMetrics</code> å¼€æºäº†ä¸€ä¸ª <code>VictoriaLogs</code>ï¼Œè™½ç„¶å½“æ—¶çš„ç‰ˆæœ¬è¿˜æ˜¯ <code>0.1.0</code>ï¼Œä½¿ç”¨è¿‡ä»–ä»¬å®¶ Metrics çš„åº”è¯¥éƒ½ä¼šæ¯”è¾ƒä¿¡ä»»ä»–ä»¬çš„æŠ€æœ¯èƒ½åŠ›ï¼Œæ‰€ä»¥å°±è°ƒç ”äº†ä¸€ä¸‹ã€‚</p><p>å…·ä½“çš„ä¿¡æ¯å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<br><a href="https://docs.victoriametrics.com/VictoriaLogs/">https://docs.victoriametrics.com/VictoriaLogs/</a></p><p><img src="https://s2.loli.net/2023/08/23/8LDNOGEC6Aslvzn.png" alt="image.png"></p><p>ç®€å•æ¥è¯´å°±æ˜¯å®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ—¥å¿—å­˜å‚¨æ•°æ®åº“ï¼Œå¹¶ä¸”æœ‰ç€æä½çš„èµ„æºå æœ‰ç‡ï¼Œç›¸å¯¹äº <code>ElasticSearch</code> æ¥è¯´å†…å­˜ã€ç£ç›˜ã€CPU éƒ½æ˜¯å‡ åå€çš„ä¸‹é™ç‡ã€‚</p><p><img src="https://s2.loli.net/2023/08/23/U9v1HCgRDtLsdif.png" alt="image.png"></p><p>é€šè¿‡å®˜æ–¹çš„å‹æµ‹å¯¹æ¯”å›¾ä¼šå‘ç°ç¡®å®åœ¨å„æ–¹é¢å¯¹ ES éƒ½æ˜¯ç¢¾å‹ã€‚<br><img src="https://s2.loli.net/2023/08/23/3Epxdzie8q5tVmY.png" alt="image.png"></p><p>å®˜æ–¹å®£ä¼ çš„ç¬¬ä¸€ååº”æ˜¯ä¸èƒ½å…¨ä¿¡ï¼Œäºæ˜¯æˆ‘è‡ªå·±å‹æµ‹äº†ä¸€ä¸‹ï¼Œæœç„¶ CPU å†…å­˜ ç£ç›˜çš„å ç”¨éƒ½æ˜¯æä½çš„ã€‚</p><blockquote><p> åŒæ—¶ä¹Ÿå‘ç°è¿ç»´éƒ¨ç½²ç¡®å®ç®€å•ï¼Œç›´æ¥ä¸€ä¸ª helm install å°±æå®šï¼Œå°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸ä¼šä¾èµ–ç¬¬äºŒä¸ªç»„ä»¶ã€‚</p></blockquote><p>æŒ‰ç…§åˆšæ‰åŒæ ·çš„æ•°æ®å­˜å‚¨ä¸‰å¤©ï¼Œåªéœ€è¦ä¸åˆ° 6G çš„ç£ç›˜ç©ºé—´ï¼Œæˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒå·²ç»å¹³ç¨³è¿è¡Œä¸€æ®µæ—¶é—´äº†ã€‚<br><img src="https://s2.loli.net/2023/08/23/kzrxA89EeNnQ7Ro.png" alt="image.png"><br>å› ä¸ºæˆ‘ä»¬æ˜¯æ‰¹é‡å†™å…¥æ•°æ®çš„ï¼Œæ‰€ä»¥åœ¨æœ€é«˜å³° 20K çš„ <code>TPS</code> ä¸‹ <code>CPU</code> ä½¿ç”¨ä¸åˆ° 0.1 æ ¸ï¼Œå†…å­˜ä½¿ç”¨æœ€é«˜ <code>120M</code>ï¼Œè¿™ç‚¹ç¡®å®æ˜¯å¯¹ ES ç¢¾å‹äº†ã€‚</p><p><img src="https://s2.loli.net/2023/08/23/wn2BduNX63PyYV9.png" alt="image.png"><br>ç£ç›˜å ç”¨ä¹Ÿæ˜¯éå¸¸å°‘ã€‚</p><p>è¿™äº›æœ‰ç‚¹å¾—å½’åŠŸäºå®ƒæœ‰äº›çš„å‹ç¼©ã€ç¼–è§£ç ç®—æ³•ï¼Œä»¥åŠ <code>Golang</code>  å¸¦æ¥çš„ç›¸å¯¹äº <code>Java</code> çš„æä½èµ„æºå ç”¨ã€‚</p><h1 id="è¿˜å­˜åœ¨çš„é—®é¢˜"><a href="#è¿˜å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="è¿˜å­˜åœ¨çš„é—®é¢˜"></a>è¿˜å­˜åœ¨çš„é—®é¢˜</h1><p>å¦‚æœä¸€åˆ‡éƒ½è¿™ä¹ˆå®Œç¾çš„è¯é‚£ <code>VictoriaLogs</code>  ç¡®å®ä¹Ÿå¤ªå˜æ€äº†ï¼Œ è‡ªç„¶ä»–ä¹Ÿæœ‰ä¸€äº›ä¸å¤ªå®Œç¾çš„åœ°æ–¹ã€‚</p><h2 id="åˆ†è¯åŠŸèƒ½æœ‰é™"><a href="#åˆ†è¯åŠŸèƒ½æœ‰é™" class="headerlink" title="åˆ†è¯åŠŸèƒ½æœ‰é™"></a>åˆ†è¯åŠŸèƒ½æœ‰é™</h2><p>é¦–å…ˆç¬¬ä¸€ä¸ªæ˜¯åˆ†è¯åŠŸèƒ½æœ‰é™ï¼Œåªèƒ½åšç®€å•çš„æœç´¢ï¼Œæ— æ³•åšåˆ°ç±»ä¼¼äº ES çš„å„ç§åˆ†è¯ï¼Œæ’ä»¶å½“ç„¶ä¹Ÿåˆ«æƒ³äº†ã€‚</p><h2 id="ä¸æ”¯æŒé›†ç¾¤"><a href="#ä¸æ”¯æŒé›†ç¾¤" class="headerlink" title="ä¸æ”¯æŒé›†ç¾¤"></a>ä¸æ”¯æŒé›†ç¾¤</h2><p>å½“å‰ç‰ˆæœ¬ä¸æ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œä¹Ÿå°±æ˜¯æ— æ³•æ¨ªå‘æ‰©å±•äº†ï¼›ä¸è¿‡å¹¸å¥½ä»–çš„çš„å•æœºæ€§èƒ½å·²ç»éå¸¸å¼ºäº†ã€‚</p><p>è¿™ä¹Ÿæ˜¯ç›®å‰é˜¶æ®µéƒ¨ç½²ç®€å•çš„åŸå› ã€‚</p><h2 id="è¿‡æœŸæ—¶é—´æ— æ³•æ··ç”¨"><a href="#è¿‡æœŸæ—¶é—´æ— æ³•æ··ç”¨" class="headerlink" title="è¿‡æœŸæ—¶é—´æ— æ³•æ··ç”¨"></a>è¿‡æœŸæ—¶é—´æ— æ³•æ··ç”¨</h2><p><code>VictoriaLogs</code> æ”¯æŒä¸ºæ•°æ®é…ç½®è¿‡æœŸæ—¶é—´è‡ªåŠ¨åˆ é™¤ï¼Œæœ‰ç‚¹ç±»ä¼¼äº Redisï¼Œå®ƒä¼šåœ¨åå°å¯åŠ¨ä¸€ä¸ªåç¨‹å®šæœŸåˆ¤æ–­æ•°æ®æ˜¯å¦è¿‡æœŸï¼Œä½†åªèƒ½å¯¹æ‰€æœ‰æ•°æ®ç»Ÿä¸€è®¾ç½®ã€‚</p><p>æ¯”å¦‚æˆ‘æƒ³åœ¨ <code>VictoriaLogs</code> ä¸­å­˜æ”¾ä¸¤ç§ä¸åŒç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶ä»–ä»¬çš„è¿‡æœŸåˆ é™¤æ—¶é—´ä¹Ÿä¸ç›¸åŒï¼›æ¯”å¦‚ä¸€ä¸ªæ˜¯ä¸‰å¤©åˆ é™¤ï¼Œä¸€ä¸ªæ˜¯ä¸‰æœˆååˆ é™¤ã€‚</p><p>è¿™æ ·çš„éœ€æ±‚ç›®å‰æ˜¯æ— æ³•å®ç°çš„ï¼Œåªèƒ½éƒ¨ç½²ä¸¤ä¸ª <code>VictoriaLogs</code>.</p><h2 id="é»˜è®¤æ— æ³•æŸ¥è¯¢æ‰€æœ‰å­—æ®µ"><a href="#é»˜è®¤æ— æ³•æŸ¥è¯¢æ‰€æœ‰å­—æ®µ" class="headerlink" title="é»˜è®¤æ— æ³•æŸ¥è¯¢æ‰€æœ‰å­—æ®µ"></a>é»˜è®¤æ— æ³•æŸ¥è¯¢æ‰€æœ‰å­—æ®µ</h2><p><img src="https://s2.loli.net/2023/08/24/2Wk6VUXQoEYvZJ1.png" alt="image.png"></p><p>ç”±äº <code>VictoriaLogs</code>  å¯ä»¥å­˜å‚¨éç»“æ„åŒ–æ•°æ®ï¼Œé»˜è®¤æƒ…å†µä¸‹åªèƒ½æŸ¥è¯¢å†…ç½®çš„ä¸‰ä¸ªå­—æ®µï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„å­—æ®µç›®å‰æ²¡æ³•è‡ªåŠ¨æŸ¥è¯¢ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šã€‚</p><p>è¿™ä¸ªå€’ä¸æ˜¯è‡´å‘½é—®é¢˜ï¼Œåªæ˜¯ä½¿ç”¨èµ·æ¥ç¨å¾®éº»çƒ¦ä¸€äº›ï¼›ç¤¾åŒºä¹Ÿæœ‰ä¸€äº›åé¦ˆï¼Œç›¸ä¿¡ä¸ä¹…å°±ä¼šä¼˜åŒ–è¯¥åŠŸèƒ½ã€‚<br><img src="https://s2.loli.net/2023/08/24/XYxz8tTDmw6arf9.png" alt="image.png"><br><img src="https://s2.loli.net/2023/08/24/pgQCPsLvXfMc7nF.png" alt="image.png"></p><ul><li><a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/4780">https://github.com/VictoriaMetrics/VictoriaMetrics/issues/4780</a></li><li><a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/4513">https://github.com/VictoriaMetrics/VictoriaMetrics/issues/4513</a></li></ul><h2 id="æ²¡æœ‰å®˜æ–¹-SDK"><a href="#æ²¡æœ‰å®˜æ–¹-SDK" class="headerlink" title="æ²¡æœ‰å®˜æ–¹ SDK"></a>æ²¡æœ‰å®˜æ–¹ SDK</h2><p><img src="https://s2.loli.net/2023/08/24/bXPKRIy7Ojf1elE.png" alt="image.png"></p><p>è¿™ä¹Ÿæ˜¯ä¸ªæœ‰äº†æ›´å¥½çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç›®å‰åªèƒ½æ ¹æ® REST API è‡ªå·±ç¼–å†™ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å½“å‰æˆ‘ä»¬åªç”¨æ¥å­˜å‚¨ <code>Pulsar</code> é“¾è·¯è¿½è¸ªæ•°æ®ï¼Œç›®å‰çœ‹æ¥éå¸¸ç¨³å®šï¼Œå„æ–¹é¢èµ„æºå ç”¨æå°‘ï¼›æ‰€ä»¥åç»­æˆ‘ä»¬ä¼šé™†ç»­è®²ä¸€äº›æ—¥å¿—ç±»å‹çš„æ•°æ®è¿ç§»è¿‡æ¥ï¼Œæ¯”å¦‚å®¡è®¡æ—¥å¿—å•¥çš„ã€‚</p><p>ä¹‹åå†é€æ­¥å®Œå–„åŠŸèƒ½åï¼Œç”šè‡³å¯ä»¥å°†æ‰€æœ‰åº”ç”¨å­˜æ”¾åœ¨ <code>ElasticSeach</code> ä¸­çš„æ—¥å¿—ä¹Ÿè¿ç§»è¿‡æ¥ï¼Œè¿™æ ·ç¡®å®èƒ½çœä¸‹ä¸å°‘èµ„æºã€‚</p><p>æ€»å¾—æ¥è¯´ <code>VictoriaLogs</code>  èµ„æºå ç”¨æå°‘ï¼Œå¦‚æœåªæ˜¯æ‹¿æ¥å­˜å‚¨æ—¥å¿—ç›¸å…³çš„æ•°æ®ï¼Œæ²¡æœ‰å¾ˆå¼ºçš„åˆ†è¯éœ€æ±‚é‚£å®ƒå°†éå¸¸åˆé€‚ã€‚</p><p>æˆªæ­¢åˆ°ç›®å‰æœ€æ–°ç‰ˆä¹Ÿæ‰ <code>0.3.0</code> è¿˜æœ‰å¾ˆå¤§çš„è¿›æ­¥ç©ºé—´ï¼Œæœ‰ç±»ä¼¼éœ€æ±‚çš„å¯ä»¥æŒç»­å…³æ³¨ã€‚<br>#Blog #Vlogs #CloudNative </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/08/23/t5soejn8vw1aZil.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å‰æ®µæ—¶é—´æˆ‘ä»¬æƒ³å®ç° &lt;code&gt;Pulsar&lt;/code&gt; æ¶ˆæ¯çš„è¿½è¸ªæµç¨‹ï¼Œè¿½è¸ªå®ç°çš„æ•ˆæœå›¾å¦‚ä¸‹ï¼š&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2023/08/02/H7pjinzQ5EWR2tF.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å®ç°å…¶å®æ¯”è¾ƒç®€å•ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯å¦‚ä½•å­˜å‚¨æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¶ˆæ¯çš„è¯»å–æˆ‘ä»¬æ˜¯é€šè¿‡ Pulsar è‡ªå¸¦çš„ BrokerInterceptor å®ç°çš„ï¼Œå¯¹è¿™ä¸ªæ„Ÿå…´è¶£çš„æœ‹å‹åé¢ä¼šå•ç‹¬åšä¸€ä¸ªåˆ†äº«ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="VictoriaLogs" scheme="http://crossoverjie.top/categories/VictoriaLogs/"/>
    
    
    <category term="CloudNative" scheme="http://crossoverjie.top/tags/CloudNative/"/>
    
  </entry>
  
  <entry>
    <title>k8s å¸¸è§é¢è¯•é¢˜ 01</title>
    <link href="http://crossoverjie.top/2023/08/17/ob/k8s-question-01/"/>
    <id>http://crossoverjie.top/2023/08/17/ob/k8s-question-01/</id>
    <published>2023-08-17T14:33:43.000Z</published>
    <updated>2023-09-15T18:42:21.018Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/08/17/hnWciw54ml6oPdg.jpg"></p><p>å‰æ®µæ—¶é—´åœ¨è¿™ä¸ªè§†é¢‘ä¸­åˆ†äº«äº† <a href="https://github.com/bregman-arie/devops-exercises">https://github.com/bregman-arie/devops-exercises</a> è¿™ä¸ªçŸ¥è¯†ä»“åº“ã€‚</p><iframe src="//player.bilibili.com/player.html?aid=532004472&bvid=BV1Wu411n7U7&cid=1227759877&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p>è¿™æ¬¡ç»§ç»­åˆ†äº«é‡Œé¢çš„å†…å®¹ï¼Œæœ¬æ¬¡ä¸»è¦ä»¥ k8s ç›¸å…³çš„é—®é¢˜ä¸ºä¸»ã€‚</p><span id="more"></span><h2 id="k8s-æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼ä¸šé€‰æ‹©ä½¿ç”¨å®ƒ"><a href="#k8s-æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼ä¸šé€‰æ‹©ä½¿ç”¨å®ƒ" class="headerlink" title="k8s æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼ä¸šé€‰æ‹©ä½¿ç”¨å®ƒ"></a>k8s æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼ä¸šé€‰æ‹©ä½¿ç”¨å®ƒ</h2><p>k8s æ˜¯ä¸€ä¸ªå¼€æºåº”ç”¨ï¼Œç»™ç”¨æˆ·æä¾›äº†ç®¡ç†ã€éƒ¨ç½²ã€æ‰©å±•å®¹å™¨çš„èƒ½åŠ›ï¼Œä»¥ä¸‹å‡ ä¸ªä¾‹å­æ›´å®¹æ˜“ç†è§£ï¼š</p><ul><li>ä½ å¯ä»¥å°†å®¹å™¨è¿è¡Œåœ¨ä¸åŒçš„æœºå™¨æˆ–èŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”å¯ä»¥å°†ä¸€äº›å˜åŒ–åŒæ­¥ç»™è¿™äº›å®¹å™¨ï¼Œç®€å•æ¥è¯´æˆ‘ä»¬åªéœ€è¦ç¼–å†™ <code>yaml</code> æ–‡ä»¶ï¼Œå‘Šè¯‰ <code>k8s</code> æˆ‘çš„é¢„æœŸæ˜¯ä»€ä¹ˆï¼Œå…¶ä¸­åŒæ­¥å˜åŒ–çš„è¿‡ç¨‹å…¨éƒ¨éƒ½äº¤ç»™ k8s å»å®Œæˆã€‚<blockquote><p>å…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å£°æ˜å¼ API</p></blockquote></li><li>ç¬¬äºŒä¸ªç‰¹ç‚¹åˆšæ‰å·²ç»æåˆ°äº†ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬ä¸€é”®ç®¡ç†å¤šä¸ªå®¹å™¨ï¼ŒåŒæ­¥æ‰€æœ‰çš„å˜æ›´ã€‚</li><li>å¯ä»¥æ ¹æ®å½“å‰çš„è´Ÿè½½è°ƒæ•´åº”ç”¨çš„å‰¯æœ¬æ•°ï¼Œè´Ÿè½½é«˜å°±æ–°åˆ›å»ºå‡ ä¸ªåº”ç”¨å®ä¾‹ï¼Œä½å°±é™ä½å‡ ä¸ªï¼Œè¿™ä¸ªå¯ä»¥æ‰‹åŠ¨æˆ–è‡ªåŠ¨å®Œæˆã€‚</li></ul><h2 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æˆ–è€…ä¸ä½¿ç”¨-k8s"><a href="#ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æˆ–è€…ä¸ä½¿ç”¨-k8s" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æˆ–è€…ä¸ä½¿ç”¨ k8s"></a>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æˆ–è€…ä¸ä½¿ç”¨ k8s</h2><ul><li>å¦‚æœä¸»è¦è¿˜æ˜¯ä½¿ç”¨ç‰©ç†æœºè¿™ç§ä½çº§åˆ«çš„åŸºç¡€è®¾æ–½çš„è¯ï¼Œä¸å¤ªå»ºè®®ä½¿ç”¨ <code>k8s</code>ï¼Œè¿™ç§æƒ…å†µé€šå¸¸æ˜¯æ¯”è¾ƒä¼ ç»Ÿçš„ä¸šåŠ¡ï¼Œæ²¡æœ‰å¿…è¦ä½¿ç”¨ <code>k8s</code>ã€‚</li><li>ç¬¬äºŒç§æƒ…å†µæ˜¯å¦‚æœæ˜¯å°å›¢é˜Ÿï¼Œæˆ–è€…å®¹å™¨è§„æ¨¡è¾ƒå°æ—¶ä¹Ÿä¸å»ºè®®ä½¿ç”¨ï¼Œé™¤éä½ æƒ³ä½¿ç”¨ k8s çš„æ»šåŠ¨å‘å¸ƒå’Œè‡ªæ‰©å®¹èƒ½åŠ›ï¼Œ<blockquote><p>ä¸è¿‡è¿™äº›åŠŸèƒ½è¿ç»´è‡ªå·±å†™å·¥å…·ä¹Ÿèƒ½å®ç°ã€‚</p></blockquote></li></ul><h2 id="k8s-æœ‰å“ªäº›ç‰¹æ€§"><a href="#k8s-æœ‰å“ªäº›ç‰¹æ€§" class="headerlink" title="k8s æœ‰å“ªäº›ç‰¹æ€§"></a>k8s æœ‰å“ªäº›ç‰¹æ€§</h2><ul><li>æ˜¯è‡ªæˆ‘ä¿®å¤ï¼Œ<code>k8s</code> å¯¹å®¹å™¨æœ‰ç€å¥åº·æ£€æµ‹ï¼Œæ¯”å¦‚ä½¿ç”¨å¯åŠ¨æ¢é’ˆã€å­˜æ´»æ¢é’ˆç­‰ï¼Œæˆ–è€…æ˜¯å®¹å™¨ <code>OOM</code> åä¹Ÿä¼šé‡å¯åº”ç”¨å°è¯•ä¿®å¤ã€‚</li><li>è‡ªå¸¦è´Ÿè½½å‡è¡¡ï¼Œä½¿ç”¨ <code>service</code> å¯ä»¥å°†æµé‡è‡ªåŠ¨è´Ÿè½½åˆ°åç»­ Pod ä¸­ï¼Œå¦‚æœ Pod æä¾›çš„æ˜¯ http æœåŠ¡è¿™ä¸ªå¤Ÿç”¨äº†ï¼Œä½†å¦‚æœæ˜¯ grpc è¿™æ ·çš„é•¿é“¾æ¥ï¼Œå°±éœ€è¦ä½¿ç”¨ istio è¿™ç±»æœåŠ¡ç½‘æ ¼ï¼Œä»–å¯ä»¥è¯†åˆ«å‡ºåè®®ç±»å‹ï¼Œä»è€Œåšåˆ°è¯·æ±‚çº§åˆ«çš„è´Ÿè½½å‡è¡¡ã€‚</li><li><code>Operator</code> è‡ªåŠ¨è¿ç»´èƒ½åŠ›ï¼šk8s å¯ä»¥æ ¹æ®åº”ç”¨çš„è¿è¡Œæƒ…å†µè‡ªåŠ¨è°ƒæ•´å½“å‰é›†ç¾¤çš„ Pod æ•°é‡ã€å­˜å‚¨ç­‰ï¼Œæ‹¿ <code>Pulsar</code> ä¸¾ä¾‹ï¼Œå½“æµé‡æ¿€å¢åè‡ªåŠ¨æ–°å¢ <code>broker</code>ï¼Œç£ç›˜ä¸è¶³æ—¶è‡ªåŠ¨æ‰©å®¹ç­‰ã€‚</li><li>æ»šåŠ¨æ›´æ–°èƒ½åŠ›ï¼šå½“æˆ‘ä»¬å‘ç‰ˆæˆ–è€…æ˜¯å›æ»šç‰ˆæœ¬çš„æ—¶å€™ï¼Œk8s ä¼šç­‰å¾…æ–°çš„å®¹å™¨å¯åŠ¨ä¹‹åæ‰ä¼šå°†æµé‡åˆ‡å›æ¥ï¼ŒåŒæ—¶é€æ­¥åœæ­¢è€çš„å®ä¾‹ã€‚</li><li>æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼šå¯ä»¥çµæ´»çš„æ–°å¢æˆ–è€…æ˜¯å‡å°‘å‰¯æœ¬çš„æ•°é‡ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªåŠ¨æ§åˆ¶ã€‚</li><li>æ•°æ®åŠ å¯†ï¼šä½¿ç”¨ <code>secret</code> å¯ä»¥ä¿å­˜ä¸€äº›æ•æ„Ÿçš„é…ç½®æˆ–è€…æ–‡ä»¶ã€‚</li></ul><h2 id="k8s-æœ‰ç€å“ªäº›å¯¹è±¡"><a href="#k8s-æœ‰ç€å“ªäº›å¯¹è±¡" class="headerlink" title="k8s æœ‰ç€å“ªäº›å¯¹è±¡"></a>k8s æœ‰ç€å“ªäº›å¯¹è±¡</h2><p>è¿™ä¸ªå°±æ˜¯è€ƒå¯Ÿæˆ‘ä»¬å¯¹ <code>k8s</code> æ˜¯å¦æ˜¯ç†Ÿæ‚‰äº†ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p><ul><li>Pod</li><li>Service</li><li>ReplicationController</li><li>DaemonSet</li><li>namespace</li><li>ConfigMap<br>è¿™ä¸ªå…¶å®çŸ¥é“æ²¡æœ‰å¤ªå¤šä½œç”¨ï¼Œä¸»è¦è¿˜æ˜¯å¾—çŸ¥é“åœ¨ä¸åŒåœºæ™¯å¦‚ä½•ä½¿ç”¨ä¸åŒçš„ç»„ä»¶ã€‚</li></ul><h2 id="å“ªäº›å­—æ®µæ˜¯å¿…é¡»çš„"><a href="#å“ªäº›å­—æ®µæ˜¯å¿…é¡»çš„" class="headerlink" title="å“ªäº›å­—æ®µæ˜¯å¿…é¡»çš„"></a>å“ªäº›å­—æ®µæ˜¯å¿…é¡»çš„</h2><p>è¿™ä¸ªé—®é¢˜æˆ‘ä¹Ÿè§‰å¾—æ„ä¹‰ä¸å¤§ï¼Œåªè¦å†™è¿‡ <code>yaml</code> å°±ä¼šçŸ¥é“äº†ï¼Œ<code>metadata, kind, apiVersion</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">labels:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">app</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">app</span></span><br></pre></td></tr></table></figure><h2 id="kubectl-æ˜¯ä»€ä¹ˆ"><a href="#kubectl-æ˜¯ä»€ä¹ˆ" class="headerlink" title="kubectl æ˜¯ä»€ä¹ˆ"></a>kubectl æ˜¯ä»€ä¹ˆ</h2><p>å…¶å®å°±æ˜¯ä¸€ä¸ª k8s çš„ å‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€‚</p><h2 id="å½“ä½ éƒ¨ç½²åº”ç”¨çš„æ—¶å€™å“ªäº›å¯¹è±¡ç”¨çš„æ¯”è¾ƒå¤š"><a href="#å½“ä½ éƒ¨ç½²åº”ç”¨çš„æ—¶å€™å“ªäº›å¯¹è±¡ç”¨çš„æ¯”è¾ƒå¤š" class="headerlink" title="å½“ä½ éƒ¨ç½²åº”ç”¨çš„æ—¶å€™å“ªäº›å¯¹è±¡ç”¨çš„æ¯”è¾ƒå¤š"></a>å½“ä½ éƒ¨ç½²åº”ç”¨çš„æ—¶å€™å“ªäº›å¯¹è±¡ç”¨çš„æ¯”è¾ƒå¤š</h2><ul><li>ç¬¬ä¸€ä¸ªè‚¯å®šæ˜¯ <code>deployment</code>ï¼Œè¿™åº”è¯¥æ˜¯æœ€å¸¸è§çš„éƒ¨ç½²æ–¹å¼ã€‚</li><li><code>service</code>: å¯ä»¥å°†æµé‡è´Ÿè½½åˆ° Pod ä¸­ã€‚</li><li><code>Ingress</code>: å¦‚æœéœ€è¦ä»é›†ç¾¤å¤–è®¿é—® Pod å°±å¾—éœ€è¦ <code>Ingress</code> ç„¶å é…åˆåŸŸåè®¿é—®ã€‚</li></ul><h2 id="ä¸ºä»€ä¹ˆæ²¡æœ‰-k-get-containers-è¿™ä¸ªå‘½ä»¤"><a href="#ä¸ºä»€ä¹ˆæ²¡æœ‰-k-get-containers-è¿™ä¸ªå‘½ä»¤" class="headerlink" title="ä¸ºä»€ä¹ˆæ²¡æœ‰ k get containers è¿™ä¸ªå‘½ä»¤"></a>ä¸ºä»€ä¹ˆæ²¡æœ‰ <code>k get containers</code> è¿™ä¸ªå‘½ä»¤</h2><p>è¿™ä¸ªé—®é¢˜ä¸»è¦æ˜¯çœ‹å¯¹ <code>Pod</code> çš„ç†è§£ï¼Œå› ä¸ºåœ¨ <code>k8s</code> ä¸­ <code>Pod</code> å°±æ˜¯æœ€å°çš„å•ä½äº†ï¼Œå¦‚æœæƒ³è¦è®¿é—®å®¹å™¨å¯ä»¥åœ¨ Pod ä¸­è®¿é—®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åŠ ä¸Š <code>-c</code> å‚æ•°è¿›å…¥å…·ä½“çš„å®¹å™¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl exec -it app -c istio-proxy</span><br></pre></td></tr></table></figure><h2 id="ä½ è®¤ä¸ºä½¿ç”¨ä½¿ç”¨-k8s-çš„æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆ"><a href="#ä½ è®¤ä¸ºä½¿ç”¨ä½¿ç”¨-k8s-çš„æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä½ è®¤ä¸ºä½¿ç”¨ä½¿ç”¨ k8s çš„æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆ"></a>ä½ è®¤ä¸ºä½¿ç”¨ä½¿ç”¨ k8s çš„æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆ</h2><p>è¿™ä¸ªä¸»è¦æ˜¯çœ‹æ—¥å¸¸ä½¿ç”¨æ—¶æœ‰æ²¡æœ‰é‡åˆ°ä»€ä¹ˆå‘äº†ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå°±æ˜¯è¦éªŒè¯ <code>yaml</code> å†…å®¹æ˜¯å¦æ­£ç¡®ï¼Œè¿™ä¸ªç¡®å®å¾ˆé‡è¦ï¼Œä¸€æ—¦æ‰§è¡Œé”™äº†åæœå¾ˆä¸¥é‡ï¼Œæ¯”å¦‚ä½¿ç”¨ helm çš„æ—¶å€™æœ€å¥½å²‚å®¹ <code>dry-run</code> å’Œ <code>debug</code>ï¼Œå…ˆçœ‹çœ‹ç”Ÿæˆçš„ <code>yaml</code> æ˜¯å¦æ˜¯é¢„æœŸæƒ³è¦çš„ã€‚<blockquote><p>helm upgrade app â€“dry-run â€“debug</p></blockquote></li><li>ç¬¬äºŒä¸ªé™åˆ¶èµ„æºçš„ä½¿ç”¨ï¼Œæ¯”å¦‚ CPU å’Œ å†…å­˜ï¼Œè¿™ä¸ªä¹Ÿå¾ˆé‡è¦ï¼Œå¦‚æœä¸è®¾ç½®ä¸€æ—¦åº”ç”¨å‡ºç° bug å¯èƒ½å¯¼è‡´æ•´ä¸ª k8s é›†ç¾¤éƒ½å—åˆ°å½±å“ã€‚</li><li>ä¸º Podï¼Œdeployment æŒ‡å®šæ ‡ç­¾ï¼Œç”¨äºåˆ†ç»„ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èµ„æºé™åˆ¶</span></span><br><span class="line"><span class="attr">resources:</span>  </span><br><span class="line">  <span class="attr">limits:</span>  </span><br><span class="line">    <span class="attr">cpu:</span> <span class="string">200m</span>  </span><br><span class="line">    <span class="attr">memory:</span> <span class="string">200Mi</span>  </span><br><span class="line">  <span class="attr">requests:</span>  </span><br><span class="line">    <span class="attr">cpu:</span> <span class="string">100m</span>  </span><br><span class="line">    <span class="attr">memory:</span> <span class="string">100Mi</span></span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒæ¥æºï¼š<a href="https://github.com/bregman-arie/devops-exercises/blob/master/topics/kubernetes/README.md#kubernetes-101">https://github.com/bregman-arie/devops-exercises/blob/master/topics/kubernetes/README.md#kubernetes-101</a></p></blockquote><p>åç»­éƒ¨åˆ†å†…å®¹ä¹Ÿæœ‰å‡ºè§†é¢‘ç‰ˆï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶å…³æ³¨æˆ‘çš„ B ç«™æˆ–è€…æ˜¯è§†é¢‘å·ï¼š<br><img src="https://s2.loli.net/2023/08/17/joO3wpCAEMtY2yW.jpg" alt="image.png"><br><img src="https://s2.loli.net/2023/08/17/2gcNDC4M3x91Sbh.jpg" alt="image.png"></p><p>#Blog #K8s </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/08/17/hnWciw54ml6oPdg.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‰æ®µæ—¶é—´åœ¨è¿™ä¸ªè§†é¢‘ä¸­åˆ†äº«äº† &lt;a href=&quot;https://github.com/bregman-arie/devops-exercises&quot;&gt;https://github.com/bregman-arie/devops-exercises&lt;/a&gt; è¿™ä¸ªçŸ¥è¯†ä»“åº“ã€‚&lt;/p&gt;
&lt;iframe src=&quot;//player.bilibili.com/player.html?aid=532004472&amp;bvid=BV1Wu411n7U7&amp;cid=1227759877&amp;page=1&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;&gt; &lt;/iframe&gt;

&lt;p&gt;è¿™æ¬¡ç»§ç»­åˆ†äº«é‡Œé¢çš„å†…å®¹ï¼Œæœ¬æ¬¡ä¸»è¦ä»¥ k8s ç›¸å…³çš„é—®é¢˜ä¸ºä¸»ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Interview" scheme="http://crossoverjie.top/categories/Interview/"/>
    
    
    <category term="k8s" scheme="http://crossoverjie.top/tags/k8s/"/>
    
  </entry>
  
  <entry>
    <title>æ–°æ‰‹å¦‚ä½•å¿«é€Ÿå‚ä¸å¼€æºé¡¹ç›®</title>
    <link href="http://crossoverjie.top/2023/08/05/ob/novice-contribute-open-source/"/>
    <id>http://crossoverjie.top/2023/08/05/ob/novice-contribute-open-source/</id>
    <published>2023-08-05T05:37:58.000Z</published>
    <updated>2023-09-15T18:42:21.019Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/08/05/5mXrStCDVHNxF7f.png" alt="image.png"></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¼€æºè¿™ä»¶äº‹æƒ…åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸä¸€ç›´æ˜¯ä¸€ä¸ªé«˜é¢‘è¯é¢˜ï¼Œæˆ‘ä»¬å·¥ä½œä¸­ä¸ç®¡æ˜¯ä½¿ç”¨åˆ°çš„å·¥å…·è¿˜æ˜¯ç¬¬ä¸‰æ–¹åº“éƒ½ç¦»ä¸å¼€å¼€æºçš„æ”¯æŒã€‚</p><p>è¿‘æœŸç”±äºå·¥ä½œçš„åŸå› ï¼Œæˆ‘éœ€è¦ç»å¸¸å’Œ <code>Apache Pulsar</code> ç¤¾åŒºæ²Ÿé€šï¼ŒåŒæ—¶ä¹Ÿä¼šå°†æ—¥å¸¸ç¢°åˆ°çš„é—®é¢˜åé¦ˆç»™ç¤¾åŒºï¼ŒåŒ…æ‹¬ä¸€äº› <code>bug</code> ï¼Œä¸€äº›æˆ‘èƒ½ä¿®çš„ä¹Ÿæ˜¯é¡ºå¸¦å°±æäº†ä¸€äº› <code>PR</code>ã€‚</p><span id="more"></span><p>ä¹‹å‰æˆ–å¤šæˆ–å°‘æˆ‘ä¹Ÿå‚ä¸è¿‡å…¶ä»–çš„å¼€æºç¤¾åŒºï¼Œä½†å’Œç°åœ¨çš„è¿˜æ˜¯æœ‰äº›è®¸çš„ä¸åŒï¼š</p><ul><li>ä»¥å‰æˆ‘æ›´å¤šçš„æ˜¯ä¸ªäººå¼€æºé¡¹ç›®ï¼Œå¶å°”ä¹Ÿä¼šæœ‰å…¶ä»–å¼€å‘è€…å‘æˆ‘çš„ä»“åº“è´¡çŒ®ä»£ç ã€‚</li><li>ä¹Ÿå‚ä¸è¿‡å…¶ä»–ä¸ªäººä½œè€…æˆ–è€…æ˜¯ç¤¾åŒºæ€§è´¨çš„é¡¹ç›®ï¼Œä½†æµç¨‹ä¸Šæ²¡æœ‰é‚£ä¹ˆæ­£è§„æˆ–è€…æ˜¯<code>æ ‡å‡†</code>ã€‚</li></ul><p>ç®€å•æ¥è¯´å°±æ˜¯ä»¥å‰å°±æ˜¯å°æ‰“å°é—¹ï¼Œ<code>Pulsar</code> æ¯•ç«Ÿæ˜¯ <code>Apache</code> ç¤¾åŒºçš„é¡¶çº§é¡¹ç›®ï¼Œå‚ä¸çš„æ•´ä¸ªæµç¨‹è¦æ±‚ä¹Ÿä¼šæ¯”è¾ƒå¤æ‚ï¼Œå½“ç„¶å­¦åˆ°çš„çŸ¥è¯†ä¹Ÿä¼šæ›´å¤šã€‚</p><p><img src="https://s2.loli.net/2023/08/05/uSRKlvh8q4sTpWj.png" alt="image.png"></p><p><img src="https://s2.loli.net/2023/08/05/DJm145yigIhEvwe.png" alt="image.png"><br>è¿™åŠå¹´æ—¶é—´å¤§å¤§å°å°æäº†åå‡ ä¸ª PR ï¼Œä¹Ÿé€æ¸æ‹æ¸…æ¥šäº†ä¸€äº›ä¸Šæ‰‹çš„æ–¹æ³•å’Œå¥—è·¯ï¼Œæ‰€ä»¥å¦‚æœä½ ä¹Ÿæƒ³å‚ä¸å¼€æºï¼Œä½†è‹¦äºä¸çŸ¥é“å¦‚ä½•å…¥é—¨ï¼Œçœ‹å®Œåå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><h1 id="ä¸ºä»€ä¹ˆå‚ä¸å¼€æº"><a href="#ä¸ºä»€ä¹ˆå‚ä¸å¼€æº" class="headerlink" title="ä¸ºä»€ä¹ˆå‚ä¸å¼€æº"></a>ä¸ºä»€ä¹ˆå‚ä¸å¼€æº</h1><p>é¦–å…ˆè¿˜æ˜¯æ¥èŠèŠå‚ä¸å¼€æºçš„å¥½å¤„ï¼Œäº†è§£ä¹‹åä¹Ÿè®¸ä¼šè®©ä½ æœ‰è·¯è½¬ç²‰ã€‚</p><p>é¦–å…ˆæœ€æ˜æ˜¾çš„ä¸€ç‚¹å°±æ˜¯è®©ä½ å¯¹è´¡çŒ®çš„è¿™ä¸ªé¡¹ç›®æ›´åŠ æ·±å…¥çš„äº†è§£ï¼Œæˆ‘ä»¬å¸¸å¸¸éƒ½åœ¨é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°å¯¹ XX æ¡†æ¶çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œå“ªæ€•ä½ åœ¨ç®€å†é‡Œå†™çš„å¤©èŠ±ä¹±å ä¹Ÿæ²¡æœ‰æ˜¯è¿™ä¸ªé¡¹ç›®  <code>Contributor</code> æ›´å…·æœ‰è¯´æœåŠ›ã€‚</p><p>å…¶æ¬¡æ˜¯æ²Ÿé€šäº¤æµèƒ½åŠ›ä¹Ÿä¼šå¾—åˆ°é”»ç‚¼ï¼Œå¼€æºç¤¾åŒºå¾€å¾€éƒ½æ˜¯ä»¥ <code>github issue/PR</code>ï¼Œæˆ–è€…æ˜¯ <code>Mailing List</code> çš„æ–¹å¼æ²Ÿé€šäº¤æµï¼Œè¿™æ ·çš„æ²Ÿé€šæ–¹å¼å’Œæˆ‘ä»¬å¸¸ç”¨çš„å¾®ä¿¡ã€QQ è¿™ç±»åŠæ—¶é€šè®¯å·¥å…·æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ã€‚</p><p>å¾€å¾€éœ€è¦æˆ‘ä»¬æœ‰äº†å†·é™çš„æ€è€ƒåŠ ä¸Šæ¸…æ™°çš„æè¿°æ‰ä¼šå°†è‡ªå·±çš„è§‚ç‚¹å‘å¸ƒå‡ºå»ï¼Œè¿™æ ·ä¸è‡ªè§‰çš„å°±ä¼šå…»æˆè‡ªå·±çš„æ€»ç»“èƒ½åŠ›ï¼Œè¿™ä¸ªèƒ½åŠ›å¯¹äº<code>å†…å®¹åˆ›æ„å†…å®¹å·¥ä½œè€…</code>æ¥è¯´éå¸¸é‡è¦ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªæ›´æ˜æ˜¾çš„å¥½å¤„å°±æ˜¯å¯¹ä¸ªäººçš„èƒ½åŠ›èƒŒä¹¦ï¼Œå¤§å®¶å¸¸è¯´çš„ <code>show me the code</code>ï¼Œè€Œ <code>GitHub</code> å°±æ˜¯æœ€å¥½çš„æ–¹å¼ã€‚</p><p>å½“ä½ æ˜¯æŸä¸ªçŸ¥åå¼€æºé¡¹ç›®çš„ <code>Contributor</code> ç”šè‡³æ˜¯ <code>Committer/PMC</code> å°±å·²ç»è¶³å¤Ÿè¯æ˜è‡ªå·±çš„èƒ½åŠ›äº†ã€‚</p><h1 id="å¦‚ä½•å‚ä¸"><a href="#å¦‚ä½•å‚ä¸" class="headerlink" title="å¦‚ä½•å‚ä¸"></a>å¦‚ä½•å‚ä¸</h1><p>å¦‚ä½•å‚ä¸å‘¢ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œä¸å¤–ä¹æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼ˆç”±æ˜“åˆ°éš¾ï¼‰ï¼š</p><ul><li>ä¸€äº› <code>typo</code> ç±»çš„ä¿®å¤ã€‚</li><li>å›ç­”ç¤¾åŒºä¸­ç”¨æˆ·çš„é—®é¢˜ã€‚</li><li>ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ° <code>bug</code>ï¼Œç›´æ¥åé¦ˆï¼Œæœ‰å…´è¶£çš„è¯æœ€å¥½æ˜¯è‡ªå·±èƒ½ä¿®å¤ã€‚</li><li>ä¿®å¤ç°æœ‰ <code>issue</code> åˆ—è¡¨ä¸­æœªè§£å†³çš„ <code>bug</code>ã€‚</li><li>è½¯ä»¶ä¸å…·å¤‡è‡ªå·±éœ€è¦çš„åŠŸèƒ½æ—¶æäº¤ <code>feature</code> ææ¡ˆå¹¶å®ç°ã€‚</li></ul><p>ä¸ç®¡æ˜¯å“ªç§æ–¹å¼æˆ‘çš„å»ºè®®æ˜¯åœ¨å‡†å¤‡è´¡çŒ®ä¹‹å‰éƒ½åº”è¯¥å…ˆçœ‹çœ‹å®˜æ–¹æä¾›çš„è´¡çŒ®æŒ‡å—ï¼Œé€šå¸¸åœ¨å®˜ç½‘å°±èƒ½æŸ¥çœ‹ã€‚</p><blockquote><p>å³ä¾¿æ˜¯æœ€ç®€å•çš„ä¿®å¤ typoï¼Œå› ä¸ºè¶Šæ˜¯ä¸“ä¸šçš„é¡¹ç›®æ¯ä¸ª PR çš„åˆå¹¶éƒ½æ˜¯ä¸¥è°¨çš„ï¼Œæå‰äº†è§£åå¯ä»¥é¿å…çŠ¯ä¸€äº›åŸºæœ¬é”™è¯¯ä»è€Œå½±å“ç§¯ææ€§ã€‚</p></blockquote><p>è¿™é‡Œæˆ‘ä»¥ <code>Pulsar</code> ä¸ºä¾‹ï¼š<br><img src="https://s2.loli.net/2023/08/05/8TGyjSXChsaoPc6.png" alt="image.png"><br>å®˜ç½‘æœ‰ç€è¯¦ç»†çš„è´¡çŒ®æŒ‡å—ï¼ŒåŒ…æ‹¬ç¯å¢ƒæ­å»ºã€ä»£ç çº¦å®šã€<code>PR/git commit</code> è¯­ä¹‰ç­‰å„ç§è§„èŒƒã€‚</p><p>è¿™é‡Œæˆ‘é‡ç‚¹å¼ºè°ƒ PR çš„è¯­ä¹‰ï¼Œä¸€ä¸ªå¥½çš„ PR è§„èŒƒæ›´å®¹æ˜“å¼•èµ·ç¤¾åŒºæˆå‘˜çš„æ³¨æ„ï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ¯ä¸€æ¬¡æäº¤éƒ½éœ€è¦ <code>Committer</code> çš„åŒæ„æ‰èƒ½åˆå¹¶ã€‚</p><p><img src="https://s2.loli.net/2023/08/05/gfbEBjc4dXVLPtw.png" alt="image.png"><br>è¿˜æ˜¯ä»¥ <code>Pulsar</code> ä¸ºä¾‹ï¼Œåœ¨æäº¤ PR å‰ä¸€å®šå¾—å…ˆçœ‹çœ‹è¿™é‡Œçš„è§„èŒƒè¦æ±‚ï¼Œä¸ç„¶å¾ˆå¯èƒ½ç¬¬ä¸€æ­¥å°±ä¼šåƒç˜ªã€‚</p><h2 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h2><p>ä¸‹é¢è®²è®²è´¡çŒ®è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç¢°åˆ°çš„é—®é¢˜ã€‚</p><p>åœ¨ä¸Šé¢è®²åˆ°çš„éš¾åº¦æ’åºä¸­å°†ä¿®å¤ä¸ªäºº issue æ’åœ¨äº†å…¶ä»– issue ä¹‹å‰äº†ï¼Œè¿™æ˜¯å› ä¸ºå¾€å¾€å¯¹è‡ªå·±æäº¤çš„ bug æ›´ç†Ÿæ‚‰ï¼Œè€Œç¤¾åŒºå…¶ä»–äººåé¦ˆçš„é—®é¢˜å¤§æ¦‚ç‡ä¼šè¢«è€æ‰‹è®¤é¢†ã€‚</p><p>åŠ ä¸Šè‡ªå·±ä¹Ÿä¸ç†Ÿæ‚‰ï¼Œå¯èƒ½åœ¨è‡ªå·±ç ”ç©¶å¤ç°çš„è¿‡ç¨‹ä¸­å°±æŠŠè‡ªå·±åŠé€€äº†ã€‚</p><h3 id="è®¤é¢†-issue"><a href="#è®¤é¢†-issue" class="headerlink" title="è®¤é¢† issue"></a>è®¤é¢† issue</h3><p>è¿™é‡Œè¿˜æœ‰ä¸ªå°æŠ€å·§ï¼Œå½“æˆ‘ä»¬å‡†å¤‡ä¿®å¤ä¸€ä¸ªä¸æ˜¯è‡ªå·±æäº¤çš„ issue æ—¶ï¼Œæœ€å¥½æ˜¯åœ¨è¯„è®ºåŒºè®© <code>Committer</code> å°†è¿™ä¸ªä»»åŠ¡åˆ†é…ç»™ä½ ï¼Œè¿™æ ·ç¤¾åŒºæˆå‘˜å°±ä¸ä¼šåšé‡å¤å·¥ä½œäº†ã€‚</p><p><img src="https://s2.loli.net/2023/08/05/KBh1HRd8EyziuQP.png" alt="image.png"><br>ç±»ä¼¼äºè¿™æ ·ã€‚</p><p>åŒæ—¶æˆ‘ä»¬åœ¨æŸ¥æ‰¾å¯ä»¥ä¿®å¤çš„ <code>issue</code> æ—¶ä¹Ÿè¦æ³¨æ„è¿™ä¸ª issue æœ‰æ²¡æœ‰è¢«è®¤é¢†ä»¥åŠæ˜¯å¦æœ‰ PR å…³è”ã€‚</p><p><img src="https://s2.loli.net/2023/08/05/pOPybK7lmX1v8oU.png" alt="image.png"></p><p>æœ‰æ—¶å€™ <code>issue</code> å¹¶æ²¡æœ‰è¢«æŒ‡å®šä½†ä¹Ÿæœ‰ç›¸å…³ <code>PR</code> åœ¨å¤„ç†è¯¥é—®é¢˜äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥è¿‡æ»¤æ‰è¿™ä¸ª <code>issue</code>ã€‚</p><h3 id="help-want"><a href="#help-want" class="headerlink" title="help want"></a>help want</h3><p><img src="https://s2.loli.net/2023/08/05/QMwDlTWd3iFPU7c.png" alt="image.png"><br>ä¹Ÿå¯ä»¥æ‰¾æ‰¾å¸¦æœ‰  <code>help want</code> æ ‡ç­¾çš„ <code>issue</code>ï¼Œè¿™ç±»é—®é¢˜å¾€å¾€ä¼šç›¸å¯¹ç®€å•ï¼Œä¿®å¤èµ·æ¥ä¹Ÿæ›´å®¹æ˜“ã€‚</p><h3 id="ç¤¾åŒºåé¦ˆè¾ƒæ…¢"><a href="#ç¤¾åŒºåé¦ˆè¾ƒæ…¢" class="headerlink" title="ç¤¾åŒºåé¦ˆè¾ƒæ…¢"></a>ç¤¾åŒºåé¦ˆè¾ƒæ…¢</h3><p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é—®é¢˜æ˜¯è‡ªå·±æäº¤çš„ issue æˆ–è€…æ˜¯ PR è¿Ÿè¿Ÿæ²¡æœ‰äººå¤„ç†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹è¿™ä¸ª issue å¯¹åº”çš„ä»£ç æœ€è¿‘ä¸»è¦æ˜¯å“ªäº›äººåœ¨ç»´æŠ¤ï¼Œè¿™ä¸ªåœ¨ IDE ä¸­é…åˆ <code>GitToolBox</code> æ’ä»¶å°±å¾ˆå®¹æ˜“çœ‹å‡ºæ¥ã€‚</p><p><img src="https://s2.loli.net/2023/08/05/ojErZnigXbqFvam.png" alt="image.png"><br>åé¢çš„ ID å¾€å¾€æ˜¯ <code>PR</code> å·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª <code>PR</code> æ‰¾åˆ°å¯¹åº”çš„ä½œè€…ï¼Œç„¶åå°è¯•åœ¨ <code>issue</code> è¯„è®ºåŒºè‰¾ç‰¹å¯¹æ–¹ã€‚</p><p>å¦‚æœä¾ç„¶æ²¡æœ‰å›å¤ï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™å¼€å‘ç»„å‘é€é‚®ä»¶ã€‚<br><img src="https://s2.loli.net/2023/08/05/SuT5Fb4wG2BnrV1.png" alt="image.png"><br>å¦‚æœè¿˜æ˜¯æ²¡æœ‰å›å¤ï¼Œæ¯”å¦‚æˆ‘è¿™ä¸ªğŸ˜‚</p><p>é‚£ä¹Ÿè¿˜æœ‰ä¸€ä¸ªåŠæ³•ï¼Œå°±æ˜¯å°è¯•åœ¨ç¤¾äº¤åª’ä½“ï¼ˆGitHub é¦–é¡µã€æŠ€æœ¯ç¾¤ï¼‰ä¸Šæ‰¾åˆ° Committer çš„å¾®ä¿¡ï¼Œç›´æ¥ç§èŠçš„æ–¹å¼è®©å¯¹æ–¹å¸®å¿™æ¨è¿›ã€‚<br><img src="https://s2.loli.net/2023/08/05/J8r6lBbhMgziFGv.png" alt="image.png"></p><p>å½“ç„¶ä¹Ÿæœ‰ä¸€äº›é¡¹ç›®é•¿æœŸæ²¡æœ‰ç»´æŠ¤äº†ï¼Œè¿™ç§ PR è¦åšå¥½å¿ƒé‡Œå‡†å¤‡ï¼Œå¾ˆæœ‰å¯èƒ½å¯¹æ–¹ä¸ä¼šç†ä½ ï¼›è¿™ç‚¹åœ¨å›½å†…æŸä¸ªä¼ä¸šçš„å¼€æºé¡¹ç›®ä¸­æ¯”è¾ƒå¸¸è§ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ€»çš„æ¥è¯´æƒ³è¦åšå¥½å¼€æºå¾—æœ‰è€å¿ƒå’Œé•¿æœŸåšæŒï¼ŒåŒæ—¶ç»™è‡ªå·±å¸¦æ¥çš„å¥½å¤„ä¹Ÿæ˜¯ç‰©è¶…æ‰€å€¼çš„ï¼Œ<code>Apache</code> è¿™ç±»ä¸“ä¸šçš„ç¤¾åŒºæˆ‘ä¹Ÿæ‰å‚ä¸äº†åŠå¹´ï¼Œåç»­ä¹Ÿä¼šé•¿æœŸåšæŒä¸‹å»ï¼Œä¹Ÿå¸Œæœ›å“ªå¤©å¯ä»¥ç§¯ç´¯åˆ°æˆä¸º <code>Committer</code> åå†å’Œå¤§å®¶åˆ†äº«ã€‚</p><p>#Pulsar #OpenSource</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/08/05/5mXrStCDVHNxF7f.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å¼€æºè¿™ä»¶äº‹æƒ…åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸä¸€ç›´æ˜¯ä¸€ä¸ªé«˜é¢‘è¯é¢˜ï¼Œæˆ‘ä»¬å·¥ä½œä¸­ä¸ç®¡æ˜¯ä½¿ç”¨åˆ°çš„å·¥å…·è¿˜æ˜¯ç¬¬ä¸‰æ–¹åº“éƒ½ç¦»ä¸å¼€å¼€æºçš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;è¿‘æœŸç”±äºå·¥ä½œçš„åŸå› ï¼Œæˆ‘éœ€è¦ç»å¸¸å’Œ &lt;code&gt;Apache Pulsar&lt;/code&gt; ç¤¾åŒºæ²Ÿé€šï¼ŒåŒæ—¶ä¹Ÿä¼šå°†æ—¥å¸¸ç¢°åˆ°çš„é—®é¢˜åé¦ˆç»™ç¤¾åŒºï¼ŒåŒ…æ‹¬ä¸€äº› &lt;code&gt;bug&lt;/code&gt; ï¼Œä¸€äº›æˆ‘èƒ½ä¿®çš„ä¹Ÿæ˜¯é¡ºå¸¦å°±æäº†ä¸€äº› &lt;code&gt;PR&lt;/code&gt;ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OpenSource" scheme="http://crossoverjie.top/categories/OpenSource/"/>
    
    
    <category term="Pulsar" scheme="http://crossoverjie.top/tags/Pulsar/"/>
    
  </entry>
  
  <entry>
    <title>ä» Pulsar Client çš„åŸç†åˆ°å®ƒçš„ç›‘æ§é¢æ¿</title>
    <link href="http://crossoverjie.top/2023/08/03/ob/Pulsar-Client/"/>
    <id>http://crossoverjie.top/2023/08/03/ob/Pulsar-Client/</id>
    <published>2023-08-03T03:47:52.000Z</published>
    <updated>2023-09-15T18:42:21.017Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/08/02/GipDPSlbycQxqFd.png" alt="image.png"></p><p>#Blog #Pulsar </p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å‰æ®µæ—¶é—´ä¸šåŠ¡å›¢é˜Ÿå¶å°”ä¼šç¢°åˆ°ä¸€äº› Pulsar ä½¿ç”¨çš„é—®é¢˜ï¼Œæ¯”å¦‚æ¶ˆæ¯é˜»å¡ä¸æ¶ˆè´¹äº†ã€ç”Ÿäº§è€…æ¶ˆæ¯å‘é€ç¼“æ…¢ç­‰å„ç§é—®é¢˜ã€‚</p><p>è™½ç„¶æˆ‘ä»¬æœ‰ä¸ªç›‘æ§é¡µé¢å¯ä»¥æ ¹æ® topic ç»´åº¦æŸ¥çœ‹ä»–çš„å‘é€çŠ¶æ€ï¼Œæ¯”å¦‚é€Ÿç‡ã€æµé‡ã€æ¶ˆè´¹çŠ¶æ€ç­‰ä¿¡æ¯ã€‚</p><span id="more"></span><p><img src="https://s2.loli.net/2023/08/02/UNZVawH4QYSu3Ko.png" alt="image.png"></p><p>ä½†ä¹Ÿæœ‰å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>æ— æ³•åœ¨åº”ç”¨ç»´åº¦æŸ¥çœ‹ä»–æ‰€ä¾èµ–çš„æ‰€æœ‰  topic çš„å„ç§çŠ¶æ€ã€‚</li><li>ç›‘æ§çš„ä¿¡æ¯è¿˜ä¸å¤Ÿï¼Œæ¯”å¦‚å‘é€&#x2F;æ¶ˆè´¹å»¶è¿Ÿã€å‘é€&#x2F;æ¶ˆè´¹å¤±è´¥ç­‰æ•°æ®ã€‚</li></ul><p>æ€»ä¹‹å°±æ˜¯ç¼ºå°‘ä¸€ä¸ªå…¨å±€çš„ç›‘æ§è§†è§’ï¼Œé€šè¿‡è¿™äº›æŒ‡æ ‡å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ†æå‡ºå½“æ—¶çš„è¿è¡Œæƒ…å†µã€‚</p><p>åŸºäºè¿™ä¸ªéœ€æ±‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„æŠ˜è…¾ï¼Œç°åœ¨å·²ç»ä¸Šçº¿ä½¿ç”¨å‡ ä¸ªæœˆï¼Œç›®å‰æ¯”è¾ƒç¨³å®šï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/08/02/byv4RDZnruSjo9h.png" alt="image.png"><br><img src="https://s2.loli.net/2023/08/02/TtufOpwHB86PFhK.png" alt="image.png"><br><img src="https://s2.loli.net/2023/08/02/d21IaNzbFQpnrkA.png" alt="image.png"></p><p>ç°åœ¨å°±å¯ä»¥åœ¨æ¯ä¸ªåº”ç”¨çš„ç›‘æ§é¢æ¿é‡Œçœ‹åˆ°è‡ªå·±ä½¿ç”¨äº†å“ªäº› topicï¼Œåˆ†åˆ«çš„ç”Ÿäº§æ¶ˆè´¹æƒ…å†µå¦‚ä½•ã€‚</p><h1 id="æ ¸å¿ƒæµç¨‹"><a href="#æ ¸å¿ƒæµç¨‹" class="headerlink" title="æ ¸å¿ƒæµç¨‹"></a>æ ¸å¿ƒæµç¨‹</h1><p>è¦å®ç°è¿™äº›åŠŸèƒ½å°±å¾—åœ¨åº”ç”¨çš„ <code>metrics</code> ä¸­åŠ å…¥ç›¸å…³çš„ç›‘æ§ä¿¡æ¯ï¼Œä½†å®˜æ–¹çš„ Java client æ˜¯æ²¡æœ‰æš´éœ²å‡ºè¿™äº›æŒ‡æ ‡çš„ã€‚</p><p><img src="https://s2.loli.net/2023/08/02/DlfkQo1Lmt8J7Iq.png" alt="image.png"></p><blockquote><p>ä½† pulsar-client-go æ˜¯è‡ªå¸¦äº†è¿™äº›æŒ‡æ ‡çš„</p></blockquote><p>ç”±äº <code>SDK</code> ä¸æ”¯æŒæ‰€ä»¥åªèƒ½è‡ªå·±æƒ³åŠæ³•å®ç°äº†ï¼Œä¸ºæ­¤å…¶å®æœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆï¼š</p><ul><li>é­”æ”¹ <code>Java client</code>ï¼Œåœ¨éœ€è¦ç›‘æ§çš„åœ°æ–¹æ‰‹åŠ¨åŸ‹ç‚¹æŒ‡æ ‡ã€‚</li><li>ç”±äºæˆ‘ä»¬ä½¿ç”¨äº† <code>SkyWalking</code>ï¼Œæ‰€ä»¥å¯ä»¥ç¼–å†™æ’ä»¶ï¼Œä»¥ <code>agent</code> çš„æ–¹å¼è·å–æ•°æ®ã€åŸ‹ç‚¹æŒ‡æ ‡ã€‚</li></ul><p>ä¸è¿‡ç¬¬ä¸€ç§æ–¹æ¡ˆæœ‰ä»¥ä¸‹ä¸€äº›é—®é¢˜ï¼š</p><ul><li>éœ€è¦è‡ªå·±ç»´æŠ¤ä¸€ä¸ªä»£ç åˆ†æ”¯ï¼Œè¿˜éœ€è¦å®šæœŸå’Œå®˜æ–¹ä¿æŒä¸€è‡´ï¼Œéš¾å…ä¼šå‡ºç°ä»£ç å†²çªã€‚</li><li>éœ€è¦æ¨åŠ¨ä¸šåŠ¡æ–¹è¿›è¡Œä¾èµ–å‡çº§ï¼Œçº¿ä¸Šæœ‰ç€å‡ ç™¾ä¸ªåº”ç”¨ï¼Œæ¨åŠ¨èµ·æ¥æ—¶é—´å¤ªæ…¢ã€‚</li></ul><p>ç¬¬äºŒç§æ–¹æ¡ˆçš„å¥½å¤„å°±ä¸è¨€è€Œå–»äº†ï¼š</p><ul><li>å‡çº§æ— æ„ŸçŸ¥ï¼Œåªéœ€è¦åœ¨æˆ‘ä»¬çš„åŸºç¡€é•œåƒä¸­åŠ ä¸Šæ’ä»¶å³å¯ã€‚</li><li>Java client çš„ç‰ˆæœ¬ä¹Ÿæ›´å®¹æ˜“ç»Ÿä¸€ã€‚</li></ul><h2 id="Client-åŸç†"><a href="#Client-åŸç†" class="headerlink" title="Client åŸç†"></a>Client åŸç†</h2><p>ä½†å…¶å®ä¸ç®¡æ˜¯å“ªç§æ–¹æ¡ˆæˆ‘ä»¬éƒ½å¾—ç†Ÿæ‚‰ Java Client çš„å®ç°åŸç†ï¼Œæ‰èƒ½çŸ¥é“å“ªäº›æ•°æ®æ˜¯æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨çš„ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„å®šä½é—®é¢˜ã€‚</p><p><img src="https://s2.loli.net/2023/08/02/vweWVR8fkJgrSMI.png" alt="image.png"><br><img src="https://s2.loli.net/2023/08/02/S2DNUb768rJRMLm.png" alt="image.png"><br><img src="https://s2.loli.net/2023/08/02/8Byvq4LXtACoIg5.png" alt="image.png"></p><blockquote><p>æœ¬æ–‡é‡ç‚¹ä¸åœ¨äºæ­¤ï¼Œå…·ä½“ä»£ç å°±ä¸ä»”ç»†åˆ†æäº†ã€‚</p></blockquote><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ç›‘æ§æ¶ˆè´¹æ˜¯å¦å­˜åœ¨é˜»å¡çš„æƒ…å†µï¼Œè¿™å‡ ä¸ªå†…éƒ¨é˜Ÿåˆ—æ˜¯éœ€è¦é‡ç‚¹ç›‘æ§çš„ï¼Œä¸€æ—¦ä»–ä»¬å‡ºç°å †ç§¯ï¼Œé‚£å°±ä¼šå‡ºç°æ¶ˆè´¹é˜»å¡ã€‚</p><p>å…¶å®è¿™äº›æ•°æ®éƒ½å¯ä»¥é€šè¿‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.apache.pulsar.client.api.ProducerStats</span><br><span class="line">org.apache.pulsar.client.api.ConsumerStats</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªæ¥å£è·å–åˆ°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¤§éƒ¨åˆ†æŒ‡æ ‡ï¼Œåªæ˜¯è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°æ’æ›²ã€‚</p><p>é‚£å°±æ˜¯åœ¨è·å–æ¶ˆè´¹è€…é˜Ÿåˆ—å¤§å°çš„æ—¶å€™ï¼Œè·å–åˆ°çš„æ•°æ®ä¸€ç›´ä¸ºç©ºã€‚</p><p>æœ€ç»ˆç»è¿‡æºç æ’æŸ¥ï¼ŒåŸæ¥æ˜¯æˆ‘ä»¬å¤§é‡ä½¿ç”¨çš„ <code>messageListener</code> åœ¨è·å–é˜Ÿåˆ—å¤§å°æ—¶æœ‰ bugï¼Œå¯¼è‡´è·å–åˆ°çš„æ•°æ®ä¸€ç›´éƒ½ä¸º 0.</p><p>ç›¸å…³çš„ issue å’Œ PR å¯ä»¥åœ¨è¿™ä¸¤ä¸ªé“¾æ¥æŸ¥çœ‹ï¼Œé—®é¢˜åŸå› å’Œä¿®å¤è¿‡ç¨‹éƒ½æœ‰å…·ä½“æè¿°ï¼š<br><a href="https://github.com/apache/pulsar/issues/20076">https://github.com/apache/pulsar/issues/20076</a><br><a href="https://github.com/apache/pulsar/pull/20245">https://github.com/apache/pulsar/pull/20245</a></p><blockquote><p>ä½†è¿™ä¸ªä¿®å¤å¾—åœ¨æ–°ç‰ˆæœ¬æ‰èƒ½ä½¿ç”¨ï¼Œå°±å¯¼è‡´æˆ‘ä»¬ç°åœ¨çš„ç›‘æ§é¡µé¢ä¸€ç›´æ˜¾ç¤ºä¸ºç©ºã€‚</p></blockquote><h1 id="å¼€å‘-SkyWalking-æ’ä»¶"><a href="#å¼€å‘-SkyWalking-æ’ä»¶" class="headerlink" title="å¼€å‘ SkyWalking æ’ä»¶"></a>å¼€å‘ SkyWalking æ’ä»¶</h1><p>ç„¶åå°±æ˜¯å¼€å‘ä¸€ä¸ª <code>SkyWalking</code> çš„æ’ä»¶äº†ï¼Œå…¶å®ç›´æ¥ä½¿ç”¨ SW å¼€å‘æ’ä»¶æ˜¯ä¸Šæ‰‹ <code>Java-Agent</code> æ¯”è¾ƒå¿«çš„æ–¹å¼ã€‚</p><p><code>SW</code> çš„ SDK å°è£…äº†è®¸å¤š <code>agent</code> åŸç”Ÿæ¥å£ï¼Œä½¿å¾—å¼€å‘èµ·æ¥éå¸¸å®¹æ˜“ï¼›å½“ç„¶ç¼ºç‚¹ä¹Ÿæœ‰ï¼Œå°±æ˜¯å¾—é›†æˆæ•´ä¸ª <code>SW</code> çš„ <code>agent</code>ã€‚</p><p>è¿™é‡Œæˆ‘ç®€å•ä»‹ç»ä¸‹è¿™ä¸ªæ’ä»¶çš„è¿è¡Œæµç¨‹ï¼š<br><img src="https://s2.loli.net/2023/08/02/tW8QSqdU1yZf25A.png" alt="image.png"></p><ul><li>åœ¨åˆ›å»ºå’Œåˆ é™¤ consumer çš„æ—¶å€™ç»´æŠ¤ consumerPool</li><li>å¯åŠ¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå®šæœŸä»è¿™äº› consumer ä¸­è·å–æŒ‡æ ‡æ•°æ®ã€‚<br><img src="https://s2.loli.net/2023/08/02/ndhi3yH7CzS9FLA.png" alt="image.png"><br><img src="https://s2.loli.net/2023/08/02/WtZNTClh8Y3wj1F.png" alt="image.png"></li></ul><blockquote><p>å½“æ¶ˆè´¹å¤šåˆ†åŒº topic æ—¶ï¼Œä¸ºäº†èƒ½å”¯ä¸€æ ‡å¿—ä¸€ä¸ª consumerï¼Œæ‰€ä»¥ç»™æ¯ä¸ªæ¶ˆè´¹è€…éƒ½åŠ äº†ä¸€ä¸ª hashcode çš„ labelã€‚</p></blockquote><p>å› ä¸ºæˆ‘ä»¬æ‰€æœ‰çš„ Java æŠ€æœ¯æ ˆéƒ½æ˜¯ä½¿ç”¨çš„ <code>Prometheus</code> çš„åŒ…æ¥ç”Ÿæˆ <code>metrics</code> ï¼Œæ‰€ä»¥è¯¥æ’ä»¶ä¹Ÿæ˜¯ä½¿ç”¨è¯¥åŒ…ç”Ÿæˆçš„æ•°æ®ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.prometheus<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>simpleclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†å…¼å®¹ä¸€äº›ç‰¹æ®Š Java åº”ç”¨æ²¡æœ‰è¯¥åŒ…æ—¶ä¼šå¯åŠ¨æŠ¥é”™ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–æ’ä»¶çš„æ—¶å€™éœ€è¦æ£€æµ‹å½“å‰ <code>classpath</code> ä¸‹æ˜¯å¦å­˜åœ¨è¯¥ä¾èµ–ã€‚</p><p><img src="https://s2.loli.net/2023/08/02/IBwdhH9b1tc8aoE.png" alt="image.png"></p><p>è¿™äº›åŠŸèƒ½ SW å·²ç»å°è£…å¥½äº†ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ä¹Ÿæ˜¯å¼€ç®±å³ç”¨ã€‚</p><blockquote><p>å…¶å® SW æ’ä»¶è‡ªå·±ä¹Ÿæ˜¯æ”¯æŒ metrics çš„ï¼Œç”±äºæˆ‘ä»¬åªæ˜¯ä½¿ç”¨äº†å®ƒçš„ trace åŠŸèƒ½ï¼Œæ‰€ä»¥è¿™é‡Œå°±æ²¡æœ‰ä½¿ç”¨å®ƒçš„ APIã€‚</p></blockquote><p>å…³äºå¼€å‘ä¸€ä¸ª SW æ’ä»¶çš„æµç¨‹ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–è€…æ˜¯ä¸€äº›ç°æˆçš„æ’ä»¶æºç ã€‚<br><a href="https://skywalking.apache.org/docs/skywalking-java/next/en/setup/service-agent/java-agent/java-plugin-development-guide/">https://skywalking.apache.org/docs/skywalking-java/next/en/setup/service-agent/java-agent/java-plugin-development-guide/</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ‰äº†è¿™ä¸ªç›‘æ§é¢æ¿åï¼Œå¯¹äº Pulsar å®¢æˆ·ç«¯å†…éƒ¨çš„ä¸€äº›è¿è¡Œæƒ…å†µå°±ä¸å†æ˜¯é»‘ç›’äº†ï¼Œè¿˜å¯ä»¥åŸºäºæ­¤åšä¸€äº›æŠ¥è­¦ï¼Œæ¯”å¦‚æ¶ˆè´¹å †ç§¯ã€å‘é€å»¶è¿Ÿè¿‡å¤§ç­‰ã€‚</p><p>å½“ç„¶ä»…ä»…åªæœ‰è¿™ä¸ªé¢æ¿ä¾ç„¶æ˜¯ä¸å¤Ÿçš„ï¼Œåç»­æˆ‘ä»¬åˆå¼€å‘äº†å¯ä»¥é€šè¿‡ <code>messageId</code> æŸ¥è¯¢å®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ä¿¡æ¯</li><li>æ¶ˆæ¯ç”Ÿäº§æ—¶é—´</li><li>æ¨é€æ—¶é—´</li><li>ack æ—¶é—´ç­‰</li></ul><p><img src="https://s2.loli.net/2023/08/02/H7pjinzQ5EWR2tF.png" alt="image.png"></p><p>åŒæ—¶å€ŸåŠ©ä¸ Pulsar-SQL çš„èƒ½åŠ›ï¼Œè¿˜èƒ½ä»¥åˆ—è¡¨çš„å½¢å¼å±•ç¤ºå½“å‰ topic çš„æ¶ˆæ¯åˆ—è¡¨ã€‚<br><img src="https://s2.loli.net/2023/08/02/l9uvSnqAOxfPer7.png" alt="image.png"><br>å½“ç„¶åœ¨å®ç°è¿™ä¸¤ä¸ªåŠŸèƒ½çš„åŒæ—¶ä¹Ÿè¸©äº†ä¸å°‘å‘ï¼Œæäº†å‡ ä¸ª PR ï¼Œåé¢åœ¨æŠ½æ—¶é—´åšå…·ä½“çš„åˆ†äº«ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/08/02/GipDPSlbycQxqFd.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;#Blog #Pulsar &lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å‰æ®µæ—¶é—´ä¸šåŠ¡å›¢é˜Ÿå¶å°”ä¼šç¢°åˆ°ä¸€äº› Pulsar ä½¿ç”¨çš„é—®é¢˜ï¼Œæ¯”å¦‚æ¶ˆæ¯é˜»å¡ä¸æ¶ˆè´¹äº†ã€ç”Ÿäº§è€…æ¶ˆæ¯å‘é€ç¼“æ…¢ç­‰å„ç§é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä»¬æœ‰ä¸ªç›‘æ§é¡µé¢å¯ä»¥æ ¹æ® topic ç»´åº¦æŸ¥çœ‹ä»–çš„å‘é€çŠ¶æ€ï¼Œæ¯”å¦‚é€Ÿç‡ã€æµé‡ã€æ¶ˆè´¹çŠ¶æ€ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Pulsar" scheme="http://crossoverjie.top/categories/Pulsar/"/>
    
    
    <category term="Metrics" scheme="http://crossoverjie.top/tags/Metrics/"/>
    
  </entry>
  
</feed>
