<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>crossoverJie&#39;s Blog</title>
  
  <subtitle>baller</subtitle>
  <link href="http://crossoverjie.top/atom.xml" rel="self"/>
  
  <link href="http://crossoverjie.top/"/>
  <updated>2025-12-29T08:38:08.153Z</updated>
  <id>http://crossoverjie.top/</id>
  
  <author>
    <name>crossoverJie</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AI å¦‚ä½•ç”¨ AST æ¯å¤©å¯¹ 200 ä¸‡+ æ–‡ä»¶åšé«˜è´¨é‡åˆ†å—ï¼ˆç”¨äºä»£ç æœç´¢ï¼‰</title>
    <link href="http://crossoverjie.top/2025/12/29/AI/chunking-2m-files/"/>
    <id>http://crossoverjie.top/2025/12/29/AI/chunking-2m-files/</id>
    <published>2025-12-29T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.153Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2025/12/29/4WHveihZ6utrx9O.png"></p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://github.com/sweepai/sweep/blob/main/docs/pages/blogs/chunking-2m-files.mdx">https://github.com/sweepai/sweep/blob/main/docs/pages/blogs/chunking-2m-files.mdx</a></p><hr><p>æœ€è¿‘åœ¨ç ”ç©¶ Code Splitter çš„ç®—æ³•ï¼Œå‘ç° <a href="https://developers.llamaindex.ai/python/framework/module_guides/loading/node_parsers/modules/#codesplitter">llama_index</a> çš„ä»£ç åˆ†å‰²ä½¿ç”¨çš„æ˜¯ sweepai çš„ä»£ç åˆ†å‰²ç®—æ³•ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸€ç¯‡åšå®¢ï¼Œä¹Ÿå°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p><p><img src="https://s2.loli.net/2025/12/29/pVsnHRh3FUacw5e.png"></p><span id="more"></span><p>åˆå§‹åŒ–ä»»ä½•å‘é‡å­˜å‚¨éƒ½éœ€è¦å¯¹å¤§å‹æ–‡æ¡£è¿›è¡Œåˆ‡åˆ†ï¼ˆchunkingï¼‰ä»¥è¿›è¡Œé«˜æ•ˆæœç´¢ã€‚</p><p>ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥å¯¹æ•´ä¸ªæ–‡ä»¶åšåµŒå…¥ï¼ˆembedï¼‰ï¼Ÿä»¥æˆ‘ä»¬ä¸» API çš„ <a href="https://github.com/sweepai/sweep/blob/b267b613d4c706eaf959fe6789f11e9a856521d1/sweepai/api.py">endpoint æ–‡ä»¶</a> ä¸ºä¾‹ï¼š</p><ol><li>å¯¼å…¥åŒ…</li><li>å¸¸é‡å£°æ˜</li><li>è¾…åŠ©å‡½æ•°</li><li>æ¯ä¸ª webhook endpoint çš„ä¸šåŠ¡é€»è¾‘</li></ol><p>å¦‚æœæˆ‘æœç´¢ â€œGitHub Action runâ€ï¼Œå®ƒåº”è¯¥åŒ¹é…æ£€æŸ¥ â€œcheck_runs completedâ€ äº‹ä»¶çš„é‚£ä¸ª switch case å—ï¼ˆå‚è§ <a href="https://github.com/sweepai/sweep/blob/b267b613d4c706eaf959fe6789f11e9a856521d1/sweepai/api.py#L295-L313">ä»£ç ç‰‡æ®µ</a>ï¼‰ã€‚ä½†é‚£åªæ˜¯ 400 å¤šè¡Œä»£ç ä¸­çš„å¤§çº¦ 20 è¡Œï¼Œå³ä½¿æ˜¯å®Œç¾çš„æœç´¢ç®—æ³•ä¹Ÿåªä¼šæŠŠç›¸ä¼¼æ€§è§†ä¸º 5%ã€‚å¦‚æœæˆ‘ä»¬æŠŠ 400 è¡Œåˆ‡æˆ 20 ä¸ªæ¯ä¸ª 20 è¡Œçš„å—ï¼Œå°±æ›´å®¹æ˜“åŒ¹é…åˆ°æ­£ç¡®çš„ switch case å—ã€‚</p><p><img src="https://s2.loli.net/2025/12/29/GPSgUirMceTzKQ6.png"></p><p>é‚£æˆ‘ä»¬å¦‚ä½•äº§ç”Ÿ 20 è¡Œçš„å—ï¼Ÿä¸€ä¸ªç®€å•çš„åŠæ³•æ˜¯å‡åŒ€åœ°æŠŠ 400 è¡Œåˆ‡æˆæ¯ 20 è¡Œä¸€å—ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•è¡Œä¸é€šã€‚è¯­ä¹‰ä¸Šç›¸å…³çš„ä»£ç ä¸ä¼šè¢«ä¿ç•™åœ¨ä¸€èµ·ï¼Œä¸”ä¼šä¸¢å¤±ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°å¤´å¯èƒ½ä¼šè¢«å’Œå®ç°ä½“åˆ†ç¦»ã€‚</p><p>æˆ‘ä»¬å½“å‰çš„ä»£ç åˆ‡åˆ†ç®—æ³•æ¯å¤©å¤„ç† <strong>200 ä¸‡+ æ–‡ä»¶</strong>ï¼Œå¹¶ä¸”å·²ç»<a href="https://github.com/sweepai/sweep/blob/b267b613d4c706eaf959fe6789f11e9a856521d1/sweepai/utils/utils.py#L48-L126">å¼€æºäº†</a>ï¼</p><h2 id="çº¦æŸ-ğŸš§"><a href="#çº¦æŸ-ğŸš§" class="headerlink" title="çº¦æŸ ğŸš§"></a>çº¦æŸ ğŸš§</h2><p>å¤§å¤šæ•°ç”¨äº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„åˆ‡åˆ†å™¨æŒ‰ token æ•°é‡åšä¸Šé™ã€‚ä¸ºç®€åŒ–å¤„ç†ï¼Œæˆ‘ä»¬å†³å®šä½¿ç”¨å­—ç¬¦æ•°ï¼Œä¸Šé™è®¾ä¸º 1500ã€‚</p><p>è¿™æ˜¯å› ä¸ºä»£ç çš„å¹³å‡ token ä¸å­—ç¬¦æ¯”çº¦ä¸º 1:5ï¼ˆ300 tokensï¼‰ï¼Œè€ŒåµŒå…¥æ¨¡å‹é€šå¸¸å— 512 tokens é™åˆ¶ã€‚è¿›ä¸€æ­¥åœ°ï¼Œ1500 å­—ç¬¦å¤§çº¦å¯¹åº” 40 è¡Œï¼Œå¤§è‡´ç­‰åŒäºä¸€ä¸ªå°åˆ°ä¸­ç­‰å¤§å°çš„å‡½æ•°æˆ–ç±»ã€‚</p><p>æŒ‘æˆ˜åœ¨äºå°½å¯èƒ½æ¥è¿‘ 1500 å­—ç¬¦ï¼ŒåŒæ—¶ä¿è¯å—åœ¨è¯­ä¹‰ä¸Šä¿æŒä¸€è‡´ä¸”ç›¸å…³ä¸Šä¸‹æ–‡è¢«ä¿ç•™ã€‚</p><h2 id="å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆ-ğŸ“¦"><a href="#å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆ-ğŸ“¦" class="headerlink" title="å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆ ğŸ“¦"></a>å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆ ğŸ“¦</h2><p>æœ€ç®€å•çš„ç°æˆè§£å†³æ–¹æ¡ˆæ˜¯ <a href="https://reference.langchain.com/python/langchain_text_splitters/?_gl=1*1wsspz*_gcl_au*MTQxMjAyNDczOS4xNzY1NDQ2MTUx*_ga*NDcyOTM2OTM2LjE3NjU0NDYxNTI.*_ga_47WX3HKKY2*czE3NjY0NjkxODUkbzYkZzEkdDE3NjY0NzA0MDkkajYwJGwwJGgw#langchain_text_splitters.RecursiveCharacterTextSplitter.split_text">Langchain çš„é€’å½’åˆ‡åˆ†å™¨ï¼ˆrecursive chunkerï¼‰</a>ã€‚æ€»ä½“æ€è·¯ï¼š</p><ol><li>ç”¨é¡¶å±‚åˆ†éš”ç¬¦æ‹†åˆ†æ–‡æœ¬ï¼ˆå…ˆç”¨ classï¼Œç„¶åæ˜¯ function å®šä¹‰ï¼Œç„¶åæ˜¯æ–¹æ³•ç­‰ï¼‰</li><li>è¿­ä»£æ¯ä¸ªåŒºå—å¹¶è´ªå¿ƒåœ°æŠŠå®ƒä»¬ä¸²è”ç›´åˆ°è¶…è¿‡å­—ç¬¦é™åˆ¶ã€‚å¯¹äºè¿‡å¤§çš„åŒºå—ï¼Œä½¿ç”¨ä¸‹ä¸€çº§åˆ†éš”ç¬¦é€’å½’åˆ‡åˆ†ã€‚</li></ol><p>ç¤ºä¾‹ä¼ªä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">delimiters = [<span class="hljs-string">&quot;\nclass &quot;</span>, <span class="hljs-string">&quot;\ndef &quot;</span>, <span class="hljs-string">&quot;\n\tdef &quot;</span>, <span class="hljs-string">&quot;\n\n&quot;</span>, <span class="hljs-string">&quot;\n&quot;</span>, <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot;&quot;</span>]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">chunk</span>(<span class="hljs-params">text: <span class="hljs-built_in">str</span>, delimiter_index: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>, MAX_CHARS: <span class="hljs-built_in">int</span> = <span class="hljs-number">1500</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]:<br>delimiter = delimiters[delimiter_index]<br>new_chunks = []<br>current_chunk = <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-keyword">for</span> section <span class="hljs-keyword">in</span> text.split(delimiter):<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(section) &gt; MAX_CHARS:<br><span class="hljs-comment"># Section is too big, recursively chunk this section</span><br>new_chunks.append(current_chunk)<br>current_chunk = <span class="hljs-string">&quot;&quot;</span><br>new_chunks.extend(chunk(section, delimiter_index + <span class="hljs-number">1</span>, MAX_CHARS)<br><span class="hljs-keyword">elif</span> <span class="hljs-built_in">len</span>(current_chunk) + <span class="hljs-built_in">len</span>(section) &gt; MAX_CHARS:<br><span class="hljs-comment"># Current chunk is max size</span><br>new_chunks.append(current_chunk)<br>current_chunk = section<br><span class="hljs-keyword">else</span>:<br><span class="hljs-comment"># Concatenate section to current_chunk</span><br>current_chunk += section<br><span class="hljs-keyword">return</span> new_chunks<br></code></pre></td></tr></table></figure><p>é’ˆå¯¹æ¯ç§è¯­è¨€æˆ‘ä»¬ä¼šä½¿ç”¨ä¸åŒçš„åˆ†éš”ç¬¦ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>å®Œæ•´ç¤ºä¾‹æ–‡ä»¶è¯·è§ï¼š<a href="https://gist.github.com/kevinlu1248/ded3ea33dcd8a9bd08078f4c64eb9268">https://gist.github.com/kevinlu1248/ded3ea33dcd8a9bd08078f4c64eb9268</a></p><h4 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹ #1"></a>ç¤ºä¾‹ #1</h4><p>åŸºäºæˆ‘ä»¬å¤„ç† GitHub Action è¿è¡Œçš„ <code>on_check_suite.py</code> æ–‡ä»¶ã€‚ä¸€ä¸ªç³Ÿç³•çš„åˆ‡åˆ†æŠŠå­—ç¬¦ä¸²æ‹¼æ¥å£°æ˜ä¸å…¶å†…å®¹åˆ†å¼€äº†ã€‚âŒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python">...<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_check_suite</span>(<span class="hljs-params">request: CheckRunCompleted</span>):<br>    logger.info(<span class="hljs-string">f&quot;Received check run completed event for <span class="hljs-subst">&#123;request.repository.full_name&#125;</span>&quot;</span>)<br>    g = get_github_client(request.installation.<span class="hljs-built_in">id</span>)<br>    repo = g.get_repo(request.repository.full_name)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> get_gha_enabled(repo):<br>        logger.info(<span class="hljs-string">f&quot;Skipping github action for <span class="hljs-subst">&#123;request.repository.full_name&#125;</span> because it is not enabled&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    pr = repo.get_pull(request.check_run.pull_requests[<span class="hljs-number">0</span>].number)<br>    num_pr_commits = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>(pr.get_commits()))<br>    <span class="hljs-keyword">if</span> num_pr_commits &gt; <span class="hljs-number">20</span>:<br>        logger.info(<span class="hljs-string">f&quot;Skipping github action for PR with <span class="hljs-subst">&#123;num_pr_commits&#125;</span> commits&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    logger.info(<span class="hljs-string">f&quot;Running github action for PR with <span class="hljs-subst">&#123;num_pr_commits&#125;</span> commits&quot;</span>)<br>    logs = download_logs(<br>        request.repository.full_name,<br>        request.check_run.run_id,<br>        request.installation.<span class="hljs-built_in">id</span><br>    )<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> logs:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    logs = clean_logs(logs)<br>    extractor = GHAExtractor()<br>    logger.info(<span class="hljs-string">f&quot;Extracting logs from <span class="hljs-subst">&#123;request.repository.full_name&#125;</span>, logs: <span class="hljs-subst">&#123;logs&#125;</span>&quot;</span>)<br>    problematic_logs = extractor.gha_extract(logs)<br>    <span class="hljs-keyword">if</span> problematic_logs.count(<span class="hljs-string">&quot;</span><br><span class="hljs-string">&quot;</span>) &gt; <span class="hljs-number">15</span>:<br>        problematic_logs += <span class="hljs-string">&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">========================================</span><br><span class="hljs-string"></span><br><span class="hljs-string">There are a lot of errors. This is likely a larger issue with the PR and not a small linting/type-checking issue.&quot;</span><br>    comments = <span class="hljs-built_in">list</span>(pr.get_issue_comments())<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(comments) &gt;= <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> problematic_logs == comments[-<span class="hljs-number">1</span>].body <span class="hljs-keyword">and</span> comments[-<span class="hljs-number">2</span>].body == comments[-<span class="hljs-number">1</span>].body:<br>        comment = pr.as_issue().create_comment(log_message.<span class="hljs-built_in">format</span>(error_logs=problematic_logs) + <span class="hljs-string">&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">I&#x27;m getting the same errors 3 times in a row, so I will stop working on fixing this PR.&quot;</span>)<br>        logger.warning(<span class="hljs-string">&quot;Skipping logs because it is duplicated&quot;</span>)<br>        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;Duplicate error logs&quot;</span>)<br>    <span class="hljs-built_in">print</span>(problematic_logs)<br>    comment = pr.as_issue().create_comment(log_message.<span class="hljs-built_in">format</span>(error_logs=problematic_logs))<br>    on_comment(<br>        repo_full_name=request.repository.full_name,<br>        repo_description=request.repository.description,<br>        comment=problematic_logs,<br>        pr_path=<span class="hljs-literal">None</span>,<br>        pr_line_position=<span class="hljs-literal">None</span>,<br>        username=request.sender.login,<br>        installation_id=request.installation.<span class="hljs-built_in">id</span>,<br>        pr_number=request.check_run.pull_requests[<span class="hljs-number">0</span>].number,<br>        comment_id=comment.<span class="hljs-built_in">id</span>,<br>        repo=repo,<br>    )<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-literal">True</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹ #2"></a>ç¤ºä¾‹ #2</h4><p>åŸºäº LlamaIndex çš„ <code>BaseIndex.ts</code> æ–‡ä»¶ï¼ˆå£°æ˜å‘é‡å­˜å‚¨çš„ ABCï¼‰ã€‚ç³Ÿç³•çš„åˆ‡åˆ†æŠŠç±»çš„æ–¹æ³•å®ç°ä¸å…¶å¤´éƒ¨åˆ†ç¦»äº†ã€‚âŒ</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs tsx">...<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexDict</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">IndexStruct</span> &#123;<br>  <span class="hljs-attr">nodesDict</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">BaseNode</span>&gt; = &#123;&#125;;<br>  <span class="hljs-attr">docStore</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Document</span>&gt; = &#123;&#125;; <span class="hljs-comment">// <span class="hljs-doctag">FIXME:</span> this should be implemented in storageContext</span><br>  <span class="hljs-attr">type</span>: <span class="hljs-title class_">IndexStructType</span> = <span class="hljs-title class_">IndexStructType</span>.<span class="hljs-property">SIMPLE_DICT</span>;<br><br>========================================<br><br><span class="hljs-title function_">getSummary</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">summary</span> === <span class="hljs-literal">undefined</span>) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;summary field of the index dict is not set&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">summary</span>;<br>  &#125;<br><br>  <span class="hljs-title function_">addNode</span>(<span class="hljs-params"><span class="hljs-attr">node</span>: <span class="hljs-title class_">BaseNode</span>, <span class="hljs-attr">textId</span>?: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-keyword">const</span> vectorId = textId ?? node.<span class="hljs-property">id_</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodesDict</span>[vectorId] = node;<br>  &#125;<br><br>  <span class="hljs-title function_">toJson</span>(): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt; &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      ...<span class="hljs-variable language_">super</span>.<span class="hljs-title function_">toJson</span>(),<br>      <span class="hljs-attr">nodesDict</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodesDict</span>,<br>      <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>,<br>    &#125;;<br>  &#125;<br>&#125;<br><br>...<br></code></pre></td></tr></table></figure><h3 id="é—®é¢˜-ğŸ¤”"><a href="#é—®é¢˜-ğŸ¤”" class="headerlink" title="é—®é¢˜ ğŸ¤”"></a>é—®é¢˜ ğŸ¤”</h3><p>ç„¶è€Œï¼Œè¿™ä¸ªåˆ‡åˆ†å™¨å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼š</p><ol><li>å¯¹ Python æ•ˆæœä¸é”™ï¼Œä½†å¯¹å¤§æ‹¬å·å¯†é›†çš„è¯­è¨€ï¼ˆå¦‚ JSï¼‰å’ŒåŸºäº XML çš„è¯­è¨€ï¼ˆå¦‚ HTMLï¼‰ä¼šåœ¨ä¸å¯é¢„æœŸçš„åœ°æ–¹æ–­å¼€ã€‚<ul><li>æ­¤å¤–ï¼Œ<code>str.split</code> å¯¹è¿™äº›æ›´å¤æ‚çš„è¯­æ³•ï¼ˆå¦‚ JSã€HTMLï¼‰æ•ˆæœä¸å¥½ã€‚</li><li>ä¾‹å¦‚ï¼Œå³ä½¿å¯¹ Pythonï¼Œä¹Ÿä¼šæŠŠåƒ <code>problematic_logs += \&quot;</code> ä¸å…¶ä½™å­—ç¬¦ä¸²é”™è¯¯åœ°åˆ†å‰²ã€‚</li></ul></li><li>ç›®å‰ä»…æ”¯æŒ 16 ç§è¯­è¨€ï¼Œä¸æ”¯æŒ JSXã€Typescriptã€EJS å’Œ C#ã€‚<ul><li>JSX&#x2F;TSX å æˆ‘ä»¬ç”¨æˆ·ç¾¤çš„å¤§éƒ¨åˆ†ã€‚</li></ul></li><li>Langchain ä¼šåˆ é™¤é‡è¦åˆ†éš”ç¬¦ï¼ˆæ¯”å¦‚ â€œdefâ€ å’Œ â€œclassâ€ï¼‰ã€‚</li></ol><h2 id="æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ-ğŸ§ "><a href="#æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ-ğŸ§ " class="headerlink" title="æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ ğŸ§ "></a>æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ ğŸ§ </h2><p>æ ¹æœ¬é—®é¢˜æ˜¯ç”¨ä¸€ç³»åˆ—çš„ <code>str.split</code> å’Œåˆ†éš”ç¬¦æ¥è¿‘ä¼¼æ‰€è°“çš„â€œå…·ä½“è¯­æ³•æ ‘ï¼ˆCSTï¼‰â€æ˜¯å¤ªåŸå§‹äº†ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ CST è§£æå™¨ã€‚å¦‚ä½•è·å¾—å¤§é‡è¯­è¨€çš„ CST è§£æå™¨ï¼Ÿå¹¸è¿çš„æ˜¯ï¼Œåº“ <a href="https://tree-sitter.github.io/">tree-sitter</a> æä¾›äº†æ ‡å‡†åŒ–è®¿é—® 113 ç§ç¼–ç¨‹è¯­è¨€ CST è§£æå™¨çš„æ–¹å¼ï¼Œå¹¶ä¸”é€Ÿåº¦å¿«ï¼ˆç”¨ C å†™ï¼‰ä¸”æ— é¢å¤–ä¾èµ–ã€‚</p><p>æ–°çš„ç®—æ³•åœ¨é«˜å±‚ä¸Šä¸ Langchain ç±»ä¼¼ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>è¦å¯¹ä¸€ä¸ªçˆ¶èŠ‚ç‚¹è¿›è¡Œåˆ‡åˆ†ï¼Œæˆ‘ä»¬éå†å…¶å­èŠ‚ç‚¹å¹¶è´ªå¿ƒåœ°æŠŠå®ƒä»¬æ‰“åŒ…åœ¨ä¸€èµ·ã€‚å¯¹äºæ¯ä¸ªå­èŠ‚ç‚¹ï¼š</li><li>å¦‚æœå½“å‰ chunk å¤ªå¤§ï¼Œå°†å…¶åŠ å…¥ç»“æœåˆ—è¡¨å¹¶æ¸…ç©ºå½“å‰ bundle</li><li>å¦‚æœä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹æœ¬èº«å¤ªå¤§ï¼Œåˆ™é€’å½’åˆ‡åˆ†è¯¥å­èŠ‚ç‚¹å¹¶æŠŠç»“æœåŠ å…¥åˆ—è¡¨</li><li>å¦åˆ™ï¼Œå°†è¯¥å­èŠ‚ç‚¹çš„æ–‡æœ¬æ‹¼æ¥åˆ°å½“å‰ chunk</li><li>å¯¹æœ€ç»ˆç»“æœåšåå¤„ç†ï¼šæŠŠå•è¡Œçš„ chunk ä¸ä¸‹ä¸€ä¸ª chunk åˆå¹¶</li><li>è¿™æ ·ä¿è¯ä¸ä¼šå‡ºç°è¿‡å°ï¼ˆæ„ä¹‰ä¸å¤§ï¼‰çš„ chunk</li></ol><p>ç¤ºä¾‹ä¼ªä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tree_sitter <span class="hljs-keyword">import</span> Node<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">chunk_node</span>(<span class="hljs-params">node: Node, text: <span class="hljs-built_in">str</span>, MAX_CHARS: <span class="hljs-built_in">int</span> = <span class="hljs-number">1500</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]:<br>new_chunks = []<br>current_chunk = <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> node.children:<br><span class="hljs-keyword">if</span> child.end_byte - child.start_byte &gt; MAX_CHARS:<br>new_chunks.append(current_chunk)<br>current_chunk = <span class="hljs-string">&quot;&quot;</span><br>new_chunks.extend(chunk_node(child, text, MAX_CHARS)<br><span class="hljs-keyword">elif</span> <span class="hljs-built_in">len</span>(current_chunk) + child.end_byte - child.start_byte &gt; MAX_CHARS:<br>new_chunks.append(current_chunk)<br>current_chunk = text[node.start_byte:node.end_byte]<br><span class="hljs-keyword">else</span>:<br>current_chunk += text[node.start_byte:node.end_byte]<br><span class="hljs-keyword">return</span> new_chunks<br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>å®Œæ•´åˆ‡åˆ†ç»“æœè¯·è§ï¼š<a href="https://gist.github.com/kevinlu1248/49a72a1978868775109c5627677dc512">https://gist.github.com/kevinlu1248/49a72a1978868775109c5627677dc512</a></p><h4 id="ç¤ºä¾‹-1-1"><a href="#ç¤ºä¾‹-1-1" class="headerlink" title="ç¤ºä¾‹ #1"></a>ç¤ºä¾‹ #1</h4><p>åŸºäºæˆ‘ä»¬çš„ <code>on_check_suite.py</code> æ–‡ä»¶ã€‚æ­£ç¡®çš„åˆ‡åˆ†ï¼›åœ¨ if è¯­å¥ä¹‹å‰åšåˆ‡åˆ†ï¼Œè€Œä¸æ˜¯æŠŠ if è¯­å¥ä¸å…¶ä¸»ä½“åˆ†å¼€ã€‚âœ…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python">...<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_check_suite</span>(<span class="hljs-params">request: CheckRunCompleted</span>):<br>    logger.info(<span class="hljs-string">f&quot;Received check run completed event for <span class="hljs-subst">&#123;request.repository.full_name&#125;</span>&quot;</span>)<br>    g = get_github_client(request.installation.<span class="hljs-built_in">id</span>)<br>    repo = g.get_repo(request.repository.full_name)<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> get_gha_enabled(repo):<br>        logger.info(<span class="hljs-string">f&quot;Skipping github action for <span class="hljs-subst">&#123;request.repository.full_name&#125;</span> because it is not enabled&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    pr = repo.get_pull(request.check_run.pull_requests[<span class="hljs-number">0</span>].number)<br>    num_pr_commits = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>(pr.get_commits()))<br>    <span class="hljs-keyword">if</span> num_pr_commits &gt; <span class="hljs-number">20</span>:<br>        logger.info(<span class="hljs-string">f&quot;Skipping github action for PR with <span class="hljs-subst">&#123;num_pr_commits&#125;</span> commits&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    logger.info(<span class="hljs-string">f&quot;Running github action for PR with <span class="hljs-subst">&#123;num_pr_commits&#125;</span> commits&quot;</span>)<br>    logs = download_logs(<br>        request.repository.full_name,<br>        request.check_run.run_id,<br>        request.installation.<span class="hljs-built_in">id</span><br>    )<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> logs:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    logs = clean_logs(logs)<br>    extractor = GHAExtractor()<br>    logger.info(<span class="hljs-string">f&quot;Extracting logs from <span class="hljs-subst">&#123;request.repository.full_name&#125;</span>, logs: <span class="hljs-subst">&#123;logs&#125;</span>&quot;</span>)<br>    problematic_logs = extractor.gha_extract(logs)<br>    <span class="hljs-keyword">if</span> problematic_logs.count(<span class="hljs-string">&quot;\n&quot;</span>) &gt; <span class="hljs-number">15</span>:<br>        problematic_logs += <span class="hljs-string">&quot;\n\nThere are a lot of errors. This is likely a larger issue with the PR and not a small linting/type-checking issue.&quot;</span><br>    comments = <span class="hljs-built_in">list</span>(pr.get_issue_comments())<br><br>==========<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(comments) &gt;= <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> problematic_logs == comments[-<span class="hljs-number">1</span>].body <span class="hljs-keyword">and</span> comments[-<span class="hljs-number">2</span>].body == comments[-<span class="hljs-number">1</span>].body:<br>        comment = pr.as_issue().create_comment(log_message.<span class="hljs-built_in">format</span>(error_logs=problematic_logs) + <span class="hljs-string">&quot;\n\nI&#x27;m getting the same errors 3 times in a row, so I will stop working on fixing this PR.&quot;</span>)<br>        logger.warning(<span class="hljs-string">&quot;Skipping logs because it is duplicated&quot;</span>)<br>        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;Duplicate error logs&quot;</span>)<br>    <span class="hljs-built_in">print</span>(problematic_logs)<br>    comment = pr.as_issue().create_comment(log_message.<span class="hljs-built_in">format</span>(error_logs=problematic_logs))<br>    on_comment(<br>        repo_full_name=request.repository.full_name,<br>        repo_description=request.repository.description,<br>        comment=problematic_logs,<br>        pr_path=<span class="hljs-literal">None</span>,<br>        pr_line_position=<span class="hljs-literal">None</span>,<br>        username=request.sender.login,<br>        installation_id=request.installation.<span class="hljs-built_in">id</span>,<br>        pr_number=request.check_run.pull_requests[<span class="hljs-number">0</span>].number,<br>        comment_id=comment.<span class="hljs-built_in">id</span>,<br>        repo=repo,<br>    )<br></code></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹-2-1"><a href="#ç¤ºä¾‹-2-1" class="headerlink" title="ç¤ºä¾‹ #2"></a>ç¤ºä¾‹ #2</h4><p>åŸºäº LlamaIndex çš„ <code>BaseIndex.ts</code> æ–‡ä»¶ã€‚æˆ‘ä»¬çš„åˆ‡åˆ†å™¨æ­£ç¡®åœ°åœ¨å¯¼å‡ºçš„ç±»å’Œå‡½æ•°ä¹‹é—´åˆ‡åˆ†ã€‚âœ…</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs tsx">...<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexDict</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">IndexStruct</span> &#123;<br>  <span class="hljs-attr">nodesDict</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">BaseNode</span>&gt; = &#123;&#125;;<br>  <span class="hljs-attr">docStore</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Document</span>&gt; = &#123;&#125;; <span class="hljs-comment">// <span class="hljs-doctag">FIXME:</span> this should be implemented in storageContext</span><br>  <span class="hljs-attr">type</span>: <span class="hljs-title class_">IndexStructType</span> = <span class="hljs-title class_">IndexStructType</span>.<span class="hljs-property">SIMPLE_DICT</span>;<br><br>  <span class="hljs-title function_">getSummary</span>(): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">summary</span> === <span class="hljs-literal">undefined</span>) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;summary field of the index dict is not set&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">summary</span>;<br>  &#125;<br><br>  <span class="hljs-title function_">addNode</span>(<span class="hljs-params"><span class="hljs-attr">node</span>: <span class="hljs-title class_">BaseNode</span>, <span class="hljs-attr">textId</span>?: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-keyword">const</span> vectorId = textId ?? node.<span class="hljs-property">id_</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodesDict</span>[vectorId] = node;<br>  &#125;<br><br>  <span class="hljs-title function_">toJson</span>(): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt; &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      ...<span class="hljs-variable language_">super</span>.<span class="hljs-title function_">toJson</span>(),<br>      <span class="hljs-attr">nodesDict</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">nodesDict</span>,<br>      <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span>,<br>    &#125;;<br>  &#125;<br>&#125;<br><br>========================================<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">jsonToIndexStruct</span>(<span class="hljs-params"><span class="hljs-attr">json</span>: <span class="hljs-built_in">any</span></span>): <span class="hljs-title class_">IndexStruct</span> &#123;<br>  <span class="hljs-keyword">if</span> (json.<span class="hljs-property">type</span> === <span class="hljs-title class_">IndexStructType</span>.<span class="hljs-property">LIST</span>) &#123;<br>    <span class="hljs-keyword">const</span> indexList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexList</span>(json.<span class="hljs-property">indexId</span>, json.<span class="hljs-property">summary</span>);<br>    indexList.<span class="hljs-property">nodes</span> = json.<span class="hljs-property">nodes</span>;<br>    <span class="hljs-keyword">return</span> indexList;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (json.<span class="hljs-property">type</span> === <span class="hljs-title class_">IndexStructType</span>.<span class="hljs-property">SIMPLE_DICT</span>) &#123;<br>    <span class="hljs-keyword">const</span> indexDict = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexDict</span>(json.<span class="hljs-property">indexId</span>, json.<span class="hljs-property">summary</span>);<br>    indexDict.<span class="hljs-property">nodesDict</span> = json.<span class="hljs-property">nodesDict</span>;<br>    <span class="hljs-keyword">return</span> indexDict;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown index struct type: <span class="hljs-subst">$&#123;json.<span class="hljs-keyword">type</span>&#125;</span>`</span>);<br>  &#125;<br>&#125;<br><br>...<br></code></pre></td></tr></table></figure><h3 id="ç®—æ³•å…¶ä½™éƒ¨åˆ†-ğŸ¤–"><a href="#ç®—æ³•å…¶ä½™éƒ¨åˆ†-ğŸ¤–" class="headerlink" title="ç®—æ³•å…¶ä½™éƒ¨åˆ† ğŸ¤–"></a>ç®—æ³•å…¶ä½™éƒ¨åˆ† ğŸ¤–</h3><ol><li>ä¾æ¬¡éå†æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ï¼Œç›´åˆ°æŸä¸ªè§£æå™¨æˆåŠŸè§£æä»£ç </li><li>å¯¹è§£æå‡ºçš„è¯­æ³•æ ‘æ ¹èŠ‚ç‚¹è¿›è¡Œåˆ‡åˆ†</li><li>å¦‚æœæ²¡æœ‰ä»»ä½•è¯­è¨€æˆåŠŸè§£æï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„åˆ‡åˆ†å™¨ï¼šæ¯æ¬¡å– 40 è¡Œï¼Œå¹¶åœ¨å—é—´ä¿ç•™ 15 è¡Œé‡å ï¼ˆè¦†ç›–ï¼‰ï¼Œè¿™ç§æƒ…å†µçº¦å  0.1%</li></ol><p>ç¤ºä¾‹ä¼ªä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">language_names = [<span class="hljs-string">&quot;python&quot;</span>, <span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;cpp&quot;</span>, <span class="hljs-string">&quot;go&quot;</span>, <span class="hljs-string">&quot;rust&quot;</span>, <span class="hljs-string">&quot;ruby&quot;</span>, <span class="hljs-string">&quot;php&quot;</span>] <span class="hljs-comment"># and more</span><br><br><span class="hljs-comment"># Installing the parsers</span><br>languages = &#123;&#125;<br><span class="hljs-keyword">for</span> language <span class="hljs-keyword">in</span> LANGUAGE_NAMES:<br>   subprocess.run(<span class="hljs-string">f&quot;git clone https://github.com/tree-sitter/tree-sitter-<span class="hljs-subst">&#123;language&#125;</span> cache/tree-sitter-<span class="hljs-subst">&#123;language&#125;</span>&quot;</span>, shell=<span class="hljs-literal">True</span>)<br>  <span class="hljs-keyword">for</span> language <span class="hljs-keyword">in</span> LANGUAGE_NAMES:<br>      Language.build_library(<span class="hljs-string">f&#x27;cache/build/<span class="hljs-subst">&#123;language&#125;</span>.so&#x27;</span>, [<span class="hljs-string">f&quot;cache/tree-sitter-<span class="hljs-subst">&#123;language&#125;</span>&quot;</span>])<br>  <span class="hljs-variable language_">self</span>.languages = &#123;language: Language(<span class="hljs-string">f&quot;cache/build/<span class="hljs-subst">&#123;language&#125;</span>.so&quot;</span>, language) <span class="hljs-keyword">for</span> language <span class="hljs-keyword">in</span> LANGUAGE_NAMES&#125;<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">chunk</span>(<span class="hljs-params">text: <span class="hljs-built_in">str</span>, MAX_CHARS: <span class="hljs-built_in">int</span> = <span class="hljs-number">1500</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]:<br><span class="hljs-comment"># Determining the language</span><br><span class="hljs-keyword">for</span> language_name <span class="hljs-keyword">in</span> language_names:<br>    language = languages[language_name]<br>    parser = Parser()<br>    parser.set_language(language)<br>    tree = parser.parse(<span class="hljs-built_in">bytes</span>(text, <span class="hljs-string">&quot;utf-8&quot;</span>))<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tree.root_node.children <span class="hljs-keyword">or</span> tree.root_node.children[<span class="hljs-number">0</span>].<span class="hljs-built_in">type</span> != <span class="hljs-string">&quot;ERROR&quot;</span>:<br>        file_language = language<br>        <span class="hljs-keyword">break</span><br>    logger.warning(<span class="hljs-string">f&quot;Not language <span class="hljs-subst">&#123;language_name&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># Smart chunker</span><br><span class="hljs-keyword">if</span> file_language:<br>      <span class="hljs-keyword">return</span> chunk_node(tree.root_node, text, max_chunk_size)<br><br><span class="hljs-comment"># Naive algorithm</span><br>  source_lines = file_content.split(<span class="hljs-string">&#x27;\n&#x27;</span>)<br>  num_lines = <span class="hljs-built_in">len</span>(source_lines)<br>  logger.info(<span class="hljs-string">f&quot;Number of lines: <span class="hljs-subst">&#123;num_lines&#125;</span>&quot;</span>)<br>  chunks = []<br>  start_line = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">while</span> start_line &lt; num_lines <span class="hljs-keyword">and</span> num_lines &gt; overlap:<br>      end_line = <span class="hljs-built_in">min</span>(start_line + chunk_size, num_lines)<br>      chunk = <span class="hljs-string">&#x27;\n&#x27;</span>.join(source_lines[start_line:end_line])<br>      chunks.append(chunk)<br>      start_line += chunk_size - overlap<br><span class="hljs-keyword">return</span> chunks<br></code></pre></td></tr></table></figure><p>åœ¨ Sweepï¼Œæˆ‘ä»¬ç›®å‰å®‰è£…äº† Pythonã€Javaã€C++ã€Goã€Rustã€Rubyã€PHPã€C#ã€åµŒå…¥å¼æ¨¡æ¿ï¼ˆERB &amp; EJSï¼‰ã€Markdownã€Vue å’Œ TSXã€‚å¦è¯·æ³¨æ„ï¼šC++ è¦†ç›– Cï¼ŒTSX è¦†ç›– JSã€JSX å’Œ TSã€‚</p><h2 id="é™·é˜±-ğŸ•³ï¸"><a href="#é™·é˜±-ğŸ•³ï¸" class="headerlink" title="é™·é˜± ğŸ•³ï¸"></a>é™·é˜± ğŸ•³ï¸</h2><p>ä¸å¹¸çš„æ˜¯ï¼Œ<code>tree-sitter</code> æœ‰æ—¶å¹¶ä¸å¯é ï¼Œå¾ˆå¤šè§£æå™¨ç”±ç¤¾åŒºç»´æŠ¤ï¼š</p><ul><li>TSX è§£æå™¨åœ¨æ— æ³•è§£ææ—¶ä¼šæŒ‚èµ·è€Œä¸æ˜¯è¿”å›é”™è¯¯</li><li>æ­¤å¤–ï¼Œtree-sitter çš„æ ¸å¿ƒç”¨ C å†™æˆã€‚åœ¨æˆ‘ä»¬çš„ serverless ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œéœ€è¦ä¸€å¥—å¤æ‚çš„æ–¹æ³•æ¥ç¼“å­˜å·²ç¼–è¯‘çš„ C äºŒè¿›åˆ¶ï¼Œç§»åŠ¨åˆ°å¯æ‰§è¡Œç›®å½•ï¼Œå¹¶ä½¿ç”¨ Python åŒ…è£…å™¨å»è°ƒç”¨å®ƒä»¬</li><li>æœ‰äº›è§£æå™¨åœ¨å­èŠ‚ç‚¹ä¹‹é—´ç•™ä¸‹ç©ºéš™ã€‚æˆ‘ä»¬é€šè¿‡åˆå¹¶ï¼ˆcoalescingï¼‰è§£å†³äº†è¿™ä¸ªé—®é¢˜</li><li>æ²¡æœ‰ä¸€ç§è§£æå™¨ä¼šåœ¨è§£æé”™è¯¯çš„è¯­è¨€æ—¶éƒ½ä»¥ç›¸åŒæ–¹å¼æŠ¥é”™</li><li>æœ‰äº›è§£æå™¨å°†æ ¹èŠ‚ç‚¹æ ‡è®°ä¸º â€œERRORâ€ï¼Œè€Œæœ‰äº›åˆ™æŠŠç¬¬ä¸€ä¸ª child æ ‡ä¸º ERROR</li></ul><p>æˆ‘ä»¬é€šè¿‡åœ¨é‡åˆ°è¿™äº›é”™è¯¯ï¼ˆä¾‹å¦‚ TSX æŒ‚èµ·æˆ–å…¶ä»–ä¸å¯é è¡Œä¸ºï¼‰æ—¶å›é€€åˆ°æœ´ç´ åˆ‡åˆ†å™¨æ¥è§„é¿é—®é¢˜ï¼Œå¹¶å°† TSX ä¼˜å…ˆçº§æ”¾åœ¨æœ€åã€‚åŒæ—¶æˆ‘ä»¬ä¼šä¼˜å…ˆå°è¯•ä¸æ–‡ä»¶æ‰©å±•åç›¸å¯¹åº”çš„è¯­è¨€è§£æå™¨ã€‚</p><h2 id="æœªæ¥-ğŸ”®"><a href="#æœªæ¥-ğŸ”®" class="headerlink" title="æœªæ¥ ğŸ”®"></a>æœªæ¥ ğŸ”®</h2><p>è¿™ä¸ªç®—æ³•ç°åœ¨å·²é€šè¿‡ <a href="https://github.com/jerryjliu/llama_index/pull/7100">https://github.com/jerryjliu/llama_index/pull/7100</a> é›†æˆåˆ° LlamaIndex ä¸­ã€‚</p><p>å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ–‡ä»¶ä¸­ç›¸è·è¾ƒè¿œçš„ä»£ç ç‰‡æ®µå¯èƒ½ä»ç„¶éœ€è¦å…±äº«ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç±»çš„æ–¹æ³•å¯èƒ½éœ€è¦ç±»å¤´çš„ä¸Šä¸‹æ–‡ï¼Œé•¿å‡½æ•°ä¹Ÿéœ€è¦å‡½æ•°ç­¾åã€‚ä¸€ä¸ªå¯èƒ½çš„æ”¹è¿›æ˜¯é‡‡ç”¨ç±»ä¼¼ä»¥ä¸‹çš„æ ¼å¼æ¥ä¿ç•™ä¸Šä¸‹æ–‡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span>:<br>  ...<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params">self</span>):<br>      <span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ <a href="https://github.com/universal-ctags/ctags">universal ctags</a> æˆ–ç±»ä¼¼å·¥å…·ä»¥å®ç°æ›´ç®€å•ã€æ›´é€šç”¨çš„è§£æï¼Œæˆ–è€…åœ¨æ‰‹å·¥æ ‡æ³¨çš„åˆ‡åˆ†ä¸Šè®­ç»ƒä¸€ä¸ªè‡ªå®šä¹‰çš„ spaCy sentencizerï¼Œä½†é‚£å¯èƒ½æœ‰ç‚¹è¿‡åº¦è®¾è®¡ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/12/29/4WHveihZ6utrx9O.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://github.com/sweepai/sweep/blob/main/docs/pages/blogs/chunking-2m-files.mdx&quot;&gt;https://github.com/sweepai/sweep/blob/main/docs/pages/blogs/chunking-2m-files.mdx&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æœ€è¿‘åœ¨ç ”ç©¶ Code Splitter çš„ç®—æ³•ï¼Œå‘ç° &lt;a href=&quot;https://developers.llamaindex.ai/python/framework/module_guides/loading/node_parsers/modules/#codesplitter&quot;&gt;llama_index&lt;/a&gt; çš„ä»£ç åˆ†å‰²ä½¿ç”¨çš„æ˜¯ sweepai çš„ä»£ç åˆ†å‰²ç®—æ³•ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸€ç¯‡åšå®¢ï¼Œä¹Ÿå°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/12/29/pVsnHRh3FUacw5e.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="AI" scheme="http://crossoverjie.top/categories/AI/"/>
    
    
    <category term="AI" scheme="http://crossoverjie.top/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>DeepWiki ä¸€ä¸ªå¸¸ç”¨ RAG åº”ç”¨çš„å¼€å‘æµç¨‹</title>
    <link href="http://crossoverjie.top/2025/12/25/AI/deepwiki-rag-principle/"/>
    <id>http://crossoverjie.top/2025/12/25/AI/deepwiki-rag-principle/</id>
    <published>2025-12-25T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.153Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡æ–‡ç« ï¼š<a href="https://crossoverjie.top/2025/12/23/AI/LLM-app-concept/">å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¿…éœ€äº†è§£çš„åŸºæœ¬æ¦‚å¿µ</a> åˆ†äº«äº†å…³äº LLM å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œæœ¬æ–‡ä¹˜çƒ­æ‰“é“ï¼Œå€ŸåŠ©ä¸€ä¸ªçœŸå®çš„å¤§æ¨¡å‹åº”ç”¨æ¥åˆ†æä¸‹å…¶ä¸­çš„æµç¨‹</p><h1 id="deepwiki-ä»‹ç»"><a href="#deepwiki-ä»‹ç»" class="headerlink" title="deepwiki ä»‹ç»"></a>deepwiki ä»‹ç»</h1><p>è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä»¥ <a href="https://github.com/AsyncFuncAI/deepwiki-open/">deepwiki-open</a>ä¸ºä¾‹è¿›è¡Œåˆ†æã€‚</p><p><img src="https://s2.loli.net/2025/12/24/uaLBwngDf5cyQMo.png"></p><p>é€šè¿‡è¿™ä¸ªæˆªå›¾å¯ä»¥çŸ¥é“å®ƒçš„ä¸»è¦åŠŸèƒ½ï¼šä¸€é”®æŠŠä»»æ„ GitHub&#x2F;GitLab&#x2F;Bitbucket ä»“åº“ç”Ÿæˆâ€œå¯æµè§ˆçš„äº¤äº’å¼ Wikiâ€</p><ul><li>æ”¯æŒ RAG çš„é—®ç­”ï¼Œæ ¹æ® repo çš„ç°æœ‰å†…å®¹è¿›è¡Œé—®ç­”ã€‚</li><li>æ”¯æŒå¤šç§æ¨¡å‹ï¼ˆGoogle Geminiã€OpenAIã€OpenRouterã€Azure OpenAIã€æœ¬åœ° Ollamaç­‰ï¼‰</li><li>æ”¯æŒ DeepResearchï¼šå¤šè½®ç ”ç©¶æµç¨‹ï¼Œè‡ªåŠ¨è¿­ä»£ç›´è‡³ç»™å‡ºç»“æ„åŒ–ç»“è®ºï¼ˆé€‚åˆå¤æ‚é—®é¢˜ï¼‰</li></ul><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>è¦ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå…¼å®¹ openai çš„ key å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><p>åœ¨ <code>.env</code> é‡Œé…ç½®ä¸‹ç›¸å…³ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">OPENAI_API_KEY=&quot;xxcdxxe&quot;  <br>OPENAI_BASE_URL=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;<br></code></pre></td></tr></table></figure><p>åŒæ—¶æˆ‘ä»¬åœ¨ <code>generator.json</code> é‡Œä¸º openai æ–°å¢ä¸€ä¸ªä½ æ‰€ä½¿ç”¨çš„æ¨¡å‹ï¼š</p><p><img src="https://s2.loli.net/2025/12/24/GnNhFULzrKE3g2X.png"><br>è¿™æ ·å°±å¯ä»¥åœ¨é¡µé¢ä¸Šé€‰æ‹©è¿™ä¸ªæ¨¡å‹äº†ã€‚</p><p><img src="https://s2.loli.net/2025/12/24/lwp5zyV3JedY4KZ.png"></p><p>åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦å† <code>embedder.json</code> é…ç½®ä¸€ä¸ª embedding æ¨¡å‹ï¼Œè¿™ä¸ªä½ çš„ LLM æä¾›å•†ä¹Ÿä¼šæä¾›ï¼š</p><p><img src="https://s2.loli.net/2025/12/24/zYLm1ZV8QFrshbR.png"><br><img src="https://s2.loli.net/2025/12/24/6wFGvg4Uip9ZnNq.png"></p><blockquote><p>æ³¨æ„è¿™é‡Œçš„ batch_size éœ€è¦ä¿®æ”¹ä¸ºæ¨¡å‹æ”¯æŒçš„å¤§å°</p></blockquote><p>ç„¶åæˆ‘ä»¬ä¾¿å¯ä»¥å¡«å…¥ä¸€ä¸ª repo åœ°å€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ wikiã€‚</p><h1 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h1><p>å®˜æ–¹æä¾›äº†ä¸€ä¸ªæµç¨‹å›¾å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2025/12/24/7dnTIKvMRPyCEzu.png"></p><p>è¿™ä¸ªæµç¨‹å›¾ç•¥æ˜¾ç²—ç³™ï¼Œæˆ‘æ•´ç†ä¸€ç‰ˆæ›´ç»†çš„çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>è·å– repo ä¿¡æ¯ï¼ˆå‰ç«¯ï¼‰<br>Â  Â  1.1. clone repoï¼ŒåŒæ—¶åœ¨æœ¬åœ°ç”Ÿæˆ RAGã€‚<br>Â  Â  1.2. æ ¹æ®ç›®å½•ç»“æ„æ ‘å’Œ readme æ‹¼æ¥å†…å®¹ä¼ é€’ç»™ AI ç”Ÿæˆ wiki çš„<strong>ç›®å½•ç»“æ„</strong>ï¼š<a href="%5Bhttps://github.com/AsyncFuncAI/deepwiki-open/blob/bb3c67d235e0f504c38ddf661dc3022fdc7ebcef/src/app/%5Bowner%5D/%5Brepo%5D/page.tsx#L712-L832%5D(https://github.com/AsyncFuncAI/deepwiki-open/blob/bb3c67d235e0f504c38ddf661dc3022fdc7ebcef/src/app/%5Bowner%5D/%5Brepo%5D/page.tsx#L712-L832)"> prompt </a></li></ol><p>Â  Â  Â  Â  1.2.1. é€šè¿‡ã€ç›®å½•ç»“æ„æ ‘å’Œ readmeã€‘ å…ˆåˆ° RAG é‡ŒæŸ¥è¯¢å…·ä½“çš„æ–‡æ¡£ï¼Œç„¶åå†æ‹¼æ¥ä¸ system_prompt æ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´ prompt ç”Ÿæˆç›®å½•ç»“æ„</p><p>Â  Â  Â  Â  1.2.2. å¦‚æœ repo è¿‡å¤§å¯¼è‡´ç›®å½•æ ‘å’Œ readme çš„å†…å®¹è¶…è¿‡ token é™åˆ¶ï¼Œ<strong>åˆ™ä¸ä¼šå» RAG é‡ŒæŸ¥è¯¢å…·ä½“çš„å†…å®¹æ¥æ‹¼æ¥ç”Ÿæˆç›®å½•ç»“æ„</strong>ï¼Œåªä¼šæ ¹æ®ç›®å½•æ ‘å’Œ readme æ¥ç”Ÿæˆï¼Œè¿™æ ·çš„ç›®å½•ç»“æ„ä¿¡æ¯å¯èƒ½ä¼šä¸å…¨ã€‚</p><ol start="2"><li>æ ¹æ®<strong>ç›®å½•ç»“æ„</strong>æ‹¼æ¥ prompt ç”Ÿæˆæ¯ä¸ªç›®å½•çš„å…·ä½“å†…å®¹ï¼š<a href="%5Bhttps://github.com/AsyncFuncAI/deepwiki-open/blob/bb3c67d235e0f504c38ddf661dc3022fdc7ebcef/src/app/%5Bowner%5D/%5Brepo%5D/page.tsx#L419-L526%5D(https://github.com/AsyncFuncAI/deepwiki-open/blob/bb3c67d235e0f504c38ddf661dc3022fdc7ebcef/src/app/%5Bowner%5D/%5Brepo%5D/page.tsx#L419-L526)">prompt</a>ï¼ˆå‰ç«¯ï¼‰<br>Â  Â  2.1 æ ¹æ®å‰ç«¯æäº¤çš„<strong>ç›®å½• prompt æ‰§è¡Œ RAG æ£€ç´¢</strong>ï¼Œæ‰¾å‡ºéœ€è¦æŸ¥è¯¢çš„ documentï¼Œæ ¹æ® document é‡Œçš„æºç æ„å»ºæœ€ç»ˆçš„å‘å¾€ LLM çš„ promptï¼ˆåç«¯ï¼‰<br>Â  Â  Â  Â  3. å°†æ–‡ä»¶åˆ†ç»„ï¼Œæ‹¼æ¥æˆ <a href="%5Bhttps://github.com/AsyncFuncAI/deepwiki-open/blob/cdf06314e416074fe9750de36e0829f79497711e/api/websocket_wiki.py#L199-L223%5D(https://github.com/AsyncFuncAI/deepwiki-open/blob/cdf06314e416074fe9750de36e0829f79497711e/api/websocket_wiki.py#L199-L223)">context_text</a><br>Â  Â  2.2. ä¸ system_prompt æ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´ <a href="%5Bhttps://github.com/AsyncFuncAI/deepwiki-open/blob/cdf06314e416074fe9750de36e0829f79497711e/api/websocket_wiki.py#L407-L421%5D(https://github.com/AsyncFuncAI/deepwiki-open/blob/cdf06314e416074fe9750de36e0829f79497711e/api/websocket_wiki.py#L407-L421)">prompt</a>ï¼ˆåç«¯ï¼‰</li></ol><p>Â 4. å¾ªç¯ 2ï¼Œ ç»§ç»­å¤„ç†å‰ç«¯æäº¤ä¸Šæ¥çš„ç›®å½•ç»“æ„ promptã€‚</p><p><img src="https://s2.loli.net/2025/12/24/qWrCBmNkx7pJUv4.png"></p><h2 id="ç”Ÿæˆæœ¬åœ°æœ¬åœ°å‘é‡æ•°æ®åº“"><a href="#ç”Ÿæˆæœ¬åœ°æœ¬åœ°å‘é‡æ•°æ®åº“" class="headerlink" title="ç”Ÿæˆæœ¬åœ°æœ¬åœ°å‘é‡æ•°æ®åº“"></a>ç”Ÿæˆæœ¬åœ°æœ¬åœ°å‘é‡æ•°æ®åº“</h2><p>ç¬¬ä¸€æ­¥æ˜¯ clone æˆ‘ä»¬æŒ‡å®šçš„ repoï¼ŒåŒæ—¶ä¼šè¯»å–è¯¥ repo é‡Œçš„æ‰€æœ‰å†…å®¹åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªå‘é‡æ•°æ®åº“ã€‚</p><p>ç›¸å…³çš„å…³é”®ä»£ç ï¼š<br><img src="https://s2.loli.net/2025/12/24/7SchRv3zriZu4dI.png"><br><img src="https://s2.loli.net/2025/12/24/LxzyOKsM7RinagY.png"></p><h2 id="Spitter"><a href="#Spitter" class="headerlink" title="Spitter"></a>Spitter</h2><p>åœ¨ç”Ÿæˆå‘é‡ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦æ„å»ºä¸€ä¸ªåˆ†è¯å™¨ï¼Œå®ƒç”¨äºå°†æˆ‘ä»¬çš„æ–‡æœ¬åˆ‡åˆ†ä¸ºä¸€ä¸ªä¸ª chunkï¼Œä»¥ä¾¿ï¼š</p><ul><li>é¿å…è¶…å‡ºæ¨¡å‹&#x2F;åµŒå…¥æ¥å£çš„é•¿åº¦ä¸Šé™</li><li>æé«˜æ£€ç´¢å‘½ä¸­ç‡ï¼ˆæ›´ç»†ç²’åº¦åœ°å¬å›ä¸é—®é¢˜ç›¸å…³çš„ç‰‡æ®µï¼‰</li><li>å‡å°‘æ— å…³ä¸Šä¸‹æ–‡çš„å¹²æ‰°ï¼Œæå‡å›ç­”è´¨é‡</li></ul><p>åœ¨ deepwiki é‡Œçš„é…ç½®å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2025/12/24/CVtdMlnwZzuHDGT.png"></p><ul><li>split_by: â€œwordâ€ï¼ˆæŒ‰â€œè¯â€ç»´åº¦åˆ‡åˆ†ï¼‰</li><li>chunk_size: 350ï¼ˆå•å—ç›®æ ‡é•¿åº¦ï¼Œçº¦ç­‰äºå‡ ç™¾ä¸ªè¯ï¼‰</li><li>chunk_overlap: 100ï¼ˆç›¸é‚»å—çš„é‡å é•¿åº¦ï¼Œä¿è¯è·¨å—è¯­ä¹‰è¿ç»­ï¼‰</li></ul><p>å¯èƒ½æ–°æ‰‹å¯¹ overlap çš„ä½œç”¨ä¸å¤ªæ¸…æ¥šï¼Œå®ƒçš„å¥½å¤„æ˜¯ï¼š</p><ul><li>ä»£ç æˆ–æ–‡æ¡£çš„å…³é”®ä¿¡æ¯å¯èƒ½è·¨è¶Šè¾¹ç•Œï¼›è®¾ç½® overlap èƒ½è®©ç›¸é‚»å—å…±äº«ä¸€éƒ¨åˆ†ä¸Šä¸‹æ–‡ï¼Œå‡å°‘â€œåˆ‡æ–­è¯­ä¹‰â€çš„é£é™©ã€‚</li></ul><p>å¯¹ä»–çš„é…ç½®ä¹Ÿéœ€è¦æŒ‰éœ€ä½¿ç”¨ï¼š</p><ul><li>è¿‡å¤§ overlap ä¼šå¯¼è‡´é‡å¤è®¡ç®—ã€å­˜å‚¨å’Œè´¹ç”¨å¢åŠ ï¼›è¿‡å°å¯èƒ½ä¸¢å¤±è·¨æ®µè¯­ä¹‰ã€‚</li></ul><p>æ™®é€šåœºæ™¯ä¸‹ <code>text_splitter</code> å¤Ÿç”¨ï¼Œä½†å¯¹äºæˆ‘ä»¬è¿™ç§å­˜ä»£ç çš„åœºæ™¯å°±éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„ <code>Spitter</code> äº†ï¼›ä¸»è¦é—®é¢˜æ˜¯å®ƒä¸ç†è§£è¯­è¨€ç»“æ„ï¼Œå®¹æ˜“æŠŠå‡½æ•°&#x2F;ç±»ç­‰è¯­ä¹‰å•å…ƒåˆ‡æ–­ï¼Œå¯¼è‡´æ£€ç´¢å¬å›ç‰‡æ®µä¸å®Œæ•´ã€ä¸Šä¸‹æ–‡ä¸¢å¤±ã€‚</p><table><thead><tr><th>Splitter ç±»å‹</th><th>æ ¸å¿ƒæ€è·¯</th><th>ä¸»è¦ä¼˜ç‚¹</th></tr></thead><tbody><tr><td>AST&#x2F;è¯­æ³•æ ‘å‹ï¼ˆ<a href="https://pypi.org/project/code-splitter/">Tree-sitter</a>ã€<a href="https://developers.llamaindex.ai/python/framework/module_guides/loading/node_parsers/modules/#codesplitter">LlamaIndex CodeSplitter</a>ï¼‰</td><td>æŒ‰è¯­è¨€è¯­æ³•è§£æï¼ŒæŒ‰æ–‡ä»¶â†’æ¨¡å—â†’ç±»&#x2F;å‡½æ•°â†’ä»£ç å—åˆ†å±‚åˆ‡åˆ†</td><td>è¾¹ç•Œä¸è¯­ä¹‰å•å…ƒå¯¹é½ï¼ˆå‡½æ•°&#x2F;ç±»&#x2F;æ–¹æ³•ï¼‰ï¼›æ£€ç´¢æ›´ç²¾å‡†ï¼›å¯é™„å¸¦ç¬¦å·å&#x2F;ç­¾å&#x2F;è·¯å¾„ç­‰å…ƒæ•°æ®ï¼›å‡å°‘â€œåˆ‡æ–­è¯­ä¹‰â€å¯¼è‡´çš„å¹»è§‰</td></tr><tr><td>è¯­è¨€&#x2F;æ¨¡å¼æ„ŸçŸ¥å¯å‘å¼ï¼ˆ<a href="https://reference.langchain.com/python/langchain_text_splitters/?_gl=1*1wsspz*_gcl_au*MTQxMjAyNDczOS4xNzY1NDQ2MTUx*_ga*NDcyOTM2OTM2LjE3NjU0NDYxNTI.*_ga_47WX3HKKY2*czE3NjY0NjkxODUkbzYkZzEkdDE3NjY0NzA0MDkkajYwJGwwJGgw#langchain_text_splitters.RecursiveCharacterTextSplitter.from_language">LangChain Recursive</a> + è¯­è¨€åˆ†éš”ç¬¦ï¼‰</td><td>ç»´æŠ¤å„è¯­è¨€çš„åˆ†éš”ç¬¦ï¼ˆclass&#x2F;def&#x2F;function&#x2F;export ç­‰ï¼‰ï¼Œå…ˆé€’å½’æŒ‰åˆ†éš”ç¬¦åˆ‡åˆ†ï¼Œå†åš token çº¦æŸ</td><td>å®ç°ç®€å•ã€è·¨è¯­è¨€å®¹æ˜“è½åœ°ï¼›æ¯”çº¯è¯&#x2F;å­—ç¬¦åˆ‡åˆ†æ›´ç¨³ï¼›æˆæœ¬ä½ã€å·¥ç¨‹é›†æˆå¿«</td></tr><tr><td>è¿™ä¸¤è€…çš„å¯¹æ¯”ç»“æœè¿˜åœ¨åšæµ‹è¯•ï¼Œä½†éƒ½ä¼šæ¯”å­˜æ–‡æœ¬åˆ†å‰²å¥½å¾ˆå¤šï¼›å…·ä½“å¯¹æ¯”ç»“æœå¯ä»¥å‚è€ƒåç»­çš„æ–‡ç« ã€‚</td><td></td><td></td></tr></tbody></table><h3 id="embedding"><a href="#embedding" class="headerlink" title="embedding"></a>embedding</h3><p>è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®çš„ embedding æ“ä½œï¼Œä»–æ˜¯å°†æˆ‘ä»¬çš„æ–‡å­—ã€è¯­éŸ³ã€è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªå‘é‡ï¼›ç±»ä¼¼äºä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI<br><br>client = OpenAI(<br>    api_key=os.getenv(<span class="hljs-string">&quot;DASHSCOPE_API_KEY&quot;</span>),  <span class="hljs-comment"># å¦‚æœæ‚¨æ²¡æœ‰é…ç½®ç¯å¢ƒå˜é‡ï¼Œè¯·åœ¨æ­¤å¤„ç”¨æ‚¨çš„API Keyè¿›è¡Œæ›¿æ¢</span><br>    base_url=<span class="hljs-string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span>  <span class="hljs-comment"># ç™¾ç‚¼æœåŠ¡çš„base_url</span><br>)<br><br>completion = client.embeddings.create(<br>    model=<span class="hljs-string">&quot;text-embedding-v4&quot;</span>,<br>    <span class="hljs-built_in">input</span>=<span class="hljs-string">&#x27;è¡£æœçš„è´¨é‡æ æ çš„ï¼Œå¾ˆæ¼‚äº®ï¼Œä¸æ‰æˆ‘ç­‰äº†è¿™ä¹ˆä¹…å•Šï¼Œå–œæ¬¢ï¼Œä»¥åè¿˜æ¥è¿™é‡Œä¹°&#x27;</span>,<br>    dimensions=<span class="hljs-number">1024</span>, <span class="hljs-comment"># æŒ‡å®šå‘é‡ç»´åº¦ï¼ˆä»… text-embedding-v3åŠ text-embedding-v4æ”¯æŒè¯¥å‚æ•°ï¼‰</span><br>    encoding_format=<span class="hljs-string">&quot;float&quot;</span><br>)<br><br><span class="hljs-built_in">print</span>(completion.model_dump_json())<br></code></pre></td></tr></table></figure><p>è€Œæ¨¡å‹è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span> <br>  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;embedding&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-number">0.0023064255</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-number">-0.009327292</span><span class="hljs-punctuation">,</span><br>        .... <br>        <span class="hljs-number">-0.0028842222</span><br>      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;index&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;object&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;embedding&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;model&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;text-embedding-v4&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;object&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;list&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;usage&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;prompt_tokens&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">23</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;total_tokens&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">23</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;f62c2ae7-0906-9758-ab34-47c5764f07e2&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>åœ¨ deepwiki è¿™ä¸ªé¡¹ç›®é‡Œï¼Œæˆ‘ä»¬æ²¡æœ‰ä¸»åŠ¨è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œè€Œæ˜¯ç”± <a href="https://github.com/SylphAI-Inc/AdalFlow">AdalFlow</a> è¿™ä¸ªåº“åœ¨å†…éƒ¨å®Œæˆçš„ã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯è¿™è¡Œä»£ç  <code>db.transform(key=&quot;split_and_embed&quot;)</code></p></blockquote><p>åœ¨ deepwiki ä¸­æˆ‘ä»¬åªæ˜¯ç®€å•å°†å‘é‡æ•°æ®å­˜æ”¾åœ¨äº†æœ¬åœ°ï¼Œå®é™…ç”Ÿäº§ä½¿ç”¨æ—¶è¿˜éœ€è¦å°†å…¶å­˜æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„å‘é‡æ•°æ®åº“ã€‚</p><h2 id="ç”Ÿæˆç›®å½•"><a href="#ç”Ÿæˆç›®å½•" class="headerlink" title="ç”Ÿæˆç›®å½•"></a>ç”Ÿæˆç›®å½•</h2><p>ç„¶åå°±æ˜¯ä¸ AI äº¤äº’äº†ï¼Œç¬¬ä¸€æ­¥æ˜¯ç”Ÿæˆç›®å½•ï¼Œç±»ä¼¼äºè¿™æ ·ï¼š</p><p><img src="https://s2.loli.net/2025/12/24/jFkGsBCP4Aa5VUq.png"></p><p><img src="https://s2.loli.net/2025/12/24/tSDVvaLTU1Eymbl.png"></p><p>ç³»ç»Ÿç”Ÿæˆçš„æç¤ºè¯å¦‚ä¸‹ï¼Œå…¶å®å°±æ˜¯æŠŠ repo çš„ç›®å½•ç»“æ„æ ‘+readme æ–‡ä»¶çš„å†…å®¹ä¸ system_prompt æ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„æç¤ºè¯å‘Šè¯‰ LLMï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªé¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚</p><p>ä¸»è¦æ˜¯ä»¥ä¸‹çš„ä¸€äº›è¦æ±‚ï¼š</p><ul><li>å¿…é¡»åªè¿”å› XMLï¼Œæ ¹èŠ‚ç‚¹ä¸ºÂ <code>&lt;wiki_structure&gt;</code>ï¼Œä»¥Â <code>&lt;/wiki_structure&gt;</code>Â ç»“æŸ</li><li>XML å¿…é¡»è¯­æ³•æœ‰æ•ˆã€ä¸¥æ ¼æŒ‰æŒ‡å®šç»“æ„</li><li>é¡µé¢æ•°é‡è¦æ±‚ï¼š<ul><li>ç»¼åˆæ¨¡å¼ï¼ˆcomprehensiveï¼‰ï¼š8â€“12 ä¸ªé¡µé¢</li><li>ç²¾ç®€æ¨¡å¼ï¼ˆconciseï¼‰ï¼š4â€“6 ä¸ªé¡µé¢</li></ul></li><li>å†…å®¹è¯­è¨€ç”±å‚æ•°æŒ‡å®šï¼ˆè‹±æ–‡ã€ä¸­æ–‡ã€æ—¥æ–‡ç­‰ï¼‰</li><li>æ¯ä¸ªé¡µé¢åº”èšç„¦ä»£ç åº“çš„ä¸€ä¸ªå…·ä½“æ–¹é¢ï¼ˆæ¶æ„ã€ç‰¹æ€§ã€éƒ¨ç½²ã€å‰ç«¯&#x2F;åç«¯æ¨¡å—ç­‰ï¼‰</li><li><code>relevant_files</code>Â å¿…é¡»æ˜¯ä»“åº“ä¸­çš„çœŸå®æ–‡ä»¶è·¯å¾„ï¼Œç”¨äºåç»­ç”Ÿæˆå…·ä½“é¡µé¢å†…å®¹</li></ul><h2 id="æ¯ä¸ªç›®å½•çš„å…·ä½“è¯¦æƒ…é¡µ"><a href="#æ¯ä¸ªç›®å½•çš„å…·ä½“è¯¦æƒ…é¡µ" class="headerlink" title="æ¯ä¸ªç›®å½•çš„å…·ä½“è¯¦æƒ…é¡µ"></a>æ¯ä¸ªç›®å½•çš„å…·ä½“è¯¦æƒ…é¡µ</h2><p>ç›®å½•ç”Ÿæˆå®Œæˆä¹‹åå°±éœ€è¦ç”Ÿæˆè¯¥é¡µé¢çš„å…·ä½“å†…å®¹äº†ï¼Œæ¯”å¦‚è¿™ä¸ªé¡µé¢ï¼š<br><img src="https://s2.loli.net/2025/12/24/gsEO5th9B4CD21q.png"></p><p>ä»–çš„æç¤ºè¯å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2025/12/24/WY8iIKlzaEAney6.png"><br>å…¶ä¸­çš„ä¸»è¦çº¦æŸå¦‚ä¸‹ï¼š</p><p>ç›¸å…³æºæ–‡ä»¶æ¸…å•ï¼ˆå¼ºåˆ¶ï¼‰</p><ul><li>åœ¨æœ€é¡¶éƒ¨çš„Â <details>Â ä¸­é€æ¡åˆ—å‡ºæ‰€æœ‰ç”¨äºç”Ÿæˆå†…å®¹çš„æºæ–‡ä»¶ï¼Œä¸”è‡³å°‘ 5 ä¸ªã€‚</li><li>æ¯ä¸ªæ–‡ä»¶ä»¥ Markdown é“¾æ¥å½¢å¼å‡ºç°ï¼ˆå·²ç»™å‡ºå¯ç‚¹å‡»çš„ä»“åº“æ–‡ä»¶ URLï¼‰ã€‚</li><li>è‹¥è¾“å…¥æ–‡ä»¶å°‘äº 5 ä¸ªï¼Œæ¨¡å‹éœ€â€œè¡¥è¶³æ›´å¤šç›¸å…³æ–‡ä»¶â€ã€‚</li><li>Mermaid Diagramsï¼ˆå¤§é‡ä½¿ç”¨ï¼Œå¼ºåˆ¶è§„åˆ™ï¼‰</li></ul><p>æ€»ç»“å°±æ˜¯ï¼šç»“æ„åˆç†ã€å±‚æ¬¡åˆ†æ˜ï¼Œä¾¿äºç†è§£ä¸å¯¼èˆªç‚¹å‡»ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»¥ä¸Šå°±æ˜¯å¯¹ deepwiki é¡¹ç›®çš„åˆ†æï¼Œä½œä¸ºä¸€ä¸ªå…¸å‹çš„ RAG åº”ç”¨ï¼ŒæŒæ¡å®ƒçš„æµç¨‹ä¾¿å¯ä»¥ä¸¾ä¸€åä¸‰æ¥å®ç°å…¶ä»–ç±»ä¼¼çš„ RAG åº”ç”¨ã€‚</p><p>å½“ç„¶å…¶ä¸­æœ‰è®¸å¤šéœ€è¦è°ƒä¼˜çš„åœ°æ–¹ï¼Œæ¯”å¦‚æ¨¡å‹çš„é€‰æ‹©ã€Spitter å‚æ•°çš„é…ç½®ã€RAG å¬å› top_k çš„é…ç½®ç­‰ç­‰ã€‚</p><p>è¿˜è¦å¹³è¡¡å¥½æ•ˆæœä¸æˆæœ¬ã€‚<br>#Blog  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸Šä¸€ç¯‡æ–‡ç« ï¼š&lt;a href=&quot;https://crossoverjie.top/2025/12/23/AI/LLM-app-concept/&quot;&gt;å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¿…éœ€äº†è§£çš„åŸºæœ¬æ¦‚å¿µ&lt;/a&gt; åˆ†äº«äº†å…³äº LLM å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œæœ¬æ–‡ä¹˜çƒ­æ‰“é“ï¼Œå€ŸåŠ©ä¸€ä¸ªçœŸå®çš„å¤§æ¨¡å‹åº”ç”¨</summary>
      
    
    
    
    <category term="AI" scheme="http://crossoverjie.top/categories/AI/"/>
    
    
    <category term="AI" scheme="http://crossoverjie.top/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¿…éœ€äº†è§£çš„åŸºæœ¬æ¦‚å¿µ</title>
    <link href="http://crossoverjie.top/2025/12/23/AI/LLM-app-concept/"/>
    <id>http://crossoverjie.top/2025/12/23/AI/LLM-app-concept/</id>
    <published>2025-12-23T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.153Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>AI&#x2F;LLM å¤§æ¨¡å‹æœ€è¿‘å‡ å¹´æ¯‹åº¸ç½®ç–‘çš„æ˜¯çƒ­åº¦ç¬¬ä¸€ï¼Œè™½ç„¶æˆ‘æ—¥å¸¸ä¸€ç›´åœ¨ç”¨ AI ææ•ˆï¼Œä½†çœŸæ­£ä½¿ç”¨å¤§æ¨¡å‹åšä¸€ä¸ªåº”ç”¨çš„æœºä¼šè¿˜æ˜¯å°‘ã€‚</p><p>æœ€è¿‘æ­£å¥½æœ‰è¿™ä¹ˆä¸ªæœºä¼šï¼Œéœ€è¦å°†å…¬å¸å†…éƒ¨çš„ä»£ç  repo è½¬æ¢ä¸ºä¸€ä¸ª wikiï¼ŒåŒæ—¶è¿˜å¯ä»¥åŸºäºé¡¹ç›®å†…å®¹è¿›è¡Œå¯¹è¯äº†è§£æ›´å…·ä½“çš„å†…å®¹ã€‚</p><p>å®é™…æ•ˆæœå¤§æ¦‚å’Œä¸ŠåŠå¹´å¾ˆç«çš„ <a href="https://deepwiki.com/redis/redis">deepwiki</a> ç±»ä¼¼ã€‚</p><p><img src="https://s2.loli.net/2025/12/22/wq5hNKEHzGSDUQY.png"></p><p>è€Œæˆ‘ä»¬æ˜¯æƒ³åŸºäºå¼€æºçš„ <a href="github.com/AsyncFuncAI/deepwiki-open">deepwiki-open</a>è¿›è¡Œå¼€å‘ï¼Œæä¾›çš„åŠŸèƒ½éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä¹Ÿä»ä¸€ä¸ªå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å°ç™½é€æ­¥ç†è§£äº†å…¶ä¸­çš„ä¸€äº›å…³é”®æ¦‚å¿µï¼Œä»¥åŠäº†è§£äº†ä¸€ä¸ªå¤§æ¨¡å‹åº”ç”¨çš„è¿è¡ŒåŸç†ã€‚</p><span id="more"></span><h1 id="LLM"><a href="#LLM" class="headerlink" title="LLM"></a>LLM</h1><p>LLMï¼ˆLarge Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼‰å¤§å®¶åº”è¯¥éƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼š</p><ul><li>æœ¬è´¨ï¼šä¸€ä¸ªé€šè¿‡æµ·é‡æ–‡æœ¬è®­ç»ƒå‡ºæ¥çš„æ¦‚ç‡æ¨¡å‹</li><li>èƒ½åŠ›ï¼šç†è§£&#x2F;ç”Ÿæˆæ–‡æœ¬ã€ä»£ç ï¼Œåšæ¨ç†ã€å¯¹è¯ç­‰</li><li>ç‰¹ç‚¹ï¼š<ul><li><strong>å‚æ•°å›ºå®š</strong>ï¼šè®­ç»ƒå®Œä¹‹åâ€œè®°å¿†â€æ˜¯å›ºåŒ–åœ¨å‚æ•°é‡Œçš„</li><li><strong>çŸ¥è¯†æœ‰æ—¶é—´ç‚¹</strong>ï¼šåªçŸ¥é“è®­ç»ƒæˆªæ­¢å‰çš„æ•°æ®ï¼ˆæœ‰çŸ¥è¯†æˆªæ­¢æ—¶é—´ï¼‰</li></ul></li></ul><p>å¯ä»¥æŠŠÂ <strong>LLM</strong>Â å½“æˆä¸€ä¸ªâ€œé€šç”¨å¤§è„‘â€ï¼Œä½†ä¸ä¸€å®šçŸ¥é“æœ€æ–°çš„ã€ä½ çš„ç§æœ‰æ•°æ®ã€‚</p><p>ç›®å‰çš„ AI ä¹Ÿå°±æ˜¯å¤§æ¨¡å‹æœ¬è´¨ä¸Šè¿˜æ˜¯æ¦‚ç‡é¢„æµ‹ï¼Œå½“ä½ ç»™å®ƒä¸€æ®µè¯ï¼ˆPromptï¼‰æ—¶ï¼Œå®ƒåœ¨åå°åšçš„äº‹æƒ…æ˜¯ï¼š<strong>â€œæ ¹æ®æˆ‘è¯»è¿‡çš„å‡ ä¸‡äº¿å­—ï¼Œæ¥åœ¨è¿™æ®µè¯åé¢ï¼Œæ¦‚ç‡æœ€é«˜çš„ä¸‹ä¸€ä¸ªå­—ï¼ˆTokenï¼‰æ˜¯ä»€ä¹ˆï¼Ÿâ€</strong></p><p>æ‰€ä»¥å¤§æ¨¡å‹æ¯æ¬¡å›ç­”çš„å†…å®¹å¯èƒ½ä¸åŒï¼Œä¹Ÿä¸èƒ½ 100% çš„å‘Šè¯‰ä½ å‡†ç¡®ç­”æ¡ˆã€‚</p><h2 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h2><p>å¤§æ¨¡å‹å¹¶ä¸ç›´æ¥è®¤è¯†<code>java</code>ã€<code>Rust</code> æˆ–è€…â€œç¼–ç¨‹â€è¿™äº›è¯ã€‚åœ¨æ¨¡å‹å†…éƒ¨ï¼Œæ‰€æœ‰çš„æ–‡å­—éƒ½ä¼šå…ˆè¢«è½¬æ¢æˆä¸€ç³»åˆ—æ•°å­—ã€‚</p><ul><li><strong>å­—&#x2F;è¯ â‰  Token</strong>ï¼šä¸€ä¸ª Token æ—¢ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå•çº¯çš„å•è¯ã€‚</li><li><strong>çµæ´»åˆ‡åˆ†</strong>ï¼š<ul><li>å¸¸è§çš„è¯ï¼ˆå¦‚Â <code>the</code>,Â <code>apple</code>ï¼‰é€šå¸¸å¯¹åº”Â <strong>1 ä¸ª Token</strong>ã€‚</li><li>ç½•è§çš„è¯æˆ–é•¿çš„å¤åˆè¯ï¼ˆå¦‚Â <code>microservices</code>ï¼‰å¯èƒ½ä¼šè¢«æ‹†åˆ†æˆå‡ ä¸ª Tokenï¼ˆå¦‚Â <code>micro</code>Â +Â <code>services</code>ï¼‰ã€‚</li><li>ä¸­æ–‡é€šå¸¸æ¯”è¾ƒç‰¹æ®Šï¼šä¸€ä¸ªå¸¸ç”¨çš„æ±‰å­—å¯èƒ½æ˜¯ 1 ä¸ª Tokenï¼Œä½†ä¸å¸¸ç”¨çš„æ±‰å­—å¯èƒ½ä¼šå ç”¨ 2-3 ä¸ª Tokenã€‚</li></ul></li></ul><p>åœ¨åšå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„æ—¶å€™å°¤å…¶éœ€è¦æ³¨æ„ token çš„ç”¨é‡ï¼Œæ¯•ç«Ÿè¿™æ˜¯è®¡è´¹çš„æ ‡å‡†ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªæ˜¯ä¸Šä¸‹æ–‡çª—å£çš„é™åˆ¶ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½ä¼šæœ‰æœ€å¤§ token çš„é™åˆ¶ï¼ˆå¦‚ 8k, 32k, 128kï¼‰ã€‚</p><p>å¦‚æœä½ çš„ Prompt åŠ ä¸Šæ¨¡å‹çš„å›å¤è¶…è¿‡äº†è¿™ä¸ªé™åˆ¶ï¼Œæ¨¡å‹å°±ä¼šä¸¢æ‰å‰é¢çš„è®°å¿†æˆ–è€…ç›´æ¥æŠ¥é”™ã€‚</p><p>åœ¨æ—¥å¸¸å¼€å‘ä¼°ç®—ä¸­ï¼Œå¯ä»¥å¤§æ¦‚ä¼°ç®—ä¸€ä¸‹è¿™ä¸ªæ¯”ä¾‹ï¼š</p><ul><li><strong>è‹±æ–‡æ–‡æœ¬</strong>ï¼š1000 TokensÂ â‰ˆÂ 750 ä¸ªå•è¯ã€‚</li><li><strong>ä¸­æ–‡æ–‡æœ¬</strong>ï¼š1000 TokensÂ â‰ˆÂ 500 åˆ° 600 ä¸ªæ±‰å­—ï¼ˆéšç€æ¨¡å‹è¯è¡¨çš„æ¼”è¿›ï¼Œç°åœ¨çš„æ¨¡å‹å¤„ç†ä¸­æ–‡çš„æ•ˆç‡åœ¨ä¸æ–­æå‡ã€‚ï¼‰ã€‚</li><li><strong>ä»£ç </strong>ï¼šä»£ç ä¸­çš„ç©ºæ ¼ã€ç¼©è¿›å’Œç‰¹æ®Šç¬¦å·éƒ½ä¼šæ¶ˆè€— Tokenã€‚Python ç­‰ç”±äºç¼©è¿›è¾ƒå¤šï¼Œæ¶ˆè€—é€šå¸¸æ¯”çº¯æ–‡æœ¬å¿«ã€‚</li></ul><p>ä¹Ÿæœ‰ç›¸å…³çš„åº“å¯ä»¥å¸®æˆ‘ä»¬è®¡ç®— tokenï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">  <br><span class="hljs-comment"># Choose encoding based on embedder type  </span><br><span class="hljs-keyword">if</span> embedder_type == <span class="hljs-string">&#x27;ollama&#x27;</span>:  <br>    <span class="hljs-comment"># Ollama typically uses cl100k_base encoding  </span><br>    encoding = tiktoken.get_encoding(<span class="hljs-string">&quot;cl100k_base&quot;</span>)  <br><span class="hljs-keyword">elif</span> embedder_type == <span class="hljs-string">&#x27;google&#x27;</span>:  <br>    <span class="hljs-comment"># Google uses similar tokenization to GPT models for rough estimation  </span><br>    encoding = tiktoken.get_encoding(<span class="hljs-string">&quot;cl100k_base&quot;</span>)  <br><span class="hljs-keyword">else</span>:  <span class="hljs-comment"># OpenAI or default  </span><br>    <span class="hljs-comment"># Use OpenAI embedding model encoding    </span><br>    encoding = tiktoken.encoding_for_model(<span class="hljs-string">&quot;text-embedding-3-small&quot;</span>)  <br>  <br><span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(encoding.encode(text))<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ <a href="https://platform.openai.com/tokenizer">openai</a> çš„ä¸€ä¸ªå®ä¾‹ç½‘ç«™æ¥å¯è§†åŒ–æŸ¥çœ‹ token çš„è®¡ç®—è§„åˆ™ï¼š<br><img src="https://s2.loli.net/2025/12/22/P7eXa4JAtCsTQYE.png"></p><h1 id="RAG"><a href="#RAG" class="headerlink" title="RAG"></a>RAG</h1><p>RAG çš„å…¨ç¨‹æ˜¯Retrieval-Augmented Generationï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼Œä»–ä¸æ˜¯ç±»ä¼¼äº LLM çš„æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>æ¯”å¦‚ä½ é—® ChatGPT å…³äºä½ ä»¬å…¬å¸çš„æŸä¸€ä¸ªè§„ç« åˆ¶åº¦ï¼Œå¤§æ¦‚ç‡ ChatGPT çš„è®­ç»ƒè¯­æ–™æ˜¯ä½ æ²¡æœ‰ä½ ä»¬å…¬å¸çš„å†…éƒ¨æ•°æ®çš„ã€‚</p><p>æ‰€ä»¥ä»–å›å¤ä½ çš„å¤šåŠæ˜¯çç¼–çš„å†…å®¹ï¼Œæˆ–è€…ç›´æ¥å‘Šè¯‰ä½ ä¸çŸ¥é“ã€‚</p><p>æ­¤æ—¶å°±éœ€è¦ RAG äº†ï¼Œä»–å¯ä»¥åœ¨çœŸæ­£è¯¢é—® LLM ä¹‹å‰å…ˆåˆ°å†…éƒ¨çš„èµ„æ–™åº“é‡Œé€šè¿‡ç”¨æˆ·çš„é—®é¢˜å°†ç›¸å…³ä¸Šä¸‹æ–‡æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶åå†æ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„ prompt å‘é€ç»™ LLMï¼Œè®© LLM æ ¹æ®ä½ é€šè¿‡çš„æ•°æ®è¿›è¡Œå›ç­”ã€‚</p><p>è¿™æ ·èƒ½è§£å†³ä¸€ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol><li><strong>å¹»è§‰é—®é¢˜</strong>ï¼šä½ é—®å®ƒä¸€ä¸ªå®ƒä¸çŸ¥é“çš„äº‹æƒ…ï¼Œå®ƒä¼šä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ã€‚</li><li><strong>çŸ¥è¯†è¿‡æ—¶</strong>ï¼šå¤§æ¨¡å‹çš„çŸ¥è¯†åœç•™åœ¨å®ƒè®­ç»ƒç»“æŸçš„é‚£ä¸€å¤©ã€‚</li><li><strong>ç§æœ‰æ•°æ®å®‰å…¨</strong>ï¼šä½ ä¸èƒ½ä¸ºäº†è®© AI æ‡‚ä½ çš„ä¸šåŠ¡ä»£ç ï¼Œå°±æŠŠå‡ ç™¾ä¸‡è¡Œç§æœ‰ä»£ç å…¨å‘ç»™æ¨¡å‹æä¾›å•†è®­ç»ƒä¸€ä¸ªæ–°æ¨¡å‹ï¼Œé‚£å¤ªè´µä¸”ä¸å®‰å…¨ã€‚</li></ol><p>ä½¿ç”¨ RAG æ—¶è¿˜éœ€è¦é¢å¤–è€ƒè™‘åˆ°æ•°æ®æ¸…æ´—çš„æ­¥éª¤ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œçš„ repo wiki çš„åœºæ™¯ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸€äº›ç¬¬ä¸‰æ–¹åº“ã€ç¼–è¯‘åäº§ç”Ÿçš„ target ç›®å½•ç­‰ä¸éœ€è¦çš„å†…å®¹æ’é™¤æ‰ã€‚</p><p>é¿å…åœ¨æŸ¥è¯¢æ—¶å¸¦ä¸Šè¿™äº›å†…å®¹ï¼Œå¹²æ‰°æœ€ç»ˆçš„ç»“æœã€‚</p><h1 id="å‘é‡æ•°æ®åº“"><a href="#å‘é‡æ•°æ®åº“" class="headerlink" title="å‘é‡æ•°æ®åº“"></a>å‘é‡æ•°æ®åº“</h1><p>ä¸Šæ–‡é‡Œæåˆ° RAG æ¨¡å¼ï¼Œéœ€è¦ä¸€ä¸ªéå¸¸å…³é”®çš„ç»„ä»¶ï¼Œé‚£å°±æ˜¯å‘é‡æ•°æ®åº“ã€‚</p><p>æˆ‘ä»¬å…ˆè¦åœ¨ RAG é‡Œæ£€ç´¢å‡ºç›¸å…³çš„ä¸Šä¸‹æ–‡å°±æ˜¯åœ¨å‘é‡æ•°æ®åº“é‡ŒåšæŸ¥è¯¢ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><strong>æŠŠæ–‡æ¡£åˆ‡å—</strong>ï¼ˆæ®µè½çº§åˆ«ï¼‰</li><li>ç”¨ä¸€ä¸ªÂ <strong>Embedding æ¨¡å‹</strong>Â æŠŠæ¯ä¸ªå—è½¬æˆå‘é‡</li><li>æŠŠè¿™äº›å‘é‡å­˜è¿›Â <strong>å‘é‡æ•°æ®åº“</strong></li><li>ç”¨æˆ·æé—®æ—¶ï¼Œä¹ŸæŠŠé—®é¢˜è½¬æˆå‘é‡</li><li>ç”¨å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢å‡ºæœ€ç›¸å…³çš„æ–‡æ¡£å—</li><li>æŠŠè¿™äº›æ–‡æ¡£å— + é—®é¢˜å–‚ç»™ LLMï¼Œè®©å®ƒç”Ÿæˆç­”æ¡ˆ</li></ol><p>ç®€å•æ¥è¯´å°±æ˜¯å°†ä¸€äº›éç»“æ„åŒ–çš„æ•°æ®ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€æ–‡å­—ï¼‰é€šè¿‡<strong>Embedding æ¨¡å‹</strong>Â è½¬æ¢æˆä¸€ä¸²æ•°å­—æ•°ç»„ï¼Œå³<strong>å‘é‡</strong>ï¼ˆä¾‹å¦‚ï¼š<code>[0.12, -0.59, 0.88, ...]</code>ï¼‰ã€‚</p><p>æŸ¥è¯¢çš„æ—¶å€™ä¹Ÿä¼šå°†æŸ¥è¯¢å†…å®¹è½¬æ¢ä¸ºå‘é‡ï¼Œç„¶åè¿”å›åœ¨å‘é‡ç©ºé—´é‡Œç›¸è¿‘çš„æ•°æ®ã€‚</p><h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><p>æ­¤æ—¶ä¹Ÿè®¸ä½ ä¼šæœ‰ä»¥ä¸‹ä¸€äº›é—®é¢˜ï¼š</p><p>LLM + RAG + å‘é‡æ•°æ®åº“ï¼Œæ˜¯ä¸æ˜¯ç±»ä¼¼äºç”¨ LLM è®­ç»ƒç§æœ‰åŒ–æ•°æ®ï¼Ÿè¿™ä¸¤è€…çš„æ•ˆæœæ˜¯å¦ç±»ä¼¼ï¼Ÿ å¦‚æœä¸åŒï¼ŒåŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ</p><p>LLM + RAG + å‘é‡æ•°æ®åº“ï¼š</p><ul><li><p>æœ¬è´¨æ˜¯ï¼š</p><blockquote><p>ä¸æ”¹æ¨¡å‹å‚æ•°ï¼Œç”¨<strong>æ£€ç´¢åˆ°çš„å¤–éƒ¨èµ„æ–™</strong>æ¥â€œå–‚â€æ¨¡å‹ï¼Œè®©å®ƒ<strong>æŸ¥å®Œå†ç­”</strong>ã€‚  </p></blockquote></li><li><p>ä½ çš„æ•°æ®åœ¨<strong>å¤–éƒ¨ï¼ˆå‘é‡æ•°æ®åº“é‡Œï¼‰</strong>ï¼Œåªæ˜¯å½“ä½œå‚è€ƒææ–™å¡è¿› promptã€‚</p></li></ul><p>åœ¨ç§æœ‰æ•°æ®ä¸Šè®­ç»ƒï¼ˆå¾®è°ƒ &#x2F; é¢„è®­ç»ƒï¼‰ï¼š</p><ul><li><p>æœ¬è´¨æ˜¯ï¼š</p><blockquote><p>ç”¨ä½ çš„æ•°æ®<strong>æ›´æ–°æ¨¡å‹å‚æ•°</strong>ï¼Œè®©æ¨¡å‹â€œè®°ä½â€è¿™äº›æ¨¡å¼å’ŒçŸ¥è¯†ã€‚  </p></blockquote></li><li><p>ä½ çš„æ•°æ®è¢«â€œçƒ¤è¿›â€æ¨¡å‹æƒé‡é‡Œï¼Œè°ƒç”¨æ—¶ä¸éœ€è¦å†æŸ¥è¿™ä»½æ•°æ®ã€‚</p></li></ul><table><thead><tr><th>ç»´åº¦</th><th>RAGï¼ˆå‘é‡åº“ï¼‰</th><th>å¾®è°ƒ &#x2F; ç§æœ‰è®­ç»ƒ</th></tr></thead><tbody><tr><td>çŸ¥è¯†å­˜æ”¾</td><td>å¤–éƒ¨å‘é‡åº“</td><td>æ¨¡å‹å‚æ•°é‡Œ</td></tr><tr><td>æ›´æ–°æˆæœ¬</td><td>æ”¹æ–‡æ¡£å³å¯ï¼Œé‡å»º &#x2F; å¢é‡å‘é‡ç´¢å¼•</td><td>éœ€è¦é‡æ–°è®­ç»ƒéƒ¨ç½²</td></tr><tr><td>ç”Ÿæ•ˆæ—¶é—´</td><td>å‡ åˆ†é’Ÿçº§</td><td>è®­ç»ƒ+ä¸Šçº¿ï¼Œå°æ—¶ï½å¤©çº§</td></tr><tr><td>æ”¯æŒé¢‘ç¹å˜æ›´</td><td>å¾ˆé€‚åˆ</td><td>å¾ˆä¸é€‚åˆ</td></tr><tr><td>é€æ˜åº¦&#x2F;å¯è§£é‡Šæ€§</td><td><strong>é«˜</strong>ï¼ˆå¯ä»¥è¿½æº¯åˆ°åŸæ–‡å‡ºå¤„ï¼‰</td><td><strong>ä½</strong>ï¼ˆæ¨¡å‹ç›´æ¥ç»™å‡ºï¼Œæ— æ³•ç¡®åˆ‡çŸ¥é“æ¥æºï¼‰</td></tr></tbody></table><p>æ€»çš„æ¥è¯´ä½¿ç”¨ RAG å¤–æŒ‚ç§æœ‰åŒ–å‘é‡æ•°æ®çš„æˆæœ¬æ›´ä½ï¼Œä¹Ÿæ›´çµæ´»ã€‚<br>å¯¹äºä¸€äº›æ›´å‚ç›´çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç§æœ‰æ•°æ®è®­ç»ƒæ¨¡å‹ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ€»ä½“ä¸‹æ¥çš„æ„Ÿå—æ˜¯ LLM åº”ç”¨å¤§éƒ¨åˆ†çš„<strong>ä»£ç </strong>éƒ½æ˜¯ prompt æç¤ºè¯ï¼Œæ™®é€š app çš„ä¸»è¦å†…å®¹æ˜¯ä»£ç ï¼Œè€Œä¸åŒå¤§æ¨¡å‹åº”ç”¨çš„ä¸»è¦åŒºåˆ«æ˜¯æç¤ºè¯ï¼›åè€Œä»£ç å¤§éƒ¨åˆ†éƒ½æ˜¯è¶‹åŒçš„ã€‚</p><p>åŒºåˆ«å°±æ˜¯ç”¨äº†ä»€ä¹ˆæ¡†æ¶ï¼Œä½†æ˜¯å…±åŒçš„å°±æ˜¯è°ƒç”¨å¤§æ¨¡å‹ APIï¼Œå°†ä¼ ç»Ÿçš„ request&#x2F;reponse çš„è¯·æ±‚æ¨¡å¼æ¢ä¸ºæµå¼å“åº”ï¼ˆå¤§æ¨¡å‹çš„å“åº”å¾ˆæ…¢ï¼‰ã€‚</p><p>åœ¨å¼€å‘åº”ç”¨æ—¶ï¼Œéœ€è¦äº†è§£Â <strong>System Prompt</strong>ï¼ˆç³»ç»Ÿé¢„è®¾è§’è‰²ï¼‰ã€<strong>User Prompt</strong>ï¼ˆç”¨æˆ·æé—®ï¼‰å’ŒÂ <strong>Few-shot</strong>ï¼ˆç»™æ¨¡å‹å‡ ä¸ªä¾‹å­å¼•å¯¼å®ƒï¼‰ã€‚å¥½çš„ Prompt æ˜¯è®© RAG ç»“æœå‡†ç¡®çš„å…³é”®ã€‚</p><p>åç»­è¿˜éœ€è¦æ›´åŠ å®Œå–„ <code>deepwiki-open</code>ï¼š</p><ul><li>ä¼˜åŒ– splitterï¼Œä½¿ç”¨æ›´é€‚åˆä»£ç åˆ†å‰²çš„ splitterï¼Œæ¯”å¦‚ <a href="https://tree-sitter.github.io/tree-sitter/">tree-sitter</a></li><li>å°†å­˜å‚¨åœ¨æœ¬åœ°çš„å‘é‡æ›¿æ¢ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‘é‡æ•°æ®åº“</li><li>æŒç»­ä¼˜åŒ–æç¤ºè¯ï¼Œæ›´åŠ ç¬¦åˆæˆ‘ä»¬çš„é¡¹ç›®èƒŒæ™¯</li></ul><p>#Blog </p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;AI&amp;#x2F;LLM å¤§æ¨¡å‹æœ€è¿‘å‡ å¹´æ¯‹åº¸ç½®ç–‘çš„æ˜¯çƒ­åº¦ç¬¬ä¸€ï¼Œè™½ç„¶æˆ‘æ—¥å¸¸ä¸€ç›´åœ¨ç”¨ AI ææ•ˆï¼Œä½†çœŸæ­£ä½¿ç”¨å¤§æ¨¡å‹åšä¸€ä¸ªåº”ç”¨çš„æœºä¼šè¿˜æ˜¯å°‘ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘æ­£å¥½æœ‰è¿™ä¹ˆä¸ªæœºä¼šï¼Œéœ€è¦å°†å…¬å¸å†…éƒ¨çš„ä»£ç  repo è½¬æ¢ä¸ºä¸€ä¸ª wikiï¼ŒåŒæ—¶è¿˜å¯ä»¥åŸºäºé¡¹ç›®å†…å®¹è¿›è¡Œå¯¹è¯äº†è§£æ›´å…·ä½“çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…æ•ˆæœå¤§æ¦‚å’Œä¸ŠåŠå¹´å¾ˆç«çš„ &lt;a href=&quot;https://deepwiki.com/redis/redis&quot;&gt;deepwiki&lt;/a&gt; ç±»ä¼¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/12/22/wq5hNKEHzGSDUQY.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;è€Œæˆ‘ä»¬æ˜¯æƒ³åŸºäºå¼€æºçš„ &lt;a href=&quot;github.com/AsyncFuncAI/deepwiki-open&quot;&gt;deepwiki-open&lt;/a&gt;è¿›è¡Œå¼€å‘ï¼Œæä¾›çš„åŠŸèƒ½éƒ½æ˜¯ç±»ä¼¼çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä¹Ÿä»ä¸€ä¸ªå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å°ç™½é€æ­¥ç†è§£äº†å…¶ä¸­çš„ä¸€äº›å…³é”®æ¦‚å¿µï¼Œä»¥åŠäº†è§£äº†ä¸€ä¸ªå¤§æ¨¡å‹åº”ç”¨çš„è¿è¡ŒåŸç†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="AI" scheme="http://crossoverjie.top/categories/AI/"/>
    
    
    <category term="AI" scheme="http://crossoverjie.top/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>æŒç»­å‰–æè¶…çº§å¢å¼ºï¼šå°† Trace/ Span å’Œ Profile æ•´åˆæ‰“é€š</title>
    <link href="http://crossoverjie.top/2025/11/25/OpenTelemetry/combining-tracing-and-profiling-for-enhanced-observability-introducing-span-profiles/"/>
    <id>http://crossoverjie.top/2025/11/25/OpenTelemetry/combining-tracing-and-profiling-for-enhanced-observability-introducing-span-profiles/</id>
    <published>2025-11-25T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.154Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘åœ¨åšæŒç»­å‰–æ Profile ä¸é“¾è·¯ç³»ç»Ÿæ‰“é€šçš„å·¥ä½œï¼Œå°±æŸ¥åˆ°äº† grafana åœ¨ 24 å¹´åˆå†™çš„è¿™ç¯‡æ–‡ç« ï¼›è§‰å¾—æ¯”è¾ƒæœ‰å‚è€ƒæ„ä¹‰ï¼Œåœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ã€‚</p></blockquote><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://grafana.com/blog/2024/02/06/combining-tracing-and-profiling-for-enhanced-observability-introducing-span-profiles/">https://grafana.com/blog/2024/02/06/combining-tracing-and-profiling-for-enhanced-observability-introducing-span-profiles/</a></p><p>åœ¨å½“ä»Šå¤æ‚çš„æ•°æ®ç¯å¢ƒä¸­ï¼Œè¿ç»­å‰–æï¼ˆcontinuous profilingï¼‰å·²æˆä¸ºè·å–åº”ç”¨èµ„æºä½¿ç”¨æƒ…å†µç»†ç²’åº¦æ´å¯Ÿçš„å…³é”®ã€‚Grafana Labs ç°é€šè¿‡åœ¨ <a href="/blog/2024/01/23/grafana-10.3-release-canvas-panel-updates-multi-stack-data-sources-and-more/">Grafana 10.3</a> ä¸­å¼•å…¥ Span Profiles åŠŸèƒ½ï¼Œå°†è¿™å·¥ä½œæŒç»­æ¨è¿›ã€‚</p><span id="more"></span><p>Span Profiles ä»£è¡¨ç€å‰–ææ–¹æ³•å­¦ä¸Šçš„ä¸€æ¬¡é‡å¤§è½¬å˜ï¼Œå®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿå¯¹è¿½è¸ªï¼ˆtracingï¼‰å’Œå‰–æï¼ˆprofilingï¼‰æ•°æ®è¿›è¡Œæ›´æ·±å…¥çš„è”åˆåˆ†æã€‚ä¼ ç»Ÿçš„è¿ç»­å‰–ææ˜¯åœ¨å›ºå®šæ—¶é—´åŒºé—´å†…æä¾›å…¨å±€ç³»ç»Ÿè§†è§’ï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSpan Profiles å¯ä»¥å¯¹åº”ç”¨å†…éƒ¨ç‰¹å®šæ‰§è¡Œä½œç”¨åŸŸï¼ˆexecution scopeï¼‰è¿›è¡Œæ›´èšç„¦çš„åˆ†æï¼Œä¾‹å¦‚å•ä¸ªè¯·æ±‚æˆ–æŸä¸ªç‰¹å®šçš„ trace span åˆ†æå®ƒçš„ Profileã€‚</p><p>è¿™ä¸€è½¬å˜å¸¦æ¥äº†æ›´ç²¾ç»†çš„æ€§èƒ½è§†è§’ï¼šé€šè¿‡å°†å‰–ææ•°æ®ä¸ trace ç›´æ¥å…³è”ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å…¨é¢åœ°ç†è§£åº”ç”¨è¡Œä¸ºã€‚ç”±æ­¤ï¼Œå·¥ç¨‹å›¢é˜Ÿå¯ä»¥æ›´é«˜æ•ˆåœ°è¯†åˆ«å¹¶è§£å†³æ€§èƒ½ç“¶é¢ˆã€‚</p><p><img src="https://s2.loli.net/2025/11/25/nPdSi97fwrvZY8M.png" alt="image.png"></p><p>åœ¨æˆ‘ä»¬äº Grafana Labs å†…éƒ¨é‡‡ç”¨è¿™ä¸€é›†æˆçš„ â€œtrace-to-profileâ€ æ–¹æ³•çš„ç¬¬ä¸€ä¸ªæœˆä¸­ï¼ŒCPU åˆ©ç”¨ç‡æå‡äº† 4 å€ï¼Œå¯¹å¯¹è±¡å­˜å‚¨çš„ API è°ƒç”¨å‡å°‘äº† 3 å€ï¼ŒåŒæ—¶è¿˜é™ä½äº†æˆæœ¬ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰â€”â€”å› æ­¤ï¼Œæˆ‘ä»¬éå¸¸é«˜å…´èƒ½å‘ç¤¾åŒºæ¨å‡ºè¿™ä¸€ç‰¹æ€§ï¼</p><hr><h2 id="ä¸-Grafana-Trace-è§†å›¾é›†æˆï¼šæ— ç¼ä½“éªŒ"><a href="#ä¸-Grafana-Trace-è§†å›¾é›†æˆï¼šæ— ç¼ä½“éªŒ" class="headerlink" title="ä¸ Grafana Trace è§†å›¾é›†æˆï¼šæ— ç¼ä½“éªŒ"></a>ä¸ Grafana Trace è§†å›¾é›†æˆï¼šæ— ç¼ä½“éªŒ</h2><p>å€ŸåŠ© Span Profilesï¼Œä½ å¯ä»¥åœ¨æ‰§è¡Œä½œç”¨åŸŸ<strong>å†…éƒ¨</strong>æŒ–æ˜å…·ä½“çš„æ€§èƒ½ç»†èŠ‚ã€‚æ¯”å¦‚ï¼Œä»¥å‰ä½ åªçŸ¥é“æŸä¸ª span èŠ±äº† 400msï¼Œç°åœ¨åˆ™èƒ½è¿›ä¸€æ­¥äº†è§£ï¼šåœ¨è¿™ 400ms é‡Œ<strong>å…·ä½“æ˜¯å“ªéƒ¨åˆ†ä»£ç </strong>åœ¨è¿è¡Œï¼›ä»è€Œæ›´å¿«çš„çŸ¥é“æ€§èƒ½ç“¶é¢ˆ</p><p><img src="https://s2.loli.net/2025/11/25/cC9VkwNpOSXqd8v.png" alt="image.png"></p><blockquote><p>ä½¿ç”¨ Span Profiles çš„ flamegraph æˆªå›¾ã€‚</p></blockquote><p>è¿™ç§æœ‰é’ˆå¯¹æ€§çš„æ–¹å¼ï¼Œè®©ä½ å¯ä»¥æ¯”ä»¥å¾€æ›´ç»†ç²’åº¦åœ°å‰–ææ€§èƒ½æŒ‡æ ‡ã€‚é€šè¿‡èšç„¦äºå•ä¸ªè¯·æ±‚æˆ–å•ä¸ª trace spanï¼ŒSpan Profiles ä¸ºä½ æä¾›äº†ä¸€æ‰‡ç›´æ¥æ´å¯Ÿåº”ç”¨æ€§èƒ½å…³é”®éƒ¨åˆ†çš„çª—å£ã€‚</p><p>Span Profiles ä¸ Grafana <a href="/docs/grafana/latest/explore/trace-integration/?pg=blog&plcmt=body-txt/#trace-view">trace è§†å›¾</a> çš„é›†æˆï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ— ç¼ä½“éªŒï¼šä½ å¯ä»¥è½»æ¾åœ°ä»é«˜å±‚çº§çš„ trace æ¦‚è§ˆï¼Œåˆ‡æ¢åˆ°å¯¹æŸä¸ªå…·ä½“ trace span è¿›è¡Œæ·±å…¥åˆ†æã€‚</p><p>å¼•å…¥ Span Profiles ä¸ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯ä¸Šçš„é£è·ƒï¼ŒåŒæ—¶ä¹Ÿæœ‰éå¸¸å¯è§‚çš„ä¸šåŠ¡å’ŒæŠ•èµ„å›æŠ¥ï¼ˆROIï¼‰ä»·å€¼ã€‚</p><p>é€šè¿‡å¸®åŠ©å›¢é˜Ÿæ›´å¿«åœ°è¯†åˆ«å¹¶è§£å†³æ€§èƒ½é—®é¢˜ï¼ŒSpan Profiles å‡å°‘äº†æ’éšœæ‰€éœ€çš„æ—¶é—´å’Œèµ„æºæŠ•å…¥ã€‚è¿™ç§æ•ˆç‡çš„æå‡å¸¦æ¥æ˜¾è‘—çš„æˆæœ¬èŠ‚çº¦ï¼Œè®© Span Profiles æˆä¸ºæ—¢èƒ½ä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼Œåˆèƒ½é™ä½è¿ç»´æˆæœ¬çš„æœ‰åŠ›å·¥å…·ã€‚</p><hr><h2 id="Grafana-Labs-å†…éƒ¨çš„çœŸå®æ¡ˆä¾‹"><a href="#Grafana-Labs-å†…éƒ¨çš„çœŸå®æ¡ˆä¾‹" class="headerlink" title="Grafana Labs å†…éƒ¨çš„çœŸå®æ¡ˆä¾‹"></a>Grafana Labs å†…éƒ¨çš„çœŸå®æ¡ˆä¾‹</h2><p>ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤º Span Profiles çš„ä¸šåŠ¡ä»·å€¼ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬åœ¨ Grafana Labs å†…éƒ¨ä½¿ç”¨è¯¥ç‰¹æ€§çš„ä¸€ä¸ªå®é™…æ¡ˆä¾‹ã€‚</p><p>å‡ ä¸ªæœˆå‰ï¼Œ<a href="/oss/pyroscope/https://grafana.com/oss/pyroscope/">Grafana Pyroscope</a> å›¢é˜Ÿï¼ˆPyroscope æ˜¯æ”¯æ’‘ <a href="https://grafana.com/products/cloud/profiles-for-continuous-profiling/">Grafana Cloud Profiles</a> çš„å¼€æºè¿ç»­å‰–ææ•°æ®åº“ï¼‰åœ¨æ•°æ®åº“æ¶æ„ä¸­æ–°å¢äº† <a href="https://grafana.com/docs/pyroscope/latest/reference-pyroscope-architecture/components/compactor/?pg=blog&plcmt=body-txt">compactor ç»„ä»¶</a>ï¼Œå¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½å’Œæˆæœ¬æ”¶ç›Šã€‚</p><p>compactor ä¼šé€šè¿‡åˆå¹¶å¤šä¸ª block æ¥æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œå¹¶å‡å°‘é•¿æœŸå­˜å‚¨çš„ä½¿ç”¨ã€‚å®ƒåœ¨ä¸ºæ¯ä¸ªç§Ÿæˆ·å°†å¤šä¸ª block å‹ç¼©æˆå•ä¸ªä¼˜åŒ– block çš„è¿‡ç¨‹ä¸­æ‰®æ¼”å…³é”®è§’è‰²ï¼Œè¿™ä¸ä»…é™ä½äº†å­˜å‚¨æˆæœ¬ï¼Œä¹ŸåŠ å¿«äº†æŸ¥è¯¢é€Ÿåº¦ã€‚</p><p><img src="https://s2.loli.net/2025/11/25/KB2n4rPfl657XdY.png"></p><blockquote><p>compactor ç»„ä»¶ç»“æ„å›¾ã€‚</p></blockquote><p>ç„¶è€Œï¼Œå‹ç¼©è¿‡ç¨‹æœ¬èº«éå¸¸å¤æ‚â€”â€”åŒ…æ‹¬ç«–å‘å‹ç¼©ã€æ¨ªå‘å‹ç¼©ä»¥åŠæ‹†åˆ†ä¸åˆå¹¶ï¼ˆsplit-and-mergeï¼‰ç­–ç•¥ç­‰å¤šä¸ªé˜¶æ®µâ€”â€”è¿™äº›éƒ½å¸¦æ¥äº†ä¸€äº›æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯ä¸æ€§èƒ½ç“¶é¢ˆç›¸å…³çš„æŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œåœ¨å¯†é›†çš„å‹ç¼©æ“ä½œæœŸé—´ï¼ŒCPU å’Œå†…å­˜ä½¿ç”¨å¯èƒ½ä¼šå‡ºç°æ˜æ˜¾å³°å€¼ï¼Œå­˜å‚¨ IO éœ€æ±‚ä¹Ÿä¼šæ˜¾è‘—å¢åŠ ï¼Œä»è€Œå¯èƒ½å½±å“æ•´ä½“ç³»ç»Ÿç¨³å®šæ€§ã€‚æ­¤å¤–ï¼Œåœ¨æ‹¥æœ‰å¤§é‡ç§Ÿæˆ·çš„å¤§è§„æ¨¡é›†ç¾¤ä¸­ï¼Œç®¡ç†å’Œä¼˜åŒ–è¿™äº›å¤§è§„æ¨¡å‹ç¼©ä»»åŠ¡æ‰€éœ€çš„èµ„æºä¹Ÿéå¸¸å¤æ‚ã€‚è€Œè¿™æ­£æ˜¯ Span Profiles åŠŸèƒ½å±•ç°å…¶ç‹¬ç‰¹ä¼˜åŠ¿çš„åœ°æ–¹ã€‚</p><p>é€šè¿‡å¯¹æ¯ä¸€æ¬¡å‹ç¼©è¿è¡Œè¿›è¡Œè¯¦ç»†å‰–æï¼ŒSpan Profiles èƒ½å¤Ÿåœ¨ trace è§†å›¾ä¸­ç›´æ¥æä¾›æŒ‰å‡½æ•°ç»´åº¦åˆ’åˆ†çš„ CPU ä½¿ç”¨æƒ…å†µã€‚è¿™ç§ä¸ trace è§†å›¾ç›¸ç»“åˆçš„ç»†èŠ‚ä¿¡æ¯è‡³å…³é‡è¦ï¼šå®ƒä¸ä»…èƒ½æŒ‡å‡ºå‹ç¼©è¿‡ç¨‹çš„å“ªä¸ªé˜¶æ®µå‡ºç°äº†ç“¶é¢ˆï¼Œè¿˜èƒ½å‘Šè¯‰ä½ æ¯ä¸€æ¬¡å‹ç¼©å½±å“åˆ°äº†å“ªäº›ç”¨æˆ·ã€‚</p><p><img src="https://s2.loli.net/2025/11/25/xdWDUFrKRZO3h7q.png"></p><blockquote><p>å±•ç¤ºä¸åŒå‹ç¼©æ“ä½œå¯¹ç”¨æˆ·å½±å“çš„ flamegraphã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å‘ç°ç”±äºç¬¦å·ä¿¡æ¯çš„å½±å“ï¼Œä¸€çº§ï¼ˆlevel 1ï¼‰å‹ç¼©æ˜¯ä¸€ä¸ªä¸»è¦ç“¶é¢ˆï¼›åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè¯†åˆ«å‡ºæ¯æ¬¡è¿è¡Œä¸­å­˜åœ¨è¿‡åº¦çš„ block åŒæ­¥é—®é¢˜ã€‚æœ‰äº†è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬éšä¹‹å¯¹å‹ç¼©ç®—æ³•åšå‡ºäº†æœ‰é’ˆå¯¹æ€§çš„è°ƒæ•´ã€‚<strong>æ”¹åŠ¨å¸¦æ¥çš„æ•ˆæœç«‹ç«¿è§å½±ï¼šå‹ç¼©æ—¶é—´å‡å°‘äº† 4 å€ï¼Œå¯¹å¯¹è±¡å­˜å‚¨çš„ API è°ƒç”¨é‡å‡å°‘äº† 3 å€ã€‚</strong></p><p><img src="https://s2.loli.net/2025/11/25/EoS4wz6rinK5aAN.png"></p><blockquote><p>å¯¹è±¡å­˜å‚¨ API è°ƒç”¨é‡ä¸‹é™çš„ä»ªè¡¨æ¿æˆªå›¾ã€‚</p></blockquote><p>å¦‚æœåªçœ‹ GET è¯·æ±‚çš„å‡å°‘ï¼ŒèŠ‚çœå°±å·²ç»éå¸¸å¯è§‚ã€‚ä»¥ Google Cloud Storage Class B&#x2F;GET çš„è´¹ç”¨æ¥è®¡ç®—ï¼Œè¿™äº›è°ƒæ•´æ¯æœˆå¤§çº¦èŠ‚çœäº† 8,000 ç¾å…ƒï¼ˆè®¡ç®—æ–¹å¼ä¸ºï¼š0.0004 ç¾å…ƒ&#x2F;æ¬¡ GET è¯·æ±‚ * æ¯åˆ†é’ŸèŠ‚çœ 400 æ¬¡è¯·æ±‚ * 60 åˆ†é’Ÿ * 24 å°æ—¶ * 31 å¤©ï¼‰ã€‚</p><p>Span Profiles åŠŸèƒ½ä¸ºåº”ç”¨å‰–æç¿»å¼€äº†æ–°ç¯‡ç« ã€‚é€šè¿‡åœ¨ç‰¹å®šæ‰§è¡Œä½œç”¨åŸŸä¸Šæä¾›è¯¦ç»†æ´å¯Ÿï¼Œå®ƒå½»åº•æ”¹å˜äº†æ€§èƒ½é—®é¢˜çš„è¯†åˆ«ä¸è§£å†³æ–¹å¼ã€‚</p><hr><h2 id="å¦‚ä½•å¼€å§‹ä½¿ç”¨-Span-Profiles"><a href="#å¦‚ä½•å¼€å§‹ä½¿ç”¨-Span-Profiles" class="headerlink" title="å¦‚ä½•å¼€å§‹ä½¿ç”¨ Span Profiles"></a>å¦‚ä½•å¼€å§‹ä½¿ç”¨ Span Profiles</h2><p>Span Profiles ç›®å‰å·²ç»åœ¨ <a href="/docs/grafana-cloud/?pg=blog&plcmt=body-txt">Grafana Cloud</a> å’Œ <a href="/docs/grafana/latest/whatsnew/whats-new-in-v10-3/?pg=blog&plcmt=body-txt">Grafana 10.3</a> ä¸­æä¾›ã€‚æƒ³è¦è¿›ä¸€æ­¥äº†è§£è¿™ä¸€ç‰¹æ€§ï¼Œä½ å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„<a href="/docs/grafana-cloud/connect-externally-hosted/data-sources/tempo/configure-tempo-data-source/#trace-to-profiles">æŠ€æœ¯æ–‡æ¡£</a>ï¼Œä»¥åŠä»¥ä¸‹å…¥é—¨èµ„æºï¼š</p><ul><li><a href="/docs/pyroscope/latest/configure-client/?pg=blog&plcmt=body-txt">é…ç½® Pyroscope ä»¥å‘é€å‰–ææ•°æ®</a>  </li><li>é…ç½®å®¢æˆ·ç«¯åŒ…ä»¥å°† trace ä¸ profile å…³è”ï¼š  <ul><li><a href="https://github.com/grafana/otel-profiling-go">Go</a>  </li><li><a href="https://github.com/grafana/otel-profiling-ruby">Ruby</a>  </li><li><a href="https://github.com/grafana/otel-profiling-java">Java</a></li></ul></li><li><a href="/docs/grafana-cloud/connect-externally-hosted/data-sources/tempo/configure-tempo-data-source/?pg=blog&plcmt=body-txt">é…ç½® Tempo ä»¥å‘ç°å·²å…³è”çš„ traces å’Œ profiles</a></li></ul><p>æ›´å¤šå…³äº Span Profile çš„å…·ä½“ä½¿ç”¨æ¡ˆä¾‹ä¼šåœ¨ç»§ç»­æ›´æ–°ã€‚</p><p>#Blog </p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘åœ¨åšæŒç»­å‰–æ Profile ä¸é“¾è·¯ç³»ç»Ÿæ‰“é€šçš„å·¥ä½œï¼Œå°±æŸ¥åˆ°äº† grafana åœ¨ 24 å¹´åˆå†™çš„è¿™ç¯‡æ–‡ç« ï¼›è§‰å¾—æ¯”è¾ƒæœ‰å‚è€ƒæ„ä¹‰ï¼Œåœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://grafana.com/blog/2024/02/06/combining-tracing-and-profiling-for-enhanced-observability-introducing-span-profiles/&quot;&gt;https://grafana.com/blog/2024/02/06/combining-tracing-and-profiling-for-enhanced-observability-introducing-span-profiles/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å½“ä»Šå¤æ‚çš„æ•°æ®ç¯å¢ƒä¸­ï¼Œè¿ç»­å‰–æï¼ˆcontinuous profilingï¼‰å·²æˆä¸ºè·å–åº”ç”¨èµ„æºä½¿ç”¨æƒ…å†µç»†ç²’åº¦æ´å¯Ÿçš„å…³é”®ã€‚Grafana Labs ç°é€šè¿‡åœ¨ &lt;a href=&quot;/blog/2024/01/23/grafana-10.3-release-canvas-panel-updates-multi-stack-data-sources-and-more/&quot;&gt;Grafana 10.3&lt;/a&gt; ä¸­å¼•å…¥ Span Profiles åŠŸèƒ½ï¼Œå°†è¿™å·¥ä½œæŒç»­æ¨è¿›ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="OpenTelemetry" scheme="http://crossoverjie.top/categories/OB/OpenTelemetry/"/>
    
    
    <category term="OpenTelemetry" scheme="http://crossoverjie.top/tags/OpenTelemetry/"/>
    
  </entry>
  
  <entry>
    <title>StarRocks å¦‚ä½•ç›‘æ§ SQL</title>
    <link href="http://crossoverjie.top/2025/11/12/starrocks/StarRocks-SQL-monitor/"/>
    <id>http://crossoverjie.top/2025/11/12/starrocks/StarRocks-SQL-monitor/</id>
    <published>2025-11-12T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.186Z</updated>
    
    <content type="html"><![CDATA[<p>StarRocks ç›‘æ§ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„æŒ‡æ ‡ï¼Œå°±æ˜¯é’ˆå¯¹æ…¢ SQL çš„ç›‘æ§ã€‚</p><p>åœ¨ StarRocks ä¸­å®¡è®¡æ—¥å¿—è®°å½•äº†æ‰€æœ‰ç”¨æˆ·çš„æŸ¥è¯¢å’Œè¿æ¥ä¿¡æ¯ï¼Œç†è®ºä¸Šæˆ‘ä»¬åªéœ€è¦å¯¹è¿™äº›æ—¥å¿—è¿›è¡Œåˆ†æå°±å¯ä»¥å¾—åˆ°ç›¸å…³çš„æ…¢ SQLï¼Œé«˜ CPUã€é«˜å†…å­˜çš„ SQL ä¿¡æ¯ã€‚</p><p>ç±»ä¼¼äºè¿™æ ·çš„ç›‘æ§ç•Œé¢ï¼š<br><img src="https://s2.loli.net/2025/11/12/CJEwAz732myrd9H.png"></p><p><img src="https://s2.loli.net/2025/11/12/5l9ND3Bcve2GWb7.png"></p><p><img src="https://s2.loli.net/2025/11/12/UTyBDHtgX1Ariwm.png"><br><img src="https://s2.loli.net/2025/11/12/SVpLiCIZvf4Bj2u.png"></p><span id="more"></span><p>ç”±äºè¿™äº›æ•°æ®éƒ½æ˜¯å­˜æ”¾åœ¨æ—¥å¿—æ–‡ä»¶é‡Œçš„æˆ‘ä»¬æƒ³æŠŠä»–æ‹¿åˆ° <code>grafna</code> é‡Œå±•ç¤ºçš„è¯å¾—é¢å¤–å¤„ç†ä¸‹ã€‚</p><h1 id="ç»“æ„åŒ–æ—¥å¿—"><a href="#ç»“æ„åŒ–æ—¥å¿—" class="headerlink" title="ç»“æ„åŒ–æ—¥å¿—"></a>ç»“æ„åŒ–æ—¥å¿—</h1><p><a href="https://docs.starrocks.io/zh/docs/administration/management/logs/#feauditlog">é»˜è®¤æƒ…å†µ</a>ä¸‹å®¡è®¡æ—¥å¿—æ˜¯ä»¥æ–‡æœ¬æ ¼å¼è¾“å‡ºçš„ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ª<a href="https://github.com/StarRocks/fe-plugins-auditloader">å®¡è®¡æ’ä»¶</a>ï¼Œå°†å®¡è®¡æ—¥å¿—å†™å…¥åˆ°ä¸€å¼ å•ç‹¬çš„è¡¨é‡Œä¾›åç»­åˆ†æï¼Œä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚</p><p>å…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒ<a href="!%5B%5D(https://s2.loli.net/2025/11/12/WSwBQc964Jqbt5M.png)">å®˜æ–¹æ–‡æ¡£</a>ï¼š<br><img src="https://s2.loli.net/2025/11/12/WSwBQc964Jqbt5M.png"></p><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ—¥å¿—è¾“å‡ºä¸º JSON æ ¼å¼ï¼Œç„¶åå†å°†å…¶ç»“æ„åŒ–ï¼Œä¸ºæ¯ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå­˜å…¥åˆ°å•ç‹¬çš„æ—¥å¿—æœåŠ¡é‡Œã€‚</p><p><img src="https://s2.loli.net/2025/11/12/faJ8VBU5S6Kb2vs.png"></p><p>ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†äº‘å‚å•†çš„æ—¥å¿—æœåŠ¡èƒ½åŠ›ï¼Œåªéœ€è¦ä¸ºè¿™ä¸ªæ—¥å¿—æ–‡ä»¶ï¼ˆ<strong>fe&#x2F;log&#x2F;fe.audit.log</strong>ï¼‰é…ç½®ä¸€ä¸ªé‡‡é›†æœåŠ¡ï¼Œç„¶åä¸ºå…¶ä¸­çš„å­—æ®µåˆ›å»ºç´¢å¼•å³å¯ã€‚</p><p><img src="https://s2.loli.net/2025/11/12/nAfM7zPs3aFVo4L.png"></p><p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å°±å¯ä»¥é€šè¿‡äº‘å‚å•†æä¾›çš„ grafna æ’ä»¶å°†è¿™é‡Œçš„æ—¥å¿—ä½œä¸ºä¸€ä¸ªæ•°æ®æºé›†æˆåˆ° grafna ä¸­ã€‚</p><p>ä¹‹åå°±å¯ä»¥åœ¨ <code>grafna</code> ä¸­ç›´æ¥ä½¿ç”¨äº‘å‚å•†æä¾›çš„æŸ¥è¯¢è¯­æ³•æ¥æŸ¥è¯¢æˆ‘ä»¬åˆšæ‰çš„å®¡è®¡æ—¥å¿—äº†ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">IsQuery:&quot;true&quot;<span class="hljs-operator">|</span><span class="hljs-keyword">SELECT</span> QueryId,Stmt,<span class="hljs-type">Time</span>,CpuCostNs,MemCostBytes,ScanBytes,ScanRows,ReturnRows <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> CpuCostNs <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><p>æ¯”å¦‚è¿™æ ·çš„æŸ¥è¯¢è¯­å¥å«ä¹‰æ˜¯ï¼šé™åˆ¶ä¸ºæŸ¥è¯¢çš„ SQLï¼ˆè¿˜æœ‰å…¶ä»–çš„ alter delete ç­‰ SQLï¼‰ã€æŒ‰ç…§ CPU è€—æ—¶æ’åºã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> starrocks_audit_db__.starrocks_audit_tbl__ (<br>  `queryId` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) COMMENT &quot;æŸ¥è¯¢çš„å”¯ä¸€ID&quot;,<br>  `<span class="hljs-type">timestamp</span>` DATETIME <span class="hljs-keyword">NOT NULL</span> COMMENT &quot;æŸ¥è¯¢å¼€å§‹æ—¶é—´&quot;,<br>  `queryType` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">12</span>) COMMENT &quot;æŸ¥è¯¢ç±»å‹ï¼ˆquery, slow_query, connectionï¼‰&quot;,<br>  `clientIp` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) COMMENT &quot;å®¢æˆ·ç«¯IP&quot;,<br>  `<span class="hljs-keyword">user</span>` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) COMMENT &quot;æŸ¥è¯¢ç”¨æˆ·å&quot;,<br>  `authorizedUser` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) COMMENT &quot;ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œæ—¢user_identity&quot;,<br>  `resourceGroup` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) COMMENT &quot;èµ„æºç»„å&quot;,<br>  `catalog` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) COMMENT &quot;æ•°æ®ç›®å½•å&quot;,<br>  `db` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">96</span>) COMMENT &quot;æŸ¥è¯¢æ‰€åœ¨æ•°æ®åº“&quot;,<br>  `state` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">8</span>) COMMENT &quot;æŸ¥è¯¢çŠ¶æ€ï¼ˆEOFï¼ŒERRï¼ŒOKï¼‰&quot;,<br>  `errorCode` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">512</span>) COMMENT &quot;é”™è¯¯ç &quot;,<br>  `queryTime` <span class="hljs-type">BIGINT</span> COMMENT &quot;æŸ¥è¯¢æ‰§è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰&quot;,<br>  `scanBytes` <span class="hljs-type">BIGINT</span> COMMENT &quot;æŸ¥è¯¢æ‰«æçš„å­—èŠ‚æ•°&quot;,<br>  `scanRows` <span class="hljs-type">BIGINT</span> COMMENT &quot;æŸ¥è¯¢æ‰«æçš„è®°å½•è¡Œæ•°&quot;,<br>  `returnRows` <span class="hljs-type">BIGINT</span> COMMENT &quot;æŸ¥è¯¢è¿”å›çš„ç»“æœè¡Œæ•°&quot;,<br>  `cpuCostNs` <span class="hljs-type">BIGINT</span> COMMENT &quot;æŸ¥è¯¢CPUè€—æ—¶ï¼ˆçº³ç§’ï¼‰&quot;,<br>  `memCostBytes` <span class="hljs-type">BIGINT</span> COMMENT &quot;æŸ¥è¯¢æ¶ˆè€—å†…å­˜ï¼ˆå­—èŠ‚ï¼‰&quot;,<br>  `stmtId` <span class="hljs-type">INT</span> COMMENT &quot;SQLè¯­å¥å¢é‡ID&quot;,<br>  `isQuery` TINYINT COMMENT &quot;SQLæ˜¯å¦ä¸ºæŸ¥è¯¢ï¼ˆ1æˆ–0ï¼‰&quot;,<br>  `feIp` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) COMMENT &quot;æ‰§è¡Œè¯¥è¯­å¥çš„FE IP&quot;,<br>  `stmt` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">1048576</span>) COMMENT &quot;SQLåŸå§‹è¯­å¥&quot;,<br>  `digest` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) COMMENT &quot;æ…¢SQLæŒ‡çº¹&quot;,<br>  `planCpuCosts` <span class="hljs-keyword">DOUBLE</span> COMMENT &quot;æŸ¥è¯¢è§„åˆ’é˜¶æ®µCPUå ç”¨ï¼ˆçº³ç§’ï¼‰&quot;,<br>  `planMemCosts` <span class="hljs-keyword">DOUBLE</span> COMMENT &quot;æŸ¥è¯¢è§„åˆ’é˜¶æ®µå†…å­˜å ç”¨ï¼ˆå­—èŠ‚ï¼‰&quot;,<br>  `pendingTimeMs` <span class="hljs-type">BIGINT</span> COMMENT &quot;æŸ¥è¯¢åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰&quot;,<br>  `candidateMVs` <span class="hljs-type">varchar</span>(<span class="hljs-number">65533</span>) <span class="hljs-keyword">NULL</span> COMMENT &quot;å€™é€‰MVåˆ—è¡¨&quot;,<br>  `hitMvs` <span class="hljs-type">varchar</span>(<span class="hljs-number">65533</span>) <span class="hljs-keyword">NULL</span> COMMENT &quot;å‘½ä¸­MVåˆ—è¡¨&quot;,<br>  `warehouse` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NULL</span> COMMENT &quot;ä»“åº“åç§°&quot; <br>)<br></code></pre></td></tr></table></figure><p>å®¡è®¡æ•°æ®é‡Œçš„ä¿¡æ¯éå¸¸ä¸°å¯Œï¼Œå¯ä»¥ç»„åˆå‡ºå„ç§æŸ¥è¯¢æ¡ä»¶ã€‚</p><p>æ¯”å¦‚ï¼š</p><ul><li>é™åˆ¶æŸ¥è¯¢æ—¶é—´å¤§äºå¤šå°‘ï¼Œå¯ä»¥åªæŸ¥è¯¢æ…¢ SQL</li><li>æ ¹æ®å†…å­˜å ç”¨æ’åº</li><li>æ‰§è¡Œå¤±è´¥çš„ SQL</li></ul><p>å¤§å®¶å¯ä»¥æŒ‰éœ€é€‰æ‹©ã€‚</p><h2 id="å¼€æºæ›¿æ¢"><a href="#å¼€æºæ›¿æ¢" class="headerlink" title="å¼€æºæ›¿æ¢"></a>å¼€æºæ›¿æ¢</h2><p>å¦‚æœæ²¡æœ‰ä½¿ç”¨äº‘å‚å•†ï¼Œä¸€äº›å¼€æºç»„ä»¶ä¹Ÿèƒ½æ»¡è¶³ä»¥ä¸Šéœ€æ±‚ï¼š</p><ul><li>ç»“æ„åŒ–å­˜å‚¨æ—¥å¿—</li><li>æ ¹æ®å­—æ®µåˆ›å»ºç´¢å¼•</li><li>ç±» SQL æŸ¥è¯¢</li><li>æ”¯æŒ grafna æ•°æ®æºï¼Œæ–¹ä¾¿åšå¯è§†åŒ–</li></ul><table><thead><tr><th>æœåŠ¡åç§°</th><th>ç´¢å¼•èƒ½åŠ›</th><th>æŸ¥è¯¢è¯­è¨€</th><th>Grafana æ”¯æŒ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><a href="https://www.elastic.co/elasticsearch/"><strong>Elasticsearch</strong></a></td><td>å…¨æ–‡ç´¢å¼•ã€å€’æ’ç´¢å¼•</td><td>Elasticsearch DSLï¼ˆç±» SQLï¼‰</td><td>å®˜æ–¹æ’ä»¶ï¼Œé›†æˆå®Œå–„</td><td>åŠŸèƒ½å¼ºå¤§ã€ç”Ÿæ€æˆç†Ÿã€æœç´¢èƒ½åŠ›å¼º</td><td>èµ„æºå ç”¨å¤§ã€è¿ç»´æˆæœ¬é«˜ã€JVM è°ƒä¼˜å¤æ‚</td><td>å¤§è§„æ¨¡æ—¥å¿—æœç´¢ã€å…¨æ–‡æ£€ç´¢</td></tr><tr><td><a href="https://grafana.com/oss/loki/"><strong>Loki</strong></a></td><td>ä»…ç´¢å¼•æ ‡ç­¾ï¼ˆLabelï¼‰</td><td>LogQL</td><td>åŸç”Ÿæ”¯æŒï¼Œé›†æˆæœ€ä½³</td><td>è½»é‡çº§ã€æˆæœ¬ä½ã€ä¸ Grafana ç”Ÿæ€å®Œç¾</td><td>å…¨æ–‡æœç´¢èƒ½åŠ›å¼±ã€ä¸é€‚åˆå¤æ‚æŸ¥è¯¢</td><td>ä¸­å°è§„æ¨¡ã€æˆæœ¬æ•æ„Ÿã€Grafana ç”¨æˆ·</td></tr><tr><td><a href="https://clickhouse.com/"><strong>ClickHouse</strong></a></td><td>ä¸»é”®ç´¢å¼•ã€äºŒçº§ç´¢å¼•ã€è·³æ•°ç´¢å¼•</td><td>æ ‡å‡† SQL</td><td>å®˜æ–¹æ’ä»¶æ”¯æŒ</td><td>æŸ¥è¯¢é€Ÿåº¦æå¿«ã€æ“…é•¿ OLAPã€æ”¯æŒå¤æ‚èšåˆ</td><td>ä¸é€‚åˆé«˜é¢‘æ›´æ–°ã€éœ€è¦ç»“æ„åŒ–è®¾è®¡</td><td>ç»“æ„åŒ–æ—¥å¿—åˆ†æã€å¤§æ•°æ®é‡èšåˆæŸ¥è¯¢</td></tr><tr><td><a href="https://opensearch.org/"><strong>OpenSearch</strong></a></td><td>å…¨æ–‡ç´¢å¼•ã€å€’æ’ç´¢å¼•</td><td>OpenSearch DSLï¼ˆå…¼å®¹ ESï¼‰</td><td>å…¼å®¹ ES æ’ä»¶</td><td>å®Œå…¨å¼€æºã€æ— å•†ä¸šé™åˆ¶ã€åŠŸèƒ½ä¸ ES ç›¸è¿‘</td><td>ç¤¾åŒºç›¸å¯¹è¾ƒå°ã€èµ„æºå ç”¨ä»è¾ƒå¤§</td><td>ES çš„å¼€æºæ›¿ä»£æ–¹æ¡ˆ</td></tr></tbody></table><h1 id="å†…éƒ¨æ—¥å¿—æ”¯æŒ-JSON"><a href="#å†…éƒ¨æ—¥å¿—æ”¯æŒ-JSON" class="headerlink" title="å†…éƒ¨æ—¥å¿—æ”¯æŒ JSON"></a>å†…éƒ¨æ—¥å¿—æ”¯æŒ JSON</h1><p>StarRocks è¿˜æœ‰å®šæœŸæ‰§è¡Œçš„å†…éƒ¨ SQLï¼Œç›®å‰è¿™äº› SQL ä¹Ÿæ˜¯ä¼šè®°å½•æ—¥å¿—ï¼Œä½†åªæ˜¯è®°å½•çš„çº¯æ–‡æœ¬ï¼Œæ— æ³•å¾ˆå¥½çš„å¯¹å…¶è¿›è¡Œç›‘æ§ã€‚</p><p>æˆ‘ä»¬å°±å‡ºç°è¿‡å†…éƒ¨ SQL å¤§é‡å ç”¨äº† CN çš„ CPU èµ„æºï¼Œå°†å®ƒçš„æ‰§è¡Œæ—¶é—´æ§åˆ¶åˆ° <code>00:00:00~08:00:00</code> ä¹‹åå°±ä¼šå¥½å¾ˆå¤šäº†ï¼Œåªæ˜¯ä¸ä¼šå½±å“åˆ°ç™½å¤©çš„ä¸šåŠ¡ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**  </span><br><span class="hljs-comment"> * The start time of day when auto-updates are enabled */</span><span class="hljs-meta">@ConfField(mutable = true)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">statistic_auto_analyze_start_time</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;00:00:00&quot;</span>;  <br>  <br><span class="hljs-comment">/**  </span><br><span class="hljs-comment"> * The end time of day when auto-updates are enabled */</span><span class="hljs-meta">@ConfField(mutable = true)</span>  <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">statistic_auto_analyze_end_time</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;23:59:59&quot;</span>;<br></code></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯è¿™ä¸¤ä¸ªé…ç½®æ§åˆ¶çš„æ—¶é—´èŒƒå›´ï¼Œä¿®æ”¹ä¹‹å CN CPU ä½¿ç”¨æœ‰æ˜æ˜¾çš„ä¸‹é™ï¼š<br><img src="https://s2.loli.net/2025/11/13/U6xir9sYCnVLhjg.png"></p><p>ä¸ºäº†æ–¹ä¾¿åç»­å¯¹è¿™éƒ¨åˆ†å†…éƒ¨ SQL è¿›è¡Œç›‘æ§ï¼Œæäº¤äº†ä¸€ä¸ª <a href="https://github.com/StarRocks/starrocks/pull/64660">PR</a> ç”¨äºæ”¯æŒå†…éƒ¨æ—¥å¿—è¾“å‡º JSONï¼Œè¿™æ ·é‡‡é›†æ—¥å¿—ä¹‹åå°±å¯ä»¥å‚è€ƒä¸Šé¢çš„å®¡è®¡æ—¥å¿—å¯¹å†…éƒ¨ SQL è¿›è¡Œç›‘æ§äº†ã€‚</p><p>#Blog </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;StarRocks ç›‘æ§ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„æŒ‡æ ‡ï¼Œå°±æ˜¯é’ˆå¯¹æ…¢ SQL çš„ç›‘æ§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ StarRocks ä¸­å®¡è®¡æ—¥å¿—è®°å½•äº†æ‰€æœ‰ç”¨æˆ·çš„æŸ¥è¯¢å’Œè¿æ¥ä¿¡æ¯ï¼Œç†è®ºä¸Šæˆ‘ä»¬åªéœ€è¦å¯¹è¿™äº›æ—¥å¿—è¿›è¡Œåˆ†æå°±å¯ä»¥å¾—åˆ°ç›¸å…³çš„æ…¢ SQLï¼Œé«˜ CPUã€é«˜å†…å­˜çš„ SQL ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ç±»ä¼¼äºè¿™æ ·çš„ç›‘æ§ç•Œé¢ï¼š&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2025/11/12/CJEwAz732myrd9H.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/11/12/5l9ND3Bcve2GWb7.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/11/12/UTyBDHtgX1Ariwm.png&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2025/11/12/SVpLiCIZvf4Bj2u.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="StarRocks" scheme="http://crossoverjie.top/categories/OB/StarRocks/"/>
    
    
    <category term="StarRocks" scheme="http://crossoverjie.top/tags/StarRocks/"/>
    
  </entry>
  
  <entry>
    <title>Git cherry-pick ä½¿ç”¨å°æŠ€å·§</title>
    <link href="http://crossoverjie.top/2025/09/18/git/git-tips-cherry-pick/"/>
    <id>http://crossoverjie.top/2025/09/18/git/git-tips-cherry-pick/</id>
    <published>2025-09-18T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.163Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å‰æ®µæ—¶é—´æˆ‘åœ¨å®ç° StarRocks çš„ä¸€ä¸ªå…³äº<a href="https://github.com/StarRocks/starrocks/pull/62705">èµ„æºé™åˆ¶çš„ç‰¹æ€§</a>ï¼Œç”±äºè¯¥åŠŸèƒ½éœ€è¦åŸºäºæœ€æ–°çš„ 3.5 tag è¿›è¡Œå¼€å‘ï¼Œæ‰€ä»¥æˆ‘éœ€è¦éœ€è¦ä» 3.5 çš„ tag é‡Œæ‹‰å‡ºä¸€ä¸ªåˆ†æ”¯ï¼ˆ3.5-featureï¼‰å¼€å‘å®Œæˆåå†å‘ä¸Šæ¸¸çš„ main åˆ†æ”¯æäº¤ PRã€‚</p><span id="more"></span><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><p>å¦‚æœç›´æ¥ä½¿ç”¨ 3.5-feature åˆ†æ”¯å‘ main æäº¤ PR ä¼šæœ‰å¾ˆå¤šä¹‹å‰çš„ commit å¯¼è‡´æ–‡ä»¶ä¿®æ”¹å¾ˆå¤šï¼Œæ‰€ä»¥å¾—æ¢ä¸€ç§æ–¹å¼æäº¤è¿™äº›å˜æ›´ã€‚</p><h2 id="stash"><a href="#stash" class="headerlink" title="stash"></a>stash</h2><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•ä¹Ÿè›®å¤šçš„ï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ <code>git stash</code>ã€‚</p><p>è¿™ä¸ªå¯ä»¥å…ˆå°†ä¿®æ”¹ä¸´æ—¶ä¿å­˜ï¼Œç„¶åå†éœ€è¦çš„æ—¶å€™å†å°† stash é‡Œçš„æ•°æ®åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ã€‚</p><p>ä½†è¿™æ ·æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>å¼€å‘çš„è¿‡ç¨‹ä¸­æ²¡æ³•æäº¤ä»£ç äº†ï¼Œæäº¤ä¹‹åå°±æ²¡æ³•ä¿å­˜åˆ° stash é‡Œï¼Œæ²¡æœ‰æäº¤ä»£ç æ€»ä¼šæœ‰ä¸¢æ•°æ®çš„é£é™©ã€‚</li><li>åç»­éœ€è¦å¤šæ¬¡æäº¤æ—¶ï¼Œstash ä¹Ÿä¸æ”¯æŒï¼Œæ¯•ç«Ÿ stash ä¹‹åå½“å‰åˆ†æ”¯çš„ä»£ç å°±æ²¡æœ‰äº†ã€‚</li></ul><h2 id="æ‰‹åŠ¨å¤åˆ¶"><a href="#æ‰‹åŠ¨å¤åˆ¶" class="headerlink" title="æ‰‹åŠ¨å¤åˆ¶"></a>æ‰‹åŠ¨å¤åˆ¶</h2><p>ç¬¬äºŒç§åŠæ³•é‚£å°±æ˜¯å…ˆæŠŠä»£ç æäº¤åˆ° <code>3.5-feature</code>ï¼Œç„¶åé‡æ–°åŸºäº main åˆ†æ”¯é‡æ–°æ‹‰å–ä¸€ä¸ªåˆ†æ”¯ï¼Œå†æ‰‹åŠ¨å¯¹æ¯” <code>3.5-feature</code> çš„æäº¤è®°å½•è¿›è¡Œä¿®æ”¹ã€‚</p><p>è¿™æ ·çš„å¥½å¤„æ˜¯æäº¤è®°å½•æ¯”è¾ƒå¹²å‡€ï¼Œä½†åå¤„æ˜¯æ”¹åŠ¨è¾ƒå¤šçš„è¯å®¹æ˜“é—æ¼ä»£ç ï¼Œå¹¶ä¸”æ¯æ¬¡åœ¨ <code>3.5-feature</code> çš„æ”¹åŠ¨éƒ½éœ€è¦äººå·¥åŒæ­¥è¿‡æ¥ã€‚</p><h2 id="cherry-pick"><a href="#cherry-pick" class="headerlink" title="cherry-pick"></a>cherry-pick</h2><p>æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ° <code>cherry-pick</code> çš„ç”¨æ³•è¿˜æ˜¯åœ¨ <code>Pulsar</code> ç¤¾åŒºé‡Œï¼Œç»å¸¸çœ‹åˆ°æœ‰ <a href="https://github.com/apache/pulsar/pull/24571">PR</a> å°†æŸä¸ªåœ¨ main åˆ†æ”¯çš„ç‰¹æ€§ cherry-pick åˆ°å…¶ä»–åˆ†æ”¯ã€‚</p><p><img src="https://s2.loli.net/2025/09/17/wzxrVbLK8fqQFWa.png"></p><p>æˆ–è€…æ˜¯ä¸€äº›é‡è¦çš„å®‰å…¨æ›´æ–°ä¹Ÿéœ€è¦åœ¨ä¸€äº›ç»´æŠ¤ç‰ˆæœ¬çš„åˆ†æ”¯è¿›è¡Œä¿®å¤ã€‚<br><img src="https://s2.loli.net/2025/09/17/yjZHLF1AQYOB7MK.png"></p><p><code>cherry-pick</code> çš„ä¸»è¦ä½œç”¨æ˜¯å°†å…¶ä»–åˆ†æ”¯çš„ç‰¹å®šæäº¤ç²¾ç¡®åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œä»¥ä¾¿åœ¨ä¸åˆå¹¶æ•´ä¸ªåˆ†æ”¯çš„æƒ…å†µä¸‹åŒæ­¥ä¿®å¤ã€<code>hot-fix</code> æˆ–è€…æ˜¯å¤ç”¨ä»£ç ï¼›</p><p>ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout main <br>git pull origin main <br>git checkout -b main-feature<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">åªpickä½ çœŸæ­£éœ€è¦çš„åŠŸèƒ½ç›¸å…³æäº¤</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä½ çš„æ ¸å¿ƒåŠŸèƒ½æäº¤1</span> <br>git cherry-pick abc123 <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä½ çš„æ ¸å¿ƒåŠŸèƒ½æäº¤2</span><br>git cherry-pick def456 ...<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/09/17/rgcXnMkpdE3v1Z2.png"></p><blockquote><p>è¿™é‡Œçš„ abc123 å’Œ def456 éƒ½æ˜¯æäº¤è®°å½•çš„ hash å€¼ï¼Œå¯ä»¥é€šè¿‡ git log å‘½ä»¤è·å–ï¼›ä¹Ÿå¯ä»¥åœ¨ github çš„æäº¤è®°å½•é¡µé¢å¤åˆ¶ã€‚</p></blockquote><p>å¦‚æœç¢°åˆ°å†²çªå…ˆè§£å†³ï¼Œç„¶åæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git cherry-pick --continue<br><br>git push origin main-feature<br></code></pre></td></tr></table></figure><p>å‡è®¾å­˜åœ¨ä¸¤ä¸ªåˆ†æ”¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">a - b - c - d   main<br>     \<br>       e - f - g main-feature<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gitÂ cherry-pickÂ f<br></code></pre></td></tr></table></figure><p>ç°åœ¨éœ€è¦å°† <code>main-feature</code> åˆ†æ”¯é‡Œçš„ <code>f</code> æäº¤åˆ° main åˆ†æ”¯ï¼Œcherry-pick ä¹‹åä¼šå˜æˆè¿™æ ·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">a - b - c - d - f   main<br>     \<br>       e - f - g main-feature<br></code></pre></td></tr></table></figure><p>f è¿™ä¸ªæäº¤å°±ä¼šè¢«è¿½åŠ åˆ°å¤´éƒ¨ã€‚</p><h1 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h1><p>cherry-pick ä¸»è¦åº”ç”¨ä¸ä¸€äº›å°çš„ä¿®å¤ï¼Œå®‰å…¨æ›´æ–°ã€ç´§æ€¥ bug çš„å¤„ç†ï¼Œå¦‚æœä¸€ä¸ªåˆ†æ”¯ä¸Šçš„å¤§éƒ¨åˆ† commit éƒ½è¦è¢« cherry-pick åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œä¸å¦‚è€ƒè™‘ç›´æ¥ ä½¿ç”¨ merge æˆ–è€… rebaseã€‚</p><p>å°±åƒè¿™ä¸ªåŠŸèƒ½çš„åç§°ä¸€æ ·ï¼šæ‘˜æ¨±æ¡ƒã€‚é€‰æ‹©åˆé€‚çš„æœå­è¿›è¡Œæ‘˜å–ï¼Œè€Œä¸æ˜¯æŠŠæ‰€æœ‰çš„æäº¤éƒ½åˆå¹¶è¿‡å»ã€‚</p><p>#Blog #Github #Git</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;å‰æ®µæ—¶é—´æˆ‘åœ¨å®ç° StarRocks çš„ä¸€ä¸ªå…³äº&lt;a href=&quot;https://github.com/StarRocks/starrocks/pull/62705&quot;&gt;èµ„æºé™åˆ¶çš„ç‰¹æ€§&lt;/a&gt;ï¼Œç”±äºè¯¥åŠŸèƒ½éœ€è¦åŸºäºæœ€æ–°çš„ 3.5 tag è¿›è¡Œå¼€å‘ï¼Œæ‰€ä»¥æˆ‘éœ€è¦éœ€è¦ä» 3.5 çš„ tag é‡Œæ‹‰å‡ºä¸€ä¸ªåˆ†æ”¯ï¼ˆ3.5-featureï¼‰å¼€å‘å®Œæˆåå†å‘ä¸Šæ¸¸çš„ main åˆ†æ”¯æäº¤ PRã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="git" scheme="http://crossoverjie.top/categories/git/"/>
    
    
    <category term="cherry-pick" scheme="http://crossoverjie.top/tags/cherry-pick/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨å¤šè¯­è¨€çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¦‚ä½•ä¼ é€’ Trace ä¿¡æ¯</title>
    <link href="http://crossoverjie.top/2025/08/13/ob/%E5%9C%A8%E5%A4%9A%E8%AF%AD%E8%A8%80%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BC%A0%E9%80%92%20Trace%20%E4%BF%A1%E6%81%AF/"/>
    <id>http://crossoverjie.top/2025/08/13/ob/%E5%9C%A8%E5%A4%9A%E8%AF%AD%E8%A8%80%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BC%A0%E9%80%92%20Trace%20%E4%BF%A1%E6%81%AF/</id>
    <published>2025-08-13T17:06:46.000Z</published>
    <updated>2025-12-29T08:38:08.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p><img src="https://s2.loli.net/2025/08/12/Q5fC3TugZ9dRvie.png"><br><img src="https://s2.loli.net/2025/08/12/pczbVE7qHTaOXLk.png"><br><img src="https://s2.loli.net/2025/08/12/XO2tqwaUPTGhvMI.png"></p><p>å‰æ®µæ—¶é—´æœ‰æœ‹å‹é—®æˆ‘å…³äº <code>spring cloud</code> çš„åº”ç”¨åœ¨è°ƒç”¨åˆ° Go çš„ API ä¹‹åå‡ºç° Trace æ²¡æœ‰ä¸²è”èµ·æ¥çš„é—®é¢˜ã€‚</p><p>å®Œæ•´çš„è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs scss">â”Œâ”€â”€â”€â”€â”€â”€â”             <br>â”‚Clientâ”‚             <br>â””â”¬â”€â”€â”€â”€â”€â”˜             <br>â”Œâ–½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚SpringCloud GateWayâ”‚<br>â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>â”Œâ–½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    <br>â”‚<span class="hljs-built_in">SpringBoot</span>(app)â”‚    <br>â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    <br>â”Œâ–½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        <br>â”‚<span class="hljs-built_in">Feign</span>(http)â”‚        <br>â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        <br>â”Œâ–½â”€â”€â”€â”€â”€â”             <br>â”‚Go Ginâ”‚             <br>â””â”€â”€â”€â”€â”€â”€â”˜             <br></code></pre></td></tr></table></figure><span id="more"></span><h1 id="æ ¹å› "><a href="#æ ¹å› " class="headerlink" title="æ ¹å› "></a>æ ¹å› </h1><p>åœ¨è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰æƒ³è¦ææ¸…æ¥š Trace æ˜¯å¦‚ä½•è·¨è¯­è¨€ä»¥åŠè·¨åº”ç”¨ä¼ é€’çš„ã€‚</p><p>å…¶å®ä¹Ÿå¯ä»¥ç±»æ¯”ä¸ºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¦‚ä½•ä¼ é€’ä¸Šä¸‹æ–‡ï¼›æ—¢ç„¶è¦ä¼ é€’æ•°æ®é‚£å°±æ¶‰åŠåˆ°ç³»ç»Ÿä¹‹é—´çš„è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ <code>RPC</code>ï¼ˆremote procedure call)ã€‚</p><p>æåˆ° PRC æˆ‘ä»¬å¸¸è§çš„ä¸€èˆ¬æœ‰ä¸¤ç§åè®®ï¼š</p><ul><li>åŸºäº HTTP åè®®ï¼Œç®€å•æ˜“è¯»ï¼Œå…¼å®¹æ€§å¥½</li><li>åŸºäº TCP çš„ç§æœ‰åè®®ï¼Œé«˜æ•ˆæ€§èƒ½æ›´ä½³</li></ul><p>åŸºäº TCP ç§æœ‰åè®®çš„åˆè¯ç”Ÿå‡ºè®¸å¤šæµè¡Œçš„æ¡†æ¶ï¼Œæ¯”å¦‚ï¼š</p><ul><li>Dubbo</li><li>Thrift</li><li>gRPC(åŸºäº HTTP2,ä¸¥æ ¼æ¥è¯´ä¸ç®—ç§æœ‰åè®®)</li><li>åŸºäº MQ å®ç°çš„ RPCï¼ˆç”Ÿäº§æ¶ˆè´¹è€…æ¨¡å¼ï¼Œæœ¬è´¨ä¸Šè¿™äº› MQ éƒ½æ˜¯ç§æœ‰åè®®ï¼Œæ¯”å¦‚ RocketMQã€Pulsar ç­‰ï¼‰</li></ul><p>ä½†æˆ‘ä»¬éœ€è¦åœ¨ RPC è°ƒç”¨çš„è¿‡ç¨‹ä¸­åœ¨ä¸Šä¸‹æ–‡é‡ŒåŒ…å« Trace æ—¶ï¼Œé€šå¸¸éƒ½æ˜¯å°† TraceId ä½œä¸ºå…ƒæ•°æ®è¿›è¡Œä¼ é€’ã€‚</p><p>å¯¹äº HTTP æ¥è¯´å°±æ˜¯ headerã€è€Œå…¶ä½™çš„ç§æœ‰ TCP åè®®é€šå¸¸ä¹Ÿä¼šæä¾›ä¸€ä¸ªå…ƒæ•°æ®çš„ç»“æ„ç”¨äºå­˜æ”¾ä¸€äº›éä¸šåŠ¡æ•°æ®ã€‚<br><img src="https://s2.loli.net/2025/08/13/WmCMGO9q4rk3EAR.png"><br><img src="https://s2.loli.net/2025/08/13/VCfuBXTWQ9KSjFq.png"></p><p><img src="https://s2.loli.net/2025/08/13/SsItGoNAjKOdYeX.png"></p><p>æ¯”å¦‚åœ¨ OpenTelemetry-Go çš„ sdk ä¸­ï¼Œä¼šåœ¨ä¸€æ¬¡ RPC ä¸­å¯¹ Trace æ•°æ®è¿›è¡ŒåŸ‹ç‚¹ã€‚</p><p>æœ€ç»ˆä¹Ÿæ˜¯ä½¿ç”¨ <code>metadata metadata.MD</code> æ¥è·å–ä¸Šä¸‹æ–‡ã€‚</p><hr><blockquote><p>åœ¨ Pulsar ä¸­æ˜¯å°† TraceId å­˜æ”¾åœ¨ properties ä¸­ï¼Œä¹Ÿç›¸å½“äºæ˜¯å…ƒæ•°æ®ã€‚</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs arduino">â”Œâ”€â”€â”€â”€â”€â”€â”<br>â”‚<span class="hljs-built_in">Client</span>â”‚<br>â””â”¬â”€â”€â”€â”€â”€â”˜<br>â”Œâ–½â”€â”€â”€â”€â”€â”<br>â”‚Pulsarâ”‚<br>â””â”¬â”€â”€â”€â”€â”€â”˜<br>â”Œâ–½â”€â”€â”€â”  <br>â”‚gRPCâ”‚  <br>â””â”€â”€â”€â”€â”˜  <br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *server)</span></span> SayHello(ctx context.Context, in *pb.HelloRequest) (*pb.HelloReply, <span class="hljs-type">error</span>) &#123;  <br>    <span class="hljs-keyword">defer</span> apiCounter.Add(ctx, <span class="hljs-number">1</span>)  <br>    md, _ := metadata.FromIncomingContext(ctx)  <br>    log.Printf(<span class="hljs-string">&quot;Received: %v, md: %v&quot;</span>, in.GetName(), md)  <br>    name, _ := os.Hostname()  <br>    span := trace.SpanFromContext(ctx)  <br>    span.SetAttributes(attribute.String(<span class="hljs-string">&quot;request.name&quot;</span>, in.Name))  <br>    s.span(ctx)  <br>    <span class="hljs-keyword">return</span> &amp;pb.HelloReply&#123;Message: fmt.Sprintf(<span class="hljs-string">&quot;hostname:%s, in:%s, md:%v&quot;</span>, name, in.Name, md)&#125;, <span class="hljs-literal">nil</span>  <br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/08/13/3slym1JNSuUIaMv.png"><br><img src="https://s2.loli.net/2025/08/13/Bo9jh4Y2Xk7UiRL.png"></p><p>åœ¨è¿™æ ·ä¸€æ¬¡è°ƒç”¨ä¸­å¦‚æœæˆ‘ä»¬å°† <code>Pulsar</code> çš„ <code>properties</code> å’Œ <code>gRPC</code> meta æ‰“å°å‡ºæ¥å°†ä¼šçœ‹åˆ° <code>TraceID</code> æ˜¯å¦‚ä½•è¿›è¡Œä¼ é€’çš„ã€‚</p><h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>å›åˆ°è¿™ä¸ªé—®é¢˜æœ¬èº«ï¼Œ<code>Trace</code> åœ¨ Gin Server ç«¯æ²¡æœ‰å…³è”èµ·æ¥ï¼Œæ˜æ˜¾å°±æ˜¯ Gin æ²¡æœ‰æ¥æ”¶åˆ°ä¸Šæ¸¸çš„ TraceIdï¼Œå¯¼è‡´å®ƒè®¤ä¸ºæ˜¯æ–°çš„ä¸€æ¬¡è°ƒç”¨ï¼Œä»è€Œä¼šåˆ›å»ºä¸€ä¸ª Traceã€‚</p><p>è§£å†³èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåªéœ€è¦åœ¨å¯åŠ¨ Gin çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ª OTEL æä¾›çš„æ‹¦æˆªå™¨ï¼Œåœ¨è¿™ä¸ªæ‹¦æˆªå™¨ä¸­ OTEL çš„ sdk ä¼šè‡ªåŠ¨ä» HTTP header é‡Œè§£æå‡º TraceId ç„¶åå¡å…¥åˆ°å½“å‰çš„ context ä¸­ï¼Œè¿™æ ·ä¸¤ä¸ªè¿›ç¨‹çš„ Trace å°±å¯ä»¥å…³è”èµ·æ¥äº†ã€‚</p><p>ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go">r := gin.New()<br>r.Use(otelgin.Middleware(<span class="hljs-string">&quot;my-server&quot;</span>))<br></code></pre></td></tr></table></figure><blockquote><p>ç”±äº Go æ²¡æœ‰æä¾›ç±»ä¼¼äº Java çš„ javaagent æ‰©å±•ï¼Œè¿™ç±»åŸæœ¬å¯ä»¥å…¨è‡ªåŠ¨æ‰“æ¡©çš„ä»£ç éƒ½éœ€è¦ç¡¬ç¼–ç å®ç°ã€‚</p></blockquote><p>åœ¨è¿™ä¸ª <code>otelgin</code> å®ç°çš„ <code>Middleware</code> é‡Œä¼šä½¿ç”¨ HTTP header æ¥ä¼ è¾“ contextã€‚</p><p><img src="https://s2.loli.net/2025/08/13/CPjqJMG16kBDovu.png"><br><img src="https://s2.loli.net/2025/08/13/MiLFjUSBcCye7fb.png"><br><img src="https://s2.loli.net/2025/08/13/8OYmXLl2gxqpKHt.png"></p><blockquote><p>æœ¬è´¨ä¸Šæ˜¯æ“ä½œ HTTP header æŸ¥è¯¢å’Œå†™å…¥ Trace<br><img src="https://s2.loli.net/2025/08/13/FTGKkeifSL3IUys.png"></p></blockquote><p>ä¼šé¦–å…ˆè·å–ä¸Šæ¸¸çš„ TraceIDï¼Œè¿™é‡Œçš„ <code>traceparentHeader</code> ä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšæ‰çœ‹åˆ°çš„ <code>traceparent</code>ã€‚</p><p>å¦‚æœè·å–åˆ°äº†å°±ä¼šè§£æé‡Œé¢çš„ <code>TraceID</code>ï¼Œå¹¶ç”Ÿæˆå½“å‰çš„ <code>Context</code>ï¼Œè¿™æ ·è¿™ä¸ª context å°±ä¼šä¸€ç›´å¾€åä¼ é€’äº†ã€‚</p><blockquote><p>æµç¨‹ä¸ä¸Šæ–‡æåˆ° gRPC ç±»ä¼¼ã€‚<br><img src="https://s2.loli.net/2025/08/13/WR1yX75C2Fmuk6r.png" alt="image.png"></p></blockquote><p>è¿™æ˜¯ç›®å‰ otel-go-sdk æ”¯æŒçš„<a href="https://github.com/open-telemetry/opentelemetry-go-contrib/tree/main/instrumentation">è‡ªåŠ¨æ‰“æ¡©æ¡†æ¶</a>ï¼Œç›®å‰çœ‹æ¥è¿˜ä¸å¤ªå¤šï¼Œä½†å¸¸ç”¨çš„ä¹Ÿéƒ½æ”¯æŒäº†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¦‚ä½•è·¨è¿›ç¨‹è°ƒçš„ Trace ä¿¡æ¯éƒ½æ˜¯é€šè¿‡ç½‘ç»œä¼ é€’çš„ï¼Œåªæ˜¯å¯¹äºä¸åŒçš„åè®®ä¼ è¾“çš„ç»†èŠ‚ä¹Ÿå„ä¸ç›¸åŒï¼Œä½†åŸç†éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p><p><img src="https://s2.loli.net/2025/08/13/g1eaAzMXFjDkfU8.png"></p><p>å…³é”®å°±æ˜¯ä¸Šé¢è¿™ä¸¤å¼ å›¾ï¼Œè¿›ç¨‹ 1 åœ¨è°ƒç”¨è¿›ç¨‹ 2 çš„æ—¶å€™å°†ä¿¡æ¯å†™å…¥è¿›å»ï¼Œè¿›ç¨‹ 2 åœ¨æ”¶åˆ°è¯·æ±‚çš„æ—¶å€™è§£æå‡º Traceï¼Œè¿™ä¸¤ä¸ªæ­¥éª¤ç¼ºä¸€ä¸å¯ã€‚<br>#Blog </p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/08/12/Q5fC3TugZ9dRvie.png&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2025/08/12/pczbVE7qHTaOXLk.png&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2025/08/12/XO2tqwaUPTGhvMI.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‰æ®µæ—¶é—´æœ‰æœ‹å‹é—®æˆ‘å…³äº &lt;code&gt;spring cloud&lt;/code&gt; çš„åº”ç”¨åœ¨è°ƒç”¨åˆ° Go çš„ API ä¹‹åå‡ºç° Trace æ²¡æœ‰ä¸²è”èµ·æ¥çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å®Œæ•´çš„è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight scss&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs scss&quot;&gt;â”Œâ”€â”€â”€â”€â”€â”€â”             &lt;br&gt;â”‚Clientâ”‚             &lt;br&gt;â””â”¬â”€â”€â”€â”€â”€â”˜             &lt;br&gt;â”Œâ–½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”&lt;br&gt;â”‚SpringCloud GateWayâ”‚&lt;br&gt;â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜&lt;br&gt;â”Œâ–½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    &lt;br&gt;â”‚&lt;span class=&quot;hljs-built_in&quot;&gt;SpringBoot&lt;/span&gt;(app)â”‚    &lt;br&gt;â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    &lt;br&gt;â”Œâ–½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        &lt;br&gt;â”‚&lt;span class=&quot;hljs-built_in&quot;&gt;Feign&lt;/span&gt;(http)â”‚        &lt;br&gt;â””â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        &lt;br&gt;â”Œâ–½â”€â”€â”€â”€â”€â”             &lt;br&gt;â”‚Go Ginâ”‚             &lt;br&gt;â””â”€â”€â”€â”€â”€â”€â”˜             &lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="OpenSource" scheme="http://crossoverjie.top/categories/OpenSource/"/>
    
    <category term="OpenTelemetry" scheme="http://crossoverjie.top/categories/OpenSource/OpenTelemetry/"/>
    
    
    <category term="OpenSource" scheme="http://crossoverjie.top/tags/OpenSource/"/>
    
  </entry>
  
  <entry>
    <title>StarRocks å¦‚ä½•åœ¨æœ¬åœ°æ­å»ºå­˜ç®—åˆ†ç¦»é›†ç¾¤</title>
    <link href="http://crossoverjie.top/2025/08/01/ob/StarRocks-shard-data-cluster/"/>
    <id>http://crossoverjie.top/2025/08/01/ob/StarRocks-shard-data-cluster/</id>
    <published>2025-08-01T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.176Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰å†™è¿‡ä¸€ç¯‡ <a href="https://crossoverjie.top/2025/02/26/ob/StarRocks-dev-shard-data-build/">StarRocks å¼€å‘ç¯å¢ƒæ­å»ºè¸©å‘æŒ‡åŒ—ä¹‹å­˜ç®—åˆ†ç¦»ç¯‡</a>è®²è§£å¦‚ä½•åœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªå¯ä»¥ debug çš„å­˜ç®—åˆ†ç¦»ç‰ˆæœ¬ã€‚</p><p>ä½†æœ€è¿‘åœ¨æœ¬åœ°è°ƒè¯•ä¸€ä¸ªåœºæ™¯ï¼Œéœ€è¦ CN èŠ‚ç‚¹æ˜¯ä»¥é›†ç¾¤çš„æ–¹å¼å¯åŠ¨ï¼Œæˆ‘è¿˜æ˜¯æŒ‰ç…§<a href="https://crossoverjie.top/2025/02/26/ob/StarRocks-dev-shard-data-build/">è€æ–¹æ³•</a>é€šè¿‡ docker å¯åŠ¨ CNï¼Œç„¶å export ç«¯å£çš„æ–¹å¼è®© FE è¿›è¡Œç»‘å®šã€‚</p><p>æ¯”å¦‚ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤å¯ä»¥å¯åŠ¨ä¸¤ä¸ª CN èŠ‚ç‚¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -p 9060:9060 -p 8040:8040 -p 9050:9050 -p 8060:8060 -p 9070:9070 -itd --rm --name cn -e &quot;TZ=Asia/Shanghai&quot; starrocks/cn-ubuntu:3.5.2<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -p 9061:9060 -p 8041:8040 -p 9051:9050 -p 8061:8060 -p 9071:9070 -itd --rm --name cn2 -e &quot;TZ=Asia/Shanghai&quot; starrocks/cn-ubuntu:3.5.2<br></code></pre></td></tr></table></figure><span id="more"></span><p>ç„¶åæŒ‰ç…§ä¹‹å‰çš„æ–¹å¼åœ¨ FE ä¸­æ‰‹åŠ¨ç»‘å®šè¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-keyword">ADD</span> COMPUTE NODE &quot;127.0.0.1:9050&quot;;  <br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-keyword">ADD</span> COMPUTE NODE &quot;127.0.0.1:9051&quot;;  <br><span class="hljs-keyword">show</span> compute nodes;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/08/01/9moNIdYTbqr3Kvu.png"></p><p>æ­¤æ—¶ä¼šå‡ºç°æ–°å¢çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„çŠ¶æ€æœ‰é—®é¢˜ï¼Œæ¯”å¦‚ <code>metrics</code> å–ä¸åˆ°ï¼Œ<code>workerId</code> æ˜¯-1ï¼ˆ-1 ä»£è¡¨èŠ‚ç‚¹åˆ›å»ºå¤±è´¥äº†ï¼Œé»˜è®¤å€¼æ˜¯ -1)</p><p><img src="https://s2.loli.net/2025/08/01/gEvlLsZYOHG53Q4.png"><br><img src="https://s2.loli.net/2025/08/01/c6Cr4PxsR8o7UzH.png"><br>ç»è¿‡ debug å‘ç°æ˜¯åœ¨æ·»åŠ èŠ‚ç‚¹çš„æ—¶å€™ï¼Œç”±äºç”Ÿæˆçš„ <code>workerIpPort</code> ä¸ä¸Šä¸€ä¸ªèŠ‚ç‚¹ç›¸åŒï¼ˆ<code>127.0.0.1:9060)</code> ä»è€Œå¯¼è‡´è¿™ä¸ªèŠ‚ç‚¹è¢«è·³è¿‡äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘è¿™ä¸¤ä¸ª CN èŠ‚ç‚¹ä¸èƒ½æ˜¯ç›¸åŒçš„ IPï¼ˆç”¨ä¸åŒçš„ç«¯å£æ¥åŒºåˆ†ï¼‰ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä»¥ä¸‹å‡ ä¸ªåŠæ³•ï¼š</p><ul><li>å†æ‰¾ä¸€ä¸ªå°æœºå™¨æ¥è·‘ CN2 èŠ‚ç‚¹</li><li>å¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœºæ¥è·‘ CN2 èŠ‚ç‚¹</li><li>ä½¿ç”¨ docker compose æ¥å¯åŠ¨ CN é›†ç¾¤ï¼Œä¼šåœ¨é›†ç¾¤å†…è‡ªåŠ¨åˆ†é…ä¸åŒçš„ IP</li><li>åˆ©ç”¨ Docker Bridge åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘ç»œï¼Œç”±ä»–æ¥åˆ†é… IP</li></ul><p>ç¬¬ä¸€ç§æ–¹æ¡ˆç›´æ¥ Pass äº†ï¼Œæˆ‘æ‰‹ä¸Šæ²¡æœ‰å¤šä½™çš„è®¾å¤‡ã€‚</p><p>ç¬¬äºŒç§æ–¹æ¡ˆå€’æ˜¯å¯ä»¥ç›´æ¥ç”¨ <code>OrbStack</code> å¯åŠ¨ä¸€ä¸ª VMï¼Œä½†æ˜¯è¿˜ä¸å¦‚åé¢çš„ docker æ¥çš„è½»é‡ï¼Œæ­¤å¤–è¿˜éœ€è¦æˆ‘å®‰è£…è¿è¡Œç¯å¢ƒï¼Œä¹Ÿ pass äº†ã€‚</p><p>ç¬¬ä¸‰ç§æ–¹æ¡ˆçœ‹ä¼¼å¯è¡Œï¼Œä½†ä¹Ÿæ¯”è¾ƒç¹çï¼Œç”±äº CN ç»™ docker compose ç®¡ç†äº†ï¼ŒFE è¦å’Œ CN ç½‘ç»œæ‰“é€šä¹Ÿå¾—åœ¨ docker compose é‡Œè¿è¡Œï¼Œè¿™æ ·æˆ‘ Debug å°±ä¸æ–¹ä¾¿äº†ï¼Œæ›´åˆ«æå¦‚æœéœ€è¦é¢‘ç¹ä¿®æ”¹æºç çš„æƒ…å†µã€‚</p><blockquote><p>ç”šè‡³æ¯æ¬¡ä¿®æ”¹ä»£ç åéƒ½å¾—é‡æ–°æ‰“åŒ…ä¸Šä¼ é•œåƒï¼Œä»¥åŠå¼€å¯ remote debugï¼Œéå¸¸éº»çƒ¦ã€‚</p></blockquote><p>è¿™ä¹ˆçœ‹æ¥å°±ç¬¬å››ç§æ–¹æ¡ˆæœ€ä¸ºåˆé€‚äº†ã€‚</p><h1 id="ä½¿ç”¨-Docker-Bridge-ç½‘ç»œ"><a href="#ä½¿ç”¨-Docker-Bridge-ç½‘ç»œ" class="headerlink" title="ä½¿ç”¨ Docker Bridge ç½‘ç»œ"></a>ä½¿ç”¨ Docker Bridge ç½‘ç»œ</h1><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Docker Bridge åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘ç»œï¼Œä½¿ç”¨è¿™ä¸ªè™šæ‹Ÿç½‘ç»œå¯åŠ¨çš„é•œåƒä¼šè‡ªåŠ¨åˆ†é…è‡ªå®šä¹‰èŒƒå›´çš„ IPï¼›åŒæ—¶æœ¬åœ°å¯åŠ¨çš„ FE ä¹Ÿèƒ½ç›´æ¥è®¿é—®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network create --subnet=172.18.0.0/16 --gateway=172.18.0.1 my_custom_net<br></code></pre></td></tr></table></figure><p>é¦–å…ˆç”¨ docker åˆ›å»ºä¸€ä¸ª networkã€‚</p><ul><li><code>--subnet=172.18.0.0/16</code>: å®šä¹‰ç½‘ç»œçš„ IP åœ°å€èŒƒå›´ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†Â <code>172.18.x.x</code>Â è¿™ä¸ªç§æœ‰ç½‘æ®µã€‚</li><li><code>--gateway=172.18.0.1</code>: æŒ‡å®šè¿™ä¸ªç½‘ç»œçš„ç½‘å…³åœ°å€ã€‚</li></ul><p>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªè™šæ‹Ÿç½‘ç»œæ¥å¯åŠ¨å®¹å™¨äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run --ip 172.18.0.20 --net my_custom_net -p 9060:9060 -p 8040:8040 -p 9050:9050 -p 8060:8060 -p 9070:9070 -itd --rm --name cn -e &quot;TZ=Asia/Shanghai&quot; starrocks/cn-ubuntu:3.5.2<br><br>docker run --ip 172.18.0.30 --net my_custom_net -p 9061:9060 -p 8041:8040 -p 9051:9050 -p 8061:8060 -p 9071:9070 -itd --rm --name cn2 -e &quot;TZ=Asia/Shanghai&quot; starrocks/cn-ubuntu:3.5.2<br></code></pre></td></tr></table></figure><p>è¿™æ ·è¿™ä¸¤ä¸ªå®¹å™¨å°±ä¼šè¢«åˆ†é…ä¸åŒçš„ IPï¼Œå¹¶ä¸”ç½‘ç»œå’Œå®¿ä¸»æœºä¹Ÿæ˜¯äº’é€šçš„ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„å­ç½‘å°½é‡é€‰æ‹© <code>172.16.0.0</code>Â åˆ°Â <code>172.31.255.255</code> è¿™ä¸ª IP æ®µï¼Œ<code>192.168.0.0</code>Â åˆ°Â <code>192.168.255.255</code> è¿™ä¸ªèŒƒå›´æ®µå¾ˆæœ‰å¯èƒ½å®¶é‡Œæˆ–å…¬å¸çš„è·¯ç”±å™¨å ç”¨äº†ã€‚</p><p>è€Œè¿™é‡Œçš„ç½‘å…³ <code>--gateway=172.18.0.1</code>åœ°å€ä¹Ÿéœ€è¦åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ IP èŒƒå›´é‡Œã€‚</p><p>åŒæ—¶æˆ‘ä»¬ä¹Ÿä¸éœ€è¦åœ¨è¿™ä¸¤ä¸ªå®¹å™¨å†…ä¸º CN æŒ‡å®š <code>priority_networks</code> å‚æ•°äº†ã€‚</p><p>åŒç† <code>minio</code> ä¹Ÿå¾—ä½¿ç”¨è¿™ä¸ªè™šæ‹Ÿç½‘ç»œå¯åŠ¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d --rm --name minio \<br>  --ip 172.18.0.10 \<br>  --net my_custom_net \<br>  -e MINIO_ROOT_USER=miniouser \<br>  -e MINIO_ROOT_PASSWORD=miniopassword \<br>  -p 9001:9001 \<br>  -p 9000:9000 \<br>  --entrypoint sh \<br>  minio/minio:latest \<br>  -c &#x27;mkdir -p /minio_data/starrocks &amp;&amp; minio server /minio_data --console-address &quot;:9001&quot;&#x27;<br></code></pre></td></tr></table></figure><p>è®¾ç½® <code>token</code> çš„æ—¶å€™ä¹Ÿè¦æŒ‡å®šå¯¹åº”çš„ IP:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mc alias set myminio http://172.18.0.10:9000 miniouser miniopassword; mc admin user svcacct add --access-key AAAAAAAAAAAAAAAAAAAA --secret-key BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB myminio miniouser<br></code></pre></td></tr></table></figure><p>å½“ CN å’Œ minio éƒ½å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬åœ¨ FE é‡Œæ‰‹åŠ¨ç»‘å®šè¿™ä¸¤ä¸ª CN èŠ‚ç‚¹:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-keyword">ADD</span> COMPUTE NODE &quot;172.18.0.20:9050&quot;;<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-keyword">ADD</span> COMPUTE NODE &quot;172.18.0.30:9050&quot;<br></code></pre></td></tr></table></figure><p>è¿™æ ·è¿™ä¸¤ä¸ªèŠ‚ç‚¹å°±å¯ä»¥ç»‘å®šæˆåŠŸäº†ã€‚</p><p>#Blog </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¹‹å‰å†™è¿‡ä¸€ç¯‡ &lt;a href=&quot;https://crossoverjie.top/2025/02/26/ob/StarRocks-dev-shard-data-build/&quot;&gt;StarRocks å¼€å‘ç¯å¢ƒæ­å»ºè¸©å‘æŒ‡åŒ—ä¹‹å­˜ç®—åˆ†ç¦»ç¯‡&lt;/a&gt;è®²è§£å¦‚ä½•åœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªå¯ä»¥ debug çš„å­˜ç®—åˆ†ç¦»ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æœ€è¿‘åœ¨æœ¬åœ°è°ƒè¯•ä¸€ä¸ªåœºæ™¯ï¼Œéœ€è¦ CN èŠ‚ç‚¹æ˜¯ä»¥é›†ç¾¤çš„æ–¹å¼å¯åŠ¨ï¼Œæˆ‘è¿˜æ˜¯æŒ‰ç…§&lt;a href=&quot;https://crossoverjie.top/2025/02/26/ob/StarRocks-dev-shard-data-build/&quot;&gt;è€æ–¹æ³•&lt;/a&gt;é€šè¿‡ docker å¯åŠ¨ CNï¼Œç„¶å export ç«¯å£çš„æ–¹å¼è®© FE è¿›è¡Œç»‘å®šã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤å¯ä»¥å¯åŠ¨ä¸¤ä¸ª CN èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs shell&quot;&gt;docker run -p 9060:9060 -p 8040:8040 -p 9050:9050 -p 8060:8060 -p 9070:9070 -itd --rm --name cn -e &amp;quot;TZ=Asia/Shanghai&amp;quot; starrocks/cn-ubuntu:3.5.2&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs shell&quot;&gt;docker run -p 9061:9060 -p 8041:8040 -p 9051:9050 -p 8061:8060 -p 9071:9070 -itd --rm --name cn2 -e &amp;quot;TZ=Asia/Shanghai&amp;quot; starrocks/cn-ubuntu:3.5.2&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="StarRocks" scheme="http://crossoverjie.top/categories/OB/StarRocks/"/>
    
    
    <category term="StarRocks" scheme="http://crossoverjie.top/tags/StarRocks/"/>
    
  </entry>
  
  <entry>
    <title>StarRocks ç‰©åŒ–è§†å›¾åˆ›å»ºä¸åˆ·æ–°å…¨æµç¨‹è§£æ</title>
    <link href="http://crossoverjie.top/2025/06/27/ob/StarRocks-create-sync/"/>
    <id>http://crossoverjie.top/2025/06/27/ob/StarRocks-create-sync/</id>
    <published>2025-06-27T17:34:15.000Z</published>
    <updated>2025-12-29T08:38:08.176Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ä¸º StarRocks çš„ç‰©åŒ–è§†å›¾å¢åŠ <a href="https://github.com/StarRocks/starrocks/pull/60035">å¤šè¡¨è¾¾å¼æ”¯æŒ</a>çš„èƒ½åŠ›ï¼Œäºæ˜¯ä¾¿æŠŠç‰©åŒ–è§†å›¾ï¼ˆMVï¼‰çš„åˆ›å»ºåˆ·æ–°æµç¨‹å®Œæˆçš„æ‹äº†ä¸€éã€‚</p><p>ä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡ï¼š<a href="https://crossoverjie.top/2024/11/18/ob/StarRocks-MV-refresh-Principle/">StarRocks ç‰©åŒ–è§†å›¾åˆ·æ–°æµç¨‹å’ŒåŸç†</a>ï¼Œä¸»è¦åˆ†æäº†åˆ·æ–°çš„æµç¨‹ï¼Œä»¥åŠåˆ·æ–°çš„æ¡ä»¶ã€‚</p><p>è¿™æ¬¡ä»å¤´å¼€å§‹ï¼Œä» MV çš„åˆ›å»ºå¼€å§‹æ¥çœ‹çœ‹ StarRocks æ˜¯å¦‚ä½•ç®¡ç†ç‰©åŒ–è§†å›¾çš„ã€‚</p><h1 id="åˆ›å»ºç‰©åŒ–è§†å›¾"><a href="#åˆ›å»ºç‰©åŒ–è§†å›¾" class="headerlink" title="åˆ›å»ºç‰©åŒ–è§†å›¾"></a>åˆ›å»ºç‰©åŒ–è§†å›¾</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span><br>MATERIALIZED <span class="hljs-keyword">VIEW</span> mv_test99<br>REFRESH ASYNC <span class="hljs-keyword">EVERY</span>(<span class="hljs-type">INTERVAL</span> <span class="hljs-number">60</span> <span class="hljs-keyword">MINUTE</span>)<br><span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> p_time<br>PROPERTIES (<br>&quot;partition_refresh_number&quot; <span class="hljs-operator">=</span> &quot;1&quot;<br>)<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">select</span> date_trunc(&quot;day&quot;, a.datekey) <span class="hljs-keyword">as</span> p_time, <span class="hljs-built_in">sum</span>(a.v1) <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span><br><span class="hljs-keyword">from</span> par_tbl1 a<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> p_time, a.item_id<br></code></pre></td></tr></table></figure><span id="more"></span><p>åˆ›å»ºç‰©åŒ–è§†å›¾çš„æ—¶å€™é¦–å…ˆä¼šè¿›å…¥è¿™ä¸ªå‡½æ•°ï¼š<code>com.starrocks.sql.analyzer.MaterializedViewAnalyzer.MaterializedViewAnalyzerVisitor#visitCreateMaterializedViewStatement</code></p><p><img src="https://s2.loli.net/2025/07/01/UNapLOkBosmY95F.png"></p><blockquote><p>å…¶å®å°±æ˜¯å°†æˆ‘ä»¬çš„åˆ›å»ºè¯­å¥ç»“æ„åŒ–ä¸ºä¸€ä¸ª <code>CreateMaterializedViewStatement</code> å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä½¿ç”¨ ANTLR å®ç°çš„ã€‚</p></blockquote><p>è¿™ä¸ªå‡½æ•°è´Ÿè´£å¯¹åˆ›å»ºç‰©åŒ–è§†å›¾çš„ SQL è¯­å¥è¿›è¡Œè¯­ä¹‰åˆ†æã€å’ŒåŸºæœ¬çš„æ ¡éªŒã€‚</p><p>æ¯”å¦‚ï¼š</p><ul><li>åˆ†åŒºè¡¨è¾¾å¼æ˜¯å¦æ­£ç¡®</li><li>åŸºè¡¨ã€æ•°æ®åº“è¿™äº›çš„æ ¼æ˜¯å¦æ­£ç¡®</li></ul><p><img src="https://s2.loli.net/2025/07/01/9hXceIt5E6LauAK.png"></p><blockquote><p>æ ¡éªŒåˆ†åŒºåˆ†åŒºè¡¨è¾¾å¼çš„å„ç§ä¿¡æ¯ã€‚</p></blockquote><p>ç„¶åä¼šè¿›å…¥å‡½æ•°ï¼š<code>com.starrocks.server.LocalMetastore#createMaterializedView()</code></p><p>è¿™ä¸ªå‡½æ•°çš„ä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š</p><ol><li><p><strong>æ£€æŸ¥æ•°æ®åº“å’Œç‰©åŒ–è§†å›¾æ˜¯å¦å­˜åœ¨</strong>ã€‚</p></li><li><p><strong>åˆå§‹åŒ–ç‰©åŒ–è§†å›¾çš„åŸºæœ¬ä¿¡æ¯</strong>ï¼š</p><ul><li>è·å–ç‰©åŒ–è§†å›¾çš„åˆ—å®šä¹‰ï¼ˆschemaï¼‰</li><li>éªŒè¯åˆ—å®šä¹‰çš„åˆæ³•æ€§</li><li>åˆå§‹åŒ–ç‰©åŒ–è§†å›¾çš„å±æ€§ï¼ˆå¦‚åˆ†åŒºä¿¡æ¯ï¼‰ã€‚</li></ul></li><li><p><strong>å¤„ç†åˆ·æ–°ç­–ç•¥</strong>ï¼š</p><ul><li>æ ¹æ®åˆ·æ–°ç±»å‹ï¼ˆå¦‚ <code>ASYNC</code>ã€<code>SYNC</code>ã€<code>MANUAL</code> æˆ– <code>INCREMENTAL</code>ï¼‰è®¾ç½®åˆ·æ–°æ–¹æ¡ˆã€‚</li><li>å¯¹äºå¼‚æ­¥åˆ·æ–°ï¼Œè®¾ç½®åˆ·æ–°é—´éš”ã€å¼€å§‹æ—¶é—´ç­‰ï¼Œå¹¶è¿›è¡Œå‚æ•°æ ¡éªŒã€‚</li></ul></li><li><p><strong>åˆ›å»ºç‰©åŒ–è§†å›¾å¯¹è±¡</strong>ï¼š</p><ul><li>æ ¹æ®è¿è¡Œæ¨¡å¼ï¼ˆå­˜ç®—åˆ†ç¦»å’Œå­˜ç®—ä¸€ä½“ï¼‰åˆ›å»ºä¸åŒç±»å‹çš„ç‰©åŒ–è§†å›¾å¯¹è±¡</li><li>è®¾ç½®ç‰©åŒ–è§†å›¾çš„ç´¢å¼•ã€æ’åºé”®ã€æ³¨é‡Šã€åŸºç¡€è¡¨ä¿¡æ¯ç­‰ã€‚</li></ul></li><li><p><strong>å¤„ç†åˆ†åŒºé€»è¾‘</strong>ï¼š</p><ul><li>å¦‚æœç‰©åŒ–è§†å›¾æ˜¯éåˆ†åŒºçš„ï¼Œåˆ›å»ºå•ä¸€åˆ†åŒºå¹¶è®¾ç½®ç›¸å…³å±æ€§ã€‚</li><li>å¦‚æœæ˜¯åˆ†åŒºçš„ï¼Œè§£æåˆ†åŒºè¡¨è¾¾å¼å¹¶ç”Ÿæˆåˆ†åŒºæ˜ å°„å…³ç³»</li></ul></li><li><p><strong>ç»‘å®šå­˜å‚¨å·</strong>ï¼š</p><ul><li>å¦‚æœç‰©åŒ–è§†å›¾æ˜¯äº‘åŸç”Ÿç±»å‹ï¼Œç»‘å®šå­˜å‚¨å·ã€‚<br><img src="https://s2.loli.net/2025/07/01/8B45JZMejnPmLNG.png"></li></ul></li></ol><h2 id="åºåˆ—åŒ–å…³é”®æ•°æ®"><a href="#åºåˆ—åŒ–å…³é”®æ•°æ®" class="headerlink" title="åºåˆ—åŒ–å…³é”®æ•°æ®"></a>åºåˆ—åŒ–å…³é”®æ•°æ®</h2><p>å¯¹äºä¸€äº›æ ¸å¿ƒæ•°æ®ï¼Œæ¯”å¦‚åˆ†åŒºè¡¨è¾¾å¼ã€åŸå§‹çš„åˆ›å»º SQL ç­‰ï¼Œéœ€è¦å†é‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½åˆ°å†…å­˜é‡Œä¾›åç»­ä½¿ç”¨æ—¶ï¼›</p><p>å°±éœ€è¦å°†è¿™äº›æ•°æ®åºåˆ—åŒ–åˆ°å…ƒæ•°æ®é‡Œã€‚</p><p>è¿™äº›æ•°æ®å®šæœŸä¿å­˜åœ¨ <code>fe/meta</code> ç›®å½•ä¸­ã€‚<br><img src="https://s2.loli.net/2024/09/27/3C4GaXM5BlWmNIw.png"></p><p>æˆ‘ä»¬éœ€è¦åºåˆ—åŒ–çš„å­—æ®µéœ€è¦ä½¿ç”¨ <code>@SerializedName</code>æ³¨è§£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SerializedName(value = &quot;partitionExprMaps&quot;)</span>  <br><span class="hljs-keyword">private</span> Map&lt;ExpressionSerializedObject, ExpressionSerializedObject&gt; serializedPartitionExprMaps;<br></code></pre></td></tr></table></figure><p>åŒæ—¶åœ¨ <code>com.starrocks.catalog.MaterializedView#gsonPreProcess/gsonPostProcess</code> è¿™ä¸¤ä¸ªå‡½æ•°ä¸­å°†æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><h3 id="å…ƒæ•°æ®çš„åŒæ­¥ä¸åŠ è½½"><a href="#å…ƒæ•°æ®çš„åŒæ­¥ä¸åŠ è½½" class="headerlink" title="å…ƒæ•°æ®çš„åŒæ­¥ä¸åŠ è½½"></a>å…ƒæ•°æ®çš„åŒæ­¥ä¸åŠ è½½</h3><p>å½“ StarRocks çš„ FE é›†ç¾¤éƒ¨ç½²æ—¶ï¼Œä¼šç”± leader çš„ FE å¯åŠ¨ä¸€ä¸ª checkpoint çº¿ç¨‹ï¼Œå®šæ—¶æ‰«æå½“å‰çš„å…ƒæ•°æ®æ˜¯å¦éœ€è¦ç”Ÿæˆä¸€ä¸ª <code>image.$&#123;JournalId&#125;</code> çš„æ–‡ä»¶ã€‚</p><p><img src="https://s2.loli.net/2024/09/20/lQCkBnNWIZ4GwuV.png"></p><blockquote><p>å…¶å®å°±æ˜¯åˆ¤æ–­å½“å‰æ—¥å¿—æ•°é‡æ˜¯å¦è¾¾åˆ°ä¸Šé™ï¼ˆé»˜è®¤æ˜¯ 5wï¼‰ç”Ÿæˆä¸€æ¬¡ã€‚</p></blockquote><p>å…·ä½“çš„æµç¨‹å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2024/09/27/zgy6ZaQ7b1ceWkm.png"><br><img src="https://s2.loli.net/2024/09/27/QiTHLpOfJ19oAam.png"></p><p><img src="https://i.imgur.com/txqTt0U.png"></p><p>æ›´å¤šå…ƒæ•°æ®åŒæ­¥å’ŒåŠ è½½æµç¨‹å¯ä»¥æŸ¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://crossoverjie.top/2024/11/11/ob/StarRocks-meta/">æ·±å…¥ç†è§£ StarRocks çš„å…ƒæ•°æ®ç®¡ç†</a></p><h1 id="åˆ·æ–°ç‰©åŒ–è§†å›¾"><a href="#åˆ·æ–°ç‰©åŒ–è§†å›¾" class="headerlink" title="åˆ·æ–°ç‰©åŒ–è§†å›¾"></a>åˆ·æ–°ç‰©åŒ–è§†å›¾</h1><p>åˆ›å»ºå®Œæˆåä¼šç«‹å³è§¦å‘ä¸€æ¬¡ MV çš„åˆ·æ–°é€»è¾‘ã€‚</p><h2 id="åŒæ­¥åˆ†åŒº"><a href="#åŒæ­¥åˆ†åŒº" class="headerlink" title="åŒæ­¥åˆ†åŒº"></a>åŒæ­¥åˆ†åŒº</h2><p><img src="https://s2.loli.net/2025/07/01/RiFufPw3bOa8H9T.png"><br>åˆ·æ–° MV çš„æ—¶å€™æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ­¥éª¤ï¼š<strong>åŒæ­¥ MV å’ŒåŸºè¡¨çš„åˆ†åŒº</strong>ã€‚</p><blockquote><p>è¿™ä¸ªæ­¥éª¤åœ¨æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™éƒ½ä¼šåšï¼Œåªæ˜¯å¦‚æœåŸºè¡¨åˆ†åŒºå’Œ MV ç›¸æ¯”æ²¡æœ‰å˜åŒ–çš„è¯å°±ä¼šè·³è¿‡ã€‚</p></blockquote><p>è¿™é‡Œæˆ‘ä»¬ä»¥å¸¸ç”¨çš„ <code>Range</code> åˆ†åŒºä¸ºä¾‹ï¼Œæ ¸å¿ƒçš„å‡½æ•°ä¸ºï¼š<code>com.starrocks.scheduler.mv.MVPCTRefreshRangePartitioner#syncAddOrDropPartitions</code></p><p>å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯åŒæ­¥ç‰©åŒ–è§†å›¾çš„åˆ†åŒºï¼Œæ·»åŠ ã€åˆ é™¤åˆ†åŒºæ¥ä¿æŒ MV çš„åˆ†åŒºä¸åŸºç¡€è¡¨çš„åˆ†åŒºä¸€è‡´ï¼›æ ¸å¿ƒæµç¨‹ï¼š</p><ol><li><strong>è®¡ç®—åˆ†åŒºå·®å¼‚</strong>ï¼šæ ¹æ®æŒ‡å®šçš„åˆ†åŒºèŒƒå›´ï¼Œè®¡ç®—ç‰©åŒ–è§†å›¾ä¸åŸºç¡€è¡¨ä¹‹é—´çš„åˆ†åŒºå·®å¼‚ã€‚</li><li>åŒæ­¥åˆ†åŒºï¼š<ol><li><strong>åˆ é™¤æ—§åˆ†åŒº</strong>ï¼šåˆ é™¤ç‰©åŒ–è§†å›¾ä¸­ä¸åŸºç¡€è¡¨ä¸å†åŒ¹é…çš„åˆ†åŒºã€‚</li><li><strong>æ·»åŠ æ–°åˆ†åŒº</strong>ï¼šæ ¹æ®è®¡ç®—å‡ºçš„å·®å¼‚ï¼Œæ·»åŠ æ–°çš„åˆ†åŒºåˆ°ç‰©åŒ–è§†å›¾ã€‚</li></ol></li></ol><p><img src="https://s2.loli.net/2025/07/01/oi8tkKVCebH4Q5E.png"></p><p>åˆ†åŒºåŒæ­¥å®Œæˆä¹‹åå°±å¯ä»¥è®¡ç®—éœ€è¦åˆ·æ–°çš„åˆ†åŒºäº†ï¼š<br><img src="https://s2.loli.net/2024/11/14/QljDLmRrx97EIK6.png" alt="image.png"></p><p>ä»¥ä¸Šå†…å®¹å†ç»“åˆä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç« ï¼š</p><ul><li><a href="https://crossoverjie.top/2024/11/18/ob/StarRocks-MV-refresh-Principle/">StarRocks ç‰©åŒ–è§†å›¾åˆ·æ–°æµç¨‹å’ŒåŸç†</a></li><li><a href="https://crossoverjie.top/2024/11/11/ob/StarRocks-meta/">æ·±å…¥ç†è§£ StarRocks çš„å…ƒæ•°æ®ç®¡ç†</a></li></ul><p>å°±å¯ä»¥å°†æ•´ä¸ªç‰©åŒ–è§†å›¾çš„åˆ›å»ºä¸åˆ·æ–°çš„æ ¸å¿ƒæµç¨‹æŒæ¡äº†ã€‚</p><p>#StarRocks #Blog </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘åœ¨ä¸º StarRocks çš„ç‰©åŒ–è§†å›¾å¢åŠ &lt;a href=&quot;https://github.com/StarRocks/starrocks/pull/60035&quot;&gt;å¤šè¡¨è¾¾å¼æ”¯æŒ&lt;/a&gt;çš„èƒ½åŠ›ï¼Œäºæ˜¯ä¾¿æŠŠç‰©åŒ–è§†å›¾ï¼ˆMVï¼‰çš„åˆ›å»ºåˆ·æ–°æµç¨‹å®Œæˆçš„æ‹äº†ä¸€éã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡ï¼š&lt;a href=&quot;https://crossoverjie.top/2024/11/18/ob/StarRocks-MV-refresh-Principle/&quot;&gt;StarRocks ç‰©åŒ–è§†å›¾åˆ·æ–°æµç¨‹å’ŒåŸç†&lt;/a&gt;ï¼Œä¸»è¦åˆ†æäº†åˆ·æ–°çš„æµç¨‹ï¼Œä»¥åŠåˆ·æ–°çš„æ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡ä»å¤´å¼€å§‹ï¼Œä» MV çš„åˆ›å»ºå¼€å§‹æ¥çœ‹çœ‹ StarRocks æ˜¯å¦‚ä½•ç®¡ç†ç‰©åŒ–è§†å›¾çš„ã€‚&lt;/p&gt;
&lt;h1 id=&quot;åˆ›å»ºç‰©åŒ–è§†å›¾&quot;&gt;&lt;a href=&quot;#åˆ›å»ºç‰©åŒ–è§†å›¾&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºç‰©åŒ–è§†å›¾&quot;&gt;&lt;/a&gt;åˆ›å»ºç‰©åŒ–è§†å›¾&lt;/h1&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs sql&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;CREATE&lt;/span&gt;&lt;br&gt;MATERIALIZED &lt;span class=&quot;hljs-keyword&quot;&gt;VIEW&lt;/span&gt; mv_test99&lt;br&gt;REFRESH ASYNC &lt;span class=&quot;hljs-keyword&quot;&gt;EVERY&lt;/span&gt;(&lt;span class=&quot;hljs-type&quot;&gt;INTERVAL&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;MINUTE&lt;/span&gt;)&lt;br&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;BY&lt;/span&gt; p_time&lt;br&gt;PROPERTIES (&lt;br&gt;&amp;quot;partition_refresh_number&amp;quot; &lt;span class=&quot;hljs-operator&quot;&gt;=&lt;/span&gt; &amp;quot;1&amp;quot;&lt;br&gt;)&lt;br&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;AS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;select&lt;/span&gt; date_trunc(&amp;quot;day&amp;quot;, a.datekey) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; p_time, &lt;span class=&quot;hljs-built_in&quot;&gt;sum&lt;/span&gt;(a.v1) &lt;span class=&quot;hljs-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;value&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; par_tbl1 a&lt;br&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;by&lt;/span&gt; p_time, a.item_id&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
    <category term="StarRocks" scheme="http://crossoverjie.top/tags/StarRocks/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº Golang çš„é”™è¯¯å¤„ç†çš„è®¨è®ºå¯ä»¥å¤§ç»“å±€äº†</title>
    <link href="http://crossoverjie.top/2025/06/05/ob/go-error-future/"/>
    <id>http://crossoverjie.top/2025/06/05/ob/go-error-future/</id>
    <published>2025-06-05T17:08:57.000Z</published>
    <updated>2025-12-29T08:38:08.177Z</updated>
    
    <content type="html"><![CDATA[<p>  åŸæ–‡é“¾æ¥ï¼š<a href="https://go.dev/blog/error-syntax">[ On | No ] syntactic support for error handling</a></p><hr><p>å…³äº Go è¯­è¨€æœ€æœ‰äº‰è®ºçš„å°±æ˜¯é”™è¯¯å¤„ç†ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Go">x, err := call()<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-comment">// handle err</span><br>&#125;<br></code></pre></td></tr></table></figure><p><code>if err != nil</code> ç±»ä¼¼äºè¿™æ ·çš„ä»£ç éå¸¸å¤šï¼Œæ·¹æ²¡äº†å…¶ä½™çœŸæ­£æœ‰ç”¨çš„ä»£ç ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨è¿›è¡Œå¤§é‡APIè°ƒç”¨çš„ä»£ç ä¸­ï¼Œå…¶ä¸­é”™è¯¯å¤„ç†å¾ˆæ™®éï¼Œåªæ˜¯ç®€å•åœ°è¿”å›é”™è¯¯ï¼Œæœ‰äº›æœ€ç»ˆçš„ä»£ç çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a, b <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> &#123;<br>    x, err := strconv.Atoi(a)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> err<br>    &#125;<br>    y, err := strconv.Atoi(b)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> err<br>    &#125;<br>    fmt.Println(<span class="hljs-string">&quot;result:&quot;</span>, x + y)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><span id="more"></span><p>åœ¨è¿™ä¸ªå‡½æ•°çš„åè¡Œä»£ç ä¸­ï¼Œåªæœ‰å››è¡Œçœ‹èµ·æ¥æ˜¯æœ‰å®é™…çš„ä½œç”¨ã€‚å…¶ä½™å…­è¡Œçœ‹èµ·æ¥ç”šè‡³ä¼šå½±å“ä¸»è¦çš„é€»è¾‘ã€‚æ‰€ä»¥å…³äºé”™è¯¯å¤„ç†çš„æŠ±æ€¨å¤šå¹´æ¥ä¸€ç›´ä½å±…æˆ‘ä»¬å¹´åº¦ç”¨æˆ·è°ƒæŸ¥çš„æ¦œé¦–ä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚ï¼ˆæœ‰ä¸€æ®µæ—¶é—´ï¼Œç¼ºä¹æ³›å‹æ”¯æŒè¶…è¿‡äº†å¯¹é”™è¯¯å¤„ç†çš„æŠ±æ€¨ï¼Œä½†ç°åœ¨ Go å·²ç»æ”¯æŒæ³›å‹äº†ï¼Œé”™è¯¯å¤„ç†åˆå›åˆ°äº†æ¦œé¦–ã€‚ï¼‰</p><p>Goå›¢é˜Ÿè®¤çœŸå¯¹å¾…ç¤¾åŒºåé¦ˆï¼Œå› æ­¤å¤šå¹´æ¥æˆ‘ä»¬ä¸€ç›´åœ¨å°è¯•ä¸ºè¿™ä¸ªé—®é¢˜æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œå¹¶å¬å– Go ç¤¾åŒºçš„æ„è§ã€‚</p><p>Go å›¢é˜Ÿçš„ç¬¬ä¸€æ¬¡æ˜ç¡®å°è¯•å¯ä»¥è¿½æº¯åˆ° 2018 å¹´ï¼Œå½“æ—¶Russ Cox<a href="https://go.googlesource.com/proposal/+/master/design/go2draft-error-handling-overview.md">æ­£å¼æåˆ°äº†è¿™ä¸ªé—®é¢˜</a>ï¼Œä½œä¸ºæˆ‘ä»¬å½“æ—¶ç§°ä¸º Go2 åŠªåŠ›çš„ä¸€éƒ¨åˆ†ã€‚ä»–åŸºäº Marcel van Lohuizen çš„<a href="https://go.googlesource.com/proposal/+/master/design/go2draft-error-handling.md">è‰æ¡ˆè®¾è®¡</a>æ¦‚è¿°äº†ä¸€ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚è¯¥è®¾è®¡åŸºäº<code>check</code>å’Œ<code>handle</code>æœºåˆ¶ï¼Œç›¸å½“å…¨é¢ã€‚è‰æ¡ˆåŒ…æ‹¬å¯¹æ›¿ä»£è§£å†³æ–¹æ¡ˆçš„è¯¦ç»†åˆ†æï¼ŒåŒ…æ‹¬ä¸å…¶ä»–è¯­è¨€é‡‡ç”¨çš„æ–¹æ³•çš„æ¯”è¾ƒã€‚å¦‚æœæ‚¨æƒ³çŸ¥é“æ‚¨çš„ç‰¹å®šé”™è¯¯å¤„ç†æƒ³æ³•ä¹‹å‰æ˜¯å¦è¢«è€ƒè™‘è¿‡ï¼Œè¯·é˜…è¯»è¿™ä»½æ–‡æ¡£ï¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Go"><span class="hljs-comment">// printSum implementation using the proposed check/handle mechanism.</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a, b <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> &#123;<br>    handle err &#123; <span class="hljs-keyword">return</span> err &#125;<br>    x := check strconv.Atoi(a)<br>    y := check strconv.Atoi(b)<br>    fmt.Println(<span class="hljs-string">&quot;result:&quot;</span>, x + y)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><p><code>check</code>å’Œ<code>handle</code>æ–¹æ³•è¢«è®¤ä¸ºè¿‡äºå¤æ‚ï¼Œå¤§çº¦ä¸€å¹´åï¼Œåœ¨2019å¹´ï¼Œæˆ‘ä»¬æ¨å‡ºäº†æ›´åŠ ç®€åŒ–çš„ã€ç°åœ¨<a href="https://go.dev/issue/32437#issuecomment-2278932700">è‡­åæ˜­è‘—</a>çš„<a href="https://go.googlesource.com/proposal/+/master/design/32437-try-builtin.md"><code>try</code>ææ¡ˆ</a>ã€‚å®ƒåŸºäº <code>check</code> å’Œ <code>handle</code> çš„æ€æƒ³ï¼Œä½† <code>check</code> ä¼ªå…³é”®å­—å˜æˆäº†<code>try</code>å†…ç½®å‡½æ•°ï¼Œ<code>handle</code>éƒ¨åˆ†è¢«çœç•¥äº†ã€‚ä¸ºäº†æ¢ç´¢<code>try</code>å†…ç½®å‡½æ•°çš„å½±å“ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„å·¥å…·ï¼ˆ<a href="https://github.com/griesemer/tryhard">tryhard</a>ï¼‰ï¼Œä½¿ç”¨<code>try</code>é‡å†™ç°æœ‰çš„é”™è¯¯å¤„ç†ä»£ç ã€‚è¿™ä¸ªææ¡ˆè¢«æ¿€çƒˆäº‰è®ºï¼Œåœ¨<a href="https://go.dev/issue/32437">GitHubé—®é¢˜</a>ä¸Šæ¥è¿‘900æ¡è¯„è®ºã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Go"><span class="hljs-comment">// printSum implementation using the proposed try mechanism.</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a, b <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> &#123;<br>    <span class="hljs-comment">// use a defer statement to augment errors before returning</span><br>    x := try(strconv.Atoi(a))<br>    y := try(strconv.Atoi(b))<br>    fmt.Println(<span class="hljs-string">&quot;result:&quot;</span>, x + y)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶è€Œï¼Œ<code>try</code>é€šè¿‡åœ¨å‡ºé”™æ—¶ä»å°é—­å‡½æ•°è¿”å›æ¥å½±å“æ§åˆ¶æµï¼Œå¹¶ä¸”å¯èƒ½ä»æ·±åº¦åµŒå¥—çš„è¡¨è¾¾å¼ä¸­è¿™æ ·åšï¼Œä»è€Œéšè—äº†è¿™ç§æ§åˆ¶æµã€‚è¿™ä½¿å¾—è¯¥ææ¡ˆå¯¹è®¸å¤šäººæ¥è¯´éš¾ä»¥æ¥å—ï¼Œå°½ç®¡åœ¨è¿™ä¸ªææ¡ˆä¸ŠæŠ•å…¥äº†å¤§é‡ç²¾åŠ›ï¼Œæˆ‘ä»¬è¿˜æ˜¯å†³å®šæ”¾å¼ƒè¿™é¡¹å·¥ä½œã€‚å›é¡¾èµ·æ¥ï¼Œå¼•å…¥ä¸€ä¸ªæ–°å…³é”®å­—å¯èƒ½ä¼šæ›´å¥½ï¼Œè¿™æ˜¯æˆ‘ä»¬ç°åœ¨å¯ä»¥åšçš„äº‹æƒ…ï¼Œå› ä¸ºæˆ‘ä»¬é€šè¿‡<code>go.mod</code>æ–‡ä»¶å’Œç‰¹å®šæ–‡ä»¶çš„æŒ‡ä»¤å¯¹è¯­è¨€ç‰ˆæœ¬æœ‰ç»†ç²’åº¦çš„æ§åˆ¶ã€‚å°†<code>try</code>çš„ä½¿ç”¨é™åˆ¶åœ¨èµ‹å€¼å’Œè¯­å¥ä¸­å¯èƒ½ä¼šç¼“è§£ä¸€äº›å…¶ä»–çš„æ‹…å¿§ã€‚Jimmy Frascheçš„<a href="https://go.dev/issue/73376">æœ€è¿‘ææ¡ˆ</a>åŸºæœ¬ä¸Šå›åˆ°äº†åŸå§‹çš„<code>check</code>å’Œ<code>handle</code>è®¾è®¡ï¼Œå¹¶è§£å†³äº†è¯¥è®¾è®¡çš„ä¸€äº›ç¼ºç‚¹ï¼Œæ­£æœç€è¿™ä¸ªæ–¹å‘å‘å±•ã€‚</p><p><code>try</code>ææ¡ˆçš„åå“å¯¼è‡´äº†å¤§é‡çš„åæ€ï¼ŒåŒ…æ‹¬Russ Coxçš„ä¸€ç³»åˆ—åšå®¢æ–‡ç« ï¼š<a href="https://research.swtch.com/proposals-intro">â€œå…³äºGoææ¡ˆæµç¨‹çš„æ€è€ƒâ€</a>ã€‚å…¶ä¸­ä¸€ä¸ªç»“è®ºæ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½é€šè¿‡æå‡ºä¸€ä¸ªå‡ ä¹å®Œå…¨æˆç†Ÿçš„ææ¡ˆï¼Œç»™ç¤¾åŒºåé¦ˆç•™ä¸‹å¾ˆå°‘çš„ç©ºé—´ï¼Œä»¥åŠä¸€ä¸ªâ€å…·æœ‰å¨èƒæ€§â€çš„å®ç°æ—¶é—´è¡¨ï¼Œä»è€Œé™ä½äº†è·å¾—æ›´å¥½ç»“æœçš„æœºä¼šã€‚æ ¹æ®<a href="https://research.swtch.com/proposals-large">â€œGoææ¡ˆæµç¨‹ï¼šå¤§å‹å˜æ›´â€</a>ï¼šâ€å›é¡¾èµ·æ¥ï¼Œ<code>try</code>æ˜¯ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å˜æ›´ï¼Œæˆ‘ä»¬å‘å¸ƒçš„æ–°è®¾è®¡åº”è¯¥æ˜¯ç¬¬äºŒç‰ˆè‰æ¡ˆè®¾è®¡ï¼Œè€Œä¸æ˜¯å¸¦æœ‰å®ç°æ—¶é—´è¡¨çš„ææ¡ˆâ€ã€‚ä½†ä¸ç®¡åœ¨è¿™ç§æƒ…å†µä¸‹å¯èƒ½å­˜åœ¨çš„æµç¨‹å’Œæ²Ÿé€šå¤±è´¥ï¼Œç”¨æˆ·å¯¹è¯¥ææ¡ˆæœ‰ç€éå¸¸å¼ºçƒˆåœ°æŠµè§¦æƒ…ç»ªã€‚</p><p>å½“æ—¶æˆ‘ä»¬æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå‡ å¹´æ¥éƒ½æ²¡æœ‰ä¸ºé”™è¯¯å¤„ç†è¿½æ±‚è¯­æ³•å˜æ›´ã€‚ä¸è¿‡ï¼Œç¤¾åŒºä¸­çš„è®¸å¤šäººå—åˆ°äº†å¯å‘ï¼Œæˆ‘ä»¬æ”¶åˆ°äº†æºæºä¸æ–­çš„é”™è¯¯å¤„ç†ææ¡ˆï¼Œå…¶ä¸­è®¸å¤šéå¸¸ç›¸ä¼¼ï¼Œæœ‰äº›æœ‰è¶£ï¼Œæœ‰äº›éš¾ä»¥ç†è§£ï¼Œæœ‰äº›ä¸å¯è¡Œã€‚ä¸ºäº†è·Ÿè¸ªä¸æ–­æ‰©å¤§çš„ææ¡ˆï¼Œä¸€å¹´åï¼ŒIan Lance Taylor åˆ›å»ºäº†ä¸€ä¸ª<a href="https://go.dev/issue/40432">æ€»ä½“é—®é¢˜</a>ï¼Œæ€»ç»“äº†æ”¹è¿›é”™è¯¯å¤„ç†çš„æè®®å˜æ›´çš„å½“å‰çŠ¶æ€ã€‚åˆ›å»ºäº†ä¸€ä¸ª<a href="https://go.dev/wiki/Go2ErrorHandlingFeedback">Go Wiki</a>æ¥æ”¶é›†ç›¸å…³çš„åé¦ˆã€è®¨è®ºå’Œæ–‡ç« ã€‚</p><p>å…³äºé”™è¯¯å¤„ç†å†—é•¿æ€§çš„æŠ±æ€¨æŒç»­å­˜åœ¨ï¼ˆå‚è§<a href="https://go.dev/blog/survey2024-h1-results">2024å¹´ä¸ŠåŠå¹´Goå¼€å‘è€…è°ƒæŸ¥ç»“æœ</a>ï¼‰ï¼Œå› æ­¤ï¼Œåœ¨Goå›¢é˜Ÿå†…éƒ¨ææ¡ˆç»è¿‡ä¸€ç³»åˆ—æ—¥ç›Šå®Œå–„ä¹‹åï¼ŒIan Lance Taylor åœ¨2024å¹´å‘å¸ƒäº†<a href="https://go.dev/issue/71203">â€œä½¿ç”¨<code>?</code>å‡å°‘é”™è¯¯å¤„ç†æ ·æ¿ä»£ç â€</a>ã€‚è¿™æ¬¡çš„æƒ³æ³•æ˜¯å€Ÿé‰´<a href="https://www.rust-lang.org/">Rust</a>ä¸­å®ç°çš„æ„é€ ï¼Œç‰¹åˆ«æ˜¯<a href="https://doc.rust-lang.org/std/result/index.html#the-question-mark-operator-"><code>?</code>æ“ä½œç¬¦</a>ã€‚å¸Œæœ›é€šè¿‡ä¾é ä½¿ç”¨æ—¢å®šç¬¦å·çš„ç°æœ‰æœºåˆ¶ï¼Œå¹¶è€ƒè™‘æˆ‘ä»¬å¤šå¹´æ¥å­¦åˆ°çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿæœ€ç»ˆå–å¾—ä¸€äº›è¿›å±•ã€‚åœ¨ä¸€å°æ‰¹ç”¨æˆ·è°ƒç ”ä¸­ï¼Œå‘å¼€å‘è€…å±•ç¤ºä½¿ç”¨ <code>?</code> çš„ Go ä»£ç æ—¶ï¼Œç»å¤§å¤šæ•°å‚ä¸è€…æ­£ç¡®çŒœå‡ºäº†ä»£ç çš„å«ä¹‰ï¼Œè¿™è¿›ä¸€æ­¥è¯´æœæˆ‘ä»¬å†è¯•ä¸€æ¬¡ã€‚ä¸ºäº†èƒ½å¤Ÿçœ‹åˆ°å˜åŒ–çš„å½±å“ï¼ŒIan ç¼–å†™äº†ä¸€ä¸ªå·¥å…·ï¼Œå°†æ™®é€š Go ä»£ç è½¬æ¢ä¸ºä½¿ç”¨æè®®çš„æ–°è¯­æ³•çš„ä»£ç ï¼Œæˆ‘ä»¬è¿˜åœ¨ç¼–è¯‘å™¨ä¸­å¯¹è¯¥åŠŸèƒ½è¿›è¡Œäº†åŸå‹è®¾è®¡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Go"><span class="hljs-comment">// printSum implementation using the proposed &quot;?&quot; statements.</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a, b <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> &#123;<br>    x := strconv.Atoi(a) ?<br>    y := strconv.Atoi(b) ?<br>    fmt.Println(<span class="hljs-string">&quot;result:&quot;</span>, x + y)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸å¹¸çš„æ˜¯ï¼Œä¸å…¶ä»–é”™è¯¯å¤„ç†æƒ³æ³•ä¸€æ ·ï¼Œè¿™ä¸ªæ–°ææ¡ˆä¹Ÿå¾ˆå¿«è¢«è¯„è®ºæ·¹æ²¡ï¼Œè®¸å¤šäººå»ºè®®è¿›è¡Œå¾®è°ƒï¼Œé€šå¸¸åŸºäºä¸ªäººåå¥½ã€‚Ianå…³é—­äº†ææ¡ˆï¼Œå¹¶å°†å†…å®¹ç§»åˆ°äº†<a href="https://go.dev/issue/71460">è®¨è®ºåŒº</a>ï¼Œä»¥ä¿ƒè¿›å¯¹è¯å¹¶æ”¶é›†è¿›ä¸€æ­¥çš„åé¦ˆã€‚ä¸€ä¸ªç¨ä½œä¿®æ”¹çš„ç‰ˆæœ¬å¾—åˆ°äº†<a href="https://github.com/golang/go/discussions/71460#discussioncomment-12060294">ç¨å¾®ç§¯æä¸€äº›</a>çš„æ¥å—ï¼Œä½†å¹¿æ³›çš„æ”¯æŒä»ç„¶éš¾ä»¥è¾¾æˆä¸€è‡´ã€‚</p><p>ç»è¿‡è¿™ä¹ˆå¤šå¹´çš„å°è¯•ï¼ŒGoå›¢é˜Ÿæå‡ºäº†ä¸‰ä¸ªå®Œæ•´çš„ææ¡ˆï¼Œç¤¾åŒºæå‡ºäº†æ•°ç™¾ä¸ªææ¡ˆï¼Œå…¶ä¸­å¤§å¤šæ•°æ˜¯å„ç±»ææ¡ˆçš„å˜ä½“ï¼Œæ‰€æœ‰è¿™äº›éƒ½æœªèƒ½è·å¾—è¶³å¤Ÿï¼ˆæ›´ä¸ç”¨è¯´å‹å€’æ€§ï¼‰çš„æ”¯æŒï¼Œæˆ‘ä»¬ç°åœ¨é¢ä¸´çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•ç»§ç»­ï¼Ÿæˆ‘ä»¬æ˜¯å¦åº”è¯¥ç»§ç»­ï¼Ÿ</p><p><em>æˆ‘ä»¬è®¤ä¸ºä¸åº”è¯¥ã€‚</em></p><p>æ›´å‡†ç¡®åœ°è¯´ï¼Œæˆ‘ä»¬åº”è¯¥åœæ­¢å°è¯•è§£å†³_è¯­æ³•é—®é¢˜_ï¼Œè‡³å°‘åœ¨å¯é¢„è§çš„æœªæ¥æ˜¯è¿™æ ·ã€‚<a href="https://github.com/golang/proposal?tab=readme-ov-file#consensus-and-disagreement">ææ¡ˆæµç¨‹</a>ä¸ºè¿™ä¸ªå†³å®šæä¾›äº†ç†ç”±ï¼š</p><blockquote><p>ææ¡ˆæµç¨‹çš„ç›®æ ‡æ˜¯åŠæ—¶å°±ç»“æœè¾¾æˆæ™®éå…±è¯†ã€‚å¦‚æœææ¡ˆå®¡æŸ¥æ— æ³•åœ¨é—®é¢˜è·Ÿè¸ªå™¨ä¸Šçš„é—®é¢˜è®¨è®ºä¸­ç¡®å®šæ™®éå…±è¯†ï¼Œé€šå¸¸çš„ç»“æœæ˜¯ææ¡ˆè¢«æ‹’ç»ã€‚</p></blockquote><p>æ²¡æœ‰ä¸€ä¸ªé”™è¯¯å¤„ç†ææ¡ˆè¾¾åˆ°ä»»ä½•æ¥è¿‘å…±è¯†çš„ç¨‹åº¦ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½è¢«æ‹’ç»äº†ã€‚å³ä½¿æ˜¯ Google çš„ Go å›¢é˜Ÿæœ€èµ„æ·±çš„æˆå‘˜ä¹Ÿä¸ä¸€è‡´åŒæ„ç›®å‰æœ€ä½³çš„æ–¹æ¡ˆï¼ˆä¹Ÿè®¸åœ¨æŸä¸ªæ—¶å€™ä¼šæ”¹å˜ï¼‰ã€‚ä½†æ˜¯æ²¡æœ‰å…·ä½“çš„å…±è¯†ï¼Œæˆ‘ä»¬å°±æ— æ³•åˆç†åœ°å‘å‰æ¨è¿›ã€‚</p><p>æœ‰æ”¯æŒç°çŠ¶çš„æœ‰æ•ˆè¯æ®ï¼š </p><ul><li><p>å¦‚æœ Go æ—©æœŸå°±ä¸ºé”™è¯¯å¤„ç†å¼•å…¥äº†ç‰¹å®šçš„è¯­æ³•ç³–ï¼Œä»Šå¤©å‡ ä¹æ²¡æœ‰äººä¼šäº‰è®ºå®ƒã€‚ä½†æˆ‘ä»¬å·²ç»èµ°è¿‡äº†15å¹´ï¼Œæœºä¼šå·²ç»è¿‡å»äº†ï¼ŒGo æœ‰ä¸€ç§å®Œå…¨åˆé€‚çš„é”™è¯¯å¤„ç†æ–¹å¼ï¼Œå³ä½¿æœ‰æ—¶çœ‹èµ·æ¥å¯èƒ½å¾ˆå†—é•¿ã€‚</p></li><li><p>ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œå‡è®¾æˆ‘ä»¬ä»Šå¤©æ‰¾åˆ°äº†å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚å°†å…¶çº³å…¥è¯­è¨€åªä¼šå¯¼è‡´ä»ä¸€ä¸ªä¸æ»¡æ„çš„ç”¨æˆ·ç¾¤ä½“ï¼ˆæ”¯æŒå˜æ›´çš„ï¼‰è½¬ç§»åˆ°å¦ä¸€ä¸ªï¼ˆå–œæ¬¢ç°çŠ¶çš„ï¼‰ã€‚å½“æˆ‘ä»¬å†³å®šå‘è¯­è¨€æ·»åŠ æ³›å‹æ—¶ï¼Œæˆ‘ä»¬å¤„äºç±»ä¼¼çš„æƒ…å†µï¼Œå°½ç®¡æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ï¼šä»Šå¤©æ²¡æœ‰äººè¢«è¿«ä½¿ç”¨æ³›å‹ï¼Œå¥½çš„æ³›å‹åº“çš„ç¼–å†™ä½¿å¾—ç”¨æˆ·å¯ä»¥åŸºæœ¬å¿½ç•¥å®ƒä»¬æ˜¯ä¸æ˜¯æ³›å‹ï¼Œè¿™è¦å½’åŠŸäºç±»å‹æ¨æ–­ã€‚ç›¸åï¼Œå¦‚æœå‘è¯­è¨€æ·»åŠ æ–°çš„é”™è¯¯å¤„ç†è¯­æ³•æ„é€ ï¼Œå‡ ä¹æ¯ä¸ªäººéƒ½éœ€è¦å¼€å§‹ä½¿ç”¨å®ƒï¼Œä»¥å…ä»–ä»¬çš„ä»£ç å˜å¾—ä¸ç¬¦åˆæœ€æ–°çš„èŒƒå¼ã€‚</p></li><li><p>ä¸æ·»åŠ é¢å¤–çš„è¯­æ³•ç¬¦åˆ Go çš„è®¾è®¡è§„åˆ™ä¹‹ä¸€ï¼šä¸æä¾›å¤šç§åšåŒä¸€ä»¶äº‹çš„æ–¹å¼ã€‚åœ¨â€ foot traffic â€œçš„é¢†åŸŸæœ‰è¿™ä¸ªè§„åˆ™çš„ä¾‹å¤–ï¼šèµ‹å€¼å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚å…·æœ‰è®½åˆºæ„å‘³çš„æ˜¯ï¼Œåœ¨<a href="https://go.dev/ref/spec#Short_variable_declarations">çŸ­å˜é‡å£°æ˜</a>ï¼ˆ<code>:=</code>ï¼‰ä¸­é‡æ–°å£°æ˜å˜é‡çš„èƒ½åŠ›æ˜¯ä¸ºäº†è§£å†³å› é”™è¯¯å¤„ç†è€Œäº§ç”Ÿçš„é—®é¢˜è€Œå¼•å…¥çš„ï¼šæ²¡æœ‰é‡æ–°å£°æ˜ï¼Œé”™è¯¯æ£€æŸ¥åºåˆ—éœ€è¦ä¸ºæ¯ä¸ªæ£€æŸ¥ä½¿ç”¨ä¸åŒåç§°çš„<code>err</code>å˜é‡ï¼ˆæˆ–é¢å¤–çš„å•ç‹¬å˜é‡å£°æ˜ï¼‰ã€‚å½“æ—¶æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå¯èƒ½æ˜¯ä¸ºé”™è¯¯å¤„ç†æä¾›æ›´å¤šçš„è¯­æ³•æ”¯æŒã€‚é‚£æ ·çš„è¯ï¼Œå¯èƒ½å°±ä¸éœ€è¦é‡æ–°å£°æ˜è§„åˆ™äº†ï¼Œæ²¡æœ‰å®ƒå„ç§ç›¸å…³çš„<a href="https://go.dev/issue/377">å¤æ‚æ€§</a>ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚</p></li><li><p>å›åˆ°å®é™…çš„é”™è¯¯å¤„ç†ä»£ç ï¼Œå¦‚æœé”™è¯¯å¾—åˆ°å¤„ç†ï¼Œå†—é•¿æ€§å°±ä¼šè¢«æ·¡åŒ–ã€‚è‰¯å¥½çš„é”™è¯¯å¤„ç†é€šå¸¸éœ€è¦å‘é”™è¯¯æ·»åŠ é¢å¤–ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·è°ƒæŸ¥ä¸­çš„ä¸€ä¸ªåå¤å‡ºç°çš„è¯„è®ºæ˜¯å…³äºç¼ºå°‘ä¸é”™è¯¯ç›¸å…³çš„å †æ ˆä¿¡æ¯ã€‚è¿™å¯ä»¥é€šè¿‡ç”Ÿæˆå¹¶è¿”å›å¢å¼ºé”™è¯¯çš„æ”¯æŒå‡½æ•°æ¥è§£å†³ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¨¡æ¿ä»£ç çš„ç›¸å¯¹æ•°é‡è¦å°å¾—å¤šï¼š</p></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a, b <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> &#123;<br>    x, err := strconv.Atoi(a)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">&quot;invalid integer: %q&quot;</span>, a)<br>    &#125;<br>    y, err := strconv.Atoi(b)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">&quot;invalid integer: %q&quot;</span>, b)<br>    &#125;<br>    fmt.Println(<span class="hljs-string">&quot;result:&quot;</span>, x + y)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ–°çš„æ ‡å‡†åº“åŠŸèƒ½ä¹Ÿå¯ä»¥å¸®åŠ©å‡å°‘é”™è¯¯å¤„ç†æ ·æ¿ä»£ç ï¼Œè¿™ä¸Rob Pike 2015å¹´çš„åšå®¢æ–‡ç« <a href="https://go.dev/blog/errors-are-values">â€œé”™è¯¯å°±æ˜¯å€¼â€</a>çš„è§‚ç‚¹éå¸¸ç›¸ä¼¼ã€‚ä¾‹å¦‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ<a href="https://go.dev/pkg/cmp#Or"><code>cmp.Or</code></a>å¯ç”¨äºä¸€æ¬¡å¤„ç†ä¸€ç³»åˆ—é”™è¯¯ï¼š</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a, b <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> &#123;<br>    x, err1 := strconv.Atoi(a)<br>    y, err2 := strconv.Atoi(b)<br>    <span class="hljs-keyword">if</span> err := cmp.Or(err1, err2); err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-keyword">return</span> err<br>    &#125;<br>    fmt.Println(<span class="hljs-string">&quot;result:&quot;</span>, x+y)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>ç¼–å†™ã€é˜…è¯»å’Œè°ƒè¯•ä»£ç éƒ½æ˜¯å®Œå…¨ä¸åŒçš„å·¥ä½œã€‚ç¼–å†™é‡å¤çš„é”™è¯¯æ£€æŸ¥å¯èƒ½å¾ˆä¹å‘³ï¼Œä½†ä»Šå¤©çš„ IDE æä¾›äº†å¼ºå¤§çš„ã€ç”šè‡³æ˜¯ LLM è¾…åŠ©çš„ä»£ç è¡¥å…¨ã€‚ç¼–å†™åŸºæœ¬çš„é”™è¯¯æ£€æŸ¥å¯¹è¿™äº›å·¥å…·æ¥è¯´å¾ˆç®€å•ã€‚åœ¨é˜…è¯»ä»£ç æ—¶å†—é•¿æ€§æœ€æ˜æ˜¾ï¼Œä½†å·¥å…·åœ¨è¿™é‡Œä¹Ÿå¯èƒ½æœ‰æ‰€å¸®åŠ©ï¼›ä¾‹å¦‚ï¼Œæœ‰ Go è¯­è¨€è®¾ç½®çš„ IDE å¯ä»¥æä¾›ä¸€ä¸ªåˆ‡æ¢å¼€å…³æ¥éšè—é”™è¯¯å¤„ç†ä»£ç ã€‚</p></li><li><p>åœ¨è°ƒè¯•é”™è¯¯å¤„ç†ä»£ç æ—¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ·»åŠ <code>println</code>æˆ–æœ‰ä¸€ä¸ªä¸“é—¨çš„è¡Œä½ç½®æ¥åœ¨è°ƒè¯•å™¨ä¸­è®¾ç½®æ–­ç‚¹ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚å½“å·²ç»æœ‰ä¸“é—¨çš„<code>if</code>è¯­å¥æ—¶ï¼Œè¿™å¾ˆå®¹æ˜“ã€‚ä½†å¦‚æœæ‰€æœ‰é”™è¯¯å¤„ç†é€»è¾‘éƒ½éšè—åœ¨<code>check</code>ã€<code>try</code>æˆ–<code>?</code>åé¢ï¼Œä»£ç å¯èƒ½å¿…é¡»é¦–å…ˆæ›´æ”¹ä¸ºæ™®é€šçš„<code>if</code>è¯­å¥ï¼Œè¿™ä¼šä½¿è°ƒè¯•å¤æ‚åŒ–ï¼Œç”šè‡³å¯èƒ½å¼•å…¥ä¸€äº›é”™è¯¯ã€‚</p></li><li><p>è¿˜æœ‰å®é™…çš„è€ƒè™‘ï¼šæƒ³å‡ºä¸€ä¸ªæ–°çš„é”™è¯¯å¤„ç†è¯­æ³•æƒ³æ³•å¾ˆå®¹æ˜“ï¼›å› æ­¤ç¤¾åŒºæå‡ºäº†å¤§é‡çš„ææ¡ˆã€‚æƒ³å‡ºä¸€ä¸ªç»å¾—èµ·å®¡æŸ¥çš„å¥½è§£å†³æ–¹æ¡ˆï¼šå°±ä¸é‚£ä¹ˆå®¹æ˜“äº†ã€‚æ­£ç¡®è®¾è®¡è¯­è¨€å˜æ›´å¹¶å®é™…å®ç°å®ƒéœ€è¦åè°ƒä¸€è‡´çš„åŠªåŠ›ã€‚çœŸæ­£çš„æˆæœ¬ä»ç„¶åœ¨åé¢ï¼šæ‰€æœ‰éœ€è¦æ›´æ”¹çš„ä»£ç ã€éœ€è¦æ›´æ–°çš„æ–‡æ¡£ã€éœ€è¦è°ƒæ•´çš„å·¥å…·ã€‚ç»¼åˆè€ƒè™‘ï¼Œè¯­æ³•å˜æ›´éå¸¸æ˜‚è´µï¼ŒGo å›¢é˜Ÿç›¸å¯¹è¾ƒå°ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ä¼˜å…ˆäº‹é¡¹è¦å¤„ç†ã€‚</p></li><li><p>æœ€åä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸­çš„ä¸€äº›äººæœ€è¿‘æœ‰æœºä¼šå‚åŠ <a href="https://cloud.withgoogle.com/next/25">Google Cloud Next 2025</a>ï¼ŒGoå›¢é˜Ÿåœ¨é‚£é‡Œæœ‰ä¸€ä¸ªå±•ä½ï¼Œæˆ‘ä»¬è¿˜ä¸¾åŠäº†ä¸€ä¸ªå°å‹çš„Goèšä¼šã€‚æˆ‘ä»¬æœ‰æœºä¼šè¯¢é—®çš„æ¯ä¸€ä½Goç”¨æˆ·éƒ½åšå†³è®¤ä¸ºæˆ‘ä»¬ä¸åº”è¯¥ä¸ºäº†æ›´å¥½çš„é”™è¯¯å¤„ç†è€Œæ”¹å˜è¯­è¨€ã€‚è®¸å¤šäººæåˆ°ï¼Œå½“åˆšä»å¦ä¸€ç§å…·æœ‰é”™è¯¯å¤„ç†æ”¯æŒçš„è¯­è¨€è½¬è¿‡æ¥æ—¶ï¼ŒGoä¸­ç¼ºä¹ç‰¹å®šçš„é”™è¯¯å¤„ç†æ”¯æŒæœ€ä¸ºæ˜æ˜¾ã€‚éšç€äººä»¬ä½¿ç”¨çš„æ—¶é—´è¶Šæ¥è¶Šä¹…ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—ä¸é‚£ä¹ˆé‡è¦äº†ã€‚è¿™å½“ç„¶ä¸æ˜¯ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ä»£è¡¨æ€§äººç¾¤ï¼Œä½†å®ƒæ˜¯æˆ‘ä»¬åœ¨ GitHubä¸Š çœ‹åˆ°çš„ä¸åŒäººç¾¤ã€‚</p></li></ul><p>å½“ç„¶ï¼Œä¹Ÿæœ‰æ”¯æŒå˜æ›´çš„ç†ç”±ï¼š</p><ul><li><p>ç¼ºä¹æ›´å¥½çš„é”™è¯¯å¤„ç†æ”¯æŒä»ç„¶æ˜¯æˆ‘ä»¬ç”¨æˆ·è°ƒæŸ¥ä¸­æœ€å¤§çš„æŠ±æ€¨ã€‚å¦‚æœGoå›¢é˜ŸçœŸçš„è®¤çœŸå¯¹å¾…ç”¨æˆ·åé¦ˆï¼Œæˆ‘ä»¬æœ€ç»ˆåº”è¯¥ä¸ºæ­¤åšäº›ä»€ä¹ˆã€‚ï¼ˆå°½ç®¡ä¼¼ä¹ä¹Ÿæ²¡æœ‰<a href="https://github.com/golang/go/discussions/71460#discussioncomment-11977299">å‹å€’æ€§çš„æ”¯æŒ</a>è¯­è¨€å˜æ›´ã€‚ï¼‰</p></li><li><p>ä¹Ÿè®¸å•ä¸€åœ°å…³æ³¨å‡å°‘å­—ç¬¦æ•°ä¸æ˜¯ä¸€ä¸ªæ­£ç¡®çš„æ–¹å‘ã€‚æ›´å¥½çš„æ–¹æ³•å¯èƒ½æ˜¯ä½¿ç”¨å…³é”®å­—ä½¿é»˜è®¤é”™è¯¯å¤„ç†é«˜åº¦å¯è§ï¼ŒåŒæ—¶ä¹Ÿè¦åˆ é™¤æ¨¡æ¿ä»£ç ï¼ˆ<code>err != nil</code>ï¼‰ã€‚è¿™ç§æ–¹æ³•å¯èƒ½ä½¿è¯»è€…ï¼ˆä»£ç å®¡æŸ¥è€…ï¼‰æ›´å®¹æ˜“çœ‹åˆ°é”™è¯¯è¢«å¤„ç†äº†ï¼Œè€Œä¸éœ€è¦â€çœ‹å¤šæ¬¡â€ï¼Œä»è€Œæé«˜ä»£ç è´¨é‡å’Œå®‰å…¨æ€§ã€‚è¿™å°†ä½¿æˆ‘ä»¬å›åˆ°<code>check</code>å’Œ<code>handle</code>çš„èµ·ç‚¹ã€‚</p></li><li><p>æˆ‘ä»¬çœŸçš„ä¸çŸ¥é“ç°åœ¨çš„å†—é•¿é—®é¢˜åœ¨å¤šå¤§ç¨‹åº¦ä¸Šæ˜¯é”™è¯¯æ£€æŸ¥ç›´æ¥å¯¼è‡´çš„ã€‚</p></li></ul><p>å°½ç®¡å¦‚æ­¤ï¼Œè¿„ä»Šä¸ºæ­¢æ²¡æœ‰ä»»ä½•è§£å†³é”™è¯¯å¤„ç†çš„å°è¯•è·å¾—è¶³å¤Ÿçš„æ”¯æŒã€‚å¦‚æœæˆ‘ä»¬è¯šå®åœ°è¯„ä¼°æˆ‘ä»¬æ‰€å¤„çš„ä½ç½®ï¼Œæˆ‘ä»¬åªèƒ½æ‰¿è®¤æˆ‘ä»¬æ—¢æ²¡æœ‰å¯¹é—®é¢˜çš„å…±åŒç†è§£ï¼Œä¹Ÿä¸æ˜¯éƒ½åŒæ„é¦–å…ˆå­˜åœ¨é—®é¢˜ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åšå‡ºä»¥ä¸‹ç¬¦åˆå½“ä¸‹çš„å†³å®šï¼š</p><p>_åœ¨å¯é¢„è§çš„æœªæ¥ï¼ŒGoå›¢é˜Ÿå°†åœæ­¢ä¸ºé”™è¯¯å¤„ç†è¿½æ±‚è¯­æ³•è¯­è¨€å˜æ›´ã€‚æˆ‘ä»¬è¿˜å°†å…³é—­æ‰€æœ‰ä¸»è¦æ¶‰åŠé”™è¯¯å¤„ç†è¯­æ³•çš„å¼€æ”¾å’Œå³å°†æäº¤çš„ææ¡ˆï¼Œä¸å†è¿›ä¸€æ­¥è·Ÿè¿›ã€‚</p><p>ç¤¾åŒºåœ¨æ¢ç´¢ã€è®¨è®ºå’Œè¾©è®ºè¿™äº›é—®é¢˜ä¸ŠæŠ•å…¥äº†å·¨å¤§çš„åŠªåŠ›ã€‚è™½ç„¶è¿™å¯èƒ½æ²¡æœ‰å¯¼è‡´é”™è¯¯å¤„ç†è¯­æ³•çš„ä»»ä½•å˜åŒ–ï¼Œä½†è¿™äº›åŠªåŠ›å·²ç»ä¸º Go è¯­è¨€å’Œæˆ‘ä»¬çš„æµç¨‹å¸¦æ¥äº†è®¸å¤šå…¶ä»–æ”¹è¿›ã€‚ä¹Ÿè®¸ï¼Œåœ¨æœªæ¥çš„æŸä¸ªæ—¶å€™ï¼Œå…³äºé”™è¯¯å¤„ç†ä¼šå‡ºç°æ›´æ¸…æ™°çš„å›¾æ™¯ã€‚åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä»¬æœŸå¾…ç€å°†è¿™ç§ä»¤äººéš¾ä»¥ç½®ä¿¡çš„çƒ­æƒ…é›†ä¸­åœ¨æ–°çš„æœºä¼šä¸Šï¼Œè®©Goå¯¹æ¯ä¸ªäººéƒ½å˜å¾—æ›´å¥½ã€‚</p><h1 id="æ€»ç»“ä¸€ä¸‹"><a href="#æ€»ç»“ä¸€ä¸‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹"></a>æ€»ç»“ä¸€ä¸‹</h1><ol><li><p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼šGoçš„é”™è¯¯å¤„ç†ä¸€ç›´è¢«è®¤ä¸ºè¿‡äºå†—é•¿ï¼Œå¤šå¹´æ¥ä¸€ç›´æ˜¯ç”¨æˆ·è°ƒæŸ¥ä¸­çš„é¦–å…ˆè¢«æŠ±æ€¨çš„ã€‚</p></li><li><p><strong>å†æ¬¡å°è¯•</strong>ï¼š</p><ul><li>2018å¹´çš„Â <code>check</code>Â å’ŒÂ <code>handle</code>Â æœºåˆ¶</li><li>2019å¹´çš„Â <code>try</code>Â ææ¡ˆ</li><li>2024å¹´çš„Â <code>?</code>Â æ“ä½œç¬¦ææ¡ˆ</li></ul></li><li><p><strong>æœ€ç»ˆå†³å®š</strong>ï¼šç»è¿‡å¤šå¹´å°è¯•å’Œæ•°ç™¾ä¸ªææ¡ˆï¼ŒGoå›¢é˜Ÿå†³å®šåœ¨å¯é¢„è§çš„æœªæ¥åœæ­¢è¿½æ±‚é”™è¯¯å¤„ç†çš„è¯­æ³•å˜æ›´ï¼Œä¸»è¦åŸå› åŒ…æ‹¬ï¼š</p><ul><li>æ²¡æœ‰è¾¾æˆå…±è¯†</li><li>ç°æœ‰æ–¹å¼è™½ç„¶å†—é•¿ä½†è¶³å¤Ÿå¥½</li><li>æ”¹å˜ä¼šé€ æˆç¤¾åŒºåˆ†è£‚</li><li>å·¥å…·å’Œåº“å¯ä»¥å¸®åŠ©ç¼“è§£é—®é¢˜</li></ul></li><li><p><strong>æœªæ¥æ–¹å‘</strong>ï¼šå›¢é˜Ÿå°†å…³æ³¨å…¶ä»–æ”¹è¿›Goè¯­è¨€çš„æœºä¼šï¼Œè€Œä¸æ˜¯ç»§ç»­åœ¨é”™è¯¯å¤„ç†è¯­æ³•ä¸ŠæŠ•å…¥ç²¾åŠ›ã€‚</p></li></ol><p>ç”±äº  Go é•¿æœŸæ²¡æœ‰é”™è¯¯å¤„ç†çš„è§£å†³æ–¹æ¡ˆï¼Œå¯¼è‡´è¿™ä¸ªé—®é¢˜è¢«æ‹–äº†å¾ˆä¹…ï¼Œä»è€Œæ¯ä¸ªå¼€å‘è€…ä¹Ÿéƒ½æœ‰è‡ªå·±çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œè¶Šå¤šäººå‚ä¸è®¨è®ºå°±è¶Šéš¾ä»¥è¾¾æˆä¸€è‡´ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;  åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://go.dev/blog/error-syntax&quot;&gt;[ On | No ] syntactic support for error handling&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å…³äº Go è¯­è¨€æœ€æœ‰äº‰è®ºçš„å°±æ˜¯é”™è¯¯å¤„ç†ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs Go&quot;&gt;x, err := call()&lt;br&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt; &amp;#123;&lt;br&gt;        &lt;span class=&quot;hljs-comment&quot;&gt;// handle err&lt;/span&gt;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;


&lt;p&gt;&lt;code&gt;if err != nil&lt;/code&gt; ç±»ä¼¼äºè¿™æ ·çš„ä»£ç éå¸¸å¤šï¼Œæ·¹æ²¡äº†å…¶ä½™çœŸæ­£æœ‰ç”¨çš„ä»£ç ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨è¿›è¡Œå¤§é‡APIè°ƒç”¨çš„ä»£ç ä¸­ï¼Œå…¶ä¸­é”™è¯¯å¤„ç†å¾ˆæ™®éï¼Œåªæ˜¯ç®€å•åœ°è¿”å›é”™è¯¯ï¼Œæœ‰äº›æœ€ç»ˆçš„ä»£ç çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs Go&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;printSum&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(a, b &lt;span class=&quot;hljs-type&quot;&gt;string&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;hljs-type&quot;&gt;error&lt;/span&gt; &amp;#123;&lt;br&gt;    x, err := strconv.Atoi(a)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt; &amp;#123;&lt;br&gt;        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; err&lt;br&gt;    &amp;#125;&lt;br&gt;    y, err := strconv.Atoi(b)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt; &amp;#123;&lt;br&gt;        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; err&lt;br&gt;    &amp;#125;&lt;br&gt;    fmt.Println(&lt;span class=&quot;hljs-string&quot;&gt;&amp;quot;result:&amp;quot;&lt;/span&gt;, x + y)&lt;br&gt;    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-literal&quot;&gt;nil&lt;/span&gt;&lt;br&gt;&amp;#125;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„ CodeReview å®æˆ˜ç»éªŒ</title>
    <link href="http://crossoverjie.top/2025/05/21/ob/codereview-practice/"/>
    <id>http://crossoverjie.top/2025/05/21/ob/codereview-practice/</id>
    <published>2025-05-21T10:39:04.000Z</published>
    <updated>2025-12-29T08:38:08.177Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>Code Review æ˜¯å¤§å®¶æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­å¾ˆå¸¸è§çš„æµç¨‹ï¼Œå½“ç„¶ä¹Ÿä¸æ’é™¤ä¸€äº›å›¢é˜Ÿä¸ºäº†å¿«é€Ÿä¸Šçº¿ï¼Œåªè¦åŠŸèƒ½æµ‹è¯•æ²¡é—®é¢˜å°±ç›´æ¥çœå»äº† Code Reviewã€‚</p><p>æˆ‘ä¸ªäººè§‰å¾—å†å¿™çš„å›¢é˜Ÿ  Code Review è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼ˆç”šè‡³å¯ä»¥äº‹åå† Reviewï¼‰ï¼Œå¥½å¤„å¾ˆå¤šï¼š</p><ul><li>è·³å‡ºä¸ªäººå¼€å‘çš„æ€ç»´è¯¯åŒºï¼Œæ›´å®¹æ˜“å‘ç°é—®é¢˜</li><li>å¢è¿›å›¢é˜Ÿäº¤æµï¼Œæé«˜æ•´ä½“çš„æŠ€æœ¯æ°›å›´</li><li>å›¢é˜Ÿæ°´å¹³æ£€æµ‹å™¨ï¼Œä¸ç®¡æ˜¯å®¡æ ¸è€…è¿˜æ˜¯è¢«å®¡æ ¸çš„ï¼Œreview å‡ æ¬¡åå¤§æ¦‚å°±çŸ¥é“æ˜¯ä»€ä¹ˆæ°´å¹³äº†</li></ul><p>é€šå¸¸ Code Review æœ‰ä¸¤ç§åœºæ™¯ï¼Œä¸€ç§æ˜¯å…¬å¸å†…éƒ¨ï¼Œè¿˜æœ‰å°±æ˜¯å¼€æºç¤¾åŒºã€‚</p><span id="more"></span><h1 id="å¼€æºç¤¾åŒº"><a href="#å¼€æºç¤¾åŒº" class="headerlink" title="å¼€æºç¤¾åŒº"></a>å¼€æºç¤¾åŒº</h1><p>å…ˆè¯´å¼€æºç¤¾åŒºï¼Œæœ€è¿‘ä¹Ÿåœ¨åš <a href="https://github.com/crossoverJie/cim/pull/170">cim</a> é¡¹ç›®é‡Œåš Reviewï¼ŒåŒæ—¶ä¹Ÿåœ¨ Pulsarã€OpenTelemetryã€StarRocks è¿™äº›é¡¹ç›®é‡Œåšè¿‡ Reviewerã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›æˆ‘å‚ä¸ Code Review çš„ä¸€äº›ç»éªŒï¼š</p><h2 id="å…ˆæ-issue"><a href="#å…ˆæ-issue" class="headerlink" title="å…ˆæ issue"></a>å…ˆæ issue</h2><p>åœ¨æäº¤ PR è¿›è¡Œ Code Review ä¹‹å‰æœ€å¥½å…ˆæäº¤ä¸€ä¸ª issue å’Œç¤¾åŒºè®¨è®ºä¸‹ï¼Œä½ çš„è¿™ä¸ªæ”¹åŠ¨ç¤¾åŒºæ˜¯å¦æ¥å—ã€‚</p><p>æˆ‘è§è¿‡ä¸€äº›äº‹å‰æ²¡æœ‰æå‰æ²Ÿé€šï¼Œç„¶åæäº¤äº†ä¸€ä¸ªå¾ˆå¤æ‚çš„ PRï¼Œä¼šå¯¼è‡´ç»´æŠ¤è€…å¾ˆéš¾ Reviewï¼ŒåŒæ—¶ä¹Ÿä¼šæ‰“å‡»å‚ä¸è€…çš„ç§¯ææ€§ã€‚</p><p>æ‰€ä»¥å¼ºçƒˆå»ºè®®ä¸€äº›å¤æ‚çš„ä¿®æ”¹ä¸€å®šå…ˆè¦æå‰å’Œç¤¾åŒºæ²Ÿé€šï¼Œé™¤éè¿™æ˜¯ä¸€äº›åæ‹¿ä¹ç¨³çš„é—®é¢˜ã€‚</p><h2 id="ä¸ªäºº-CI"><a href="#ä¸ªäºº-CI" class="headerlink" title="ä¸ªäºº CI"></a>ä¸ªäºº CI</h2><p>ä¸€äº›å¤§å‹é¡¹ç›®å¾€å¾€éƒ½æœ‰å®Œå–„çš„ CI æµç¨‹æ¥ä¿è¯ä»£ç è´¨é‡ï¼Œé€šå¸¸éƒ½æœ‰ä»¥ä¸‹çš„æ ¡éªŒï¼š</p><ul><li>å„ç§æµ‹è¯•æµç¨‹ï¼ˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼‰</li><li>ä»£ç  Code Style æ£€æµ‹</li><li>å®‰å…¨ã€ä¾èµ–æ£€æµ‹ç­‰</li></ul><p>å¦‚æœä¸€ä¸ª PR è¿ CI éƒ½æ²¡è·‘è¿‡ï¼Œå…¶å®ä¹Ÿæ²¡æœ‰æå‰ Review çš„å¿…è¦äº†ï¼Œæ‰€ä»¥åœ¨æ PR ä¹‹å‰éƒ½å»ºè®®å…ˆåœ¨è‡ªå·±çš„ repo é‡Œå°†ä¸»è¦çš„ CI éƒ½è·‘è¿‡å†æäº¤ PRã€‚</p><p>è¿™ä¸ªåœ¨ Pulsar çš„<a href="https://pulsar.apache.org/contribute/personal-ci/">å®˜æ–¹è´¡çŒ®æµç¨‹</a>é‡Œä¹Ÿæœ‰å•ç‹¬æåˆ°ã€‚<br><img src="https://s2.loli.net/2025/05/26/kYQj1ecNCs3HbaB.png"></p><p><img src="https://s2.loli.net/2025/05/26/eImx2GPq5AsbBap.png"></p><p>åŒæ—¶åœ¨ <a href="https://github.com/apache/pulsar/blob/master/.github/PULL_REQUEST_TEMPLATE.md">PR æ¨¡æ¿</a>é‡Œä¹Ÿæœ‰æåˆ°ï¼Œå»ºè®®å…ˆåœ¨è‡ªå·±çš„ fork çš„ repo é‡Œå®Œæˆ CI ä¹‹åå†æäº¤åˆ° <code>upstream</code>ã€‚</p><p><img src="https://s2.loli.net/2025/05/29/3KhSawogqksm1I9.png"></p><p>è¿™ä¸ªå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦ç»™è‡ªå·±çš„ repo æäº¤ä¸€ä¸ª PRï¼Œç„¶ååœ¨ repo è®¾ç½®ä¸­å¼€å¯ Actionï¼Œä¹‹åå°±ä¼šè§¦å‘ CI äº†ã€‚</p><p><img src="https://s2.loli.net/2025/05/26/QqpCzHJnjGV2R8P.png"></p><p>å¦‚æœè‡ªå·±çš„ PR è¿˜éœ€è¦é¢‘ç¹çš„æäº¤ä¿®æ”¹ï¼Œé‚£å»ºè®®å¯ä»¥å…ˆä¿®æ”¹ä¸º  draftï¼Œè¿™æ ·å¯ä»¥æé†’ç»´æŠ¤è€…ç¨åå†åš Reviewã€‚</p><p>åŒæ—¶ä¹Ÿä¸å»ºè®®æäº¤ä¸€ä¸ªè¿‡å¤§çš„ PRï¼Œå°½é‡æ§åˆ¶åœ¨ 500 è¡Œæ”¹åŠ¨ä»¥å†…ï¼Œè¿™æ ·æ‰æ–¹ä¾¿ Reviewã€‚</p><h2 id="Review-ä»£ç "><a href="#Review-ä»£ç " class="headerlink" title="Review ä»£ç "></a>Review ä»£ç </h2><p><img src="https://s2.loli.net/2025/05/29/RtXAc1KYJ5FhDfG.png"></p><p>Github æœ‰æä¾›ä»£ç å¯¹æ¯”é¡µé¢ï¼Œä½†ä¹Ÿåªæ˜¯ç®€å•çš„ä»£ç é«˜äº®ï¼Œæ²¡æ³•åƒ IDE è¿™æ ·æä¾›å‡½æ•°è·³è½¬ç­‰åŠŸèƒ½ã€‚</p><p><img src="https://s2.loli.net/2025/05/26/2kAVKWr45T7ZFRg.png"></p><p>æ‰€ä»¥å¯¹äº Reviewer æ¥è¯´ï¼Œæœ€å¥½æ˜¯åœ¨æœ¬åœ° IDE ä¸­æ·»åŠ  PR çš„ repoï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥åˆ‡æ¢åˆ° PR çš„åˆ†æ”¯ï¼Œç„¶åå†æœ¬åœ°è·Ÿä»£ç ï¼Œä¹Ÿæ›´å¥½è°ƒè¯•ã€‚</p><p>æœ‰ç›¸å…³çš„ä¿®æ”¹å»ºè®®å¯ä»¥ç›´æ¥åœ¨ github é¡µé¢ä¸Šè¿›è¡Œè¯„è®ºï¼Œè¿™æ ·ä¸¤è€…ç»“åˆèµ·æ¥ Reviewï¼Œæ•ˆç‡ä¼šæ›´é«˜ã€‚</p><p>Review ä»£ç å…¶å®ä¸æ¯”å†™ä»£ç è½»æ¾ï¼Œæ‰€ä»¥å¯¹å…è´¹å¸®ä½ åš Review çš„è¦å¤šä¿æŒä¸€äº›ç‘æ€æ‹œã€‚</p><h2 id="AI-Review"><a href="#AI-Review" class="headerlink" title="AI Review"></a>AI Review</h2><p>ç°åœ¨ Github å·²ç»æ”¯æŒ copilot è‡ªåŠ¨ Review äº†ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬æ€»ç»“å˜æ›´ï¼ŒåŒæ—¶å¯¹ä¸€äº›å‚åŠ çš„é”™è¯¯æä¾›ä¿®æ”¹å»ºè®®ã€‚<br><img src="https://s2.loli.net/2025/05/26/1jBs9oOcMQ4t3e5.png"></p><p>ä½¿ç”¨å®ƒè¿˜æ˜¯å¯ä»¥å¸®æˆ‘ä»¬çœä¸å°‘äº‹æƒ…ï¼Œæ¨èå¼€å¯ã€‚</p><h1 id="ä¼ä¸šå†…éƒ¨"><a href="#ä¼ä¸šå†…éƒ¨" class="headerlink" title="ä¼ä¸šå†…éƒ¨"></a>ä¼ä¸šå†…éƒ¨</h1><p>åœ¨ä¼ä¸šå†…éƒ¨åš Code Review æµç¨‹ä¸Šè¦ç®€å•è®¸å¤šï¼Œæ¯•ç«Ÿæ²Ÿé€šæˆæœ¬è¦ä½ä¸€äº›ï¼Œå¾€å¾€éƒ½æ˜¯è¾¾æˆä¸€è‡´ä¹‹åæ‰ä¼šå¼€å§‹å¼€å‘ï¼Œæ‰€ä»¥é‡ç‚¹å°±æ˜¯ Review çš„è¿‡ç¨‹äº†ã€‚</p><p>æ—¢ç„¶æ˜¯åœ¨å…¬å¸å†…éƒ¨ï¼Œé‚£å°±è¦å‘æŒ¥çº¿ä¸‹æ²Ÿé€šçš„ä¼˜åŠ¿äº†ï¼›å½“ç„¶åœ¨å¼€å§‹å‰è¿˜æ˜¯å»ºè®®åœ¨å†…éƒ¨çš„ä»£ç å·¥å…·é‡Œæ¯”å¦‚è¯´ gitlab ä¸­æäº¤ä¸€ä¸ª MRï¼Œå…ˆè®©å‚ä¼šäººå‘˜éƒ½æå‰çœ‹çœ‹å¤§æ¦‚ä¿®æ”¹äº†å“ªäº›å†…å®¹ï¼Œæœ€å¥½æ˜¯æå‰åœ¨ gitlab ä¸­è¯„è®ºï¼Œå¸¦ç€é—®é¢˜å¼€ä¼šè®¨è®ºã€‚</p><p>å®é™… Review è¿‡ç¨‹åº”è¯¥å°½é‡å…³æ³¨ä¸šåŠ¡é€»è¾‘ä¸è®¾è®¡ï¼Œè€Œä¸æ˜¯ä»£ç é£æ ¼ã€æ ¼å¼ç­‰ç»†ææœ«èŠ‚çš„é—®é¢˜ã€‚</p><p>æå‡ºä¿®æ”¹æ„è§çš„æ—¶å€™ä¹Ÿè¦å¯¹äº‹ä¸å¯¹äººï¼Œæˆ‘è§è¿‡å¥½å‡ æ¬¡åœ¨ Review ç°åœºåµèµ·æ¥çš„åœºæ™¯ï¼Œå°±æ˜¯ä»£å…¥äº†ä¸€äº›ä¸»è§‚æƒ…ç»ªï¼Œè¢« Review çš„è§‰å¾—è‡ªå·±èƒ½åŠ›è¢«è´¨ç–‘ï¼Œä»è€Œäº§ç”Ÿäº†ä¸€äº›å†²çªã€‚</p><p>Code Review åšå¾—å¥½çš„è¯æ•´ä¸ªå›¢é˜Ÿéƒ½ä¼šä¸€èµ·è¿›æ­¥ï¼Œå¯¹ä¸ªäººæ¥è¯´å‚ä¸ä¸€äº›ä¼˜è´¨å¼€æºé¡¹ç›®çš„ Code Review ä¹Ÿä¼šå­¦åˆ°å¾ˆå¤šä¸œè¥¿ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;Code Review æ˜¯å¤§å®¶æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­å¾ˆå¸¸è§çš„æµç¨‹ï¼Œå½“ç„¶ä¹Ÿä¸æ’é™¤ä¸€äº›å›¢é˜Ÿä¸ºäº†å¿«é€Ÿä¸Šçº¿ï¼Œåªè¦åŠŸèƒ½æµ‹è¯•æ²¡é—®é¢˜å°±ç›´æ¥çœå»äº† Code Reviewã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸ªäººè§‰å¾—å†å¿™çš„å›¢é˜Ÿ  Code Review è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼ˆç”šè‡³å¯ä»¥äº‹åå† Reviewï¼‰ï¼Œå¥½å¤„å¾ˆå¤šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è·³å‡ºä¸ªäººå¼€å‘çš„æ€ç»´è¯¯åŒºï¼Œæ›´å®¹æ˜“å‘ç°é—®é¢˜&lt;/li&gt;
&lt;li&gt;å¢è¿›å›¢é˜Ÿäº¤æµï¼Œæé«˜æ•´ä½“çš„æŠ€æœ¯æ°›å›´&lt;/li&gt;
&lt;li&gt;å›¢é˜Ÿæ°´å¹³æ£€æµ‹å™¨ï¼Œä¸ç®¡æ˜¯å®¡æ ¸è€…è¿˜æ˜¯è¢«å®¡æ ¸çš„ï¼Œreview å‡ æ¬¡åå¤§æ¦‚å°±çŸ¥é“æ˜¯ä»€ä¹ˆæ°´å¹³äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šå¸¸ Code Review æœ‰ä¸¤ç§åœºæ™¯ï¼Œä¸€ç§æ˜¯å…¬å¸å†…éƒ¨ï¼Œè¿˜æœ‰å°±æ˜¯å¼€æºç¤¾åŒºã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
    <category term="OpenSource" scheme="http://crossoverjie.top/tags/OpenSource/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨æœ¬åœ°æ‰“åŒ… StarRocks å‘è¡Œç‰ˆ</title>
    <link href="http://crossoverjie.top/2025/05/12/ob/StarRocks-build-in-local/"/>
    <id>http://crossoverjie.top/2025/05/12/ob/StarRocks-build-in-local/</id>
    <published>2025-05-12T17:47:52.000Z</published>
    <updated>2025-12-29T08:38:08.176Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æˆ‘ä»¬åœ¨ä½¿ç”¨ StarRocks çš„æ—¶å€™ç¢°åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼š</p><ul><li>é‡å¯ç‰©åŒ–è§†å›¾çš„æ—¶å€™ä¼šå¯¼è‡´è§†å›¾å…¨é‡åˆ·æ–°ï¼Œå¤§é‡æ¶ˆè€—èµ„æºã€‚<br>  - ä¿®å¤ PRï¼š<a href="https://github.com/StarRocks/starrocks/pull/57371">https://github.com/StarRocks/starrocks/pull/57371</a></li><li>excluded_refresh_tables å‚æ•°ä¸ MV ä¸åœ¨ä¸€ä¸ªæ•°æ®åº“çš„æ—¶å€™ï¼Œæ— æ³•ç”Ÿæ•ˆã€‚<ul><li>ä¿®å¤ PRï¼š<a href="https://github.com/StarRocks/starrocks/pull/58752">https://github.com/StarRocks/starrocks/pull/58752</a></li></ul></li></ul><p>è€Œæäº¤çš„ PR æ˜¯æœ‰å‘å¸ƒæµç¨‹çš„ï¼Œé€šå¸¸éœ€è¦é—´éš”ä¸€æ®µæ—¶é—´æ‰ä¼šå‘å¸ƒç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘ä»¬çº¿ä¸Šåˆç­‰ç€ç”¨è¿™äº›ä¿®å¤ï¼Œæ²¡åŠæ³•å°±åªæœ‰åœ¨æœ¬åœ°æ‰“åŒ…äº†ã€‚</p><p>å¥½åœ¨ç¤¾åŒºå·²ç»è€ƒè™‘åˆ°è¿™ç§åœºæ™¯äº†ï¼Œä¸“é—¨ä¸ºæˆ‘ä»¬æä¾›äº†æ‰“åŒ…çš„é•œåƒã€‚</p><span id="more"></span><blockquote><p>FE æ˜¯ Java å¼€å‘çš„ï¼Œæœ¬åœ°æ„å»ºè¿˜æ¯”è¾ƒå®¹æ˜“ï¼Œè€Œ BE æ˜¯åŸºäº cpp å¼€å‘çš„ï¼Œæ„å»ºç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œåœ¨ç»Ÿä¸€çš„ docker é•œåƒé‡Œæ„å»ºä¼šçœå»ä¸å°‘ç¯å¢ƒæ­å»ºæµç¨‹ã€‚</p></blockquote><p>æˆ‘ä»¬å…ˆè¦æ‹‰å–å¯¹åº”çš„æ‰“åŒ…é•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">starrocks/dev-env-ubuntu:3.3.9<br></code></pre></td></tr></table></figure><p>æ ¹æ®è‡ªå·±çš„ç‰ˆæœ¬å·æ‹‰å–å³å¯ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ 3.3.9 çš„ç‰ˆæœ¬ã€‚</p><p>ç„¶åéœ€è¦æ ¹æ®æˆ‘ä½¿ç”¨çš„ tag æ‹‰å–ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„å¼€å‘åˆ†æ”¯ï¼Œåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå°†ä¿®å¤çš„ä»£ç æ‰‹åŠ¨åˆå¹¶è¿›æ¥ã€‚</p><p>ç„¶åä¾¿å¯ä»¥å¼€å§‹æ‰“åŒ…äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone git@github.com:StarRocks/starrocks.git /xx/starrocks<br><br>docker run -it -v /xx/starrocks/.m2:/root/.m2 \ <br>-v /xx/starrocks:/root/starrocks \ <br>--name 3.3.9 -d starrocks/dev-env-ubuntu:3.3.9<br><br>docker exec -it 3.3.9 bash<br><br>cd /root/starrocks/<br><br>./build.sh --fe --clean<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦å°†å®¿ä¸»æœºçš„ä»£ç ç£ç›˜æŒ‚è½½åˆ°é•œåƒé‡Œï¼Œè¿™æ ·é•œåƒå°±ä¼šä½¿ç”¨æˆ‘ä»¬çš„æºç è¿›è¡Œç¼–è¯‘æ„å»ºã€‚</p><p>æœ€ç»ˆä¼šåœ¨ <code>/xx/starrocks/output</code> ç›®å½•ç”Ÿæˆæˆ‘ä»¬çš„ç›®æ ‡æ–‡ä»¶ã€‚</p><p><img src="https://s2.loli.net/2025/05/14/RqDW2k9telrP4YN.png"></p><h2 id="æ›¿æ¢ç›®æ ‡é•œåƒ"><a href="#æ›¿æ¢ç›®æ ‡é•œåƒ" class="headerlink" title="æ›¿æ¢ç›®æ ‡é•œåƒ"></a>æ›¿æ¢ç›®æ ‡é•œåƒ</h2><p>æ—¢ç„¶ fe çš„å„ç§ jar åŒ…éƒ½å·²ç»æ„å»ºå‡ºæ¥äº†ï¼Œé‚£å°±å¯ä»¥åŸºäºè¿™äº› jar åŒ…æ‰‹åŠ¨æ‰“å‡º fe çš„ image äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜æ–¹ä¾‹å­ï¼Œä½¿ç”¨ <code>fe-ubuntu.Dockerfile</code> æ¥æ„å»º FE çš„é•œåƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">DOCKER_BUILDKIT=1 docker build --build-arg ARTIFACT_SOURCE=local --build-arg LOCAL_REPO_PATH=. -f fe-ubuntu.Dockerfile -t fe-ubuntu:main ../../..<br></code></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰æ›´ç®€å•çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æ›´åŠ ç¨³å¦¥çš„æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®˜æ–¹çš„é•œåƒä½œä¸ºåŸºç¡€é•œåƒï¼Œåªæ›¿æ¢å…¶ä¸­æ ¸å¿ƒçš„ <code>starrocks-fe.jar</code> ã€‚</p><blockquote><p>è¿™ä¸ª jar åŒ…ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™æ„å»ºå‡ºæ¥</p></blockquote><p>å› ä¸º <code>starrocks-fe.jar</code> ä¹Ÿæ˜¯é€šè¿‡åŒæ ·çš„é•œåƒæ‰“åŒ…å‡ºæ¥çš„ï¼Œæ‰€ä»¥è¿è¡Œèµ·æ¥ä¸ä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼ˆåŒæ ·çš„ jdk ç‰ˆæœ¬ï¼‰ï¼Œè€Œä¸”ä¹Ÿèƒ½ä¿è¯åŸæœ‰çš„é•œåƒæ²¡æœ‰ä¿®æ”¹ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> starrocks/fe-ubuntu:<span class="hljs-number">3.3</span>.<span class="hljs-number">9</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> starrocks-fe.jar /opt/starrocks/fe/lib/</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker build -t fe-ubuntu:3.3.9-fix-&#123;branch&#125; .<br></code></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ”¾å¿ƒçš„æ›¿æ¢çº¿ä¸Šçš„é•œåƒäº†ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://docs.starrocks.io/zh/docs/developers/build-starrocks/Build_in_docker/">https://docs.starrocks.io/zh/docs/developers/build-starrocks/Build_in_docker&#x2F;</a> </li><li><a href="https://github.com/StarRocks/starrocks/blob/759a838ae15b91056233f180aedc88da67a84937/docker/dockerfiles/fe/README.md#L15">https://github.com/StarRocks/starrocks/blob/759a838ae15b91056233f180aedc88da67a84937/docker/dockerfiles/fe/README.md#L15</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘æˆ‘ä»¬åœ¨ä½¿ç”¨ StarRocks çš„æ—¶å€™ç¢°åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¯ç‰©åŒ–è§†å›¾çš„æ—¶å€™ä¼šå¯¼è‡´è§†å›¾å…¨é‡åˆ·æ–°ï¼Œå¤§é‡æ¶ˆè€—èµ„æºã€‚&lt;br&gt;  - ä¿®å¤ PRï¼š&lt;a href=&quot;https://github.com/StarRocks/starrocks/pull/57371&quot;&gt;https://github.com/StarRocks/starrocks/pull/57371&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;excluded_refresh_tables å‚æ•°ä¸ MV ä¸åœ¨ä¸€ä¸ªæ•°æ®åº“çš„æ—¶å€™ï¼Œæ— æ³•ç”Ÿæ•ˆã€‚&lt;ul&gt;
&lt;li&gt;ä¿®å¤ PRï¼š&lt;a href=&quot;https://github.com/StarRocks/starrocks/pull/58752&quot;&gt;https://github.com/StarRocks/starrocks/pull/58752&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œæäº¤çš„ PR æ˜¯æœ‰å‘å¸ƒæµç¨‹çš„ï¼Œé€šå¸¸éœ€è¦é—´éš”ä¸€æ®µæ—¶é—´æ‰ä¼šå‘å¸ƒç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘ä»¬çº¿ä¸Šåˆç­‰ç€ç”¨è¿™äº›ä¿®å¤ï¼Œæ²¡åŠæ³•å°±åªæœ‰åœ¨æœ¬åœ°æ‰“åŒ…äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¥½åœ¨ç¤¾åŒºå·²ç»è€ƒè™‘åˆ°è¿™ç§åœºæ™¯äº†ï¼Œä¸“é—¨ä¸ºæˆ‘ä»¬æä¾›äº†æ‰“åŒ…çš„é•œåƒã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="StarRocks" scheme="http://crossoverjie.top/categories/StarRocks/"/>
    
    
    <category term="StarRocks" scheme="http://crossoverjie.top/tags/StarRocks/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€å¹´æ—¶é—´ä»å°ç™½æˆä¸º OpenTelemetry Member æœ‰æ„Ÿ</title>
    <link href="http://crossoverjie.top/2025/04/15/ob/OTel-member/"/>
    <id>http://crossoverjie.top/2025/04/15/ob/OTel-member/</id>
    <published>2025-04-15T17:40:37.000Z</published>
    <updated>2025-12-29T08:38:08.173Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2025/04/15/5mCgyLhDGfvXojx.jpg"><br><img src="https://s2.loli.net/2025/04/16/KdHYWrMjm5qXlsw.png"><br>å‰æ®µæ—¶é—´ç”³è¯·æˆä¸ºäº† OpenTelemetry çš„ Member é€šè¿‡äº†ï¼Œç®—æ˜¯å®Œæˆäº†ä¸€ä¸ªé˜¶æ®µæ€§ç›®æ ‡ï¼›ä» 24 å¹´çš„ 2 æœˆä»½çš„ç¬¬ä¸€ä¸ª issue åˆ°ç°åœ¨åˆšå¥½ä¸€å¹´çš„æ—¶é—´ã€‚</p><span id="more"></span><hr><p><img src="https://s2.loli.net/2025/04/15/rVMBdSCNvt4Wu6l.jpg"></p><p>è¿™äº‹ä¹ŸæŒºçªç„¶çš„ï¼Œæºè‡ªäºå¹´åˆæˆ‘å‘äº†ä¸€ä¸ª 24 å¹´çš„å¹´ç»ˆæ€»ç»“ï¼Œæåˆ°äº†å¸Œæœ›åœ¨ä»Šå¹´äº‰å–æˆä¸º Memberï¼Œç„¶å<a href="https://github.com/JaredTan95">è°­æ€»</a>å°±æé†’æˆ‘å¯ä»¥è‡ªå·±å»ç”³è¯·ï¼Œåªè¦æ‰¾åˆ°ä¸¤ä¸ª <code>sponsors</code> æ”¯æŒå°±å¯ä»¥äº†ã€‚</p><blockquote><p>æˆ‘ä¹‹å‰ä¸çŸ¥é“è¿™ä¸ª Member æ˜¯è‡ªå·±ç”³è¯·çš„ï¼Œæ²¡æ³¨æ„çœ‹ç¤¾åŒºçš„æ–‡æ¡£ï¼ˆä¹‹å‰çš„ <code>Apache</code> ç¤¾åŒºéƒ½æ˜¯é‚€è¯·åˆ¶ï¼‰ã€‚</p></blockquote><p><img src="https://s2.loli.net/2025/04/16/LsOdlTzYXP7pUrb.jpg"></p><p>äºæ˜¯æˆ‘æäº¤äº†ç›¸å…³çš„ <a href="https://github.com/open-telemetry/community/issues/2642">issue</a>ï¼Œåˆ—ä¸¾äº†è‡ªå·±åšçš„ä¸€äº›è´¡çŒ®ï¼ˆPR å’Œ issueï¼‰ï¼Œä¹Ÿæ‰¾åˆ°äº†ä¹‹å‰ç»å¸¸å¸®æˆ‘ review çš„<a href="https://github.com/steverao">Rao</a> å“¥ä½œä¸º sponsor.</p><p>ä¸å‡ºæ„å¤–ï¼Œæ²¡ç­‰ä¸¤å¤©å°±æ”¶åˆ°äº†é‚€è¯·ã€‚</p><h1 id="å‚ä¸ç¤¾åŒº"><a href="#å‚ä¸ç¤¾åŒº" class="headerlink" title="å‚ä¸ç¤¾åŒº"></a>å‚ä¸ç¤¾åŒº</h1><p>OpenTelemetry ä½œä¸ºå’Œå‚å•†æ— å…³çš„å¯è§‚æµ‹æ ‡å‡†ï¼Œéå¸¸å¼€æ”¾å’ŒåŒ…å®¹ï¼Œä¹Ÿæ˜¯æˆ‘å‚ä¸è¿‡çš„ç¤¾åŒºæœ€å¤šå…ƒçš„å¼€æºé¡¹ç›®ï¼Œå‡ ä¹æ¯ä¸ªå­é¡¹ç›®éƒ½æœ‰ä¸Šç™¾äººå‚ä¸ï¼Œä»–ä»¬éƒ½æ¥è‡ªäºä¸åŒçš„å…¬å¸å’Œä¸ªäººï¼Œåœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ç¤¾åŒºè‡ªç„¶å°±ä¼šæ›´ä½³å’Œè°ï¼Œå¾ˆéš¾å‡ºç°æŸä¸ªå…¬å¸æˆ–è€…ä¸ªäººä¸»å¯¼é¡¹ç›®çš„å‘ï¼Œé£é™©è‡ªç„¶ä¹Ÿä¼šå°å¾ˆå¤šã€‚</p><p><img src="https://s2.loli.net/2025/04/16/3BzuCehpcf4Ek2j.png"></p><p>OTel çš„æŠ€æœ¯æ ˆä¸»è¦æ˜¯å¯ä»¥åˆ†ä¸ºä¸‹é¢ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>å®¢æˆ·ç«¯ï¼šè´Ÿè´£ä¸ŠæŠ¥å¯è§‚æµ‹æ•°æ®ï¼ˆTraceã€Metricsã€Logsï¼‰</li><li>OTel collectorï¼šå¤„ç†å®¢æˆ·ç«¯ä¸ŠæŠ¥çš„æ•°æ®</li><li>æ•°æ®å­˜å‚¨ï¼šå­˜å‚¨æ—¥å¿—ã€æŒ‡æ ‡ã€trace ç­‰æ•°æ®</li></ul><p>ä»¥ä¸Šæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ OpenTelemetry éå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå¤§å®¶å¯ä»¥éƒ½æŒ‘æ„Ÿå…´è¶£çš„éƒ¨åˆ†å»å‚ä¸ã€‚</p><p>ä½œä¸ºä¸€ä¸ªå¯è§‚æµ‹æ ‡å‡†ï¼Œå®¢æˆ·ç«¯è‡ªç„¶å°±éœ€è¦æ”¯æŒå¤§éƒ¨åˆ†çš„æŠ€æœ¯æ ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¸¸ç”¨çš„è¯­è¨€å’ŒæŠ€æœ¯æ ˆéƒ½æœ‰å¯¹åº”çš„å®ç°ï¼š<br><img src="https://s2.loli.net/2024/04/16/zWAVoHaZORI83js.png"></p><p>è¿™ä¸€éƒ¨åˆ†çš„å·¥ä½œé‡ä¹Ÿéå¸¸å¤§ï¼Œé ä¸ªäººå®ç°å’Œç»´æŠ¤è‚¯å®šä¸ç°å®ï¼Œæ‰€ä»¥ç¤¾åŒºéå¸¸æ¬¢è¿å¤§å®¶éƒ½æ¥åšè´¡çŒ®ã€‚</p><hr><p><img src="https://s2.loli.net/2025/04/16/IzJl4feYQoZ1iKH.png"></p><p><img src="https://s2.loli.net/2025/04/16/gqwplH3s7NGOvnI.png"></p><p>æ‹¿æˆ‘å¸¸ç”¨çš„ Java æ¥è¯´ç›®å‰æ”¯æŒäº†è¿™äº›æ¡†æ¶å’Œåº“ï¼Œä½†ä¾ç„¶æ²¡æœ‰æ”¯æŒå…¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œçš„ <a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation/issues?q=sort:updated-desc+state:open+label:%22contribution+welcome%22">issue</a> åˆ—è¡¨é‡Œæ‰¾åˆ°ç¤¾åŒºéœ€è¦å¤§å®¶è´¡çŒ®çš„å†…å®¹ã€‚</p><h2 id="SIG-å°ç»„"><a href="#SIG-å°ç»„" class="headerlink" title="SIG å°ç»„"></a>SIG å°ç»„</h2><p>ç¤¾åŒºä¹Ÿå‡†å¤‡è®¸å¤šå…´è¶£å°ç»„ï¼ˆ<a href="https://github.com/open-telemetry/community#special-interest-groups">SIG</a>ï¼‰æ¥è§£å†³ç‰¹å®šé¢†åŸŸçš„é—®é¢˜ï¼š<br><img src="https://s2.loli.net/2025/04/16/3yDvJUBHj2KwNnk.png"></p><p><img src="https://s2.loli.net/2025/04/16/vHGnjZPdtR9yauI.png"></p><p>å¤§å®¶ä¹Ÿå¯ä»¥è®¢é˜…æ—¥å†å‚ä¸å‘¨ä¼šï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªå…´è¶£å°ç»„éƒ½ä¼šå®šæœŸç»„ç»‡ï¼Œæ‹¿ Java çš„æ¥è¯´å°±æ˜¯æ¯å‘¨å››çš„ UTC+8 çš„æ—©ä¸Šä¹ç‚¹éƒ½ä¼šä¸¾è¡Œã€‚</p><p><img src="https://s2.loli.net/2025/04/15/EvgYrcqA36mwf8e.png"><br><img src="https://s2.loli.net/2025/04/15/pxw6dDBaZLW4hRc.png"></p><p>ä¹‹å‰å‚åŠ è¿‡ä¸¤æ¬¡ï¼Œéƒ½æ˜¯ zoom çš„çº¿ä¸Šä¼šè®®ï¼ˆè€å¤–çš„ä¹ æƒ¯æ˜¯å¼€æ‘„åƒå¤´ï¼‰ï¼Œå¦‚æœè‡ªå·±å£è¯­å°šå¯çš„è¯å’Œç¤¾åŒºä¸»è¦çš„ maintainer ç›´æ¥æ²Ÿé€šæ•ˆç‡ä¼šé«˜å¾ˆå¤šã€‚</p><p>å½“ç„¶å¦‚æœä¸èƒ½å¼€å£çš„è¯ï¼Œ zoom ä¹Ÿæ˜¯å®æ—¶å­—å¹•çš„åŠŸèƒ½ï¼Œç†è§£èµ·æ¥é—®é¢˜ä¹Ÿä¸æ˜¯å¾ˆå¤§ã€‚</p><p><img src="https://s2.loli.net/2025/04/16/pSDJUFRe6fwy4ct.png"></p><p>å¦‚æœä»¥å¯ä»¥æˆä¸º Member çš„è§’åº¦ï¼Œç›®å‰æˆ‘çœ‹äº†ä¸€äº›ç”³è¯·ï¼Œæäº¤äº†ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„ PR åº”è¯¥éƒ½å¯ä»¥ç”³è¯·é€šè¿‡ï¼Œå‰ææ˜¯çº¿ä¸‹æå‰å’Œä½ æ‰¾çš„ sponsor è¾¾æˆä¸€è‡´å°±å¯ä»¥äº†ã€‚</p><blockquote><p>å¸¦ç€è¿™ä¸ªç›®çš„ä¹ŸæŒºå¥½çš„ï¼Œåšå¼€æºé¡¹ç›®å¾€å¾€å°±æ˜¯é çˆ±å‘ç”µï¼Œæœ‰è¿™ä¸ª Member çš„èº«ä»½ä¹Ÿå¯ä»¥ä½œä¸ºæ­£å‘æ¿€åŠ±ï¼Œé¼“åŠ±ç»§ç»­å‚ä¸ã€‚</p></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å½“ç„¶æˆä¸º Member åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œéšç€ç¤¾åŒºå‚ä¸çš„æ·±å…¥åº¦åé¢è¿˜æœ‰<a href="https://github.com/open-telemetry/community/blob/main/guides/contributor/membership.md#membership-levels">å…¶ä»–çš„è§’è‰²</a>ï¼š<br><img src="https://s2.loli.net/2025/04/16/ebtp5I9wByNYmkd.png"></p><p>æ¯”å¦‚ triager å¯ä»¥åˆ†é… issueã€approver å¯ä»¥æ‰¹å‡†ä»£ç ã€maintainer å°±æ˜¯æŸä¸ªæ¨¡å—çš„å…·ä½“è´Ÿè´£äººäº†ï¼Œåé¢å°±å†æ¥å†å‰å§ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/04/15/5mCgyLhDGfvXojx.jpg&quot;&gt;&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2025/04/16/KdHYWrMjm5qXlsw.png&quot;&gt;&lt;br&gt;å‰æ®µæ—¶é—´ç”³è¯·æˆä¸ºäº† OpenTelemetry çš„ Member é€šè¿‡äº†ï¼Œç®—æ˜¯å®Œæˆäº†ä¸€ä¸ªé˜¶æ®µæ€§ç›®æ ‡ï¼›ä» 24 å¹´çš„ 2 æœˆä»½çš„ç¬¬ä¸€ä¸ª issue åˆ°ç°åœ¨åˆšå¥½ä¸€å¹´çš„æ—¶é—´ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OpenTelemetry" scheme="http://crossoverjie.top/categories/OpenTelemetry/"/>
    
    
    <category term="OpenTelemetry" scheme="http://crossoverjie.top/tags/OpenTelemetry/"/>
    
  </entry>
  
  <entry>
    <title>StarRocks å‡çº§æ³¨æ„äº‹é¡¹</title>
    <link href="http://crossoverjie.top/2025/03/14/starrocks/StarRocks-upgrade/"/>
    <id>http://crossoverjie.top/2025/03/14/starrocks/StarRocks-upgrade/</id>
    <published>2025-03-14T17:16:35.000Z</published>
    <updated>2025-12-29T08:38:08.186Z</updated>
    
    <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´å‡çº§äº†ç”Ÿäº§ç¯å¢ƒçš„ <code>StarRocks</code>ï¼Œä» 3.3.3 å‡çº§åˆ°äº† 3.3.9ï¼ŒæœŸé—´è¿˜æ˜¯è¸©äº†ä¸å°‘å‘æ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸‹ã€‚</p><p><img src="https://s2.loli.net/2025/03/17/uGyo2HULqzQ1j7W.png"></p><p> å› ä¸ºæˆ‘ä»¬çš„é›†ç¾¤ä½¿ç”¨çš„æ˜¯å­˜ç®—åˆ†ç¦»çš„ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„ operator éƒ¨ç½²åœ¨ kubernetes é‡Œçš„ï¼Œæ‰€ä»¥æ²¡æ³•æŒ‰ç…§å®˜æ–¹çš„æµç¨‹è¿›å…¥è™šæ‹Ÿæœºæ‰‹åŠ¨å¯åœå¯¹åº”çš„æœåŠ¡ã€‚</p><p>åªèƒ½ä½¿ç”¨ operator æä¾›çš„æ–¹æ¡ˆæ‰‹åŠ¨ä¿®æ”¹å¯¹åº”ç»„ä»¶çš„é•œåƒç‰ˆæœ¬ï¼Œåç»­çš„å‡çº§æ“ä½œäº¤ç»™ operator å»å®Œæˆã€‚</p><span id="more"></span><p><img src="https://s2.loli.net/2025/03/17/7YwRaKzbPo4dAEs.png"></p><p>ç†è®ºä¸Šè¿™ä¸ªå‡çº§æµç¨‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¿®æ”¹é•œåƒç‰ˆæœ¬ä¹‹ååªéœ€è¦å®‰é™ç­‰å¾…ä»–æ»šåŠ¨æ›´æ–°å³å¯ã€‚</p><h1 id="å…ƒæ•°æ®å¤‡ä»½ä¸æ¢å¤"><a href="#å…ƒæ•°æ®å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="å…ƒæ•°æ®å¤‡ä»½ä¸æ¢å¤"></a>å…ƒæ•°æ®å¤‡ä»½ä¸æ¢å¤</h1><p>ä½†è€ƒè™‘åˆ°ä¹‹å‰åœ¨ç¤¾åŒºçœ‹åˆ°æœ‰å­˜ç®—åˆ†ç¦»é›†ç¾¤å‡çº§å¤±è´¥å¯¼è‡´æ•°æ®ä¸¢å¤±çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬çš„å…¨é‡ä¸šåŠ¡å·²ç»åˆ‡æ¢åˆ° StarRocksï¼Œå¦‚æœæ•°æ®ä¸¢å¤±é‚£éœ€è¦èŠ±å‡ å¤©æ—¶é—´è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œè¿™åœ¨ä¸šåŠ¡ä¸Šæ˜¯æ— æ³•æ¥å—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ˜¯å¯ä»¥åœ¨å‡çº§å‰å¤‡ä»½æ•°æ®ï¼Œå³ä¾¿æ˜¯å‡çº§å¤±è´¥æ•°æ®ä¾ç„¶è¿˜åœ¨ã€‚</p><p><img src="https://s2.loli.net/2025/03/17/g1q7NbX6H9t5oce.png"></p><p>åŸæœ¬å®˜æ–¹ç¤¾åŒºæ˜¯æœ‰æä¾›æ•°æ®å¤‡ä»½ä¸æ¢å¤èƒ½åŠ›çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„å­˜ç®—åˆ†ç¦»é›†ç¾¤ä¸æ”¯æŒğŸ˜‚ï¼Œè€Œæƒ³è¦è·å¾—ç¤¾åŒºç‰ˆçš„æ”¯æŒåº”è¯¥è¿˜è¦ç­‰ä¸€æ®µæ—¶é—´ï¼Œå³ä¾¿æ˜¯æ”¯æŒäº†æˆ‘ä»¬å‡çº§åˆ°é‚£ä¸ªç‰ˆæœ¬ä¾ç„¶æ˜¯éœ€è¦å¤‡ä»½çš„ã€‚</p><p><img src="https://s2.loli.net/2025/03/17/l6Dfcs4JYV52pQE.png"></p><blockquote><p>å¥½æ¶ˆæ¯ï¼Œåœ¨æœ€æ–°çš„ 3.4.1 ç‰ˆæœ¬ä¸­å·²ç»æ”¯æŒäº†å¿«ç…§å¤‡ä»½äº†ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªæ–° featureï¼Œç¨³å®šæ€§è¿˜æœ‰å¾…è§‚å¯Ÿã€‚</p></blockquote><p>æ‰€ä»¥æˆ‘ä»¬çš„è®¡åˆ’æ˜¯åœ¨å½“å‰è¿™ä¸ªç‰ˆæœ¬ï¼ˆ3.3.3ï¼‰èƒ½å¦è‡ªå·±å¤‡ä»½æ•°æ®ï¼Œç”±äºæˆ‘ä»¬æ˜¯å­˜ç®—åˆ†ç¦»çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥æ•°æ®ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ul><li>å­˜å‚¨åœ¨æ‰€æœ‰ FE èŠ‚ç‚¹é‡Œçš„ meta å…ƒæ•°æ®</li><li>å­˜å‚¨åœ¨äº‘å­˜å‚¨é‡Œçš„ä¸šåŠ¡æ•°æ®</li></ul><p>å¤‡ä»½çš„æ—¶å€™è‡ªç„¶å°±éœ€è¦å¤‡ä»½è¿™ä¸¤éƒ¨åˆ†çš„æ•°æ®ã€‚</p><h2 id="å¤‡ä»½å…ƒæ•°æ®"><a href="#å¤‡ä»½å…ƒæ•°æ®" class="headerlink" title="å¤‡ä»½å…ƒæ•°æ®"></a>å¤‡ä»½å…ƒæ•°æ®</h2><p>åœ¨å…ƒæ•°æ®é‡Œå­˜æ”¾äº†æ‰€æœ‰çš„æ•°æ®åº“ã€è¡¨ã€è§†å›¾ç­‰ä¿¡æ¯ï¼Œå…·ä½“åœ¨ç£ç›˜çš„ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">|-- bdb<br>|   |-- 00000000.jdb<br>|   |-- je.config.csv<br>|   |-- je.info.0<br>|   |-- je.info.0.lck<br>|   |-- je.lck<br>|   `-- je.stat.csv<br>|-- image<br>|   |-- ROLE<br>|   |-- VERSION<br>|   |-- image.327375<br>|   |-- starmgr<br>|   |   `-- image.390<br>|   `-- v2<br>|       |-- checksum.327375<br>|       `-- image.327375<br></code></pre></td></tr></table></figure><p>bdb ç›®å½•ä¸»è¦æ˜¯ç”¨äº leader é€‰ä¸¾çš„ï¼Œç†è®ºä¸Šå¹¶ä¸éœ€è¦å¤‡ä»½ï¼ŒçœŸæ­£éœ€è¦çš„æ˜¯ <code>image</code> ç›®å½•ä¸‹çš„ <code>image.327375</code> ç­‰å…ƒæ•°æ®æ–‡ä»¶ã€‚</p><p><img src="https://s2.loli.net/2025/03/17/KpVCBqJGjXQctah.png"></p><p><img src="https://s2.loli.net/2025/03/17/CMAiILF3ZHaouY6.png"></p><p>é‡Œé¢æ˜¯ç”¨ JSON å­˜å‚¨çš„å„ç§ç±»å‹çš„å…ƒæ•°æ®ï¼ŒFE åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šè¯»å–è¯¥æ–‡ä»¶ï¼Œç„¶åæ ¹æ®ä¸åŒçš„ç±»å‹å–ä¸åŒçš„åç§»é‡è¯»å–å…¶ä¸­çš„å…ƒæ•°æ®åŠ è½½åˆ°å†…å­˜é‡Œã€‚</p><p>æˆ‘ä»¬çš„ FE ä¸€å…±æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦æ‰¾åˆ°å…¶ä¸­çš„ leader èŠ‚ç‚¹ï¼ˆç†è®ºä¸Šåªéœ€è¦å¤‡ä»½ leader èŠ‚ç‚¹å³å¯ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šåœ¨ leader å¯åŠ¨ååŒæ­¥è¿‡å»ï¼‰ï¼Œç›´æ¥å°†è¿™ä¸ª meta ç›®å½•å¤‡ä»½åˆ°æœ¬åœ°å³å¯ï¼š</p><p>åœ¨å¼€å§‹ä¹‹å‰éœ€è¦åœæ‰æ‰€æœ‰çš„å†™å…¥ä»»åŠ¡ï¼Œæš‚åœæ‰€æœ‰çš„ç‰©åŒ–è§†å›¾åˆ·æ–°ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><br># inactive æ‰€æœ‰çš„ç‰©åŒ–è§†å›¾<br><span class="hljs-keyword">SELECT</span> CONCAT(<span class="hljs-string">&#x27;ALTER MATERIALIZED VIEW &#x27;</span>, TABLE_NAME, <span class="hljs-string">&#x27; INACTIVE;&#x27;</span>) <span class="hljs-keyword">FROM</span> information_schema.materialized_views;<br><br># æ‰‹åŠ¨åˆ›å»ºé•œåƒ<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-keyword">CREATE</span> IMAGE;<br><br># æ‰¾åˆ° leader èŠ‚ç‚¹<br><span class="hljs-keyword">SHOW</span> FRONTENDS;<br></code></pre></td></tr></table></figure><p>ç„¶åè¿›å…¥ leader èŠ‚ç‚¹å¤‡ä»½å…ƒæ•°æ®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">k exec -it kube-starrocks-fe-0-n sr -- bash<br><br>tar -zcvf meta.tar.gz meta/<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¸‹è½½å¤‡ä»½å…ƒæ•°æ®åˆ°æœ¬åœ°</span><br>k cp starrocks-fe-0:/opt/starrocks/fe/meta/image.tar.gz image.tar.gz -n starrocks -c fe --retries=5<br></code></pre></td></tr></table></figure><h2 id="å¤‡ä»½äº‘å­˜å‚¨æ•°æ®"><a href="#å¤‡ä»½äº‘å­˜å‚¨æ•°æ®" class="headerlink" title="å¤‡ä»½äº‘å­˜å‚¨æ•°æ®"></a>å¤‡ä»½äº‘å­˜å‚¨æ•°æ®</h2><p>äº‘å­˜å‚¨çš„å¤‡ä»½å°±éœ€è¦ç»“åˆä½ ä½¿ç”¨çš„äº‘å‚å•†æ¥å¤‡ä»½äº†ï¼Œé€šå¸¸ä»–ä»¬éƒ½æœ‰æä¾›å¯¹åº”çš„å¤‡ä»½èƒ½åŠ›ã€‚</p><p>è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬å†å¤‡ä»½çš„æ—¶å€™éœ€è¦è®°å½•åœ¨å­˜å‚¨æ¡¶é‡Œçš„ç›®å½•åç§°ï¼Œä¹‹åè¿˜åŸçš„æ—¶å€™åç§°å¾—ä¿æŒä¸€è‡´æ‰è¡Œã€‚</p><h2 id="æ¢å¤å…ƒæ•°æ®"><a href="#æ¢å¤å…ƒæ•°æ®" class="headerlink" title="æ¢å¤å…ƒæ•°æ®"></a>æ¢å¤å…ƒæ•°æ®</h2><p>å½“å‡ºç°æç«¯æƒ…å†µå‡çº§å¤±è´¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå…ƒæ•°æ®è¦†ç›–å›å»ï¼›ä½†ç”±äºæˆ‘ä»¬çš„åº”ç”¨è¿è¡Œåœ¨å®¹å™¨é‡Œï¼Œä¸å¯ä»¥åœ¨åº”ç”¨å¯åŠ¨ä¹‹åå†æ›¿æ¢å…ƒæ•°æ®ã€‚</p><p>åªèƒ½åœ¨åº”ç”¨å¯åŠ¨ä¹‹å‰å°†ä¹‹å‰å¤‡ä»½çš„å…ƒæ•°æ®è¦†ç›–å›å»ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ kubernetes ä¸­çš„ <code>initContainers</code> æå‰å°†æ•°æ®å¤åˆ¶åˆ°åº”ç”¨å®¹å™¨é‡Œã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆæŠŠå¤‡ä»½çš„å…ƒæ•°æ®æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> busybox  <br><span class="hljs-keyword">ADD</span><span class="language-bash"> meta.tar.gz /temp</span><br></code></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ FE çš„ <code>statefulset</code> çš„èµ„æºï¼Œåˆ›å»ºä¸€ä¸ª initContainersã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">initContainers:</span>  <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy-file-init</span>  <br>    <span class="hljs-attr">image:</span> <span class="hljs-string">meta:0.0.1</span>  <br>    <span class="hljs-attr">command:</span> [<span class="hljs-string">&quot;/bin/sh&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>]  <br>    <span class="hljs-attr">args:</span> [<span class="hljs-string">&quot;rm -rf /meta-target/* &amp;&amp; cp -r /temp/meta/. /meta-target&quot;</span>]  <br>    <span class="hljs-attr">volumeMounts:</span>  <br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">fe-meta</span>  <br>        <span class="hljs-attr">mountPath:</span> <span class="hljs-string">&quot;/meta-target&quot;</span><br></code></pre></td></tr></table></figure><p>åŸç†å°±æ˜¯åœ¨ initContainers ä¸­æŒ‚è½½åŸæœ¬ FE çš„å…ƒæ•°æ®ç›®å½•ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥å°†ä¹‹å‰å¤‡ä»½çš„å…ƒæ•°æ®è¦†ç›–è¿‡å»ã€‚</p><blockquote><p>å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ k8s çš„ go client ç”¨ä»£ç çš„æ–¹å¼æ¥ä¿®æ”¹ï¼Œä¼šæ›´å®¹æ˜“ç»´æŠ¤ã€‚</p></blockquote><p>è¿˜åŸçš„æ—¶å€™éœ€è¦å…ˆå°†äº‘å­˜å‚¨é‡Œçš„æ•°æ®å…ˆè¿˜åŸä¹‹åå†è¿˜åŸå…ƒæ•°æ®ã€‚</p><h1 id="ç‰©åŒ–è§†å›¾åˆ·æ–°ç­–ç•¥"><a href="#ç‰©åŒ–è§†å›¾åˆ·æ–°ç­–ç•¥" class="headerlink" title="ç‰©åŒ–è§†å›¾åˆ·æ–°ç­–ç•¥"></a>ç‰©åŒ–è§†å›¾åˆ·æ–°ç­–ç•¥</h1><p>çœŸæ­£å‡çº§çš„æ—¶å€™å€’æ˜¯æ²¡æœ‰ç¢°åˆ°å‡çº§å¤±è´¥çš„æƒ…å†µï¼Œæ‰€ä»¥æ²¡æœ‰èµ°æ¢å¤æµç¨‹ï¼›ä½†æ˜¯å´ç¢°åˆ°äº†ä¸€ä¸ªæ›´éº»çƒ¦çš„äº‹æƒ…ã€‚</p><h2 id="ç‰©åŒ–è§†å›¾ä½œä¸ºåŸºè¡¨"><a href="#ç‰©åŒ–è§†å›¾ä½œä¸ºåŸºè¡¨" class="headerlink" title="ç‰©åŒ–è§†å›¾ä½œä¸ºåŸºè¡¨"></a>ç‰©åŒ–è§†å›¾ä½œä¸ºåŸºè¡¨</h2><p>æˆ‘ä»¬åœ¨å‡çº§å‰å°†æ‰€æœ‰çš„ç‰©åŒ–è§†å›¾è®¾ç½®ä¸ºäº† <code>INACTIVE</code>ï¼Œå‡çº§æˆåŠŸåéœ€è¦å°†ä»–ä»¬éƒ½æ”¹ä¸º <code>ACTIVE</code>ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚æœæŸä¸ªç‰©åŒ–è§†å›¾ <code>MV1</code> çš„åŸºè¡¨ä¹Ÿæ˜¯ä¸€ä¸ªç‰©åŒ–è§†å›¾ <code>MV-base</code>ï¼Œè¿™æ ·ä¼šå¯¼è‡´ <code>MV1</code> çš„å…¨é‡åˆ·æ–°ã€‚</p><p>æˆ‘ä¹‹å‰åœ¨è¿™ä¸ª <a href="https://github.com/StarRocks/starrocks/pull/50926">PR</a> é‡Œæ–°å¢äº†ä¸€ä¸ªå‚æ•°ï¼š<code>excluded_refresh_tables</code> å¯ä»¥ç”¨äºæ’é™¤åŸºè¡¨å‘ç”Ÿå˜åŒ–çš„æ—¶å€™åˆ·æ–°ç‰©åŒ–è§†å›¾ï¼Œä½†æ˜¯å¿˜è®°äº†åŸºè¡¨ä¹Ÿæ˜¯ç‰©åŒ–è§†å›¾çš„åœºæ™¯ã€‚</p><p><img src="https://s2.loli.net/2025/03/18/nf3QioRgc96ze2p.png"></p><p>æ‰€ä»¥åœ¨è¿™ä¸ª <a href="https://github.com/StarRocks/starrocks/pull/56428">PR</a> ä¸­ä¿®å¤äº†è¯¥é—®é¢˜ï¼Œç°åœ¨åŸºè¡¨æ˜¯ç‰©åŒ–è§†å›¾çš„æ—¶å€™ä¹Ÿå¯ä»¥ä½¿ç”¨äº†ã€‚</p><h2 id="ç‰©åŒ–è§†å›¾æ‰‹åŠ¨-ACTIVE"><a href="#ç‰©åŒ–è§†å›¾æ‰‹åŠ¨-ACTIVE" class="headerlink" title="ç‰©åŒ–è§†å›¾æ‰‹åŠ¨ ACTIVE"></a>ç‰©åŒ–è§†å›¾æ‰‹åŠ¨ ACTIVE</h2><p>å‰é¢æåˆ°åœ¨å‡çº§ä¹‹å‰éœ€è¦å°†æ‰€æœ‰çš„ç‰©åŒ–è§†å›¾è®¾ç½®ä¸º <code>INACTIVE</code>ï¼Œå‡çº§æˆåŠŸåå†æ‰‹åŠ¨è®¾ç½®ä¸º ACTIVEã€‚</p><p>æˆ‘ä»¬åœ¨æ‰‹åŠ¨ ACTIVE ä¹‹åå‘ç°è¿™äº›ç‰©åŒ–è§†å›¾åˆåœ¨åšå…¨é‡åˆ·æ–°äº†ï¼Œäºæ˜¯æˆ‘ä»¬æ£€æŸ¥äº†ä»£ç ã€‚</p><p><img src="https://s2.loli.net/2025/03/18/DMNQsxH5ZqaKpFb.png"></p><p>å‘ç°åœ¨ä½¿ç”¨ <code>ALTER MATERIALIZED VIEW order_mv ACTIVE;</code> ä¿®æ”¹è§†å›¾çŠ¶æ€çš„æ—¶å€™ä¼šå¼ºåˆ¶åˆ·æ–°ç‰©åŒ–è§†å›¾çš„æ‰€æœ‰åˆ†åŒºã€‚</p><p><img src="https://s2.loli.net/2025/03/18/GP6Bzl7Zxq29FoD.png"></p><blockquote><p>force: true çš„æ—¶å€™ä¼šç›´æ¥è·³è¿‡åŸºè¡¨çš„åˆ†åŒºæ£€æŸ¥ï¼Œå¯¼è‡´åˆ†åŒºçš„å…¨é‡åˆ·æ–°ã€‚</p></blockquote><p><img src="https://s2.loli.net/2025/03/18/PG8WVKrpfoTz61I.png"></p><p>åŒæ—¶ä¼šåœ¨ ACTIVE çš„æ—¶å€™å°†è§†å›¾åŸºè¡¨çš„ <code>baseTableVisibleVersionMap</code> ç‰ˆæœ¬å·ç¼“å­˜æ¸…ç©ºï¼ŒFE éœ€è¦åœ¨åˆ·æ–°çš„æ—¶å€™åˆ¤æ–­å½“å‰éœ€è¦åˆ·æ–°çš„åˆ†åŒºæ˜¯å¦å­˜åœ¨ä¸ç¼“å­˜ä¸­ï¼Œå¦‚æœå­˜åœ¨çš„è¯è¯´æ˜ä¸éœ€è¦åˆ·æ–°ï¼Œç°åœ¨è¢«æ¸…ç©ºåå°±ä¸€å®šä¼šè¢«åˆ·æ–°ã€‚</p><p>æ‰€ä»¥æˆ‘æäº†ä¸€ä¸ª PR å¯ä»¥åœ¨ <code>ACTIVE</code> ç‰©åŒ–è§†å›¾çš„æ—¶å€™äººå·¥åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ·æ–°:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> materialized <span class="hljs-keyword">view</span> mv_test1 ACTIVE <span class="hljs-keyword">WITH</span> NO_VALIDATION<br></code></pre></td></tr></table></figure><p>è¿™æ ·å¸¦ä¸Š <code>NO_VALIDATION</code> å‚æ•°åå°± <code>force=false</code> ä¹Ÿå°±ä¸ä¼šå…¨é‡åˆ·æ–°äº†ã€‚</p><p>å¦‚æœåœ¨ ACTIVE ç‰©åŒ–è§†å›¾çš„æ—¶å€™ç¢°åˆ°ç±»ä¼¼åœºæ™¯ï¼Œå¯ä»¥åœ¨è¿™ä¸ª <code>PR</code> å‘å¸ƒä¹‹ååŠ ä¸Š <code>NO_VALIDATION</code> æ¥è·³è¿‡åˆ·æ–°ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://github.com/StarRocks/starrocks/pull/50926">https://github.com/StarRocks/starrocks/pull/50926</a></li><li><a href="https://github.com/StarRocks/starrocks/pull/56428">https://github.com/StarRocks/starrocks/pull/56428</a></li><li><a href="https://github.com/StarRocks/starrocks/pull/56864">https://github.com/StarRocks/starrocks/pull/56864</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰æ®µæ—¶é—´å‡çº§äº†ç”Ÿäº§ç¯å¢ƒçš„ &lt;code&gt;StarRocks&lt;/code&gt;ï¼Œä» 3.3.3 å‡çº§åˆ°äº† 3.3.9ï¼ŒæœŸé—´è¿˜æ˜¯è¸©äº†ä¸å°‘å‘æ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/03/17/uGyo2HULqzQ1j7W.png&quot;&gt;&lt;/p&gt;
&lt;p&gt; å› ä¸ºæˆ‘ä»¬çš„é›†ç¾¤ä½¿ç”¨çš„æ˜¯å­˜ç®—åˆ†ç¦»çš„ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„ operator éƒ¨ç½²åœ¨ kubernetes é‡Œçš„ï¼Œæ‰€ä»¥æ²¡æ³•æŒ‰ç…§å®˜æ–¹çš„æµç¨‹è¿›å…¥è™šæ‹Ÿæœºæ‰‹åŠ¨å¯åœå¯¹åº”çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åªèƒ½ä½¿ç”¨ operator æä¾›çš„æ–¹æ¡ˆæ‰‹åŠ¨ä¿®æ”¹å¯¹åº”ç»„ä»¶çš„é•œåƒç‰ˆæœ¬ï¼Œåç»­çš„å‡çº§æ“ä½œäº¤ç»™ operator å»å®Œæˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
    <category term="StarRocks" scheme="http://crossoverjie.top/tags/StarRocks/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„ 2024</title>
    <link href="http://crossoverjie.top/2025/03/03/annual-summary/2024/"/>
    <id>http://crossoverjie.top/2025/03/03/annual-summary/2024/</id>
    <published>2025-03-03T17:47:52.000Z</published>
    <updated>2025-12-29T08:38:08.157Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™äº›å¹´æˆ‘ä¸€ç›´éƒ½æ˜¯æŒ‰ç…§å†œå†æ–°å¹´æ¥å†™å¹´ç»ˆæ€»ç»“çš„ï¼Œéƒ½è¯´ä¸å‡ºæ­£æœˆéƒ½æ˜¯å¹´ï¼Œå‰äº›å¹´ä¸€ç›´éƒ½æ¯”è¾ƒè§„å¾‹ï¼Œä»Šå¹´ç¡®å®æ˜¯æ—¶é—´è¶…äº†ä¸€äº›ã€‚</p><p>ä¸»è¦åŸå› è¿˜æ˜¯å¹´æœ«æ¥äº†ä¸ªæ´»ï¼Œéœ€è¦åœ¨å¹´åˆä¸Šçº¿ï¼Œå¯¼è‡´è¿™æ®µæ—¶é—´éƒ½æ²¡å¤ªå¤šæ—¶é—´å†™å†…å®¹ã€‚</p><p>æœ€è¿‘äº‹æƒ…ç»ˆäºå‘Šä¸€æ®µè½åæ‰å¼€å§‹ç å­—ã€‚</p><span id="more"></span><blockquote><p>æœ¬æ¥æ‰“ç®—ç”¨ AI æ¥å†™çš„ï¼Œæƒ³æƒ³è¿˜æ˜¯ç®—äº†ï¼Œç°åœ¨ AI å¤§çƒ­çš„æ—¶ä»£ï¼Œè¶Šæ˜¯æ‰‹å·¥æ‰“é€ çš„å†…å®¹è¶Šæ˜¯çè´µğŸ¶</p></blockquote><h1 id="å¥èº«"><a href="#å¥èº«" class="headerlink" title="å¥èº«"></a>å¥èº«</h1><p><img src="https://s2.loli.net/2025/03/04/t6FN7hjiUdXYJTZ.jpg"></p><p><img src="https://s2.loli.net/2025/03/04/vdDmtrcTGAxXsyC.jpg"></p><p>å›æƒ³èµ·æ¥ 2024 å¹´æŠ•å…¥æœ€å¤šçš„è¿˜æ˜¯å¥èº«ï¼Œæ‰‹ä¸Šçš„è€èŒ§éƒ½æ¢äº†å‡ è½®äº†ï¼›</p><p>ä»¥å‰è¿˜ä¸ä¿¡çœŸæœ‰äººä¸€å¤©æ²¡äº‹å°±å¾€å¥èº«æˆ¿è·‘å—ï¼Ÿç°åœ¨å›æƒ³èµ·æ¥åœ¨å¥èº«æˆ¿çš„é‚£ 1ï½2 å°æ—¶æ˜¯ä¸€å¤©æœ€æ”¾æ¾çš„æ—¶é—´ï¼Œå¸¦ä¸ªè€³æœºå¬ç€æ’­å®¢ï¼Œæ„Ÿå—è‚Œè‚‰çš„å‘åŠ›ï¼ˆå¬ç€æ˜¯æœ‰ç‚¹æ²¹è…»ï¼‰å®Œå…¨è¿›å…¥å¿ƒæµçš„çŠ¶æ€ã€‚</p><p>ä¸è¿‡å› ä¸ºæˆ‘å¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½æ˜¯è‡ªå·±ç»ƒï¼Œæ‰€ä»¥å¯¹è‡ªå·±ä¹Ÿä¸å¤Ÿç‹ ï¼Œå…¨æ˜¯è‡ªå·±èƒ½æ¥å—çš„å¼ºåº¦ï¼ŒåŠ ä¸Šä¹Ÿæ²¡å•¥å¤©èµ‹ï¼ˆä»å°ä½“è‚²å°±æ˜¯æˆ‘çš„å¼±é¡¹ï¼‰æ‰€ä»¥è‚Œè‚‰çº¿æ¡ä¹Ÿä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚</p><p><img src="https://s2.loli.net/2025/03/04/dfIL87FvXVqy5Pk.png" alt="image.png"></p><p><img src="https://s2.loli.net/2025/03/04/8dxzbyH1PA7X2R4.jpg"></p><p>ä»¥ä¸Šéƒ½æ˜¯å‡¹äº†åŠå¤©é€ å‹æ‰æ‹å‡ºæ¥çš„ï¼Œå’Œå¥èº«å¤§ä½¬å®Œå…¨æ²¡æ³•æ¯”ï¼›å»å¹´ 11 æœˆä»½ä»ä¹åˆ»æ¢åˆ°äº†ä¸€ä¸ªæœ‰è‡ªç”±å§æ¨å’Œæ·±è¹²çš„å¥èº«æˆ¿ï¼ŒåŠ¨ä½œåŸºæœ¬ä¸Šéƒ½æ˜¯ä»é›¶å¼€å§‹ï¼Œç°åœ¨å§æ¨ 70kgã€æ·±è¹² 80kg å·²ç»æ¯”è¾ƒæ»¡æ„äº†ã€‚</p><p>æˆ‘çš„è¦æ±‚ä¸é«˜ï¼Œä¿è¯åœ¨ä¸å—ä¼¤çš„å‰æä¸‹å§æ¨èƒ½åˆ° 80kg åšç»„å°±æ»¡æ„äº†ã€‚</p><blockquote><p>å°±åƒæˆ‘æœ‹å‹è¯´çš„ï¼Œçœ‹ä½ ä¹Ÿç»ƒäº†ä¸€å¹´å¤šäº†å’‹è¿˜è¿™ä¹ˆèœï¼Ÿæˆ‘çš„å›å¤æ˜¯ï¼šè¿™ä¸€å¹´å¤šå¦‚æœä¸ç»ƒï¼Œé‚£å²‚ä¸æ˜¯æ›´èœï¼Œç°åœ¨è¿˜åœ¨æ‰“åŸºç¡€çš„é˜¶æ®µğŸ™‚</p></blockquote><h1 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h1><p>ä»Šå¹´çš„å·¥ä½œä¾ç„¶æ˜¯æŒ‰éƒ¨å°±ç­çš„è¿›è¡Œï¼Œåœ¨å…¬å¸ä¾ç„¶æ˜¯è´Ÿè´£åŸºç¡€æ¶æ„ï¼Œä¸»è¦è¿˜æ˜¯ç»´æŠ¤å†…éƒ¨çš„æ¶ˆæ¯é˜Ÿåˆ— Pulsarã€å¯è§‚æµ‹æ€§å·¥å…· OpenTelemetryã€æœåŠ¡ç½‘æ ¼ã€StarRocks ç­‰ã€‚</p><p>å½“ç„¶ 24 å¹´è¿˜æ˜¯å®Œæˆäº†ä¸€ä¸ªå°ç›®æ ‡ï¼šæˆä¸ºäº†ä¸¤ä¸ª Apache é¡¹ç›®çš„ Committerã€‚</p><p><img src="https://s2.loli.net/2025/03/04/PCmnARseYq9DiaV.png"></p><p>ä¸ºæ­¤æˆ‘è¿˜å†™äº†ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/YV31IjbFNd__U0cf70V4pQ">æˆ‘æ˜¯å¦‚ä½•ä»é›¶åˆ°æˆä¸º Apache é¡¶çº§é¡¹ç›®çš„ Committer</a>ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹è¯¦ç»†è¿‡ç¨‹ã€‚</p><h2 id="å‰¯ä¸š"><a href="#å‰¯ä¸š" class="headerlink" title="å‰¯ä¸š"></a>å‰¯ä¸š</h2><p>23 å¹´çš„æ—¶å€™ç¬¬ä¸€æ¬¡æ¥åˆ°äº†å’¨è¯¢ç›¸å…³çš„ä»˜è´¹ä¸šåŠ¡ï¼Œä¹Ÿå°±æ˜¯ä»é‚£æ—¶å€™å¼€å§‹å°è¯•åšä¸€äº›å‰¯ä¸šï¼Œç›®å‰å’¨è¯¢æœåŠ¡äº†å‡ ä¸ªå®¢æˆ·ï¼Œåé¦ˆéƒ½è¿˜ä¸é”™ï¼š<br><img src="https://s2.loli.net/2025/03/05/FENVYphcQHuC7xa.png"><br><img src="https://s2.loli.net/2025/03/05/wRTvW5AVimYfjLb.png"><br><img src="https://s2.loli.net/2025/03/05/lxzBEsVGOkorNXq.png"></p><p>ä»Šå¹´å‡†å¤‡åŠ å¤§åŠ›åº¦å†å®£ä¼ ä¸€ä¸‹ï¼š<br><img src="https://s2.loli.net/2025/03/05/2iKaFwIoRr1tjHV.png"></p><p>åŒæ—¶ 24 å¹´åœ¨å’¨è¯¢çš„åŸºç¡€ä¸Šå¼€äº†çŸ¥è¯†æ˜Ÿçƒï¼Œä¹Ÿæ²¡æœ‰è®¤çœŸå®£ä¼ ï¼Œç›®å‰æœ‰å¤§çº¦ 90 ä¸ªç”¨æˆ·ï¼Œéå¸¸æ„Ÿè°¢ä»–ä»¬çš„æ”¯æŒï¼š<br><img src="https://s2.loli.net/2025/03/05/E8xkw2HUWrQOL5D.jpg"></p><p>æœ‰éœ€è¦çš„æœ‹å‹ä¹Ÿå¯ä»¥æ‰«ç å…³æ³¨ä¸‹ï¼Œç­‰è¿™æ®µæ—¶é—´å¿™è¿‡ä¹‹åä¼šé‡ç‚¹è¿è¥ã€‚</p><h2 id="æ˜é‡‘ç­¾çº¦ä½œè€…"><a href="#æ˜é‡‘ç­¾çº¦ä½œè€…" class="headerlink" title="æ˜é‡‘ç­¾çº¦ä½œè€…"></a>æ˜é‡‘ç­¾çº¦ä½œè€…</h2><p><img src="https://s2.loli.net/2025/03/05/SVoyfepc6umUl2X.jpg"></p><p>å»å¹´ä¹Ÿå’Œæ˜é‡‘ç­¾çº¦äº†åŠå¹´æ—¶é—´ï¼šä¹Ÿå°±æ˜¯è¿™åŠå¹´æœŸé—´å†™çš„æ–‡ç« éœ€è¦é¦–å‘åœ¨æ˜é‡‘å¹³å°ï¼ŒåŒæ—¶è¿˜èƒ½æ‹¿åˆ°ç›¸åº”çš„ä½£é‡‘ï¼›å¯¹åˆ›ä½œè€…å’Œå¹³å°æ¥è¯´ç¡®å®æ˜¯åŒèµ¢çš„ç»“æœã€‚</p><p>å¹³å°æ”¶è·äº†ä¼˜è´¨çš„æ–‡ç« ï¼Œä½œè€…ä¹Ÿèƒ½è·å¾—ä¸€å®šçš„æ¿€åŠ±ï¼›å¸Œæœ›å›½å†…è¶Šæ¥è¶Šå¤šçš„å¹³å°å¯ä»¥æ•ˆä»¿ï¼Œè€Œä¸æ˜¯å¾€è‡ªå®¶å¹³å°é‡Œå€’åƒåœ¾ï¼ˆDDDDï¼‰ã€‚</p><h1 id="æŠ€èƒ½"><a href="#æŠ€èƒ½" class="headerlink" title="æŠ€èƒ½"></a>æŠ€èƒ½</h1><h2 id="åšå®¢"><a href="#åšå®¢" class="headerlink" title="åšå®¢"></a>åšå®¢</h2><p><img src="https://s2.loli.net/2025/03/05/uU8JDoKjSVdGbp5.png"></p><p>å»å¹´ 24 å¹´å› ä¸ºç­¾çº¦äº†æ˜é‡‘ï¼Œæ‰€ä»¥å†™çš„è¿˜æ˜¯æ¯”è¾ƒç§¯æï¼Œä¸€å…±å†™äº† 53 ç¯‡åšå®¢ï¼Œå¹³å‡æ¯ä¸ªæœˆå†™ 4 ç¯‡+ã€‚</p><p>ä»Šå¹´å†™çš„å†…å®¹ä¸»è¦åŒ…å«äº†ï¼š<br><img src="https://s2.loli.net/2025/03/06/5qp4uHWetQSlxvZ.png"></p><p>è¿™é‡Œæˆ‘é—®äº†ä¸‹ AIï¼Œå…¶å®å‡ ä¹éƒ½æ˜¯æˆ‘å·¥ä½œä¸­æ¥è§¦åˆ°çš„æŠ€æœ¯é—®é¢˜ï¼Œæ¯”å¦‚ Pulsarã€OpenTelemetryã€StarRocks ç­‰ã€‚</p><h2 id="å¼€æº"><a href="#å¼€æº" class="headerlink" title="å¼€æº"></a>å¼€æº</h2><p><img src="https://s2.loli.net/2025/03/05/JWmG2ybEvrZswOx.jpg"></p><p><img src="https://s2.loli.net/2025/03/05/aF4lM51XgmZ9INd.png"></p><p>24å¹´æŠ•å…¥å¼€æºçš„æ—¶é—´è¿˜æ˜¯è›®å¤šçš„ï¼Œæ¯•ç«Ÿæˆ‘çš„å·¥ä½œä¸­çš„æœ‰éƒ¨åˆ†æ—¶é—´ä¹Ÿæ˜¯å’Œå¼€æºç›¸å…³çš„ã€‚</p><h3 id="Apache-Pulsar"><a href="#Apache-Pulsar" class="headerlink" title="Apache Pulsar"></a>Apache Pulsar</h3><p>Pulsar çš„è´¡çŒ®ä¸»è¦æ˜¯åˆ†ä¸ºä¸»ä»“åº“å’Œ pulsar-client-go ä¸¤ä¸ªã€‚</p><p><img src="https://s2.loli.net/2025/03/05/N68UXVC2eqQksFM.png"><br>ä¸»ä»“åº“è¿™è¾¹æˆ‘çš„æ”¹åŠ¨ä¸æ˜¯å¾ˆå¤šï¼Œæ¯”è¾ƒå¤§çš„å°±æ˜¯é‡æ„äº† cliï¼Œå…¶ä»–çš„éƒ½æ˜¯äº›è¾¹è§’æ–™ã€‚</p><p><img src="https://s2.loli.net/2025/03/05/LKXCBa8m1OVxboA.png"></p><p>å…¶ä½™åœ¨ pulsar-client-go ä¸­ä¸»è¦æ˜¯åŒæ­¥äº†ä¸€äº› java-client çš„ feature è¿‡æ¥ï¼Œä»¥åŠä¿®å¤ä¸€äº› bugã€‚</p><hr><h3 id="Apache-HertzBeat"><a href="#Apache-HertzBeat" class="headerlink" title="Apache HertzBeat"></a>Apache HertzBeat</h3><p><img src="https://s2.loli.net/2025/03/05/ACvfe5dnRPhN1lp.png"></p><p>é™¤æ­¤ä¹‹å¤–åœ¨ç©ºä½™æ—¶é—´æˆ‘è¿˜å‚ä¸äº† Apache HertzBeat é¡¹ç›®ï¼ˆä¸€ä¸ªå¼€æºçš„å®æ—¶ç›‘æ§é¡¹ç›®ï¼‰ï¼Œå½“æ—¶é¡¹ç›®åˆšè¿›å…¥ Apache å­µåŒ–å™¨ä¸ä¹…ï¼Œæˆ‘ä¸»è¦æ˜¯å¸®åŠ©å®Œå–„äº†ä¸€äº›å•å…ƒæµ‹è¯•ã€ä¼˜åŒ–äº† CI æµç¨‹ã€ä»£ç  checkstyle ç­‰å·¥ä½œã€‚<br>åæ¥ç”±äºæ—¶é—´é™åˆ¶å‚ä¸çš„ä¸å¤šäº†ï¼Œä½†ä¹Ÿåœ¨ä¸€ç›´æœ‰åœ¨å…³æ³¨ç€ã€‚</p><h3 id="OpenTelemetry"><a href="#OpenTelemetry" class="headerlink" title="OpenTelemetry"></a>OpenTelemetry</h3><p><img src="https://s2.loli.net/2025/03/06/pg3Be5s7A91GKLh.png"></p><p>å»å¹´å¹´ä¸­çš„æ—¶å€™ç”±äºå…¬å¸å¯è§‚æµ‹çš„æŠ€æœ¯æ ˆå…¨é¢è¿ç§»åˆ° OpenTelemetryï¼Œæ‰€ä»¥ä¹ŸèŠ±äº†ä¸€äº›æ—¶é—´å­¦ä¹ å¹¶ä½¿ç”¨å®ƒï¼Œå¹¶ç»“åˆæˆ‘ä»¬çš„åœºæ™¯ç»™ç¤¾åŒºæäº†ä¸€äº› PR.</p><ul><li>Instrumentation<ul><li>Pulsar ç›¸å…³çš„ metrics åŸ‹ç‚¹ï¼š <a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/11591">https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/11591</a></li><li>æ”¯æŒ PowerJob: <a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/12086">https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/12086</a></li></ul></li><li>Operator<ul><li>Operator æ”¯æŒéƒ¨ç½² java extensions: <a href="https://github.com/open-telemetry/opentelemetry-operator/pull/2761">https://github.com/open-telemetry/opentelemetry-operator/pull/2761</a></li></ul></li><li>Convention:<ul><li>å®Œå–„äº† RPC çš„ä¸€äº›è¯­ä¹‰: <a href="https://github.com/open-telemetry/semantic-conventions/pull/1281">https://github.com/open-telemetry/semantic-conventions/pull/1281</a></li><li>è¡¥å…¨äº† Pulsar çš„ä¸€äº›è¯­ä¹‰ï¼š <a href="https://github.com/open-telemetry/semantic-conventions/pull/1099">https://github.com/open-telemetry/semantic-conventions/pull/1099</a></li></ul></li></ul><p>æœ¬æ¥å‡†å¤‡ä¸‹åŠå¹´å†æ¥å†å‰å¤šè´¡çŒ®ä¸€äº›ï¼Œäº‰å–æˆä¸º Memberï¼Œç»“æœå› ä¸ºæŠŠé‡å¿ƒåˆ‡åˆ° Starrocks ä¹‹åè¿™è¾¹æš‚æ—¶å°±æ²¡åœ¨è·Ÿè¿›äº†ï¼Œä»Šå¹´ä¹Ÿè®¸ä¼šé‡å¯æ›´æ–°ã€‚</p><h3 id="StarRocks"><a href="#StarRocks" class="headerlink" title="StarRocks"></a>StarRocks</h3><p>è¿™ä¹Ÿæ˜¯å»å¹´ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°çš„æŠ€æœ¯æ ˆï¼Œå’Œå¤§éƒ¨åˆ†ä¸šåŠ¡å¼€å‘ä¸€æ ·ï¼Œä»¥å‰é¡¶å¤šæ¥è§¦è¿‡å…³ç³»å‹æ•°æ®åº“ï¼Œå¯¹è¿™ç±»å¤§æ•°æ®äº§å“æ¥è§¦å¾ˆå°‘ã€‚</p><p>ç¬¬ä¸€æ¬¡å‚ä¸æ˜¯é¢†å¯¼è®©æˆ‘çœ‹çœ‹èƒ½å¦ç»™å®ƒçš„ç‰©åŒ–è§†å›¾åŠ ä¸€ä¸ªå‚æ•°ï¼Œå¥½åœ¨æˆ‘è¦ä¿®æ”¹çš„éƒ¨åˆ†ï¼ˆFrontEnd)éƒ½æ˜¯ Java å†™çš„ï¼ˆBackEnd æ˜¯ cpp å†™çš„ï¼‰ï¼Œè‡³å°‘ä»£ç çœ‹èµ·æ¥æ— å‹åŠ›ã€‚</p><p><img src="https://s2.loli.net/2025/03/06/T61ny2uMZNk9Rxt.png"></p><p>æ‰€ä»¥å°±èŠ±äº†ä¸€äº›æ—¶é—´æ¥ä»å¤´ç ”ç©¶ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ä¹Ÿç»™ç¤¾åŒºæäº¤äº†ä¸€äº› feature å’Œä¿®å¤äº† bugï¼Œä¸»è¦éƒ½æ˜¯å’Œç‰©åŒ–è§†å›¾ç›¸å…³çš„å†…å®¹ã€‚</p><blockquote><p>è¿™é‡Œä¹Ÿé¢å¤–æä¸€ä¸‹ï¼šå³ä¾¿æ˜¯å¯¹æ¯«ä¸ç†Ÿæ‚‰çš„é¡¹ç›®ï¼Œå“ªæ€•çœ‹èµ·æ¥æ˜¯æ•°æ®åº“è¿™ç§æ¯”è¾ƒå¤æ‚çš„æŠ€æœ¯æ ˆï¼Œåªè¦èƒ½çœ‹æ‡‚ä»£ç ã€å¤ç°é—®é¢˜ï¼Œé‚£å°±éƒ½å¯ä»¥è§£å†³ï¼Œé¦–å…ˆå¿ƒç†ä¸Šå°±ä¸è¦å®³æ€•ã€‚</p></blockquote><h1 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h1><p><img src="https://s2.loli.net/2025/03/06/mVY5wcBpy7zJtux.png"></p><p>æœ€åå†çœ‹çœ‹å»å¹´çš„ç›®æ ‡ï¼Œå®Œæˆç‡ä¸è¯´ 100% å§ï¼Œ80% è¿˜æ˜¯æœ‰çš„ï¼Œä»Šå¹´ç›®æ ‡çœ‹æ¥è¦å†å®šé«˜ä¸€äº›äº†ï¼š</p><ul><li>å§æ¨ PR 85kg</li><li>ä½“è„‚è¾¾åˆ°ä¸€æ¬¡ 13%</li><li>å›½å†…æ¸¸ä¸€æ¬¡</li><li>å†å®Œæˆä¸€ä¸ªå¼€æºç¤¾åŒºçš„ Member</li></ul><p>å¥½äº†ï¼Œæµæ°´è´¦è®°å®Œäº†ï¼Œä»Šå¹´ä¹Ÿè¦æŠ“ç´§å¼€å§‹æ¬ç –äº†ï¼Œå’±ä»¬æ˜å¹´å†è§ã€‚</p><h2 id="å¾€å¹´è®°å½•"><a href="#å¾€å¹´è®°å½•" class="headerlink" title="å¾€å¹´è®°å½•"></a>å¾€å¹´è®°å½•</h2><ul><li><p><a href="https://crossoverjie.top/2023/01/18/annual-summary/2023/">2023</a></p></li><li><p><a href="https://crossoverjie.top/2023/01/18/annual-summary/2022/">2022</a></p></li><li><p><a href="https://crossoverjie.top/2022/01/27/annual-summary/2021/">2021</a></p></li><li><p><a href="https://crossoverjie.top/2021/03/02/annual-summary/2020/">2020</a></p></li><li><p><a href="https://crossoverjie.top/2019/12/30/annual-summary/2019/">2019</a></p></li><li><p><a href="https://crossoverjie.top/2018/12/30/annual-summary/2018/">2018</a></p></li><li><p><a href="https://crossoverjie.top/2018/12/30/annual-summary/2018/">2016</a></p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™äº›å¹´æˆ‘ä¸€ç›´éƒ½æ˜¯æŒ‰ç…§å†œå†æ–°å¹´æ¥å†™å¹´ç»ˆæ€»ç»“çš„ï¼Œéƒ½è¯´ä¸å‡ºæ­£æœˆéƒ½æ˜¯å¹´ï¼Œå‰äº›å¹´ä¸€ç›´éƒ½æ¯”è¾ƒè§„å¾‹ï¼Œä»Šå¹´ç¡®å®æ˜¯æ—¶é—´è¶…äº†ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦åŸå› è¿˜æ˜¯å¹´æœ«æ¥äº†ä¸ªæ´»ï¼Œéœ€è¦åœ¨å¹´åˆä¸Šçº¿ï¼Œå¯¼è‡´è¿™æ®µæ—¶é—´éƒ½æ²¡å¤ªå¤šæ—¶é—´å†™å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘äº‹æƒ…ç»ˆäºå‘Šä¸€æ®µè½åæ‰å¼€å§‹ç å­—ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
  <entry>
    <title>StarRocks å¼€å‘ç¯å¢ƒæ­å»ºè¸©å‘æŒ‡åŒ—ä¹‹å­˜ç®—åˆ†ç¦»ç¯‡</title>
    <link href="http://crossoverjie.top/2025/01/20/ob/StarRocks-dev-shard-data-build/"/>
    <id>http://crossoverjie.top/2025/01/20/ob/StarRocks-dev-shard-data-build/</id>
    <published>2025-01-20T17:56:51.000Z</published>
    <updated>2025-12-29T08:38:08.176Z</updated>
    
    <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´ç¢°åˆ°ä¸€ä¸ª StarRocks ç‰©åŒ–è§†å›¾çš„ <a href="https://github.com/StarRocks/starrocks/issues/55301">bug</a>: <a href="https://github.com/StarRocks/starrocks/issues/55301">https://github.com/StarRocks/starrocks/issues/55301</a></p><p>ä½†æ˜¯è¿™ä¸ªé—®é¢˜åªèƒ½åœ¨å­˜ç®—åˆ†ç¦»çš„åœºæ™¯ä¸‹æ‰èƒ½å¤ç°ï¼Œä¸ºäº†æ‰¾åˆ°é—®é¢˜åŸå› æˆ‘ä¾¿å°è¯•åœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªå¯ä»¥ Debug çš„å­˜ç®—åˆ†ç¦»ç‰ˆæœ¬ã€‚</p><p>ä¹‹å‰ä¹Ÿåˆ†äº«è¿‡åœ¨<a href="https://crossoverjie.top/2024/10/09/ob/StarRocks-dev-env-build/">æœ¬åœ° Debug StarRocks</a>ï¼Œä¸è¿‡é‚£æ˜¯å­˜ç®—ä¸€ä½“çš„ç‰ˆæœ¬ï¼Œè€Œå­˜ç®—åˆ†ç¦»ç¨å¾®è¦å¤æ‚ä¸€äº›ã€‚</p><blockquote><p>è¿™é‡Œæåˆ°çš„æœ¬åœ° Debug ä¸»è¦æ˜¯æŒ‡å¯ä»¥è°ƒè¯• FEï¼Œè€Œ CN&#x2F;BE åˆ™æ˜¯è¿è¡Œåœ¨å®¹å™¨ç¯å¢ƒï¼Œé¿å…æœ¬åœ°æ‰“åŒ…å’Œæ„å»ºè¿è¡Œç¯å¢ƒã€‚</p></blockquote><hr><span id="more"></span><p>å½“å‰ StarRocks ä»¥ä¸‹çš„å­˜ç®—åˆ†ç¦»éƒ¨ç½²æ–¹å¼ï¼Œåœ¨æœ¬åœ°æ¨èç›´æ¥ä½¿ç”¨ <code>MinIO</code> éƒ¨ç½²ã€‚</p><p><img src="https://s2.loli.net/2025/02/14/pTWsfE6XUxuCeiL.png"></p><h2 id="å¯åŠ¨-MinIO"><a href="#å¯åŠ¨-MinIO" class="headerlink" title="å¯åŠ¨ MinIO"></a>å¯åŠ¨ MinIO</h2><p>é¦–å…ˆç¬¬ä¸€æ­¥å¯åŠ¨ MinIO:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d --rm --name minio \<br>  -e MINIO_ROOT_USER=miniouser \<br>  -e MINIO_ROOT_PASSWORD=miniopassword \<br>  -p 9001:9001 \<br>  -p 9000:9000 \<br>  --entrypoint sh \<br>  minio/minio:latest \<br>  -c &#x27;mkdir -p /minio_data/starrocks &amp;&amp; minio server /minio_data --console-address &quot;:9001&quot;&#x27;<br></code></pre></td></tr></table></figure><p>è¿›å…¥ MinIO å®¹å™¨è®¾ç½® access token:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it minio sh<br>mc alias set myminio http://10.0.9.20:9000 miniouser miniopassword; mc admin user svcacct add --access-key AAAAAAAAAAAAAAAAAAAA --secret-key BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB myminio miniouser<br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨-cn"><a href="#å¯åŠ¨-cn" class="headerlink" title="å¯åŠ¨ cn:"></a>å¯åŠ¨ cn:</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -p 9060:9060 -p 8040:8040 -p 9050:9050 -p 8060:8060 -p 9070:9070 -itd --rm --name cn -e &quot;TZ=Asia/Shanghai&quot; starrocks/cn-ubuntu:3.4-latest<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>cn.conf</code> :</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cd</span> <span class="hljs-keyword">cn</span>/config/<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;priority_networks = 10.0.9.20/24&quot;</span> &gt;&gt; <span class="hljs-keyword">cn</span>.properties<br></code></pre></td></tr></table></figure><p> ä½¿ç”¨è„šæœ¬æ‰‹åŠ¨å¯åŠ¨ cn:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bin/start_cn.sh --daemon<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ä»¥ä¸‹é…ç½®åœ¨æœ¬åœ° IDEA ä¸­å¯åŠ¨ FE:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">LOG_DIR</span> = <span class="hljs-string">$&#123;STARROCKS_HOME&#125;/log  </span><br>  <br><span class="hljs-attr">DATE</span> = <span class="hljs-string">&quot;$(date +%Y%m%d-%H%M%S)&quot;  </span><br>  <br><span class="hljs-attr">sys_log_level</span> = <span class="hljs-string">INFO  </span><br>  <br><span class="hljs-attr">http_port</span> = <span class="hljs-string">8030  </span><br><span class="hljs-attr">rpc_port</span> = <span class="hljs-string">9020  </span><br><span class="hljs-attr">query_port</span> = <span class="hljs-string">9030  </span><br><span class="hljs-attr">edit_log_port</span> = <span class="hljs-string">9010  </span><br><span class="hljs-attr">mysql_service_nio_enabled</span> = <span class="hljs-string">true  </span><br>  <br><span class="hljs-attr">run_mode</span> = <span class="hljs-string">shared_data  </span><br><span class="hljs-attr">cloud_native_storage_type</span> = <span class="hljs-string">S3  </span><br><span class="hljs-attr">aws_s3_endpoint</span> = <span class="hljs-string">10.0.9.20:9000  </span><br><span class="hljs-comment"># set the path in MinIO  </span><br><span class="hljs-attr">aws_s3_path</span> = <span class="hljs-string">starrocks  </span><br><span class="hljs-comment"># credentials for MinIO object read/write  </span><br><span class="hljs-comment"># è¿™é‡Œçš„ key ä¸ºåˆšæ‰è®¾ç½®çš„ access token</span><br><span class="hljs-attr">aws_s3_access_key</span> = <span class="hljs-string">AAAAAAAAAAAAAAAAAAAA  </span><br><span class="hljs-attr">aws_s3_secret_key</span> = <span class="hljs-string">BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB  </span><br><span class="hljs-attr">aws_s3_use_instance_profile</span> = <span class="hljs-string">false  </span><br><span class="hljs-attr">aws_s3_use_aws_sdk_default_behavior</span> = <span class="hljs-string">false  </span><br><span class="hljs-comment"># Set this to false if you do not want default  </span><br><span class="hljs-comment"># storage created in the object storage using  </span><br><span class="hljs-comment"># the details provided above  </span><br><span class="hljs-attr">enable_load_volume_from_conf</span> = <span class="hljs-string">true  </span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># æœ¬æœº IPï¼Œéœ€è¦ä¸ cn ä¸­çš„é…ç½®å¯¹é½</span><br><span class="hljs-attr">priority_networks</span> = <span class="hljs-string">10.0.9.20/24</span><br></code></pre></td></tr></table></figure><p>å¯åŠ¨ FE ä¹‹å‰æœ€å¥½å…ˆåˆ é™¤ <code>meta/.</code> ä¸‹çš„æ‰€æœ‰å…ƒæ•°æ®æ–‡ä»¶ç„¶åå†å¯åŠ¨ã€‚</p><h2 id="æ·»åŠ -CN-èŠ‚ç‚¹"><a href="#æ·»åŠ -CN-èŠ‚ç‚¹" class="headerlink" title="æ·»åŠ  CN èŠ‚ç‚¹"></a>æ·»åŠ  CN èŠ‚ç‚¹</h2><p>FE å¯åŠ¨æˆåŠŸä¹‹åè¿æ¥ä¸Š FEï¼Œç„¶åæ‰‹åŠ¨æ·»åŠ  CN èŠ‚ç‚¹ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-keyword">ADD</span> COMPUTE NODE &quot;127.0.0.1:9050&quot;;<br><span class="hljs-keyword">show</span> compute nodes;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/01/20/OBXjoYAqP6DhMKs.png"></p><p>ç„¶åå°±å¯ä»¥åˆ›å»ºå­˜ç®—åˆ†ç¦»çš„è¡¨äº†ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> par_tbl1<br>(<br>    datekey DATETIME,<br>    k1      <span class="hljs-type">INT</span>,<br>    item_id STRING,<br>    v2      <span class="hljs-type">INT</span><br>)<span class="hljs-keyword">PRIMARY KEY</span> (`datekey`,`k1`)<br> <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> date_trunc(<span class="hljs-string">&#x27;day&#x27;</span>, `datekey`)<br> PROPERTIES (<br>&quot;compression&quot; <span class="hljs-operator">=</span> &quot;LZ4&quot;,<br>&quot;datacache.enable&quot; <span class="hljs-operator">=</span> &quot;true&quot;,<br>&quot;enable_async_write_back&quot; <span class="hljs-operator">=</span> &quot;false&quot;,<br>&quot;enable_persistent_index&quot; <span class="hljs-operator">=</span> &quot;true&quot;,<br>&quot;persistent_index_type&quot; <span class="hljs-operator">=</span> &quot;LOCAL&quot;,<br>&quot;replication_num&quot; <span class="hljs-operator">=</span> &quot;1&quot;,<br>&quot;storage_volume&quot; <span class="hljs-operator">=</span> &quot;builtin_storage_volume&quot;<br>);<br></code></pre></td></tr></table></figure><p>æœ€ç»ˆå…¶å®æ˜¯å‚è€ƒå®˜æ–¹æä¾›çš„ docker-compose çš„ç¼–æ’æ–‡ä»¶è¿›è¡Œéƒ¨ç½²çš„ï¼š<br><a href="https://raw.githubusercontent.com/StarRocks/demo/master/documentation-samples/quickstart/docker-compose.yml">https://raw.githubusercontent.com/StarRocks/demo/master/documentation-samples/quickstart/docker-compose.yml</a></p><blockquote><p>å¦‚æœåªæ˜¯æƒ³åœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªå­˜ç®—åˆ†ç¦»çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ª docker compose.</p></blockquote><p>å…¶ä¸­æœ‰ä¸¤ä¸ªå‘éœ€è¦æ³¨æ„ï¼š</p><h2 id="åˆ›å»ºè¡¨è¶…æ—¶"><a href="#åˆ›å»ºè¡¨è¶…æ—¶" class="headerlink" title="åˆ›å»ºè¡¨è¶…æ—¶"></a>åˆ›å»ºè¡¨è¶…æ—¶</h2><p>å»ºè¡¨å‡ºç°è¶…æ—¶ï¼Œæç¤ºéœ€è¦é…ç½®æ—¶é—´:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">admin <span class="hljs-keyword">set</span> frontend config(&quot;tablet_create_timeout_second&quot;<span class="hljs-operator">=</span>&quot;50&quot;)<br></code></pre></td></tr></table></figure><p>é…ç½®ä¹Ÿä¸èƒ½è§£å†³é—®é¢˜ï¼Œä¾ç„¶ä¼šè¶…æ—¶ï¼Œå¯ä»¥çœ‹çœ‹æœ¬åœ°æ˜¯å¦æœ‰å¼€å¯ä»£ç†ï¼Œå°è¯•å…³é—­ä»£ç†è¯•è¯•çœ‹ã€‚</p><h2 id="unknown-compression-type-0-backend-id-x3D-10002"><a href="#unknown-compression-type-0-backend-id-x3D-10002" class="headerlink" title="unknown compression type(0) backend [id&#x3D;10002]"></a>unknown compression type(0) backend [id&#x3D;10002]</h2><p>ä¸æ”¯æŒçš„å‹ç¼©ç±»å‹ï¼šè¿™ä¸ªé—®é¢˜æˆ‘åœ¨ä½¿ç”¨ main åˆ†æ”¯çš„ FE ä¸æœ€æ–°çš„ <code>starrocks/cn-ubuntu:3.4-latest</code> çš„é•œåƒä¼šè§¦å‘ï¼Œå½“æˆ‘æŠŠ FE é™ä½åˆ°å…·ä½“åˆ° tag åˆ†æ”¯ï¼Œæ¯”å¦‚ 3.3.9 çš„æ—¶å€™å°±å¯ä»¥äº†ã€‚</p><p>å…·ä½“åŸå› å°±æ²¡æœ‰ç»†ç©¶äº†ï¼Œå¦‚æœè¦æœ¬åœ° debug ä½¿ç”¨æœ€æ–°çš„ tag ä¹Ÿèƒ½æ»¡è¶³è°ƒè¯•çš„éœ€æ±‚ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://github.com/StarRocks/starrocks/issues/55301">https://github.com/StarRocks/starrocks/issues/55301</a></li><li><a href="https://docs.starrocks.io/zh/docs/deployment/shared_data/minio/">https://docs.starrocks.io/zh/docs/deployment/shared_data/minio/</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰æ®µæ—¶é—´ç¢°åˆ°ä¸€ä¸ª StarRocks ç‰©åŒ–è§†å›¾çš„ &lt;a href=&quot;https://github.com/StarRocks/starrocks/issues/55301&quot;&gt;bug&lt;/a&gt;: &lt;a href=&quot;https://github.com/StarRocks/starrocks/issues/55301&quot;&gt;https://github.com/StarRocks/starrocks/issues/55301&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™ä¸ªé—®é¢˜åªèƒ½åœ¨å­˜ç®—åˆ†ç¦»çš„åœºæ™¯ä¸‹æ‰èƒ½å¤ç°ï¼Œä¸ºäº†æ‰¾åˆ°é—®é¢˜åŸå› æˆ‘ä¾¿å°è¯•åœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªå¯ä»¥ Debug çš„å­˜ç®—åˆ†ç¦»ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰ä¹Ÿåˆ†äº«è¿‡åœ¨&lt;a href=&quot;https://crossoverjie.top/2024/10/09/ob/StarRocks-dev-env-build/&quot;&gt;æœ¬åœ° Debug StarRocks&lt;/a&gt;ï¼Œä¸è¿‡é‚£æ˜¯å­˜ç®—ä¸€ä½“çš„ç‰ˆæœ¬ï¼Œè€Œå­˜ç®—åˆ†ç¦»ç¨å¾®è¦å¤æ‚ä¸€äº›ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œæåˆ°çš„æœ¬åœ° Debug ä¸»è¦æ˜¯æŒ‡å¯ä»¥è°ƒè¯• FEï¼Œè€Œ CN&amp;#x2F;BE åˆ™æ˜¯è¿è¡Œåœ¨å®¹å™¨ç¯å¢ƒï¼Œé¿å…æœ¬åœ°æ‰“åŒ…å’Œæ„å»ºè¿è¡Œç¯å¢ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="StarRocks" scheme="http://crossoverjie.top/categories/OB/StarRocks/"/>
    
    
    <category term="StarRocks" scheme="http://crossoverjie.top/tags/StarRocks/"/>
    
  </entry>
  
  <entry>
    <title>k8s äº‘åŸç”Ÿåº”ç”¨å¦‚ä½•æ¥å…¥ç›‘æ§</title>
    <link href="http://crossoverjie.top/2025/01/02/ob/k8s-monitor-pod/"/>
    <id>http://crossoverjie.top/2025/01/02/ob/k8s-monitor-pod/</id>
    <published>2025-01-02T14:00:50.000Z</published>
    <updated>2025-12-29T08:38:08.179Z</updated>
    
    <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´æœ‰æœ‹å‹é—®æˆ‘å¦‚ä½•åœ¨ kubernetes é‡Œæ­å»ºç›‘æ§ç³»ç»Ÿï¼Œæ°å¥½åœ¨å…¬å¸ä¹Ÿåœ¨ç»´æŠ¤å†…éƒ¨çš„å¯è§‚æµ‹å¹³å°ï¼Œæ­£å¥½å€Ÿè¿™ä¸ªæœºä¼šæ•´ç†ä¸‹ç›®å‰å¸¸è§çš„è‡ªå»ºç›‘æ§æ–¹æ¡ˆã€‚</p><p>ä¸€ä¸ªå®Œæ•´çš„ç›‘æ§ç³»ç»Ÿé€šå¸¸åŒ…å«ä»¥ä¸‹çš„å†…å®¹ï¼š</p><ul><li>æŒ‡æ ‡æš´éœ²ï¼šå°†ç³»ç»Ÿå†…éƒ¨éœ€è¦å…³æ³¨çš„æŒ‡æ ‡æš´éœ²å‡ºå»</li><li>æŒ‡æ ‡é‡‡é›†ï¼šæ”¶é›†å¹¶å­˜å‚¨æš´éœ²å‡ºæ¥çš„æŒ‡æ ‡</li><li>æŒ‡æ ‡å±•ç¤ºï¼šä»¥å„ç§å›¾è¡¨å±•ç¤ºå’Œåˆ†ææ”¶é›†åˆ°çš„æ•°æ®</li><li>ç›‘æ§å‘Šè­¦ï¼šå½“æŸäº›å…³é”®æŒ‡æ ‡åœ¨ä¸€å®šæ—¶é—´å‘¨æœŸå†…å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¯ä»¥åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜</li></ul><p><img src="https://s2.loli.net/2024/12/20/nAOS5E1YzWDoZyF.png" alt="image.png"></p><p>å¯¹äº k8s çš„ç›‘æ§é€šå¸¸åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>k8s è‡ªå¸¦çš„ç³»ç»Ÿç»„å»º</li><li>ä¸šåŠ¡ Pod æš´éœ²å‡ºæ¥çš„ç›‘æ§æŒ‡æ ‡</li></ul><span id="more"></span><h1 id="ç³»ç»Ÿç»„å»º"><a href="#ç³»ç»Ÿç»„å»º" class="headerlink" title="ç³»ç»Ÿç»„å»º"></a>ç³»ç»Ÿç»„å»º</h1><p>å¯¹äº kubernetes ç³»ç»Ÿç»„å»ºå¯ä»¥ç”± <code>cAdvisor</code> æä¾›ç›‘æ§èƒ½åŠ›ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªåŠŸèƒ½æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ Prometheus ä¸­é…ç½®ç›¸å…³çš„ä»»åŠ¡æŠ“å–å³å¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">nodeScrape/monitoring/cadvisor-scrape/0</span><br>  <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">30s</span><br>  <span class="hljs-attr">scrape_timeout:</span> <span class="hljs-string">15s</span><br>  <span class="hljs-attr">scheme:</span> <span class="hljs-string">https</span><br>  <span class="hljs-attr">bearer_token_file:</span> <span class="hljs-string">/var/run/secrets/kubernetes.io/serviceaccount/token</span><br>  <span class="hljs-attr">tls_config:</span><br>    <span class="hljs-attr">insecure_skip_verify:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">relabel_configs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_node_name</span>]<br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">node</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">action:</span> <span class="hljs-string">replace</span><br>    <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_node_name</span>]<br>    <span class="hljs-attr">separator:</span> <span class="hljs-string">;</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">__address__</span><br>    <span class="hljs-attr">regex:</span> <span class="hljs-string">(.*)</span><br>    <span class="hljs-attr">replacement:</span> <span class="hljs-string">kubernetes.default.svc:443</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">action:</span> <span class="hljs-string">replace</span><br>    <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_node_name</span>]<br>    <span class="hljs-attr">separator:</span> <span class="hljs-string">;</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">__metrics_path__</span><br>    <span class="hljs-attr">regex:</span> <span class="hljs-string">(.+)</span><br>    <span class="hljs-attr">replacement:</span> <span class="hljs-string">/api/v1/nodes/$&#123;1&#125;/proxy/metrics/cadvisor</span><br><br>  <span class="hljs-attr">kubernetes_sd_configs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">node</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/12/20/RhKZGp94sUTbvFa.png" alt="image.png"><br>è¿™æ ·çš„è¯å°±å¯ä»¥ç›‘æ§ k8s çš„å†…å­˜ã€CPU ä¹‹ç±»çš„æ•°æ®ã€‚</p><p>å…·ä½“æä¾›äº†å“ªäº›æŒ‡æ ‡å¯ä»¥å‚è€ƒè¿™é‡Œï¼š<br><a href="https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md#prometheus-container-metrics">https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md#prometheus-container-metrics</a></p><p>ä¹Ÿå¯ä»¥æ‰¾ä¸€äº›å¸¸ç”¨çš„ç›‘æ§é¢æ¿:<br><a href="https://grafana.com/grafana/dashboards/13077-kubernetes-monitoring-dashboard-kubelet-cadvisor-node-exporter/">https://grafana.com/grafana/dashboards/13077-kubernetes-monitoring-dashboard-kubelet-cadvisor-node-exporter/</a></p><p>k8s ä¸ä½†æä¾›äº† cAdvisor çš„æ•°æ®ï¼Œè¿˜æœ‰å…¶ä»–ç±»ä¼¼çš„ endpoint: <code>/metrics/resource &amp; /metrics/probes</code> </p><p>å…·ä½“æš´éœ²å‡ºæ¥çš„æŒ‡æ ‡å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<br><a href="https://kubernetes.io/docs/concepts/cluster-administration/system-metrics/">https://kubernetes.io/docs/concepts/cluster-administration/system-metrics/</a></p><h1 id="ä¸šåŠ¡æŒ‡æ ‡"><a href="#ä¸šåŠ¡æŒ‡æ ‡" class="headerlink" title="ä¸šåŠ¡æŒ‡æ ‡"></a>ä¸šåŠ¡æŒ‡æ ‡</h1><p>å¯¹äºä¸šåŠ¡åº”ç”¨æ¥è¯´ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯éœ€è¦å°†è‡ªå·±çš„æŒ‡æ ‡æš´éœ²å‡ºå»ï¼Œå¦‚æœæ˜¯ Java çš„è¯å¯ä»¥ä½¿ç”¨ Prometheus æä¾›çš„åº“ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- The client --&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>simpleclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.16.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  <br><span class="hljs-comment">&lt;!-- Hotspot JVM metrics--&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>simpleclient_hotspot<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.16.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p> å®ƒä¼šè‡ªåŠ¨å°† JVM ç›¸å…³çš„æŒ‡æ ‡æš´éœ²å‡ºå»ï¼Œå¦‚æœæ˜¯åœ¨ VM ä¸­çš„åº”ç”¨ï¼Œé‚£åªéœ€è¦ç®€å•çš„é…ç½®ä¸‹ <code>static_configs</code> å°±å¯ä»¥æŠ“å–æŒ‡æ ‡äº†ï¼š</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"> <span class="hljs-attr">scrape_configs:</span>  <br><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&#x27;springboot&#x27;</span>  <br><span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">10s</span>  <br><span class="hljs-attr">static_configs:</span>  <br><span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&#x27;localhost:8080&#x27;</span>] <span class="hljs-comment"># Spring Boot ip+port</span><br></code></pre></td></tr></table></figure><p>ä½†åœ¨ kubernetes ä¸­è¿™ä¸ª IP æ˜¯ä¸å›ºå®šçš„ï¼Œæ¯æ¬¡é‡å»ºåº”ç”¨çš„æ—¶å€™éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶æ¥åŠ¨æ€çš„æ‰¾åˆ° Pod çš„ IPã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&#x27;kubernetes-pods&#x27;</span><br>  <span class="hljs-attr">kubernetes_sd_configs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">pod</span><br>  <span class="hljs-attr">relabel_configs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_pod_annotation_prometheus_io_scrape</span>]<br>    <span class="hljs-attr">action:</span> <span class="hljs-string">keep</span><br>    <span class="hljs-attr">regex:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_pod_annotation_prometheus_io_path</span>]<br>    <span class="hljs-attr">action:</span> <span class="hljs-string">replace</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">__metrics_path__</span><br>    <span class="hljs-attr">regex:</span> <span class="hljs-string">(.+)</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__address__</span>, <span class="hljs-string">__meta_kubernetes_pod_annotation_prometheus_io_port</span>]<br>    <span class="hljs-attr">action:</span> <span class="hljs-string">replace</span><br>    <span class="hljs-attr">regex:</span> <span class="hljs-string">([^:]+)(?::\d+)?;(\d+)</span><br>    <span class="hljs-attr">replacement:</span> <span class="hljs-string">$1:$2</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">__address__</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">action:</span> <span class="hljs-string">labelmap</span><br>    <span class="hljs-attr">regex:</span> <span class="hljs-string">__meta_kubernetes_pod_label_(.+)</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_namespace</span>]<br>    <span class="hljs-attr">action:</span> <span class="hljs-string">replace</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">kubernetes_namespace</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_pod_label_component</span>]<br>    <span class="hljs-attr">action:</span> <span class="hljs-string">replace</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">job</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__meta_kubernetes_pod_name</span>]<br>    <span class="hljs-attr">action:</span> <span class="hljs-string">replace</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">kubernetes_pod_name</span><br></code></pre></td></tr></table></figure><p>Prometheus æä¾›äº†ä¸€ä¸ª <code>kubernetes_sd_configs</code> çš„æœåŠ¡å‘ç°æœºåˆ¶ï¼Œä»–ä¼šåœ¨ kubernetes ä¸­æŸ¥æ‰¾ Pod ä¸­æ˜¯å¦æœ‰é…ç½®ä»¥ä¸‹çš„æ³¨è§£ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">template:</span><br>  <span class="hljs-attr">metadata:</span><br>    <span class="hljs-attr">annotations:</span><br>      <span class="hljs-attr">prometheus.io/path:</span> <span class="hljs-string">/metrics</span><br>      <span class="hljs-attr">prometheus.io/port:</span> <span class="hljs-string">&quot;8082&quot;</span><br>      <span class="hljs-attr">prometheus.io/scrape:</span> <span class="hljs-string">&quot;true&quot;</span><br></code></pre></td></tr></table></figure><p>éƒ½é…ç½®æˆåŠŸåæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨ Prometheus çš„ç®¡ç†åå°æŸ¥çœ‹åˆ°å…·ä½“çš„æœåŠ¡ä¿¡æ¯ï¼š<br><img src="https://s2.loli.net/2024/12/23/9tZ3uJTpvQY278D.png" alt="image.png"><br>çŠ¶æ€æ˜¯ UP åˆ™è¡¨æ˜æŠ“å–æ•°æ®æˆåŠŸï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ Prometheus ä¸­æŸ¥è¯¢åˆ°æ•°æ®äº†ã€‚</p><p><img src="https://s2.loli.net/2024/12/23/rM7nDiWgTUmA8h3.png" alt="image.png"></p><p>Prometheus é™¤äº†æ”¯æŒ k8s çš„æœåŠ¡å‘ç°ä¹‹å¤–è¿˜æ”¯æŒå„ç§å„æ ·çš„æœåŠ¡å‘ç°ï¼Œæ¯”å¦‚ä½ å·²ç»ä½¿ç”¨äº†  Consul æˆ–è€…æ˜¯ Erueka ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œä¹Ÿå¯ä»¥ç›´æ¥é…ç½®ä»–ä»¬çš„åœ°å€ç„¶åè¿›è¡ŒæœåŠ¡å‘ç°ï¼Œè¿™æ ·åº”ç”¨ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ Prometheus ä¹Ÿèƒ½åŠæ—¶æ„ŸçŸ¥åˆ°ã€‚</p><p>å½“ç„¶ <code>docker/http/docker</code> ç­‰éƒ½æ˜¯æ”¯æŒçš„ï¼Œå¯ä»¥æŒ‰éœ€é€‰æ‹©ã€‚</p><h2 id="OpenTelemetry"><a href="#OpenTelemetry" class="headerlink" title="OpenTelemetry"></a>OpenTelemetry</h2><p>éšç€è¿™ä¸¤å¹´å¯è§‚æµ‹æ€§æ ‡å‡†çš„å®Œå–„ï¼Œè®¸å¤šå‚å•†éƒ½åœ¨å¾€ <code>OpenTelemetry</code> ä¸Šè¿›è¡Œè¿ç§»ï¼Œæ¥å…¥ OpenTelemetry ä¸ç›´æ¥ä½¿ç”¨ Prometheus æœ€å¤§çš„ä¸åŒæ˜¯ï¼š</p><blockquote><p>ä¸å†ç”± Prometheus ä¸»åŠ¨æŠ“å–åº”ç”¨æŒ‡æ ‡ï¼Œè€Œæ˜¯ç”±åº”ç”¨ç»™ <code>OpenTelemetry-Collector</code> æ¨é€æ ‡å‡†åŒ–çš„å¯è§‚æµ‹æ•°æ®ï¼ˆåŒ…å«æ—¥å¿—ã€traceã€æŒ‡æ ‡ï¼‰ï¼Œå†ç”±å®ƒè¿œç¨‹å†™å…¥ Prometheus è¿™ç±»æ—¶åºæ•°æ®åº“ä¸­ã€‚</p></blockquote><p>æ•´ä½“æµç¨‹å›¾å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2024/07/22/oUPjd4KlX7niBaI.png" alt="image.png"></p><p>å¯¹åº”ç”¨çš„æœ€å¤§çš„åŒºåˆ«å°±æ˜¯å¯ä»¥ä¸å†ä½¿ç”¨åˆšæ‰æåˆ° Prometheus ä¾èµ–ï¼Œè€Œæ˜¯åªéœ€è¦æŒ‚è½½ä¸€ä¸ª javaagent å³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -javaagent:opentelemetry-javaagent-2.4.0-SNAPSHOT.jar \  <br>-Dotel.traces.exporter=otlp \  <br>-Dotel.metrics.exporter=otlp \  <br>-Dotel.logs.exporter=none \  <br>-Dotel.service.name=java-demo \  <br>-Dotel.exporter.otlp.protocol=grpc \  <br>-Dotel.propagators=tracecontext,baggage \  <br>-Dotel.exporter.otlp.endpoint=http://127.0.0.1:5317 -jar target/demo-0.0.1-SNAPSHOT.jar<br></code></pre></td></tr></table></figure><p>è€Œå…¶ä¸­ä¼šæ–°å¢çš„ä¸€ä¸ª <code>OpenTelemetry-Collector</code>é¡¹ç›®ï¼Œç”±å®ƒå°†æ”¶åˆ°çš„æŒ‡æ ‡æ•°æ®è½¬å‘ç»™ Prometheusï¼Œæ‰€ä»¥åœ¨å®ƒçš„é…ç½®é‡Œä¼šé…ç½® Prometheus çš„åœ°å€ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">exporters:</span><br>  <span class="hljs-attr">otlphttp/prometheus:</span><br>    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">http://prometheus:9292/api/v1/otlp</span><br>    <span class="hljs-attr">tls:</span><br>      <span class="hljs-attr">insecure:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>ä¹‹å‰ä¹Ÿå†™è¿‡ä¸¤ç¯‡ <code>OpenTelemetry</code> å’Œç›‘æ§ç›¸å…³çš„æ–‡ç« ï¼Œå¯ä»¥ä¸€èµ·é˜…è¯»ä½“éªŒæ›´ä½³ï¼š</p><ul><li><a href="https://crossoverjie.top/2024/06/13/ob/OpenTelemetry-metrics-concept/">ä» Prometheus åˆ° OpenTelemetryï¼šæŒ‡æ ‡ç›‘æ§çš„æ¼”è¿›ä¸å®è·µ</a></li><li><a href="https://crossoverjie.top/2024/08/27/ob/OpenTelemetry-02-metrics/">OpenTelemetry å®æˆ˜ï¼šä»é›¶å®ç°åº”ç”¨æŒ‡æ ‡ç›‘æ§</a></li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…³äº Prometheus çš„å®‰è£…å¯ä»¥å‚è€ƒå®˜æ–¹çš„ operator æˆ–è€…æ˜¯ helmï¼š<br><a href="https://github.com/prometheus-operator/kube-prometheus">https://github.com/prometheus-operator/kube-prometheus</a></p><p>å½“ç„¶å¦‚æœä¸æƒ³ä½¿ç”¨ Prometheus ä¹Ÿæ¨èä½¿ç”¨ <a href="https://victoriametrics.com/">VictoriaMetrics</a>ï¼Œæ˜¯ä¸€ä¸ªå®Œå…¨å…¼å®¹ Prometheus ä½†æ˜¯èµ„æºå ç”¨æ›´å°‘çš„æ—¶åºæ•°æ®åº“ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://kubernetes.io/docs/concepts/cluster-administration/system-metrics/">https://kubernetes.io/docs/concepts/cluster-administration/system-metrics/</a></li><li><a href="https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md">https://github.com/google/cadvisor/blob/master/docs/storage/prometheus.md</a></li><li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/">https://prometheus.io/docs/prometheus/latest/configuration/configuration/</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰æ®µæ—¶é—´æœ‰æœ‹å‹é—®æˆ‘å¦‚ä½•åœ¨ kubernetes é‡Œæ­å»ºç›‘æ§ç³»ç»Ÿï¼Œæ°å¥½åœ¨å…¬å¸ä¹Ÿåœ¨ç»´æŠ¤å†…éƒ¨çš„å¯è§‚æµ‹å¹³å°ï¼Œæ­£å¥½å€Ÿè¿™ä¸ªæœºä¼šæ•´ç†ä¸‹ç›®å‰å¸¸è§çš„è‡ªå»ºç›‘æ§æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå®Œæ•´çš„ç›‘æ§ç³»ç»Ÿé€šå¸¸åŒ…å«ä»¥ä¸‹çš„å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡æ ‡æš´éœ²ï¼šå°†ç³»ç»Ÿå†…éƒ¨éœ€è¦å…³æ³¨çš„æŒ‡æ ‡æš´éœ²å‡ºå»&lt;/li&gt;
&lt;li&gt;æŒ‡æ ‡é‡‡é›†ï¼šæ”¶é›†å¹¶å­˜å‚¨æš´éœ²å‡ºæ¥çš„æŒ‡æ ‡&lt;/li&gt;
&lt;li&gt;æŒ‡æ ‡å±•ç¤ºï¼šä»¥å„ç§å›¾è¡¨å±•ç¤ºå’Œåˆ†ææ”¶é›†åˆ°çš„æ•°æ®&lt;/li&gt;
&lt;li&gt;ç›‘æ§å‘Šè­¦ï¼šå½“æŸäº›å…³é”®æŒ‡æ ‡åœ¨ä¸€å®šæ—¶é—´å‘¨æœŸå†…å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¯ä»¥åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2024/12/20/nAOS5E1YzWDoZyF.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äº k8s çš„ç›‘æ§é€šå¸¸åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;k8s è‡ªå¸¦çš„ç³»ç»Ÿç»„å»º&lt;/li&gt;
&lt;li&gt;ä¸šåŠ¡ Pod æš´éœ²å‡ºæ¥çš„ç›‘æ§æŒ‡æ ‡&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="kubernetes" scheme="http://crossoverjie.top/categories/OB/kubernetes/"/>
    
    
    <category term="kubernetes" scheme="http://crossoverjie.top/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Istio å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°çš„å‘</title>
    <link href="http://crossoverjie.top/2024/12/25/ob/istio-install-problem/"/>
    <id>http://crossoverjie.top/2024/12/25/ob/istio-install-problem/</id>
    <published>2024-12-25T13:48:35.000Z</published>
    <updated>2025-12-29T08:38:08.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…-Istio"><a href="#å®‰è£…-Istio" class="headerlink" title="å®‰è£… Istio"></a>å®‰è£… Istio</h1><p>æœ€è¿‘è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨åšæœåŠ¡ç½‘æ ¼ï¼ˆIstioï¼‰ç›¸å…³çš„å·¥ä½œï¼ŒèƒŒæ™¯æ˜¯æˆ‘ä»¬å‡†å¤‡è‡ªå»º Istioï¼Œé¦–å…ˆç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¦å®‰è£…ã€‚</p><p>æˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨å®˜ç½‘æ¨èçš„ <a href="https://istio.io/v1.18/docs/setup/install/istioctl">istioctl</a> è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF &gt; ./my-config.yaml</span><br><span class="hljs-string">apiVersion: install.istio.io/v1alpha1  </span><br><span class="hljs-string">kind: IstioOperator  </span><br><span class="hljs-string">metadata:  </span><br><span class="hljs-string">  namespace: istio-1-18-5  </span><br><span class="hljs-string">spec:  </span><br><span class="hljs-string">  profile: minimal  </span><br><span class="hljs-string">  revision: istio-1-18-5  </span><br><span class="hljs-string">  meshConfig:  </span><br><span class="hljs-string">    accessLogFile: /dev/stdout</span><br><span class="hljs-string">EOF</span><br>$ istioctl install -f my-config.yaml -n istio-1-18-5<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„ profile æ˜¯ minimalï¼Œå®ƒåªä¼šå®‰è£…æ ¸å¿ƒçš„æ§åˆ¶é¢ï¼Œå…·ä½“å·®å¼‚è§ä¸‹å›¾ï¼š<br><img src="https://s2.loli.net/2024/12/25/KBu5w4WjLU9zTH3.png" alt="image.png"></p><span id="more"></span><p>è¾“å‡ºä»¥ä¸‹å†…å®¹æ—¶ä»£è¡¨å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">This will install the Istio 1.18.5 minimal profile with [<span class="hljs-string">&quot;Istio core&quot;</span> <span class="hljs-string">&quot;Istiod&quot;</span>] components into the cluster. Proceed? (y/N) y<br>âœ” Istio core installed                                                                                                                                   <br>âœ” Istiod installed                                                                         <br>âœ” Installation complete  <br></code></pre></td></tr></table></figure><p>ä¹‹åæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨æŒ‡å®šçš„ <code>namespace</code> ä¸‹æŸ¥è¯¢åˆ°æ§åˆ¶é¢çš„ Podï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">k get pod -n istio-1-18-5<br>NAME                                   READY   STATUS    RESTARTS   AGE<br>istiod-istio-1-18-5-6cb9898585-64jtg   1/1     Running   0          22h<br></code></pre></td></tr></table></figure><p>ç„¶ååªéœ€è¦å°†éœ€è¦æ³¨å…¥ sidecar çš„ namespace ä¸­å¼€å¯ç›¸å…³çš„é…ç½®å³å¯ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°† test è¿™ä¸ª namespace å¼€å¯ sidecar æ³¨å…¥ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Namespace</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">istio.io/rev:</span> <span class="hljs-string">istio-1-18-5</span><br>    <span class="hljs-attr">kubernetes.io/metadata.name:</span> <span class="hljs-string">test</span><br></code></pre></td></tr></table></figure><p>æœ€ä¸»è¦çš„å°±æ˜¯åŠ ä¸Š <code>istio.io/rev: istio-1-18-5</code> çš„æ ‡ç­¾ï¼Œæ ‡ç­¾çš„å€¼å°±æ˜¯æˆ‘ä»¬åœ¨å®‰è£… istio æ—¶æŒ‡å®šçš„å€¼ï¼š<code>revision: istio-1-18-5</code>ã€‚</p><p>æ­¤æ—¶åªè¦æˆ‘ä»¬åœ¨è¿™ä¸ª namespace ä¸‹éƒ¨ç½²ä¸€ä¸ª Pod å°±ä¼šä¸ºè¿™ä¸ª Pod æŒ‚è½½ä¸€ä¸ª sidecarã€‚</p><p><img src="https://s2.loli.net/2024/12/25/Jdrx47cosVtqBv3.png" alt="image.png"></p><h1 id="æ›´æ–°é…ç½®çš„å‘"><a href="#æ›´æ–°é…ç½®çš„å‘" class="headerlink" title="æ›´æ–°é…ç½®çš„å‘"></a>æ›´æ–°é…ç½®çš„å‘</h1><p><img src="https://s2.loli.net/2024/12/25/WJjBgqIxCMN1Tz3.png" alt="image.png"><br><img src="https://s2.loli.net/2024/12/25/n4bQDHys9hMoR6c.png" alt="image.png"></p><p><a href="https://istio.io/latest/docs/ops/integrations/prometheus/#option-1-metrics-merging">é»˜è®¤æƒ…å†µ</a>ä¸‹ Istio ä¼šå°†åº”ç”¨ Pod çš„æš´éœ²å‡ºæ¥çš„ metrics å’Œ sidecar çš„æŒ‡æ ‡åˆå¹¶åœ¨ä¸€èµ·ï¼Œç„¶åæš´éœ²ä¸º <code>:15020/stats/prometheus</code> è¿™ä¸ª endpointã€‚</p><p>è€Œæˆ‘ä»¬è‡ªå·±åœ¨ Pod ä¸Šå®šä¹‰çš„æ³¨è§£åˆ™æ˜¯è¢«è¦†ç›–æ‰äº†ï¼š<br><img src="https://s2.loli.net/2024/12/25/vCpUEJgnTYI5rje.png" alt="image.png"></p><p>ä½†æˆ‘ä»¬æ˜¯å°†åº”ç”¨å’Œ sidecar çš„æŒ‡æ ‡åˆ†å¼€é‡‡é›†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è¿™ä¸ªè‡ªåŠ¨åˆå¹¶ã€‚</p><p><img src="https://s2.loli.net/2024/12/25/5bQ71OYxmkBFXh6.png"></p><blockquote><p>ä¼šå•ç‹¬é…ç½® 15090 ç«¯å£çš„é‡‡é›†ä»»åŠ¡</p></blockquote><p>æ‰€ä»¥æˆ‘éœ€è¦å°†è¿™ä¸ªåŠŸèƒ½å…³é—­ï¼Œå®‰è£…æ–‡æ¡£çš„è¯´æ˜åªéœ€è¦åœ¨æ§åˆ¶é¢ä¸­å°† <code>enablePrometheusMerge</code> ä¿®æ”¹ä¸º false å³å¯ã€‚</p><p>å®‰è£…å¥½ Istio æ§åˆ¶é¢ä¹‹åä¼šåˆ›å»ºä¸€ä¸ª IstioOperator çš„ CRD èµ„æºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">k get IstioOperator -A<br>NAMESPACE      NAME                           REVISION       STATUS   AGE<br>istio-1-18-5   installed-state-istio-1-18-5   istio-1-18-5            27h<br></code></pre></td></tr></table></figure><p>æ‰€æœ‰æ§åˆ¶é¢çš„é…ç½®éƒ½å¯ä»¥åœ¨è¿™é‡Œé¢ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘æƒ³å½“ç„¶çš„åœ¨è¿™é‡ŒåŠ å…¥äº† <code>enablePrometheusMerge: false</code> çš„é…ç½®ã€‚</p><p><img src="https://s2.loli.net/2024/12/25/bCdUxLRQDFEOI6j.png" alt="image.png"></p><p>åŠ ä¸Šä¹‹åæˆ‘é‡å¯äº† Pod å‘ç°ä¾ç„¶è¿˜æ˜¯ Istio çš„æ³¨è§£ï¼š</p><p><img src="https://s2.loli.net/2024/12/25/n4bQDHys9hMoR6c.png" alt="image.png"></p><p>ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªé…ç½®å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œå³ä¾¿æ˜¯æˆ‘æŠŠæ§åˆ¶é¢ä¹Ÿé‡å¯äº†ä¹Ÿæ²¡æœ‰æ•ˆæœã€‚</p><p>æŒ‰ç…§åŸç†æ¥è¯´ï¼Œè¿™äº›é…ç½®åº”è¯¥æ˜¯æ§åˆ¶é¢ä¸‹å‘ç»™æ•°æ®é¢çš„ï¼Œå¤§èƒ†çŒœæµ‹ä¸‹ä¹Ÿå°±æ˜¯æ§åˆ¶é¢æ²¡æœ‰æ‹¿åˆ°æœ€æ–°çš„é…ç½®ã€‚</p><p>ä½†æ˜¯æˆ‘å¸è½½æ§åˆ¶é¢ï¼Œå†å®‰è£…çš„æ—¶å€™å°±æŒ‡å®šè¿™ä¸ªé…ç½®ç¡®æ˜¯ç”Ÿæ•ˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´é…ç½®æ²¡é—®é¢˜ï¼Œåªæ˜¯æˆ‘åœ¨å®‰è£…å®Œæˆåå†ä¿®æ”¹å°±æ²¡æ³•åŒæ­¥ã€‚</p><p>ä¹‹åæˆ‘åœ¨ <a href="https://stackoverflow.com/questions/70076326/how-to-update-istio-configuration-after-installation">stackoverflow</a> ä¸Šæ‰¾åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼š<br><img src="https://s2.loli.net/2024/12/25/SybMZeG6fc1pjhd.png" alt="image.png"></p><p>ç®€å•æ¥è¯´å®‰è£…å¥½ istio ä¹‹åæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨ <code>istioctl install -f xx.yaml</code> è¿›è¡Œæ›´æ–°ã€‚</p><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>åæ¥æˆ‘ä»”ç»†çœ‹äº†ä¸‹ istioctl è¿™ä¸ªå‘½ä»¤çš„ help æ–‡æ¡£ï¼Œå‘ç°å…¶å®å·²ç»åœ¨æè¿°é‡Œå†™æ¸…æ¥šäº†ï¼š<br><img src="https://s2.loli.net/2024/12/26/rv9nkiIO6wgbj5s.png" alt="image.png"><br>ç”šè‡³è¿˜æœ‰ä¸ªåˆ«åå°±å« <code>apply</code> è¿™å°±å’Œ <code>kubectl apply</code> çš„å‘½ä»¤éå¸¸ç±»ä¼¼äº†ï¼Œä¹Ÿæ›´å®¹æ˜“ç†è§£äº†ï¼Œä»»ä½•çš„ä¿®æ”¹åªéœ€è¦ <code>apply</code> æ‰§è¡Œä¸€æ¬¡å°±å¯ä»¥äº†ã€‚</p><p>ä¸è¿‡æˆ‘ä¹Ÿåœ¨å¥½å¥‡ï¼Œæ—¢ç„¶åˆ›å»ºçš„æ˜¯ä¸€ä¸ª <code>IstioOperator</code> çš„ CRDï¼Œç†è®ºä¸Šæ˜¯éœ€è¦ä¸€ä¸ª Operator æ¥è¯»å–è¿™é‡Œçš„æ•°æ®ç„¶åå†åˆ›å»ºä¸€ä¸ªæ§åˆ¶é¢ï¼ŒåŒæ­¥é…ç½®ä¹‹ç±»çš„æ“ä½œã€‚</p><p>ä½†å½“æˆ‘å®‰è£…å¥½ Istio ä¹‹åå¹¶æ²¡çœ‹åˆ°æœ‰ä¸€ä¸ª Operator çš„ Pod åœ¨è¿è¡Œï¼Œæ‰€ä»¥å°±æ¯”è¾ƒå¥½å¥‡ <code>install</code> è¿™ä¸ªå‘½ä»¤æ˜¯å¦‚ä½•å®ç°é…ç½®åŒæ­¥çš„ã€‚</p><p>ç»è¿‡å¯¹ <code>istioctl</code> çš„ debug æ‰¾åˆ°äº†å…·ä½“çš„åŸå› ï¼š</p><p><img src="https://s2.loli.net/2024/12/26/2bWSIDsf5gXdkHt.png" alt="WeChatWorkScreenshot_bab3706b-2815-46a6-961e-408439b81841.png"><br><img src="https://s2.loli.net/2024/12/26/XNtGeqnvZiEomfc.png" alt="WeChatWorkScreenshot_8f421734-f1e7-4a07-a676-84300187485d.png"></p><p>åœ¨ <code>istioctl install -f xx.yaml</code> æ‰§è¡Œä¹‹åä¼šç›´æ¥è§£æ <code>xx.yaml</code> é‡Œçš„ <code>IstioOperator</code> ç”Ÿæˆæ‰€æœ‰çš„ <code>manifest</code> èµ„æºï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ª <code>ConfigMap</code>ï¼Œæ‰€æœ‰çš„é…ç½®éƒ½æ˜¯å­˜æ”¾åœ¨å…¶ä¸­çš„ã€‚</p><p>æ‰€ä»¥å…¶å®æˆ‘æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ª <code>ConfigMap</code> ä¹Ÿå¯ä»¥åŠ¨æ€æ›´æ–°æ§åˆ¶é¢çš„é…ç½®ï¼Œä¹‹å‰æˆ‘åªæ˜¯ä¿®æ”¹äº† CRDï¼Œæˆ‘ä»¥ä¸ºè¿˜æœ‰ä¸€ä¸ª Operator æ¥ç›‘å¬è¿™é‡Œçš„å˜åŒ–ç„¶ååŒæ­¥æ•°æ®ï¼›å®é™…ä¸Šå¹¶ä¸å­˜åœ¨è¿™ä¸ªé€»è¾‘ï¼Œè€Œæ˜¯ç›´æ¥åº”ç”¨çš„ <code>manifest</code>ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://istio.io/v1.18/docs/setup/install/istioctl">https://istio.io/v1.18/docs/setup/install/istioctl</a></li><li><a href="https://istio.io/latest/docs/ops/integrations/prometheus/#option-1-metrics-merging">https://istio.io/latest/docs/ops/integrations/prometheus/#option-1-metrics-merging</a></li><li><a href="https://stackoverflow.com/questions/70076326/how-to-update-istio-configuration-after-installation">https://stackoverflow.com/questions/70076326/how-to-update-istio-configuration-after-installation</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å®‰è£…-Istio&quot;&gt;&lt;a href=&quot;#å®‰è£…-Istio&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… Istio&quot;&gt;&lt;/a&gt;å®‰è£… Istio&lt;/h1&gt;&lt;p&gt;æœ€è¿‘è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨åšæœåŠ¡ç½‘æ ¼ï¼ˆIstioï¼‰ç›¸å…³çš„å·¥ä½œï¼ŒèƒŒæ™¯æ˜¯æˆ‘ä»¬å‡†å¤‡è‡ªå»º Istioï¼Œé¦–å…ˆç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¦å®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨å®˜ç½‘æ¨èçš„ &lt;a href=&quot;https://istio.io/v1.18/docs/setup/install/istioctl&quot;&gt;istioctl&lt;/a&gt; è¿›è¡Œå®‰è£…ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs bash&quot;&gt;$ &lt;span class=&quot;hljs-built_in&quot;&gt;cat&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class=&quot;hljs-string&quot;&gt;EOF &amp;gt; ./my-config.yaml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;apiVersion: install.istio.io/v1alpha1  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;kind: IstioOperator  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;metadata:  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;  namespace: istio-1-18-5  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;spec:  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;  profile: minimal  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;  revision: istio-1-18-5  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;  meshConfig:  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;    accessLogFile: /dev/stdout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-string&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;$ istioctl install -f my-config.yaml -n istio-1-18-5&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä½¿ç”¨çš„ profile æ˜¯ minimalï¼Œå®ƒåªä¼šå®‰è£…æ ¸å¿ƒçš„æ§åˆ¶é¢ï¼Œå…·ä½“å·®å¼‚è§ä¸‹å›¾ï¼š&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2024/12/25/KBu5w4WjLU9zTH3.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Istio" scheme="http://crossoverjie.top/categories/Istio/"/>
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/Istio/k8s/"/>
    
    
    <category term="Istio" scheme="http://crossoverjie.top/tags/Istio/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨å¹³æ·¡çš„å·¥ä½œä¸­æ•´ç†å‡ºæœ‰ä»·å€¼çš„ç®€å†</title>
    <link href="http://crossoverjie.top/2024/12/10/ob/%E5%A6%82%E4%BD%95%E5%9C%A8%E5%B9%B3%E6%B7%A1%E7%9A%84%E5%B7%A5%E4%BD%9C%E4%B8%AD%E6%95%B4%E7%90%86%E5%87%BA%E6%9C%89%E4%BB%B7%E5%80%BC%E7%9A%84%E7%AE%80%E5%8E%86/"/>
    <id>http://crossoverjie.top/2024/12/10/ob/%E5%A6%82%E4%BD%95%E5%9C%A8%E5%B9%B3%E6%B7%A1%E7%9A%84%E5%B7%A5%E4%BD%9C%E4%B8%AD%E6%95%B4%E7%90%86%E5%87%BA%E6%9C%89%E4%BB%B7%E5%80%BC%E7%9A%84%E7%AE%80%E5%8E%86/</id>
    <published>2024-12-10T15:07:10.000Z</published>
    <updated>2025-12-29T08:38:08.182Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ HackNews ä¸Šçœ‹åˆ°ä¸€ä¸ª<a href="https://news.ycombinator.com/item?id=41937892">å¸–å­</a>ï¼šä½ ä»¬æ˜¯å¦å¾ˆéš¾å›å¿†èµ·åœ¨å·¥ä½œä¸­åšäº†å“ªäº›è´¡çŒ®ï¼Ÿ</p><p><img src="https://s2.loli.net/2024/10/25/ItaHwFoWzG3ASZV.png"></p><p>æˆ‘è§‰å¾—æŒºå¤šäººéƒ½æœ‰ç±»ä¼¼çš„é—®é¢˜ï¼Œé€šå¸¸éƒ½æ˜¯åœ¨éœ€è¦é¢è¯•æˆ–è€…å†…éƒ¨æ™‹å‡çš„æ—¶å€™æ‰å¼€å§‹æ€è€ƒè¿™äº›é—®é¢˜ï¼Œè¿™æ—¶å€™åœ¨æƒ³çš„è¯éš¾å…ä¼šæœ‰é—æ¼ã€‚</p><p>ç»“åˆå¸–å­é‡Œçš„å›ç­”æˆ‘æ•´ç†äº†ä»¥ä¸‹ä»¥ä¸‹æ–¹æ³•ã€‚</p><span id="more"></span><h2 id="æ¯æ—¥è®°å½•"><a href="#æ¯æ—¥è®°å½•" class="headerlink" title="æ¯æ—¥è®°å½•"></a>æ¯æ—¥è®°å½•</h2><p>å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œæ¯æ—¥åšå¥½å·¥ä½œè®°å½•ï¼Œå‘¨æœ«å†åšä¸€æ¬¡æ±‡æ€»ï¼›<br>æœ‰éƒ¨åˆ†å…¬å¸åº”è¯¥å°±æœ‰ç±»ä¼¼çš„åˆ¶åº¦ï¼ˆæ—¥æŠ¥ã€å‘¨æŠ¥ï¼‰ï¼Œä½†é‚£æ˜¯å†™ç»™å…¬å¸çœ‹çš„ï¼Œè¿™æ˜¯å†™ç»™è‡ªå·±æ•´ç†çš„ï¼›<br>å¯¹è‡ªå·±æ¥è¯´åªéœ€è¦æ•´ç†æœ‰ç”¨çš„å†…å®¹ï¼Œå»æ‰é‚£äº›å·¥ä½œä¸­éœ€è¦çš„åºŸè¯ã€‚</p><p>è¿™é‡Œæ¨èå¯ä»¥ä½¿ç”¨ Obsidian çš„ daily æ’ä»¶ï¼Œæ¯å¤©ç‚¹å‡»ä¸€ä¸‹æ—¥å†å°±ä¼šç”Ÿæˆä¸€ä»½æ–‡æ¡£ï¼Œå‘¨æœ«çš„æ—¶å€™å†ç‚¹å‡»å°±ä¼šè‡ªåŠ¨å°†å‘¨ä¸€åˆ°å‘¨äº”çš„å†…å®¹è¿›è¡Œæ±‡æ€»ã€‚<br><img src="https://s2.loli.net/2024/10/25/vQVkq34zCsTMDZh.png"><br><img src="https://s2.loli.net/2024/10/25/RvtwnAP4DQmbYWz.png"><br><img src="https://s2.loli.net/2024/10/25/iCV5YKoyXOmxhsA.png"></p><blockquote><p>å»ºè®®æ˜¯åœ¨åšä¹‹å‰å°±è®°å½•ä¸‹æ¥ï¼Œè€Œä¸æ˜¯ç­‰åˆ°ä»Šå¤©ç»“æŸäº†å†è®°å½•ï¼Œæ­¤æ—¶è¦ä¹ˆä¸æƒ³è®°ï¼Œè¦ä¹ˆå·²ç»å¿˜äº†ã€‚<br>å‘¨æœ«æ±‡æ€»çš„æ—¶å€™å¯ä»¥æç‚¼ä¸‹ï¼Œå¦‚æœæ˜¯è¦å†™åˆ°ç®€å†é‡Œåº”è¯¥æ€ä¹ˆå†™ï¼Ÿ</p></blockquote><p>åŒæ ·çš„è§‚ç‚¹æˆ‘åœ¨æ’­å®¢<a href="https://www.xiaoyuzhoufm.com/episode/65954bca6d045a7f5e7a9286">ä»£ç ä¹‹å¤–</a>ä¸­ä¹Ÿæœ‰å¬åˆ°ï¼Œæ¯å¤©åœ¨ä¸‹ç­çš„æ—¶å€™è¿›è¡Œæ€»ç»“æœ‰ä»¥ä¸‹çš„å¥½å¤„ï¼š</p><ul><li>æ›´æœ‰ä»ªå¼æ„Ÿï¼Œåšå®Œè¿™ä¸ªåä¸€å¤©çš„å·¥ä½œå°±ç»“æŸäº†ã€‚</li><li>å¯ä»¥å­¦ä¼šå°†ä»»åŠ¡åˆ‡åˆ†ï¼Œæé«˜å¯¹å·¥ä½œçš„æŒæ§æ„Ÿã€‚</li><li>é•¿æœŸåšæŒä¸‹æ¥å¯ä»¥å¢å¼ºå¯¹ä»»åŠ¡å®Œæˆæ—¶é—´çš„å‡†ç¡®é¢„ä¼°ã€‚</li></ul><h2 id="Git-log-æ±‡æ€»"><a href="#Git-log-æ±‡æ€»" class="headerlink" title="Git log æ±‡æ€»"></a>Git log æ±‡æ€»</h2><p>è¿˜å¯ä»¥ä½¿ç”¨ <code>git log --author=&#39;&lt;Your Name&gt;</code> æ±‡æ€»ä½ å¯¹æäº¤è®°å½•ï¼Œç„¶åäº¤ç»™ AI å¸®æˆ‘ä»¬æ€»ç»“ï¼Œè¿™ä¸ªæ„Ÿè§‰æ›´é€‚åˆåšå·¥ä½œæ±‡æŠ¥ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git log --pretty=format:&quot;%h - %an, %ar : %s&quot; --author=&#x27;crossoverJie&#x27; | pbcopy<br></code></pre></td></tr></table></figure><p>åœ¨ macOS ä¸­å¯ä»¥ä½¿ç”¨ <code>pbcopy</code> å‘½ä»¤å°†è¾“å‡ºå†…å®¹å¤åˆ¶åˆ°ç²˜è´´æ¿ï¼Œç„¶åæˆ‘ä»¬åªéœ€è¦å¤åˆ¶åˆ° chatgpt ä¸­å°±å¯ä»¥å¸®æˆ‘ä»¬æç‚¼æ€»ç»“äº†ï¼ˆä½†è¿™é‡Œçš„å‰ææ˜¯è‡ªå·±çš„æ¯æ¬¡æäº¤éƒ½æ˜¯æœ‰æ„ä¹‰çš„å¤‡æ³¨ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git log --author=&quot;your_username&quot; --since=&quot;2024-01-01&quot; --until=&quot;2024-12-31&quot;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åŠ ä¸Šæ—¶é—´ç­›é€‰ï¼Œæ›´åŠ ç²¾ç¡®çš„ç»Ÿè®¡ã€‚</p><h2 id="å®šæ—¶æ›´æ–°ç®€å†"><a href="#å®šæ—¶æ›´æ–°ç®€å†" class="headerlink" title="å®šæ—¶æ›´æ–°ç®€å†"></a>å®šæ—¶æ›´æ–°ç®€å†</h2><p>æˆ‘ä¸ªäººæ˜¯å»ºè®®æ¯ä¸ªå­£åº¦éƒ½æ›´æ–°ä¸€ä¸‹è‡ªå·±çš„ç®€å†ï¼Œçœ‹çœ‹æœ‰å“ªäº›æ–°çš„ä¸œè¥¿å¯ä»¥å†™ä¸Šå»ï¼Œè¿™ä¹Ÿæ˜¯å›é¡¾è‡ªå·±è¿™æ®µæ—¶é—´å·¥ä½œçš„æœ‰æ•ˆæ‰‹æ®µï¼Œæ¯•ç«Ÿç®€å†å°±æ˜¯è¦ç»™äººçœ‹çš„ç¾åŒ–ç‰ˆè‡ªå·±ã€‚</p><p><img src="https://s2.loli.net/2024/10/25/BpqVocTehZbUFD6.png"><br>Â <br>è¿™ä¸ªå¸–å­è¿˜æœ‰æåˆ°é¢è¯•æ—¶ä¸è¦å®³æ€•å†™è‡ªå·±ä¸ç†Ÿçš„æŠ€æœ¯æ ˆï¼Œå³ä¾¿æ˜¯åªåœ¨è‡ªå·±çš„ä¸ªäººé¡¹ç›®ä¸­ä½¿ç”¨è¿‡ï¼ˆçœ‹æ¥å›½å¤–å’Œæˆ‘ä»¬ä¹Ÿç±»ä¼¼ï¼‰</p><p>è¿™ä¸ªæˆ‘è§‰å¾—å¾—æ˜¯é¢è¯•æƒ…å†µè€Œå®šï¼Œå¦‚æœåº”è˜çš„ 1~3 å¹´çš„åˆä¸­çº§å²—ä½ï¼Œä¹Ÿä¸æ˜¯å¤§å‚ï¼Œé‚£å¯ä»¥è¿™ä¹ˆå†™ï¼Œä½†å¯¹äºä¸šç•Œéƒ½çŸ¥é“çš„ä¸€äº›å¤§å‚ï¼ˆæ¯”å¦‚é˜¿é‡Œã€å­—èŠ‚ï¼‰è¿™äº›é¢è¯•å¤§æ¦‚ç‡ä¸ä¼šåªé—®è¡¨é¢é—®é¢˜ï¼ŒæŠ€æœ¯æ ˆå†™çš„è¶Šå¤šå¯¹è‡ªå·±ä¹Ÿè¶Šæ²¡æœ‰å¥½å¤„ã€‚</p><p>æœ¬è´¨ä¸Šå°±æ˜¯éœ€è¦å¤§å®¶å¤šæ€»ç»“ï¼Œå¤šå‚è€ƒã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://news.ycombinator.com/item?id=41937892">https://news.ycombinator.com/item?id=41937892</a></li><li><a href="https://www.xiaoyuzhoufm.com/episode/65954bca6d045a7f5e7a9286">https://www.xiaoyuzhoufm.com/episode/65954bca6d045a7f5e7a9286</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä»Šå¤©åœ¨ HackNews ä¸Šçœ‹åˆ°ä¸€ä¸ª&lt;a href=&quot;https://news.ycombinator.com/item?id=41937892&quot;&gt;å¸–å­&lt;/a&gt;ï¼šä½ ä»¬æ˜¯å¦å¾ˆéš¾å›å¿†èµ·åœ¨å·¥ä½œä¸­åšäº†å“ªäº›è´¡çŒ®ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2024/10/25/ItaHwFoWzG3ASZV.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘è§‰å¾—æŒºå¤šäººéƒ½æœ‰ç±»ä¼¼çš„é—®é¢˜ï¼Œé€šå¸¸éƒ½æ˜¯åœ¨éœ€è¦é¢è¯•æˆ–è€…å†…éƒ¨æ™‹å‡çš„æ—¶å€™æ‰å¼€å§‹æ€è€ƒè¿™äº›é—®é¢˜ï¼Œè¿™æ—¶å€™åœ¨æƒ³çš„è¯éš¾å…ä¼šæœ‰é—æ¼ã€‚&lt;/p&gt;
&lt;p&gt;ç»“åˆå¸–å­é‡Œçš„å›ç­”æˆ‘æ•´ç†äº†ä»¥ä¸‹ä»¥ä¸‹æ–¹æ³•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•é€‰æ‹©å¯ä»¥æé’±çš„æŠ€æœ¯æ ˆ</title>
    <link href="http://crossoverjie.top/2024/11/26/ob/%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E5%8F%AF%E4%BB%A5%E6%90%9E%E9%92%B1%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A0%88/"/>
    <id>http://crossoverjie.top/2024/11/26/ob/%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E5%8F%AF%E4%BB%A5%E6%90%9E%E9%92%B1%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A0%88/</id>
    <published>2024-11-26T22:50:58.000Z</published>
    <updated>2025-12-29T08:38:08.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¹‹å‰åœ¨å…¬å¸ä¸»è¦è´Ÿè´£å¯è§‚æµ‹æ€§å’Œ Pulsar æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³çš„å†…å®¹ï¼Œæœ€è¿‘ç³»ç»Ÿæ¯”è¾ƒç¨³å®šï¼Œåªéœ€è¦åšæ—¥å¸¸è¿ç»´ï¼Œæ‰€ä»¥å°±æŠ½å‡ºæ—¶é—´é€æ­¥åœ¨æ¥è§¦ OLAP ç›¸å…³çš„æŠ€æœ¯æ ˆã€‚</p><p>æˆ‘ä»¬ç”¨çš„æ˜¯ <a href="https://www.starrocks.io/">StarRocks</a>ï¼Œä¹Ÿæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ OLAP æ•°æ®åº“ï¼›åœ¨æ¥è§¦çš„è¿™æ®µæ—¶é—´ä»¥æ¥ï¼Œè®©æˆ‘è¶Šå‘æ„Ÿè§‰åˆ°é€‰å¯¹ä¸€ä¸ªé è°±çš„æŠ€æœ¯æ–¹å‘çš„é‡è¦æ€§ã€‚</p><span id="more"></span><p>è¿™é‡Œä»¥ <a href="https://pulsar.apache.org/">Pulsar</a> ä¸¾ä¾‹ï¼ŒPulsar ä¹Ÿæ˜¯ Apache çš„é¡¶çº§é¡¹ç›®ï¼Œæœ‰ä¸€å®šçš„æŠ€æœ¯é—¨æ§›ï¼ŒåŒæ—¶ä¹Ÿè§£å†³ä»¥å¾€æ¶ˆæ¯é˜Ÿåˆ—çš„ä¸€äº›é—®é¢˜ï¼ˆå¤šç§Ÿæˆ·ã€ä½å»¶è¿Ÿã€å­˜ç®—åˆ†ç¦»ç­‰ï¼‰ ä½†å¦‚æœæŠŠå®ƒä½œä¸ºä¸€ä¸ªå•†ä¸šäº§å“çš„è¯ï¼Œç›¸å¯¹æ¥è¯´ä»˜è´¹èƒ½åŠ›è¿˜ä¸å¤Ÿå¼ºã€‚</p><p>å…¶å®ä¹Ÿèƒ½æƒ³å¾—åˆ°ï¼Œå°±å•çº¯çš„æ¶ˆæ¯ä¸­é—´ä»¶åœ¨å¸‚åœºä¸Šèƒ½è®²çš„æ•…äº‹ä¸å¤šï¼Œå¯ä»¥å°†å®ƒèå…¥åˆ°å…¶ä»–çš„ç”Ÿæ€é‡Œï¼Œæ¯”å¦‚æ•°æ®å¤„ç†ã€ä¸šåŠ¡è§£è€¦ç­‰ï¼Œä½†æ€»å½’æ˜¯é…è§’ï¼Œæ²¡æœ‰å®ƒè™½ç„¶æ²¡é‚£ä¹ˆä¼˜é›…ï¼Œä½†ä¹Ÿå¯ä»¥ç©ã€‚</p><p>åŒç† OpenTelemetry ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œå®ƒç”¨äºå¯è§‚æµ‹æ€§ç³»ç»Ÿï¼Œä¸»è¦æ˜¯å°±æ˜¯æ‹¿æ¥æ’æŸ¥é—®é¢˜çš„ï¼Œå¯¹äºä¼ä¸šæ¥è¯´ä¹Ÿè°ˆä¸ä¸Šåˆšéœ€ã€‚</p><p>ä»–ä»¬ä¸¤ä¸ªéƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šå°å…¬å¸ä¸éœ€è¦ï¼ˆæˆ–è€…è‡ªå·±ç»´æŠ¤å¼€æºç‰ˆï¼Œé‡å°ä¹Ÿä¸å®¹æ˜“æš´éœ²é—®é¢˜ï¼‰ï¼Œå¤§å…¬å¸é€‰æ‹©å•ç‹¬çš„å›¢é˜Ÿè‡ªå·±ç»´æŠ¤ï¼Œå¸‚åœºè›‹ç³•è¾ƒå°ã€‚</p><p>å³ä¾¿æ˜¯éƒ¨åˆ†ä¸­å‚å¯èƒ½é€‰æ‹©è´­ä¹°äº‘æœåŠ¡ï¼Œä¸€èˆ¬ä¹Ÿä¼šé€‰æ‹©å’Œè‡ªå·±ç°æœ‰æŠ€æœ¯æ ˆé…å¥—çš„äº‘å‚å•†ï¼Œæ¯”å¦‚å·²ç»ç”¨äº†å¤§éƒ¨åˆ†é˜¿é‡Œäº‘çš„äº§å“ï¼Œè¿™ç§å‘¨è¾¹æœåŠ¡ä¹Ÿä¼šå°½å¯èƒ½çš„åœ¨é˜¿é‡Œäº‘ä¸Šé€‰æ‹©æ›¿ä»£æ–¹æ¡ˆï¼Œæ¯•ç«Ÿè¿™æ ·çš„é£é™©æ›´å°ï¼Œè€Œä¸”å›½å†…çš„äº§å“å¤§å¤šéƒ½å†™è¿˜ ALL INã€‚</p><blockquote><p>å¯èƒ½æ›´å¤šçš„è¿˜æ˜¯ä¸€äº›æ”¿ä¼ã€é‡‘èç­‰ä¸šåŠ¡ä¼šé€‰æ‹©è¿™äº›å¼€æºäº§å“çš„ä¼ä¸šç‰ˆï¼Œå¤§éƒ¨åˆ†å› ä¸ºéœ€è¦ç§æœ‰åŒ–éƒ¨ç½²ï¼Œä¸å¤ªæ–¹ä¾¿ç›´æ¥ä½¿ç”¨å…¬æœ‰äº‘ã€‚</p></blockquote><p>è€Œæ›´åˆšéœ€çš„å¾€å¾€éƒ½æ˜¯å’Œæ•°æ®ç›¸å…³çš„ï¼Œæ¯”å¦‚æ•°æ®åº“ã€MongoDBã€ElasticSearch ã€kubernetes ç­‰ï¼Œå¦‚æœæƒ³è¦æå‡ä¸‹éä¸šåŠ¡æ°´å¹³ï¼Œå€’æ˜¯å¯ä»¥æ·±å…¥ä¸€ä¸‹è¿™äº›æŠ€æœ¯æ ˆã€‚</p><h1 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h1><p>æ‹¿æ•°æ®åº“æ¥è¯´ï¼Œä»»ä½•å…¬å¸éƒ½éœ€è¦ï¼Œå³ä¾¿æ˜¯å°å…¬å¸ä¹Ÿä¸æ•¢åœ¨ç”Ÿäº§ç¯å¢ƒè‡ªå·±ç»´æŠ¤æ•°æ®åº“ï¼Œä¸€èˆ¬ä¹Ÿä¼šè´­ä¹°äº‘äº§å“ï¼Œæˆ–è€…æ˜¯æ‹›ä¸€ä¸ª DBAã€‚</p><p>åŒç†è¿˜æœ‰äº‘åŸç”Ÿç›¸å…³çš„åŸºç¡€æŠ€æœ¯æ ˆï¼Œæ¯”å¦‚ kubernetes ä»¥åŠå›´ç»•ç€ kubernetes å‘¨è¾¹çš„ç”Ÿæ€ã€‚</p><p>k8s ä½œä¸ºäº‘åŸç”Ÿçš„åŸºç¡€åº•åº§ï¼Œåªè¦æ¶‰åŠåˆ°ä¸Šäº‘å°±ç¦»ä¸å¼€å®ƒï¼Œä¸ç®¡å°å‚é€‰æ‹©äº‘æœåŠ¡è¿˜æ˜¯å¤§å‚è‡ªå·±æ‰˜ç®¡éƒ½å¾—éœ€è¦ç›¸å…³æŠ€èƒ½ã€‚</p><p>å³ä¾¿ä¸æ˜¯ç›´æ¥åš kubernetes å¼€å‘ä¹Ÿå¾—éœ€è¦äº†è§£ç›¸å…³çš„çŸ¥è¯†ï¼Œå¯¹è‡ªå·±ç†è§£æ•´ä¸ªç³»ç»Ÿæ˜¯å¦‚ä½•è¿è½¬çš„å¾ˆå¤§çš„å¸®åŠ©ã€‚</p><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¹Ÿæœ‰ä¸ªç®€å•çš„æ–¹æ³•ï¼šå°±æ˜¯çœ‹çœ‹ä½ ä»¬å…¬å¸ä¸ºå“ªäº›æœåŠ¡ä¹°å•ã€‚</p><p>ä»¥æˆ‘æœ€è¿‘æ¥è§¦åˆ°çš„ StarRocks ä¸ºä¾‹ï¼Œä¹Ÿæ˜¯å’Œæ•°æ®å¤„ç†ç›¸å…³çš„å…¬å¸ï¼Œä»–ä»¬åœ¨ç–«æƒ…æœŸé—´æˆç«‹çš„å•†ä¸šåŒ–å…¬å¸ï¼Œè¿™å‡ å¹´éä½†æ²¡å—åˆ°å½±å“åè€Œè¿˜åœ¨å¢é•¿ã€‚</p><p><img src="https://s2.loli.net/2024/10/10/26uepDnY1yPzBaV.png"></p><blockquote><p>çœ‹åˆ°ä»–ä»¬çš„æ‹›è˜è¿˜è›®æ´»è·ƒã€‚</p></blockquote><p>å³ä¾¿æ˜¯å‚å•†æ›´å€¾å‘äºé€‰æ‹©äº‘å‚å•†çš„æ•°æ®æœåŠ¡ï¼ŒStarRocks è¿™ç±»åŸå‚å…¬å¸æˆ–å¤šæˆ–å°‘ä¹Ÿä¼šå‚ä¸è¿›å»æä¾›ä¸€äº›æŠ€æœ¯æ”¯æŒã€‚</p><p>ä¸è¿‡å¯èƒ½æœ‰äººçš„ç¬¬ä¸€ååº”æ˜¯è¿™äº›äº§å“çš„æŠ€æœ¯é—¨æ§›è¾ƒé«˜ï¼Œä¸Šæ‰‹æ¯”è¾ƒå›°éš¾ï¼Œä½†å…¶å®è¿™äº›å¾€å¾€éƒ½æ˜¯è‡ªå·±ç»™è‡ªå·±ä¸Šçš„éš¾åº¦ã€‚</p><p>ä»¥æˆ‘æœ€è¿‘æäº¤çš„ä¸€ä¸ª PR æ¥è¯´:<br><a href="https://github.com/StarRocks/starrocks/pull/50926">https://github.com/StarRocks/starrocks/pull/50926</a></p><p>æˆ‘ä¹‹å‰æ ¹æœ¬å°±æ²¡æœ‰æ¥è§¦è¿‡ OLAP ç›¸å…³çš„å†…å®¹ï¼Œä½†åªè¦æœ‰åœºæ™¯ï¼Œå¯ä»¥åœ¨æœ¬åœ° debug å¤ç°ï¼Œä»»ä½•é—®é¢˜éƒ½å¾ˆå¥½è§£å†³ï¼Œå³ä¾¿æ˜¯è¿™æ˜¯ä½ ä¸ç†Ÿçš„æŠ€æœ¯æ ˆã€‚</p><p>æ¯”å¦‚ ES ä¹Ÿæ˜¯ Java å†™çš„ï¼Œå¦‚æœä½ ä»¬å…¬å¸ä¸ºå®ƒä»˜è´¹äº†ï¼Œé‚£ä¸å¦‚å¤šèŠ±æ—¶é—´ç ”ç©¶ä¸€ä¸‹ï¼Œä¸ä¸€å®šæ˜¯éœ€è¦æ”¹å®ƒçš„æ ¸å¿ƒé€»è¾‘ï¼Œä¸Šå±‚ä¹Ÿæœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥å‚ä¸çš„ã€‚</p><p>è€Œä¸€æ—¦æˆ‘ä»¬å¯¹è¿™äº›æŠ€æœ¯æ ˆç†Ÿæ‚‰ä¹‹åï¼Œä»Šååœ¨æ¢å·¥ä½œæ—¶å°±æœ‰ç€å…¶ä»–äººä¸å…·å¤‡çš„ä¼˜åŠ¿ï¼Œç”šè‡³å¯ä»¥åŠ å…¥è¿™äº›æŠ€æœ¯èƒŒåçš„å•†ä¸šå…¬å¸ã€‚</p><p>è€Œè¿™äº›å…¬å¸å¤§éƒ¨åˆ†éƒ½æ˜¯æ»¡è¶³å¼€å‘è€…çš„å–œå¥½ï¼šæ¯”å¦‚è¿œç¨‹åŠå…¬ã€æŠ€æœ¯é©±åŠ¨ç­‰ï¼Œå¤§å®¶ä¸å¦¨ä»ç°åœ¨å°±å¯ä»¥è¯•è¯•ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸ç®¡æ˜¯å“ªç§æŠ€æœ¯æœ€ç»ˆéƒ½æ˜¯è¦è½¬æ¢ä¸ºæˆ‘ä»¬åˆ°æ‰‹çš„æ”¶å…¥ï¼Œæ‰€ä»¥é€‰æ‹©å¯¹æ”¶å…¥æ›´åŠ æ•æ„Ÿçš„æŠ€æœ¯æ ˆè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><p>ä»¥ä¸Šçš„å†…å®¹ä¸»è¦æ˜¯é’ˆå¯¹åç«¯å¼€å‘ï¼Œå½“ç„¶è¿™é‡Œå¹¶ä¸åŒ…å«æƒ³è¦åšç‹¬ç«‹å¼€å‘çš„æŠ€æœ¯æ ˆï¼Œä¸»è¦è¿˜æ˜¯ç”¨äºæ±‚èŒã€‚</p><p>å¤§å®¶å¯ä»¥çœ‹çœ‹è‡ªå·±å…¬å¸ä»¥åŠæ›¾ç»çš„å…¬å¸æœ‰å¯¹å“ªäº›æŠ€æœ¯ä»˜è´¹ï¼Œæˆ–è€…æ˜¯ä¸€äº›éƒ½éœ€è¦çš„åˆšéœ€é€šç”¨çš„æŠ€æœ¯æ ˆï¼Œæ·±å…¥è¿™äº›æŠ€èƒ½å¯¹æé’±æˆ–å¤šæˆ–å°‘éƒ½æœ‰å¥½å¤„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ä¹‹å‰åœ¨å…¬å¸ä¸»è¦è´Ÿè´£å¯è§‚æµ‹æ€§å’Œ Pulsar æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³çš„å†…å®¹ï¼Œæœ€è¿‘ç³»ç»Ÿæ¯”è¾ƒç¨³å®šï¼Œåªéœ€è¦åšæ—¥å¸¸è¿ç»´ï¼Œæ‰€ä»¥å°±æŠ½å‡ºæ—¶é—´é€æ­¥åœ¨æ¥è§¦ OLAP ç›¸å…³çš„æŠ€æœ¯æ ˆã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç”¨çš„æ˜¯ &lt;a href=&quot;https://www.starrocks.io/&quot;&gt;StarRocks&lt;/a&gt;ï¼Œä¹Ÿæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ OLAP æ•°æ®åº“ï¼›åœ¨æ¥è§¦çš„è¿™æ®µæ—¶é—´ä»¥æ¥ï¼Œè®©æˆ‘è¶Šå‘æ„Ÿè§‰åˆ°é€‰å¯¹ä¸€ä¸ªé è°±çš„æŠ€æœ¯æ–¹å‘çš„é‡è¦æ€§ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
</feed>
