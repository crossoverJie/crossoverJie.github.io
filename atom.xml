<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>crossoverJie&#39;s Blog</title>
  
  <subtitle>baller</subtitle>
  <link href="http://crossoverjie.top/atom.xml" rel="self"/>
  
  <link href="http://crossoverjie.top/"/>
  <updated>2023-12-16T07:59:26.164Z</updated>
  <id>http://crossoverjie.top/</id>
  
  <author>
    <name>crossoverJie</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ğŸ”ŸæœŸ</title>
    <link href="http://crossoverjie.top/2023/12/15/ob/newsletter/Newsletter10-20231215/"/>
    <id>http://crossoverjie.top/2023/12/15/ob/newsletter/Newsletter10-20231215/</id>
    <published>2023-12-15T09:28:25.000Z</published>
    <updated>2023-12-16T07:59:26.164Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/12/16/keYlOC74XMoPAvZ.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><span id="more"></span><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/11/17/ob/newsletter/Newsletter06-20231117/">20231117ï¼šç¬¬å…­æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/24/ob/newsletter/Newsletter07-20231124/">20231124ï¼šç¬¬ä¸ƒæœŸ</a></li><li><a href="https://crossoverjie.top/2023/12/01/ob/newsletter/Newsletter08-20231201/">20231201ï¼šç¬¬å…«æœŸ</a></li><li><a href="https://crossoverjie.top/2023/12/08/ob/newsletter/Newsletter09-20231208/">20231215ï¼šç¬¬ä¹æœŸ</a><!--more--></li></ul><h2 id="Golang-14-Shorthand-Tricks-You-Might-Not-Know-by-Nidhi-D-Dec-2023-Canopas"><a href="#Golang-14-Shorthand-Tricks-You-Might-Not-Know-by-Nidhi-D-Dec-2023-Canopas" class="headerlink" title="Golang: 14 Shorthand Tricks You Might Not Know! | by Nidhi D | Dec, 2023 | Canopas"></a>Golang: 14 Shorthand Tricks You Might Not Know! | by Nidhi D | Dec, 2023 | Canopas</h2><p>URL: <a href="https://blog.canopas.com/golang-14-shorthand-tricks-you-might-not-know-8d8d21954c49">https://blog.canopas.com/golang-14-shorthand-tricks-you-might-not-know-8d8d21954c49</a></p><h3 id="åŒæ—¶å£°æ˜å’Œåˆå§‹åŒ–å˜é‡"><a href="#åŒæ—¶å£°æ˜å’Œåˆå§‹åŒ–å˜é‡" class="headerlink" title="åŒæ—¶å£°æ˜å’Œåˆå§‹åŒ–å˜é‡"></a>åŒæ—¶å£°æ˜å’Œåˆå§‹åŒ–å˜é‡</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line"><span class="keyword">var</span> message <span class="type">string</span>  </span><br><span class="line">message = <span class="string">&quot;Hello, Golang!&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line">message := <span class="string">&quot;Hello, Golang!&quot;</span></span><br></pre></td></tr></table></figure><h3 id="å£°æ˜å’Œåˆå§‹åŒ–å¤šä¸ªå˜é‡"><a href="#å£°æ˜å’Œåˆå§‹åŒ–å¤šä¸ªå˜é‡" class="headerlink" title="å£°æ˜å’Œåˆå§‹åŒ–å¤šä¸ªå˜é‡"></a>å£°æ˜å’Œåˆå§‹åŒ–å¤šä¸ªå˜é‡</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line"><span class="keyword">var</span> a, b, c <span class="type">int</span>  </span><br><span class="line">a = <span class="number">1</span>  </span><br><span class="line">b = <span class="number">2</span>  </span><br><span class="line">c = <span class="number">3</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line">a, b, c := <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br></pre></td></tr></table></figure><h3 id="äº¤æ¢å˜é‡"><a href="#äº¤æ¢å˜é‡" class="headerlink" title="äº¤æ¢å˜é‡"></a>äº¤æ¢å˜é‡</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a, b := <span class="number">1</span>, <span class="number">2</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Long form  </span></span><br><span class="line">temp := a  </span><br><span class="line">a = b  </span><br><span class="line">b = temp  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line">a, b = b, a</span><br></pre></td></tr></table></figure><h3 id="Defer-å‡½æ•°è°ƒç”¨"><a href="#Defer-å‡½æ•°è°ƒç”¨" class="headerlink" title="Defer å‡½æ•°è°ƒç”¨"></a>Defer å‡½æ•°è°ƒç”¨</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cleanup</span><span class="params">()</span></span> &#123;  </span><br><span class="line"><span class="comment">// Cleanup logic  </span></span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">defer</span> cleanup()  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line"><span class="comment">// Cleanup logic  </span></span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure><h3 id="æ£€æµ‹-Map-ä¸­çš„æ•°æ®æ˜¯å¦å­˜åœ¨"><a href="#æ£€æµ‹-Map-ä¸­çš„æ•°æ®æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ£€æµ‹ Map ä¸­çš„æ•°æ®æ˜¯å¦å­˜åœ¨"></a>æ£€æµ‹ Map ä¸­çš„æ•°æ®æ˜¯å¦å­˜åœ¨</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line">value, exists := myMap[key]  </span><br><span class="line"><span class="keyword">if</span> !exists &#123;  </span><br><span class="line">    <span class="comment">// Key doesn&#x27;t exist in the map  </span></span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line"><span class="keyword">if</span> value, exists := myMap[key]; !exists &#123;  </span><br><span class="line">    <span class="comment">// Key doesn&#x27;t exist in the map  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ä¸‹æ ‡å’Œå€¼è¿­ä»£åˆ‡ç‰‡"><a href="#ä½¿ç”¨ä¸‹æ ‡å’Œå€¼è¿­ä»£åˆ‡ç‰‡" class="headerlink" title="ä½¿ç”¨ä¸‹æ ‡å’Œå€¼è¿­ä»£åˆ‡ç‰‡"></a>ä½¿ç”¨ä¸‹æ ‡å’Œå€¼è¿­ä»£åˆ‡ç‰‡</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(numbers); i++ &#123;  </span><br><span class="line">fmt.Println(i, numbers[i])  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line"><span class="keyword">for</span> i, value := <span class="keyword">range</span> numbers &#123;  </span><br><span class="line">fmt.Println(i, value)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é”™è¯¯æ£€æµ‹"><a href="#é”™è¯¯æ£€æµ‹" class="headerlink" title="é”™è¯¯æ£€æµ‹"></a>é”™è¯¯æ£€æµ‹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line">result, err := someFunction()  </span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line"><span class="comment">// Handle the error  </span></span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line"><span class="keyword">if</span> result, err := someFunction(); err != <span class="literal">nil</span> &#123;  </span><br><span class="line"><span class="comment">// Handle the error  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºä¸€ä¸ªå˜é‡çš„æŒ‡é’ˆ"><a href="#åˆ›å»ºä¸€ä¸ªå˜é‡çš„æŒ‡é’ˆ" class="headerlink" title="åˆ›å»ºä¸€ä¸ªå˜é‡çš„æŒ‡é’ˆ"></a>åˆ›å»ºä¸€ä¸ªå˜é‡çš„æŒ‡é’ˆ</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line"><span class="keyword">var</span> x <span class="type">int</span>  </span><br><span class="line">ptr := &amp;x  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line">ptr := <span class="built_in">new</span>(<span class="type">int</span>)</span><br></pre></td></tr></table></figure><h3 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;  </span><br><span class="line"><span class="keyword">return</span> x + y  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line">add := <span class="function"><span class="keyword">func</span><span class="params">(x, y <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;  </span><br><span class="line"><span class="keyword">return</span> x + y  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå’Œåˆå§‹åŒ–-Map"><a href="#åˆ›å»ºå’Œåˆå§‹åŒ–-Map" class="headerlink" title="åˆ›å»ºå’Œåˆå§‹åŒ– Map"></a>åˆ›å»ºå’Œåˆå§‹åŒ– Map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line">colors := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)  </span><br><span class="line">colors[<span class="string">&quot;red&quot;</span>] = <span class="string">&quot;#ff0000&quot;</span>  </span><br><span class="line">colors[<span class="string">&quot;green&quot;</span>] = <span class="string">&quot;#00ff00&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line">colors := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;  </span><br><span class="line"><span class="string">&quot;red&quot;</span>: <span class="string">&quot;#ff0000&quot;</span>,  </span><br><span class="line"><span class="string">&quot;green&quot;</span>: <span class="string">&quot;#00ff00&quot;</span>,  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜å¤šä¸ªå¸¸é‡"><a href="#å£°æ˜å¤šä¸ªå¸¸é‡" class="headerlink" title="å£°æ˜å¤šä¸ªå¸¸é‡"></a>å£°æ˜å¤šä¸ªå¸¸é‡</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Long form  </span></span><br><span class="line"><span class="keyword">const</span> pi <span class="type">float64</span> = <span class="number">3.14159</span>  </span><br><span class="line"><span class="keyword">const</span> maxAttempts <span class="type">int</span> = <span class="number">3</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Shorthand  </span></span><br><span class="line"><span class="keyword">const</span> (  </span><br><span class="line">pi = <span class="number">3.14159</span>  </span><br><span class="line">maxAttempts = <span class="number">3</span>  </span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="Java-Mastery-Unleashed-12-Essential-Tips-Every-Developer-Must-Embrace"><a href="#Java-Mastery-Unleashed-12-Essential-Tips-Every-Developer-Must-Embrace" class="headerlink" title="Java Mastery Unleashed: 12 Essential Tips Every Developer Must Embrace"></a>Java Mastery Unleashed: 12 Essential Tips Every Developer Must Embrace</h2><p>URL: <a href="https://blog.stackademic.com/boost-your-java-skills-12-must-know-programming-tips-for-java-developers-34f8381ec431">https://blog.stackademic.com/boost-your-java-skills-12-must-know-programming-tips-for-java-developers-34f8381ec431</a></p><blockquote><p>ä¸€äº›å¸¸ç”¨çš„ Java æŠ€å·§</p></blockquote><ul><li><p>å–„ç”¨ Lambda è¡¨è¾¾å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Before</span></span><br><span class="line">List&lt;String&gt; names = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();  </span><br><span class="line"><span class="keyword">for</span> (Person person : people) &#123;  </span><br><span class="line">names.add(person.getName());  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// After</span></span><br><span class="line">List&lt;String&gt; names = people.stream()  </span><br><span class="line">.map(Person::getName)  </span><br><span class="line">.collect(Collectors.toList());</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ Optionals æ›¿ä»£ null</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; maybeName = Optional.ofNullable(person.getName());  </span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> maybeName.orElse(<span class="string">&quot;Unknown&quot;</span>);</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ stream ç®€åŒ–é›†åˆæ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; evenNumbers = numbers.stream()  </span><br><span class="line">.filter(num -&gt; num % <span class="number">2</span> == <span class="number">0</span>)  </span><br><span class="line">.collect(Collectors.toList());</span><br></pre></td></tr></table></figure></li><li><p>String.format æ‹¼æ¥å­—ç¬¦ä¸²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;  </span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot; World&quot;</span>;  </span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s%s&quot;</span>, s1, s2);</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ default method æ‰©å±•æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TimeClient</span> &#123;  </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setTime</span><span class="params">(<span class="type">int</span> hour, <span class="type">int</span> minute, <span class="type">int</span> second)</span>;  </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setDate</span><span class="params">(<span class="type">int</span> day, <span class="type">int</span> month, <span class="type">int</span> year)</span>;  </span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setDateAndTime</span><span class="params">(<span class="type">int</span> day, <span class="type">int</span> month, <span class="type">int</span> year, <span class="type">int</span> hour, <span class="type">int</span> minute, <span class="type">int</span> second)</span>;  </span><br><span class="line">LocalDateTime <span class="title function_">getLocalDateTime</span><span class="params">()</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æšä¸¾æ›¿æ¢å¸¸é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">Level</span> &#123; LOW, MEDIUM, HIGH &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Level</span> <span class="variable">myVar</span> <span class="operator">=</span> Level.MEDIUM;</span><br><span class="line">        System.out.println(myVar);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ try-with-Resource ç®¡ç†èµ„æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;example.txt&quot;</span>);</span><br><span class="line">     <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fileReader)) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line">    <span class="comment">// Process the file</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    <span class="comment">// Handle the exception</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="SpringBoot-Webflux-vs-Vert-x-Performance-comparison-for-hello-world-case-Tech-Tonic"><a href="#SpringBoot-Webflux-vs-Vert-x-Performance-comparison-for-hello-world-case-Tech-Tonic" class="headerlink" title="SpringBoot Webflux vs Vert.x: Performance comparison for hello world case | Tech Tonic"></a>SpringBoot Webflux vs Vert.x: Performance comparison for hello world case | Tech Tonic</h2><p>URL: <a href="https://medium.com/deno-the-complete-reference/springboot-webflux-vs-vert-x-performance-comparison-for-hello-world-case-41a6bd8e9f8c">https://medium.com/deno-the-complete-reference/springboot-webflux-vs-vert-x-performance-comparison-for-hello-world-case-41a6bd8e9f8c</a></p><blockquote><p>æœ¬æ–‡å¯¹æ¯”äº† SpringBoot Webflux å’Œ Vert.x çš„æ€§èƒ½å¯¹æ¯”</p></blockquote><p>ä»¥ä¸‹æ˜¯ä¸¤ä¸ªæ¡†æ¶å†™çš„å‹æµ‹æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.reactive.config.EnableWebFlux;</span><br><span class="line"><span class="keyword">import</span> org.reactivestreams.Publisher;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableWebFlux</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        SpringApplication.run(Application.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Publisher&lt;String&gt; <span class="title function_">handler</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Mono.just(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vert.x</span></span><br><span class="line"><span class="keyword">package</span> com.example.starter;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> io.vertx.core.AbstractVerticle;  </span><br><span class="line"><span class="keyword">import</span> io.vertx.core.Promise;  </span><br><span class="line"><span class="keyword">import</span> io.vertx.core.http.HttpServer;  </span><br><span class="line"><span class="keyword">import</span> io.vertx.ext.web.Router;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainVerticle</span> <span class="keyword">extends</span> <span class="title class_">AbstractVerticle</span> &#123;  </span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span>  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">(Promise&lt;Void&gt; startPromise)</span> <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">    <span class="type">HttpServer</span> <span class="variable">server</span> <span class="operator">=</span> vertx.createHttpServer();  </span><br><span class="line">    <span class="type">Router</span> <span class="variable">router</span> <span class="operator">=</span> Router.router(vertx);  </span><br><span class="line">  </span><br><span class="line">    router.get(<span class="string">&quot;/&quot;</span>).respond(ctx -&gt; ctx  </span><br><span class="line">        .response()  </span><br><span class="line">        .putHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/plain&quot;</span>)  </span><br><span class="line">        .end(<span class="string">&quot;hello world!&quot;</span>));  </span><br><span class="line">  </span><br><span class="line">    server.requestHandler(router).listen(<span class="number">3000</span>);  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åç›´æ¥çœ‹å¯¹æ¯”ç»“æœå§ï¼š<br><img src="https://s2.loli.net/2023/12/13/smHjAKqN32ETX6I.png" alt="image.png"><br><img src="https://s2.loli.net/2023/12/13/ylwjNGvxUEmgQ5i.png" alt="image.png"><br><img src="https://s2.loli.net/2023/12/13/yY72ipAab8jetUT.png" alt="image.png"><br>æœ€ç»ˆä½œè€…æ ¹æ®ä¸€ä¸ªè®¡ç®—å…¬å¼å¾—å‡ºä¸¤ä¸ªæ¡†æ¶çš„å¾—åˆ†ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>å·®è·å°äº 5% ä¸å¾—åˆ†</li><li>5ï½20 å¾— 1 åˆ†</li><li>20ï½50 å¾—ä¸¤åˆ†</li><li>å¤§äº 50ï¼Œå¾—ä¸‰åˆ†<br><img src="https://s2.loli.net/2023/12/13/wNPSTLRyIt79k85.png" alt="image.png"><br>æœ€ç»ˆæ˜¯ <code>Vert.x</code> å¾—åˆ†è¶…è¿‡ <code>Webflux</code> 55%â¬†ï¸</li></ul><p>ä¸è¿‡ä¸ªäººè§‰å¾—å‹æµ‹ç»“æœå†å¥½ï¼Œå¥—ä¸Šä¸šåŠ¡åï¼Œæ¯”å¦‚ä¸€ä¸ªæ¥å£æŸ¥è¯¢äº†å¤šä¸ªåç«¯æœåŠ¡ï¼Œåç«¯æœåŠ¡æœ‰ä¾èµ–äºå¤šä¸ªæ•°æ®åº“ï¼Œæœ€ç»ˆå‡ºæ¥çš„ RT å¤§å®¶éƒ½å·®ä¸å¤šã€‚</p><p>é™¤éæ˜¯æŸäº›å¯¹æ€§èƒ½æè‡´è¦æ±‚çš„åœºæ™¯ï¼Œæ¯”å¦‚å®æ—¶æ•°æ®åˆ†æã€ç‰©è”ç½‘ä¸­é—´ä»¶ç­‰å’Œç›´æ¥ä¸šåŠ¡ä¸å¤ªç›¸å…³é¢†åŸŸã€‚</p><p>å®ƒçš„åº•å±‚ä¾ç„¶æ˜¯ Nettyï¼Œä½†æ¯” Netty æä¾›äº†è·Ÿæ˜“ç”¨çš„ APIã€‚</p><h2 id="Git-Cherry-Pick-Examples-to-Apply-Hot-Fixes-and-Security-Patches-â€”-Nick-Janetakis"><a href="#Git-Cherry-Pick-Examples-to-Apply-Hot-Fixes-and-Security-Patches-â€”-Nick-Janetakis" class="headerlink" title="Git Cherry Pick Examples to Apply Hot Fixes and Security Patches â€” Nick Janetakis"></a>Git Cherry Pick Examples to Apply Hot Fixes and Security Patches â€” Nick Janetakis</h2><p>URL: <a href="https://nickjanetakis.com/blog/git-cherry-pick-examples-to-apply-hot-fixes-and-security-patches?ref=dailydev">https://nickjanetakis.com/blog/git-cherry-pick-examples-to-apply-hot-fixes-and-security-patches?ref=dailydev</a></p><blockquote><p>è®²è§£äº† git cherry-pick çš„ä½œç”¨ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨ï¼Œä»€ä¹ˆæ—¶å€™ä¸ç”¨ã€‚</p></blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>ä¸€äº›å¤§å‹çš„å¼€æºé¡¹ç›®å¾€å¾€éƒ½ä¼šæœ‰ä¸€ä¸ªä¸»åˆ†å­ï¼ŒåŒæ—¶ç»´æŠ¤äº†ä¸åŒç‰ˆæœ¬çš„å­åˆ†æ”¯ï¼Œæœ‰äº›ç”¨æˆ·å¯èƒ½å°±ä¼šä¸€ç›´ä½¿ç”¨ä¸€äº›é•¿æœŸç»´æŠ¤çš„å­åˆ†æ”¯ï¼Œæ¯”å¦‚ <code>v2.1.0 \ v2.3.0</code></p><p>ä½†å¯¹äºå¤§éƒ¨åˆ†çš„å¼€å‘è€…æ¥è¯´ä¸»è¦ä¼šç»´æŠ¤ä¸»åˆ†æ”¯ï¼Œä¹Ÿä¼šåœ¨ä¸»åˆ†æ”¯ä¸Šæ¨è¿›ä¸€äº›æ–°åŠŸèƒ½ï¼Œè¿™äº›æ–°åŠŸèƒ½ä¸ä¸€å®šä¼šåŒæ­¥åˆ°ä¸Šè¿°æåˆ°çš„ä¸¤ä¸ªè€ç‰ˆæœ¬ä¸­ã€‚</p><p>ä½†å¯¹äºä¸€äº›å®‰å…¨æ¼æ´ï¼Œé‡å¤§ bug ç­‰æ˜¯éœ€è¦åŒæ­¥åˆ°è¿™äº›å­åˆ†æ”¯çš„ï¼Œä½†åˆä¸èƒ½æŠŠä¸€äº›ä¸å…¼å®¹çš„æ–°ç‰¹æ€§åŒæ­¥åˆ°å­åˆ†æ”¯ä¸­ã€‚</p><p>æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨  cherry-pick è¿™ä¸ªåŠŸèƒ½ï¼Œåªå°†æŸä¸€ä¸ªæäº¤ç»™ pick åˆ°ç›®æ ‡åˆ†æ”¯ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cherry pick more than 1 SHA.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># This could be useful if you have a handful of commits that you want to bring over,</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">you<span class="string">&#x27;ll likely want to order them with the oldest commit being first in the list.</span></span></span><br><span class="line">git cherry-pick &lt;SHA&gt; &lt;SHA&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Edit the git commit message for the newly applied commit.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash"># This could be useful if want to customize the git commit message with extra context.</span></span></span><br><span class="line">git cherry-pick &lt;SHA&gt; --edit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Avoid automatically creating the commit which lets you edit the files first.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash"># This could be useful if you need to make manual code adjustments before committing,</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">such as applying a security patch which uses an older library with a different API.</span></span></span><br><span class="line">git cherry-pick &lt;SHA&gt; --no-commit</span><br></pre></td></tr></table></figure><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://blog.canopas.com/golang-14-shorthand-tricks-you-might-not-know-8d8d21954c49">https://blog.canopas.com/golang-14-shorthand-tricks-you-might-not-know-8d8d21954c49</a></li><li><a href="https://blog.stackademic.com/boost-your-java-skills-12-must-know-programming-tips-for-java-developers-34f8381ec431">https://blog.stackademic.com/boost-your-java-skills-12-must-know-programming-tips-for-java-developers-34f8381ec431</a></li><li><a href="https://medium.com/deno-the-complete-reference/springboot-webflux-vs-vert-x-performance-comparison-for-hello-world-case-41a6bd8e9f8c">https://medium.com/deno-the-complete-reference/springboot-webflux-vs-vert-x-performance-comparison-for-hello-world-case-41a6bd8e9f8c</a></li><li><a href="https://nickjanetakis.com/blog/git-cherry-pick-examples-to-apply-hot-fixes-and-security-patches?ref=dailydev">https://nickjanetakis.com/blog/git-cherry-pick-examples-to-apply-hot-fixes-and-security-patches?ref=dailydev</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/12/16/keYlOC74XMoPAvZ.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ç¼–å†™ä¸€ä¸ª Pulsar Broker Interceptor æ’ä»¶</title>
    <link href="http://crossoverjie.top/2023/12/11/ob/Pulsar-Broker-Interceptor/"/>
    <id>http://crossoverjie.top/2023/12/11/ob/Pulsar-Broker-Interceptor/</id>
    <published>2023-12-11T08:38:27.000Z</published>
    <updated>2023-12-11T14:37:54.200Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç«  <a href="https://crossoverjie.top/2023/08/23/ob/VictoriaLogs-Intro/">VictoriaLogsï¼šä¸€æ¬¾è¶…ä½å ç”¨çš„ ElasticSearch æ›¿ä»£æ–¹æ¡ˆ</a>è®²åˆ°äº†æˆ‘ä»¬ä½¿ç”¨ <code>Victorialogs</code> æ¥å­˜å‚¨ Pulsar æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯ trace ä¿¡æ¯ã€‚</p><p><img src="https://s2.loli.net/2023/12/11/UYdMH19uyjrNA2I.png" alt="image.png"></p><p>è€Œå…¶ä¸­çš„å…³é”®çš„åŸ‹ç‚¹ä¿¡æ¯æ˜¯é€šè¿‡ Pulsar çš„ <code>BrokerInterceptor</code> å®ç°çš„ï¼Œåé¢å°±æœ‰æœ‹å‹å’¨è¯¢è¿™å—ä»£ç æ˜¯å¦å¼€æºï¼Œç›®å‰æ˜¯æ²¡æœ‰å¼€æºçš„ï¼Œä¸è¿‡å€Ÿæ­¤æœºä¼šå¯ä»¥èŠèŠå¦‚ä½•å®ç°ä¸€ä¸ª <code>BrokerInterceptor</code> æ’ä»¶ï¼Œå½“å‰è¿˜æ²¡æœ‰ç›¸å…³çš„ä»‹ç»æ–‡æ¡£ã€‚</p><span id="more"></span><p>å…¶å®å½“æ—¶æˆ‘åœ¨æ‰¾ <code>BrokerInterceptor</code> çš„ç›¸å…³èµ„æ–™æ—¶å°±å‘ç°å®˜æ–¹å¹¶æ²¡æœ‰æä¾›å¯¹åº”çš„å¼€å‘æ–‡æ¡£ã€‚</p><p>åªæœ‰ä¸€ä¸ª <a href="https://pulsar.apache.org/docs/3.1.x/develop-plugin/#what-is-an-additional-servlet">additional servlet</a>çš„å¼€å‘æ–‡æ¡£ï¼Œè€Œ <code>BrokerInterceptor</code> åªåœ¨ <a href="https://www.youtube.com/watch?v=alzv7FyOoP0">YouTube</a> ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªç¤¾åŒºåˆ†äº«çš„è§†é¢‘ã€‚<br><img src="https://s2.loli.net/2023/12/11/H3rs8OdYZecQEn5.png" alt="image.png"></p><p>è™½è¯´çœ‹è§†é¢‘å¯ä»¥è·Ÿç€å®ç°ï¼Œä½†æ€»å½’æ˜¯æ²¡æœ‰æ–‡æ¡£æ–¹ä¾¿ã€‚</p><hr><p>åœ¨è¿™ä¹‹å‰è¿˜æ˜¯å…ˆè®²è®² <code>BrokerInterceptor</code> æœ‰ä»€ä¹ˆç”¨ï¼Ÿ<br><img src="https://s2.loli.net/2023/12/11/F8cxdwsTyWuaVGg.png" alt="image.png"></p><p>å…¶å®ä»å®ƒæ‰€æä¾›çš„æ¥å£å°±èƒ½çœ‹å‡ºï¼Œåœ¨æ¶ˆæ¯åˆ°è¾¾ Broker åçš„ä¸€äº›å…³é”®èŠ‚ç‚¹éƒ½æä¾›äº†ç›¸å…³çš„æ¥å£ï¼Œå®ç°è¿™äº›æ¥å£å°±èƒ½åšå¾ˆå¤šäº‹æƒ…äº†ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œæ‰€éœ€è¦çš„æ¶ˆæ¯è¿½è¸ªã€‚</p><h1 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h1><p>ä¸‹é¢å¼€å§‹å¦‚ä½•ä½¿ç”¨ <code>BrokerInterceptor</code>ï¼š<br>é¦–å…ˆæ˜¯åˆ›å»ºä¸€ä¸ª <code>Maven</code> é¡¹ç›®ï¼Œç„¶åå¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.pulsar<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pulsar-broker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;pulsar.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å®ç°æ¥å£"><a href="#å®ç°æ¥å£" class="headerlink" title="å®ç°æ¥å£"></a>å®ç°æ¥å£</h1><p>ç„¶åæˆ‘ä»¬ä¾¿å¯ä»¥å®ç° <code>org.apache.pulsar.broker.intercept.BrokerInterceptor</code> æ¥å®Œæˆå…·ä½“çš„ä¸šåŠ¡äº†ã€‚</p><p>åœ¨æˆ‘ä»¬åšæ¶ˆæ¯è¿½è¸ªçš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å®ç°äº†ä»¥ä¸‹å‡ ä¸ªæ¥å£ï¼š</p><ul><li>messageProduced</li><li>messageDispatched</li><li>messageAcked</li></ul><p>ä»¥ <code>messageProduced</code> ä¸ºä¾‹ï¼Œéœ€è¦è§£æå‡ºæ¶ˆæ¯IDï¼Œç„¶åæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥ <code>Victorialogs</code> å­˜å‚¨ä¸­ï¼Œå…¶ä½™çš„ä¸¤ä¸ªåŸ‹ç‚¹ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">messageProduced</span><span class="params">(ServerCnx cnx, Producer producer, <span class="type">long</span> startTimeNs, <span class="type">long</span> ledgerId, <span class="type">long</span> entryId,  </span></span><br><span class="line"><span class="params">                            Topic.PublishContext publishContext)</span> &#123;  </span><br><span class="line">    <span class="type">String</span> <span class="variable">ns</span> <span class="operator">=</span> getNs(producer.getTopic().getName());  </span><br><span class="line">    <span class="keyword">if</span> (!LogSender.checkNamespace(ns)) &#123;  </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">    &#125;    <span class="type">String</span> <span class="variable">topic</span> <span class="operator">=</span> producer.getTopic().getName();  </span><br><span class="line">    <span class="type">String</span> <span class="variable">partition</span> <span class="operator">=</span> getPartition(topic);  </span><br><span class="line">    <span class="type">String</span> <span class="variable">msgId</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s:%s:%s&quot;</span>, ledgerId, entryId, partition);  </span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Event</span>.Publish(msgId, producer.getClientAddress(), System.currentTimeMillis(),  </span><br><span class="line">            producer.getProducerName(), topic).toString();  </span><br><span class="line">    LogSender.send(s);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¼–å†™é¡¹ç›®æè¿°æ–‡ä»¶"><a href="#ç¼–å†™é¡¹ç›®æè¿°æ–‡ä»¶" class="headerlink" title="ç¼–å†™é¡¹ç›®æè¿°æ–‡ä»¶"></a>ç¼–å†™é¡¹ç›®æè¿°æ–‡ä»¶</h1><p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé¡¹ç›®æè¿°æ–‡ä»¶ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š<br><code>src/main/resources/META-INF/services/broker_interceptor.yml</code><br>åå­—ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œbroker ä¼šåœ¨å¯åŠ¨çš„æ—¶å€™è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">interceptor-name</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">description</span></span><br><span class="line"><span class="attr">interceptorClass:</span> <span class="string">com.xx.CustomInterceptor</span></span><br></pre></td></tr></table></figure><p>é‡ç‚¹æ˜¯å¡«å†™è‡ªå®šä¹‰å®ç°ç±»çš„å…¨é™å®šåã€‚</p><h1 id="é…ç½®æ‰“åŒ…æ’ä»¶"><a href="#é…ç½®æ‰“åŒ…æ’ä»¶" class="headerlink" title="é…ç½®æ‰“åŒ…æ’ä»¶"></a>é…ç½®æ‰“åŒ…æ’ä»¶</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.nifi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nifi-nar-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;-$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">executions</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span>  </span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>default-nar<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line">          <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span>  </span><br><span class="line">          <span class="tag">&lt;<span class="name">goals</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>nar<span class="tag">&lt;/<span class="name">goal</span>&gt;</span>  </span><br><span class="line">          <span class="tag">&lt;/<span class="name">goals</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;/<span class="name">executions</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç”±äº Broker è¯†åˆ«çš„æ˜¯ nar åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½® nar åŒ…æ’ä»¶ï¼Œä¹‹åä½¿ç”¨ <code>mvn package</code> å°±ä¼šç”Ÿæˆå‡º nar åŒ…ã€‚</p><h1 id="é…ç½®-broker-conf"><a href="#é…ç½®-broker-conf" class="headerlink" title="é…ç½® broker.conf"></a>é…ç½® broker.conf</h1><p>æˆ‘ä»¬è¿˜éœ€è¦åœ¨ broker.conf ä¸­é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brokerInterceptors: &quot;interceptor-name&quot;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯åˆšæ‰é…ç½®çš„æ’ä»¶åç§°ã€‚</p><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨ helm å®‰è£…çš„ pulsarï¼Œåœ¨ 3.1 ç‰ˆæœ¬ä¹‹å‰éœ€è¦æ‰‹åŠ¨å°†<code>brokerInterceptors</code> å†™å…¥åˆ° <code>broker.conf</code> ä¸­ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> apachepulsar/pulsar-all:<span class="number">3.0</span>.<span class="number">1</span>  </span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> target/interceptor-1.0.1.nar /pulsar/interceptors/  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;\n&quot;</span> &gt;&gt; /pulsar/conf/broker.conf  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;brokerInterceptors=&quot;</span> &gt;&gt; /pulsar/conf/broker.conf</span></span><br></pre></td></tr></table></figure><p>ä¸ç„¶åœ¨æœ€ç»ˆå®¹å™¨ä¸­çš„ <code>broker.conf</code> ä¸­æ˜¯è¯»å–ä¸åˆ°è¿™ä¸ªé…ç½®çš„ï¼Œå¯¼è‡´æ’ä»¶æ²¡æœ‰ç”Ÿæ•ˆã€‚</p><blockquote><p>æˆ‘ä»¬æ˜¯é‡æ–°åŸºäºå®˜æ–¹é•œåƒæ‰“çš„ä¸€ä¸ªåŒ…å«è‡ªå®šä¹‰æ’ä»¶çš„é•œåƒï¼Œæœ€ç»ˆä½¿ç”¨è¿™ä¸ªé•œåƒè¿›è¡Œéƒ¨ç½²ã€‚</p></blockquote><p><a href="https://github.com/apache/pulsar/pull/20719">https://github.com/apache/pulsar/pull/20719</a><br>æˆ‘åœ¨è¿™ä¸ª PR ä¸­å·²ç»å°†é…ç½®åŠ å…¥è¿›å»äº†ï¼Œä½†å¾—åœ¨ 3.1 ä¹‹åæ‰èƒ½ç”Ÿæ•ˆï¼›ä¹Ÿå°±æ˜¯åœ¨ 3.1 ä¹‹å‰éƒ½å¾—åŠ ä¸ŠåŠ ä¸Šè¿™è¡Œï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;\n&quot;</span> &gt;&gt; /pulsar/conf/broker.conf  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;brokerInterceptors=&quot;</span> &gt;&gt; /pulsar/conf/broker.conf</span></span><br></pre></td></tr></table></figure><hr><p>ç›®å‰æ¥çœ‹ Pulsar çš„ <code>BrokerInterceptor</code> åº”è¯¥ä½¿ç”¨ä¸å¤šï¼Œä¸ç„¶ä½¿ç”¨ helm å®‰è£…æ—¶æ˜¯ä¸å¯èƒ½ç”Ÿæ•ˆçš„ï¼›è€Œä¸”å®˜æ–¹æ–‡æ¡£ä¹Ÿæ²¡ç”¨ç›¸å…³çš„æè¿°ã€‚</p><p>#Blog #Pulsar </p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç«  &lt;a href=&quot;https://crossoverjie.top/2023/08/23/ob/VictoriaLogs-Intro/&quot;&gt;VictoriaLogsï¼šä¸€æ¬¾è¶…ä½å ç”¨çš„ ElasticSearch æ›¿ä»£æ–¹æ¡ˆ&lt;/a&gt;è®²åˆ°äº†æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;Victorialogs&lt;/code&gt; æ¥å­˜å‚¨ Pulsar æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯ trace ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/12/11/UYdMH19uyjrNA2I.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;è€Œå…¶ä¸­çš„å…³é”®çš„åŸ‹ç‚¹ä¿¡æ¯æ˜¯é€šè¿‡ Pulsar çš„ &lt;code&gt;BrokerInterceptor&lt;/code&gt; å®ç°çš„ï¼Œåé¢å°±æœ‰æœ‹å‹å’¨è¯¢è¿™å—ä»£ç æ˜¯å¦å¼€æºï¼Œç›®å‰æ˜¯æ²¡æœ‰å¼€æºçš„ï¼Œä¸è¿‡å€Ÿæ­¤æœºä¼šå¯ä»¥èŠèŠå¦‚ä½•å®ç°ä¸€ä¸ª &lt;code&gt;BrokerInterceptor&lt;/code&gt; æ’ä»¶ï¼Œå½“å‰è¿˜æ²¡æœ‰ç›¸å…³çš„ä»‹ç»æ–‡æ¡£ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬9ï¸âƒ£æœŸ</title>
    <link href="http://crossoverjie.top/2023/12/08/ob/newsletter/Newsletter09-20231208/"/>
    <id>http://crossoverjie.top/2023/12/08/ob/newsletter/Newsletter09-20231208/</id>
    <published>2023-12-08T09:28:25.000Z</published>
    <updated>2023-12-08T09:36:45.730Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/12/08/CXqYjtI7fBUlhma.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><span id="more"></span><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/">20231107ï¼šç¬¬äº”æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/17/ob/newsletter/Newsletter06-20231117/">20231117ï¼šç¬¬å…­æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/24/ob/newsletter/Newsletter07-20231124/">20231124ï¼šç¬¬ä¸ƒæœŸ</a></li><li><a href="https://crossoverjie.top/2023/12/01/ob/newsletter/Newsletter08-20231201/">20231201ï¼šç¬¬å…«æœŸ</a><!--more--></li></ul><h2 id="ç¾å›¢æŠ€æœ¯åšå®¢åå‘¨å¹´ï¼Œæ„Ÿè°¢ä¸€è·¯ç›¸ä¼´-ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"><a href="#ç¾å›¢æŠ€æœ¯åšå®¢åå‘¨å¹´ï¼Œæ„Ÿè°¢ä¸€è·¯ç›¸ä¼´-ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ" class="headerlink" title="ç¾å›¢æŠ€æœ¯åšå®¢åå‘¨å¹´ï¼Œæ„Ÿè°¢ä¸€è·¯ç›¸ä¼´ - ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"></a>ç¾å›¢æŠ€æœ¯åšå®¢åå‘¨å¹´ï¼Œæ„Ÿè°¢ä¸€è·¯ç›¸ä¼´ - ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ</h2><p>URL: <a href="https://tech.meituan.com/2023/12/04/ten-years-of-meituan-technology-blog.html">https://tech.meituan.com/2023/12/04/ten-years-of-meituan-technology-blog.html</a><br><img src="https://s2.loli.net/2023/12/06/1z4f7UOyJ2HPpu6.png" alt="image.png"></p><blockquote><p>ç¾å›¢æŠ€æœ¯åšå®¢æ›´æ–°åå‘¨å¹´äº†ï¼Œè¿™ä¸ªåšå®¢ç¡®å®åœ¨å¹¿å¤§å¼€å‘è€…å¿ƒä¸­éƒ½æ˜¯æœ‰å£çš†ç¢‘çš„ï¼›è®°å¾—å½“åˆåœ¨è¿™é‡Œçœ‹è¿‡ HashMap çš„åŸç†åˆ†æã€åŠ¨æ€çº¿ç¨‹æ± ç­‰æŠ€æœ¯ï¼›<br>ç°åœ¨ä¹Ÿæœ‰åŠ åˆ°è®¢é˜…åˆ—è¡¨é‡Œï¼Œæœ‰æ›´æ–°æ—¶ä¼šç¬¬ä¸€æ—¶é—´é˜…è¯»</p></blockquote><h2 id="CompletableFutureåŸç†ä¸å®è·µ-å¤–å–å•†å®¶ç«¯APIçš„å¼‚æ­¥åŒ–-ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"><a href="#CompletableFutureåŸç†ä¸å®è·µ-å¤–å–å•†å®¶ç«¯APIçš„å¼‚æ­¥åŒ–-ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ" class="headerlink" title="CompletableFutureåŸç†ä¸å®è·µ-å¤–å–å•†å®¶ç«¯APIçš„å¼‚æ­¥åŒ– - ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"></a>CompletableFutureåŸç†ä¸å®è·µ-å¤–å–å•†å®¶ç«¯APIçš„å¼‚æ­¥åŒ– - ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ</h2><p>URL: <a href="https://tech.meituan.com/2022/05/12/principles-and-practices-of-completablefuture.html">https://tech.meituan.com/2022/05/12/principles-and-practices-of-completablefuture.html</a><br><img src="https://s2.loli.net/2023/12/06/F42yeBdRsJOkon8.png" alt="image.png"></p><blockquote><p>æœ¬æ–‡æè¿°äº†ç¾å›¢å¯¹ API åšå¼‚æ­¥ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œæœ€ç»ˆé€‰æ‹©äº† CompletableFuture çš„è¿‡ç¨‹<br><code>CompletableFuture</code> ä½¿ç”¨èµ·æ¥çš„å‘è¿˜æ˜¯è›®å¤šçš„ï¼Œæ¨èå¤§å®¶éƒ½åº”è¯¥é˜…è¯»ä¸‹ã€‚</p></blockquote><ul><li>æ˜ç¡®çŸ¥é“è‡ªå·±çš„ä»£ç è¿è¡Œåœ¨å“ªä¸ªçº¿ç¨‹ä¸Šï¼Œå¦‚æœä¸ä¼ å…¥çº¿ç¨‹æ± é‚£å°±æ˜¯å…¬å…±çš„ <code>ForkJoinPool</code> çº¿ç¨‹æ± ï¼Œå¯èƒ½ä¼šæœ‰é˜»å¡çš„æƒ…å†µï¼›ä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥è‡ªå®šä¹‰çš„çº¿ç¨‹æ± </li><li>çº¿ç¨‹æ± å¾ªç¯ä½¿ç”¨å¯èƒ½ä¼šå¼•èµ·æ­»é”ï¼Œå½“ A çº¿ç¨‹ä¾èµ–äº B çº¿ç¨‹çš„æ‰§è¡Œç»“æœæ—¶ï¼Œå¦‚æœæ­¤æ—¶æ˜¯åŒä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå¹¶ä¸”çº¿ç¨‹æ± å·²æ»¡ï¼ŒB çº¿ç¨‹ä¸€ç›´å¾—ä¸åˆ°æœºä¼šæ‰§è¡Œï¼Œé‚£ A çº¿ç¨‹ä¹Ÿæ— æ³•è¿è¡Œï¼Œä»è€Œå¯¼è‡´æ­»é”ã€‚</li><li><code>CompletableFuture</code> çš„å¼‚å¸¸å¾€å¾€ä¼šè¢«åŒ…è£…ä¸ºCompletionExceptionï¼Œæ‰€ä»¥æœ€å¥½æ˜¯è¦å¼‚å¸¸å·¥å…·ç±»è¿›è¡Œæå–<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionUtils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Throwable <span class="title function_">extractRealException</span><span class="params">(Throwable throwable)</span> &#123;</span><br><span class="line">          <span class="comment">//è¿™é‡Œåˆ¤æ–­å¼‚å¸¸ç±»å‹æ˜¯å¦ä¸ºCompletionExceptionã€ExecutionExceptionï¼Œå¦‚æœæ˜¯åˆ™è¿›è¡Œæå–ï¼Œå¦åˆ™ç›´æ¥è¿”å›ã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (throwable <span class="keyword">instanceof</span> CompletionException || throwable <span class="keyword">instanceof</span> ExecutionException) &#123;</span><br><span class="line">            <span class="keyword">if</span> (throwable.getCause() != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> throwable.getCause();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> throwable;</span><br><span class="line">   </span><br></pre></td></tr></table></figure></li></ul><h2 id="æ²¡é”™ï¼Œæ•°æ®åº“ç¡®å®åº”è¯¥æ”¾å…¥-K8s-é‡Œï¼"><a href="#æ²¡é”™ï¼Œæ•°æ®åº“ç¡®å®åº”è¯¥æ”¾å…¥-K8s-é‡Œï¼" class="headerlink" title="æ²¡é”™ï¼Œæ•°æ®åº“ç¡®å®åº”è¯¥æ”¾å…¥ K8s é‡Œï¼"></a>æ²¡é”™ï¼Œæ•°æ®åº“ç¡®å®åº”è¯¥æ”¾å…¥ K8s é‡Œï¼</h2><p>URL: <a href="https://mp.weixin.qq.com/s/QJn6-EzPp7PXar-GdMITCA">https://mp.weixin.qq.com/s/QJn6-EzPp7PXar-GdMITCA</a></p><blockquote><p>è™½ç„¶è¿™æ˜¯ä¸€ç¯‡è½¯æ–‡ï¼Œä¸è¿‡å…¶ä¸­å‡ ä¸ªè®ºæ®ç¡®å®æ˜¯æœ‰é“ç†çš„ã€‚<br>è€Œ K8s çš„æ§åˆ¶å™¨åˆ™æ˜¯åŸºäºå¦ä¸€ç§æ€è·¯ï¼š<strong>æœºå™¨èƒ½åšçš„äº‹å°±ä¸åº”è¯¥ç”±äººæ¥åš</strong>ã€‚é€šè¿‡ Operatorï¼Œå¯ä»¥å®ç°<strong>24 å°æ—¶ä¸é—´æ–­åœ°åŒæ­¥æœŸæœ›çŠ¶æ€å’Œå®é™…çŠ¶æ€</strong>ï¼Œè€Œè¿™æ˜¯ç”¨ Ansible å¾ˆéš¾å®ç°çš„ï¼Œä½ ç”¨ Ansible å®ç°æ˜¯æƒ³å†™ä¸ªå®šæ—¶ä»»åŠ¡å˜›ï¼Ÿ</p></blockquote><ul><li>å¤æ‚åº¦ï¼š<ul><li>Sealos æä¾›äº†ä¸€é”®å®‰è£…å‘½ä»¤ï¼Œæœ‰æ•ˆé™ä½å…¶å¤æ‚åº¦</li></ul></li><li>ç¨³å®šæ€§ï¼š<ul><li>ä¸€ä¸ªè‰¯å¥½çš„è½¯ä»¶æ¶æ„ä¼šä¸æ–­æå‡å’Œæ”¶æ•›å…¶é²æ£’æ€§ï¼Œå¹¶é€æ¸å‡å°‘å¯¹äººçš„ä¾èµ–ï¼Œæ¯”å¦‚ä½¿ç”¨ Oracle çš„äººå–èŒ¶æ—¶é—´ä¸€å®šæ¯”ç”¨å¼€æº MySQL çš„äººå–èŒ¶æ—¶é—´å¤š</li></ul></li><li>æ€§èƒ½ï¼š<ul><li>è€Œä¸”ï¼Œå®¹å™¨å¯¹æ•°æ®åº“æ€§èƒ½çš„å½±å“å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼ŒçœŸæ­£é‡è¦çš„æ˜¯ç£ç›˜ IO å’Œç½‘ç»œå¸¦å®½æ—¶å»¶ç­‰å› ç´ ã€‚</li></ul></li></ul><p>ç›®å‰å¸‚é¢ä¸Šå¤§éƒ¨åˆ†äº‘æœåŠ¡å‚å•†æ‰€æä¾›çš„æ•°æ®åº“æœåŠ¡ä¹Ÿéƒ½æ˜¯è·‘åœ¨  kubernetes ä¸­çš„ã€‚</p><h2 id="deckarep-x2F-golang-set-A-simple-battle-tested-and-generic-set-type-for-the-Go-language-Trusted-by-Docker-1Password-Ethereum-and-Hashicorp"><a href="#deckarep-x2F-golang-set-A-simple-battle-tested-and-generic-set-type-for-the-Go-language-Trusted-by-Docker-1Password-Ethereum-and-Hashicorp" class="headerlink" title="deckarep&#x2F;golang-set: A simple, battle-tested and generic set type for the Go language. Trusted by Docker, 1Password, Ethereum and Hashicorp."></a>deckarep&#x2F;golang-set: A simple, battle-tested and generic set type for the Go language. Trusted by Docker, 1Password, Ethereum and Hashicorp.</h2><p>URL: <a href="https://github.com/deckarep/golang-set">https://github.com/deckarep/golang-set</a><br><img src="https://s2.loli.net/2023/12/08/ru6dAXPx3G7WlL4.png" alt="image.png"></p><blockquote><p>ä¸€ä¸ªæ³›å‹çš„ Go Set åº“, è¿˜æä¾›äº†ä¸€äº›é›†åˆå¸¸ç”¨çš„æ“ä½œå·¥å…·ï¼Œæ¯”å¦‚ Contains&#x2F;Difference&#x2F;Intersect ç­‰å‡½æ•°ã€‚</p></blockquote><p>å·²ç»è¢«è¿™äº›å…¬å¸é‡‡ç”¨äº†ï¼š</p><ul><li>Ethereum</li><li>Docker</li><li>1Password</li><li>Hashicorp</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Syntax example, doesn&#x27;t compile.</span></span><br><span class="line">mySet := mapset.NewSet[T]() <span class="comment">// T æ˜¯å…·ä½“çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Therefore this code creates an int set</span></span><br><span class="line">mySet := mapset.NewSet[<span class="type">int</span>]()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Or perhaps you want a string set</span></span><br><span class="line">mySet := mapset.NewSet[<span class="type">string</span>]()</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> myStruct <span class="keyword">struct</span> &#123;</span><br><span class="line">  name <span class="type">string</span></span><br><span class="line">  age <span class="type">uint8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Alternatively a set of structs</span></span><br><span class="line">mySet := mapset.NewSet[myStruct]()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lastly a set that can hold anything using the any or empty interface keyword: interface&#123;&#125;. This is effectively removes type safety.</span></span><br><span class="line">mySet := mapset.NewSet[any]()</span><br></pre></td></tr></table></figure><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://tech.meituan.com/2023/12/04/ten-years-of-meituan-technology-blog.html">https://tech.meituan.com/2023/12/04/ten-years-of-meituan-technology-blog.html</a></li><li><a href="https://tech.meituan.com/2022/05/12/principles-and-practices-of-completablefuture.html">https://tech.meituan.com/2022/05/12/principles-and-practices-of-completablefuture.html</a></li><li><a href="https://mp.weixin.qq.com/s/QJn6-EzPp7PXar-GdMITCA">https://mp.weixin.qq.com/s/QJn6-EzPp7PXar-GdMITCA</a></li><li><a href="https://github.com/deckarep/golang-set">https://github.com/deckarep/golang-set</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/12/08/CXqYjtI7fBUlhma.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬8ï¸âƒ£æœŸ</title>
    <link href="http://crossoverjie.top/2023/12/01/ob/newsletter/Newsletter08-20231201/"/>
    <id>http://crossoverjie.top/2023/12/01/ob/newsletter/Newsletter08-20231201/</id>
    <published>2023-12-01T09:28:25.000Z</published>
    <updated>2023-12-11T02:27:07.559Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/12/01/AXc16Ty8hoUw3sC.png" alt="image.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><span id="more"></span><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/">20231103ï¼šç¬¬å››æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/">20231107ï¼šç¬¬äº”æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/17/ob/newsletter/Newsletter06-20231117/">20231117ï¼šç¬¬å…­æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/24/ob/newsletter/Newsletter07-20231124/">20231124ï¼šç¬¬ä¸ƒæœŸ</a><!--more--></li></ul><h2 id="Prometheus-vs-VictoriaMetrics-VM-Last9"><a href="#Prometheus-vs-VictoriaMetrics-VM-Last9" class="headerlink" title="Prometheus vs. VictoriaMetrics (VM) | Last9"></a>Prometheus vs. VictoriaMetrics (VM) | Last9</h2><p>URL: <a href="https://last9.io/blog/prometheus-vs-victoriametrics/?ref=dailydev">https://last9.io/blog/prometheus-vs-victoriametrics/?ref=dailydev</a><br><img src="https://s2.loli.net/2023/11/28/NPR6nvLI2aTmJ9g.png" alt="image.png"></p><blockquote><p>å¯¹æ¯”äº† Prometheus å’Œ VM çš„åŒºåˆ«<br><img src="https://s2.loli.net/2023/11/28/1Oqd5Zgxt8R4EQm.png" alt="image.png"><br>è€ƒè™‘åˆ°å’Œäº‘åŸç”Ÿçš„ç¯å¢ƒçš„å…¼å®¹æ€§ï¼Œé‚£ Prometheus å¯èƒ½æ›´åˆé€‚äº›ï¼Œæ¯•ç«Ÿæ˜¯ CNCF ç»„ç»‡ä¸‹çš„é¡¹ç›®ã€‚<br>ä½†å¦‚æœè€ƒè™‘åˆ°æ€§èƒ½ã€å­˜å‚¨ã€èµ„æºå ç”¨æ€§ï¼ŒVM ä¼šæ›´åˆé€‚ä¸€äº›ã€‚</p></blockquote><h2 id="28-Rust-in-Action-10-Project-Ideas-to-Elevate-Your-Skills"><a href="#28-Rust-in-Action-10-Project-Ideas-to-Elevate-Your-Skills" class="headerlink" title="28 - Rust in Action: 10 Project Ideas to Elevate Your Skills"></a>28 - Rust in Action: 10 Project Ideas to Elevate Your Skills</h2><p>URL: <a href="https://rust-trends.com/newsletter/rust-in-action-10-project-ideas-to-elevate-your-skills/?ref=dailydev">https://rust-trends.com/newsletter/rust-in-action-10-project-ideas-to-elevate-your-skills/?ref=dailydev</a><br><img src="https://s2.loli.net/2023/11/28/3LBGgx8YTXdftSp.png" alt="image.png"></p><blockquote><p>è¿™æ˜¯ä¸€ä¸ª Rust çš„ newsletterï¼Œä»‹ç»äº†åä¸ªé¡¹ç›® idea å¯ä»¥æé«˜ä½ çš„ Rust çš„æ°´å¹³ï¼Œæˆ‘çœ‹äº†ä¸‹è¿™äº›é¡¹ç›®ä¹Ÿä¸æ€ä¹ˆé™åˆ¶è¯­è¨€ï¼Œä»»ä½•è¯­è¨€éƒ½å¯ä»¥å°è¯•ä¸‹ã€‚</p></blockquote><ul><li><code>ç®€æ˜“ç‰ˆçš„ grep å‘½ä»¤</code>ç®€å•ï¼šè¯»å–æ–‡ä»¶æ ¹æ®æœç´¢æ¡ä»¶è¾“å‡ºæœç´¢ç»“æœï¼Œæ¶‰åŠåˆ°çš„æŠ€æœ¯æ ˆï¼š<ul><li>æ–‡ä»¶ IO</li><li>æ­£åˆ™è¡¨è¾¾å¼</li><li>å‘½ä»¤è¡Œå·¥å…·</li></ul></li><li><code>çŸ­åŸŸåæœåŠ¡</code>ä¸­ç­‰ï¼šæ¥æ”¶ä¸€ä¸ªé•¿åŸŸåï¼Œè½¬æ¢ä¸ºä¸€ä¸ªçŸ­åŸŸåï¼Œè®¿é—®çŸ­åŸŸåæ—¶å¯ä»¥è‡ªåŠ¨é‡å®šå‘åˆ°é•¿åŸŸåã€‚<ul><li>Web æ¡†æ¶</li><li>æ•°æ®å­˜å‚¨ï¼Œå¯ä»¥æ˜¯ SQLite&#x2F;Redis</li><li>ç”ŸæˆçŸ­é“¾æ¥çš„å­—ç¬¦ä¸²ç®—æ³•</li></ul></li><li><code>åŸºäºæ–‡æœ¬çš„å†’é™©æ¸¸æˆ</code>ä¸­ç­‰ï¼šç”¨æˆ·å¯ä»¥æ¢ç´¢æˆ¿é—´ï¼Œé€‰æ‹©ç‰©å“ï¼Œè§£å¯†ç­‰ã€‚<ul><li>è¾“å…¥è¾“å‡º</li><li>æ¸¸æˆç»“æ„ä½“å®šä¹‰ã€ä»¥åŠçŠ¶æ€æµè½¬ã€‚</li></ul></li><li><code>åŸºæœ¬çš„ç½‘ç»œçˆ¬è™«</code>ç®€å•ï¼šçˆ¬å–ä¸€ä¸ªç½‘é¡µç„¶åæå–æŒ‡å®šçš„ä¿¡æ¯ã€‚<ul><li>HTTP</li><li>HTML è§£æ</li><li>å­—ç¬¦ä¸²åŒ¹é…ã€æ­£åˆ™ã€‚</li></ul></li><li><code>å®æ—¶èŠå¤©åº”ç”¨</code>ä¸­ç­‰ï¼šæ”¯æŒå¤šä¸ªäººç”¨æˆ·åŠ å…¥æˆ¿é—´ï¼Œå¯ä»¥ç»™æ¯ä¸ªäººå‘é€æ¶ˆæ¯ã€‚<ul><li>ç½‘ç»œç¼–ç¨‹</li><li>å¤šçº¿ç¨‹å¤„ç†å®¢æˆ·ç«¯è¿æ¥</li></ul></li><li><code>Markdown è§£æä¸º HTML</code>ä¸­ç­‰ï¼š<ul><li>æ–‡æœ¬è§£æ</li><li>æ–‡ä»¶ IO</li></ul></li><li><code>ç®€å•çš„ HTTP æœåŠ¡</code>ä¸­ç­‰ï¼šæ”¯æŒé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥å¤„ç† RESTful è¯·æ±‚ã€‚</li></ul><h2 id="Implementing-a-Bloom-Filter-in-Go-by-Francisco-Escher-Nov-2023-ITNEXT"><a href="#Implementing-a-Bloom-Filter-in-Go-by-Francisco-Escher-Nov-2023-ITNEXT" class="headerlink" title="Implementing a Bloom Filter in Go | by Francisco Escher | Nov, 2023 | ITNEXT"></a>Implementing a Bloom Filter in Go | by Francisco Escher | Nov, 2023 | ITNEXT</h2><p>URL: <a href="https://itnext.io/bloom-filters-and-go-1d5ac62557de">https://itnext.io/bloom-filters-and-go-1d5ac62557de</a><br><img src="https://s2.loli.net/2023/12/01/aY5dn6zIZp7UxNw.png" alt="image.png"></p><blockquote><p>å¤šå¹´å‰æˆ‘ä¹Ÿç”¨ Java <a href="https://crossoverjie.top/2018/11/26/guava/guava-bloom-filter/?highlight=%E5%B8%83%E9%9A%86">å†™è¿‡ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨</a>ï¼Œæœ¬æ–‡ä½œè€…ä»‹ç»ç”¨ Go æ¥å®ç°ï¼Œä¸è¿‡åŸç†éƒ½å·®ä¸å¤šã€‚</p></blockquote><p>å¸ƒéš†è¿‡æ»¤å™¨æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>ç”¨æå°‘çš„å†…å­˜å¯ä»¥å­˜æ”¾å¤§é‡çš„æ•°æ®</li><li>å­˜åœ¨è¯¯æŠ¥çš„å¯èƒ½</li><li>ä½†è¿”å›æ•°æ®ä¸å­˜åœ¨æ—¶ä¸€å®šä¸å­˜åœ¨</li><li>è¿”å›æ•°æ®å­˜åœ¨æœ‰ä¸€å®šæ¦‚ç‡æ˜¯ä¸å­˜åœ¨çš„</li></ul><p>æ‰€ä»¥åŸºäºä»¥ä¸Šç‰¹æ€§å°±æœ‰äº†ä¸‹é¢è¿™äº›åº”ç”¨åœºæ™¯ï¼š</p><ul><li>ç½‘ç»œå®‰å…¨ï¼šå¯ä»¥å¿«é€Ÿåˆ¤æ–­ IP é‡Šæ”¾åœ¨é»‘åå•ä¸­</li><li>web ç¼“å­˜ï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦åœ¨ç¼“å­˜ä¸­</li><li>æ•°æ®åº“ç¼“å­˜ï¼ŒåŸç†åŒä¸Š</li><li>è¯­æ³•æ£€æµ‹ï¼šä¸€äº›æ–‡æœ¬å·¥å…·å¯ä»¥å¿«é€Ÿæ£€æµ‹ä½ è¾“å…¥çš„æ”¯ä»˜æ˜¯å¦åœ¨å­—å…¸é‡Œï¼Œä¸å­˜åœ¨æ—¶è¿›è¡Œæç¤º</li><li>åŒºå—é“¾è®¤è¯</li><li>é‚®ä»¶è¿‡æ»¤</li></ul><h2 id="Mastering-Concurrency-In-Go-â€”-With-Select-Goroutines-and-Channels-by-Yair-Fernando-Better-Programming"><a href="#Mastering-Concurrency-In-Go-â€”-With-Select-Goroutines-and-Channels-by-Yair-Fernando-Better-Programming" class="headerlink" title="Mastering Concurrency In Go â€” With Select, Goroutines, and Channels | by Yair Fernando | Better Programming"></a>Mastering Concurrency In Go â€” With Select, Goroutines, and Channels | by Yair Fernando | Better Programming</h2><p>URL: <a href="https://betterprogramming.pub/concurrency-with-select-goroutines-and-channels-9786e0c6be3c">https://betterprogramming.pub/concurrency-with-select-goroutines-and-channels-9786e0c6be3c</a><br><img src="https://s2.loli.net/2023/12/01/K1eQ8J7zHS6ogMb.png" alt="image.png"></p><blockquote><p>ä½¿ç”¨ select goroutine channel æŒæ¡å¹¶å‘</p></blockquote><h3 id="åˆ©ç”¨-select-å¤šä¸ª-channelï¼Œæ¥æ§åˆ¶æœ€æ—©å®Œæˆçš„çº¿ç¨‹ï¼ŒåŒæ—¶æŠ›å¼ƒå…¶ä»–çº¿ç¨‹"><a href="#åˆ©ç”¨-select-å¤šä¸ª-channelï¼Œæ¥æ§åˆ¶æœ€æ—©å®Œæˆçš„çº¿ç¨‹ï¼ŒåŒæ—¶æŠ›å¼ƒå…¶ä»–çº¿ç¨‹" class="headerlink" title="åˆ©ç”¨ select å¤šä¸ª channelï¼Œæ¥æ§åˆ¶æœ€æ—©å®Œæˆçš„çº¿ç¨‹ï¼ŒåŒæ—¶æŠ›å¼ƒå…¶ä»–çº¿ç¨‹"></a>åˆ©ç”¨ select å¤šä¸ª channelï¼Œæ¥æ§åˆ¶æœ€æ—©å®Œæˆçš„çº¿ç¨‹ï¼ŒåŒæ—¶æŠ›å¼ƒå…¶ä»–çº¿ç¨‹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">quickestApiResponse</span><span class="params">(functions []*Function)</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> articles []*Article</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, function := <span class="keyword">range</span> functions &#123;</span><br><span class="line">function.Run()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> googleNewsResponse := &lt;-google:</span><br><span class="line">fmt.Printf(<span class="string">&quot;Source: %s\n&quot;</span>, googleNewsResponse.Source)</span><br><span class="line">articles = googleNewsResponse.Articles</span><br><span class="line"><span class="keyword">case</span> freeNewsReponse := &lt;-free:</span><br><span class="line">fmt.Printf(<span class="string">&quot;Source: %s\n&quot;</span>, freeNewsReponse.Source)</span><br><span class="line">articles = freeNewsReponse.Articles</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;Articles %v\n&quot;</span>, articles)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ©ç”¨-time-After-è¿”å›çš„-channelï¼Œæ¥æ§åˆ¶è¾¾åˆ°è¶…æ—¶æ—¶é—´åé€€å‡ºæ‰€æœ‰çš„çº¿ç¨‹"><a href="#åˆ©ç”¨-time-After-è¿”å›çš„-channelï¼Œæ¥æ§åˆ¶è¾¾åˆ°è¶…æ—¶æ—¶é—´åé€€å‡ºæ‰€æœ‰çš„çº¿ç¨‹" class="headerlink" title="åˆ©ç”¨ time.After è¿”å›çš„ channelï¼Œæ¥æ§åˆ¶è¾¾åˆ°è¶…æ—¶æ—¶é—´åé€€å‡ºæ‰€æœ‰çš„çº¿ç¨‹"></a>åˆ©ç”¨ time.After è¿”å›çš„ channelï¼Œæ¥æ§åˆ¶è¾¾åˆ°è¶…æ—¶æ—¶é—´åé€€å‡ºæ‰€æœ‰çš„çº¿ç¨‹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;, <span class="number">1</span>)  </span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">fmt.Println(<span class="string">&quot;do something...&quot;</span>)  </span><br><span class="line">time.Sleep(<span class="number">4</span>*time.Second)  </span><br><span class="line">ch&lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;  </span><br><span class="line">&#125;()  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">select</span> &#123;  </span><br><span class="line"><span class="keyword">case</span> &lt;-ch:  </span><br><span class="line">fmt.Println(<span class="string">&quot;done&quot;</span>)  </span><br><span class="line"><span class="keyword">case</span> &lt;-time.After(<span class="number">3</span>*time.Second):  </span><br><span class="line">fmt.Println(<span class="string">&quot;timeout&quot;</span>)  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Context-Withtimeout-æ¥æ§åˆ¶è¶…æ—¶"><a href="#Context-Withtimeout-æ¥æ§åˆ¶è¶…æ—¶" class="headerlink" title="Context.Withtimeout æ¥æ§åˆ¶è¶…æ—¶"></a>Context.Withtimeout æ¥æ§åˆ¶è¶…æ—¶</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>)  </span><br><span class="line">timeout, cancel := context.WithTimeout(context.Background(), <span class="number">3</span>*time.Second)  </span><br><span class="line"><span class="keyword">defer</span> cancel()  </span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">time.Sleep(time.Second * <span class="number">4</span>)  </span><br><span class="line">  </span><br><span class="line">ch &lt;- <span class="string">&quot;done&quot;</span>  </span><br><span class="line">&#125;()  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">select</span> &#123;  </span><br><span class="line"><span class="keyword">case</span> res := &lt;-ch:  </span><br><span class="line">fmt.Println(res)  </span><br><span class="line"><span class="keyword">case</span> &lt;-timeout.Done():  </span><br><span class="line">fmt.Println(<span class="string">&quot;timout&quot;</span>, timeout.Err())  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://last9.io/blog/prometheus-vs-victoriametrics/?ref=dailydev">https://last9.io/blog/prometheus-vs-victoriametrics/?ref=dailydev</a></li><li><a href="https://rust-trends.com/newsletter/rust-in-action-10-project-ideas-to-elevate-your-skills/?ref=dailydev">https://rust-trends.com/newsletter/rust-in-action-10-project-ideas-to-elevate-your-skills/?ref=dailydev</a></li><li><a href="https://itnext.io/bloom-filters-and-go-1d5ac62557de">https://itnext.io/bloom-filters-and-go-1d5ac62557de</a></li><li><a href="https://betterprogramming.pub/concurrency-with-select-goroutines-and-channels-9786e0c6be3c">https://betterprogramming.pub/concurrency-with-select-goroutines-and-channels-9786e0c6be3c</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/12/01/AXc16Ty8hoUw3sC.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>k8så…¥é—¨åˆ°å®æˆ˜-æ»šåŠ¨æ›´æ–°ä¸ä¼˜é›…åœæœº</title>
    <link href="http://crossoverjie.top/2023/11/29/ob/k8s-rollout/"/>
    <id>http://crossoverjie.top/2023/11/29/ob/k8s-rollout/</id>
    <published>2023-11-29T06:40:10.000Z</published>
    <updated>2023-11-29T11:00:47.297Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/29/BPVLoC2UfX5Drv8.png" alt="rollout.png"></p><p>å½“æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒå‘å¸ƒåº”ç”¨æ—¶ï¼Œå¿…é¡»è¦è€ƒè™‘åˆ°å½“å‰ç³»ç»Ÿè¿˜æœ‰ç”¨æˆ·æ­£åœ¨ä½¿ç”¨çš„æƒ…å†µï¼Œæ‰€ä»¥å°½é‡éœ€è¦åšåˆ°ä¸åœæœºå‘ç‰ˆã€‚</p><span id="more"></span><p>æ‰€ä»¥åœ¨å‘å¸ƒè¿‡ç¨‹ä¸­ç†è®ºä¸Šä¹‹å‰çš„ v1 ç‰ˆæœ¬ä¾ç„¶å­˜åœ¨ï¼Œå¿…é¡»å¾—ç­‰å¾… v2 ç‰ˆæœ¬å¯åŠ¨æˆåŠŸåå†åˆ é™¤å†å²çš„ v1 ç‰ˆæœ¬ã€‚</p><blockquote><p>å¦‚æœ v2 ç‰ˆæœ¬å¯åŠ¨å¤±è´¥ v1 ç‰ˆæœ¬ä¸ä¼šåšä»»ä½•æ“ä½œï¼Œä¾ç„¶èƒ½å¯¹å¤–æä¾›æœåŠ¡ã€‚</p></blockquote><h1 id="æ»šåŠ¨æ›´æ–°"><a href="#æ»šåŠ¨æ›´æ–°" class="headerlink" title="æ»šåŠ¨æ›´æ–°"></a>æ»šåŠ¨æ›´æ–°</h1><p><img src="https://s2.loli.net/2023/11/29/stqYlaFwecvhouS.png" alt="image.png"></p><p>è¿™æ˜¯æˆ‘ä»¬é¢„æœŸä¸­çš„å‘å¸ƒæµç¨‹ï¼Œè¦åœ¨ kubernetes ä½¿ç”¨è¯¥åŠŸèƒ½ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ spec ä¸‹é…ç½®ç›¸å…³ç­–ç•¥å³å¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">strategy:</span></span><br><span class="line">    <span class="attr">rollingUpdate:</span></span><br><span class="line">      <span class="attr">maxSurge:</span> <span class="number">25</span><span class="string">%</span></span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">25</span><span class="string">%</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®çš„å«ä¹‰æ˜¯ï¼š</p><ul><li>ä½¿ç”¨æ»šåŠ¨æ›´æ–°ï¼Œå½“ç„¶è¿˜æœ‰ <strong>Recreate</strong> ç”¨äºåˆ é™¤æ—§ç‰ˆæœ¬çš„ Podï¼Œæˆ‘ä»¬åŸºæœ¬ä¸ä¼šç”¨è¿™ä¸ªç­–ç•¥ã€‚</li><li><code>maxSurge</code>ï¼šæ»šåŠ¨æ›´æ–°è¿‡ç¨‹ä¸­å¯ä»¥æœ€å¤šè¶…è¿‡é¢„æœŸ Pod æ•°é‡çš„ç™¾åˆ†æ¯”ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¡«æ•´æ•°ã€‚</li><li><code>maxUnavailable</code>ï¼šæ»šåŠ¨æ›´æ–°è¿‡ç¨‹ä¸­æœ€å¤§ä¸å¯ç”¨ Pod æ•°é‡è¶…è¿‡é¢„æœŸçš„ç™¾åˆ†æ¯”ã€‚</li></ul><p>è¿™æ ·ä¸€æ—¦æˆ‘ä»¬æ›´æ–°äº† Pod çš„é•œåƒæ—¶ï¼Œkubernetes å°±ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬çš„ Pod ç­‰å¾…ä»–å¯åŠ¨æˆåŠŸåå†é€æ­¥æ›´æ–°å‰©ä¸‹çš„ Podã€‚<br><img src="https://s2.loli.net/2023/11/29/s52LOSvECPReUnT.png"></p><h1 id="ä¼˜é›…åœæœº"><a href="#ä¼˜é›…åœæœº" class="headerlink" title="ä¼˜é›…åœæœº"></a>ä¼˜é›…åœæœº</h1><p>æ»šåŠ¨å‡çº§è¿‡ç¨‹ä¸­ä¸å¯é¿å…çš„åˆä¼šç¢°åˆ°ä¸€ä¸ªä¼˜é›…åœæœºçš„é—®é¢˜ï¼Œæ¯•ç«Ÿæ˜¯éœ€è¦åœæ‰è€çš„ Podã€‚</p><p>è¿™æ—¶æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸¤ç§æƒ…å†µï¼š</p><ul><li>åœæœºè¿‡ç¨‹ä¸­ï¼Œå·²ç»è¿›å…¥ Pod çš„è¯·æ±‚éœ€è¦æ‰§è¡Œå®Œæ¯•æ‰èƒ½é€€å‡ºã€‚</li><li>åœæœºä¹‹åä¸èƒ½å†æœ‰è¯·æ±‚è·¯ç”±åˆ°å·²ç»åœæœºçš„ Pod</li></ul><p>ç¬¬ä¸€ä¸ªé—®é¢˜å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <code>Go</code>ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªé’©å­æ¥ç›‘å¬  <code>kubernetes</code> å‘å‡ºçš„é€€å‡ºä¿¡å·ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">quit := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal)  </span><br><span class="line">signal.Notify(quit, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGPIPE)  </span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    &lt;-quit  </span><br><span class="line">    log.Printf(<span class="string">&quot;quit signal received, exit \n&quot;</span>)  </span><br><span class="line">    os.Exit(<span class="number">0</span>)  </span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæ‰§è¡Œå¯¹åº”çš„èµ„æºé‡Šæ”¾ã€‚</p><p>å¦‚æœä½¿ç”¨çš„æ˜¯ <code>spring boot</code> ä¹Ÿæœ‰å¯¹åº”çš„é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span> </span><br><span class="line"><span class="attr">shutdown:</span> <span class="string">&quot;graceful&quot;</span></span><br><span class="line"><span class="attr">spring:</span> </span><br><span class="line"><span class="attr">lifecycle:</span> </span><br><span class="line"><span class="attr">timeout-per-shutdown-phase:</span> <span class="string">&quot;20s&quot;</span></span><br></pre></td></tr></table></figure><p>å½“åº”ç”¨æ”¶åˆ°é€€å‡ºä¿¡å·åï¼Œspring boot å°†ä¸ä¼šå†æ¥æ”¶æ–°çš„è¯·æ±‚ï¼Œå¹¶ç­‰å¾…ç°æœ‰çš„è¯·æ±‚å¤„ç†å®Œæ¯•ã€‚</p><p>ä½† kubernetes ä¹Ÿä¸ä¼šæ— é™ç­‰å¾…åº”ç”¨å°† Pod å°†ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Pod ä¸­é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">terminationGracePeriodSeconds:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><p>æ¥å®šä¹‰éœ€è¦ç­‰å¾…å¤šé•¿æ—¶é—´ï¼Œè¿™é‡Œæ˜¯è¶…è¿‡ 30s ä¹‹åå°±ä¼šå¼ºè¡Œ kill Podã€‚</p><blockquote><p>å…·ä½“å€¼å¤§å®¶å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé…ç½®</p></blockquote><hr><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">example-container</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">example-image</span></span><br><span class="line">    <span class="attr">lifecycle:</span></span><br><span class="line">      <span class="attr">preStop:</span></span><br><span class="line">        <span class="attr">exec:</span></span><br><span class="line">          <span class="attr">command:</span> [<span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;sleep 10&quot;</span>]</span><br></pre></td></tr></table></figure><p>åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é…ç½® <code>preStop</code> åšä¸€ä¸ª sleep æ¥ç¡®ä¿ <code>kubernetes</code> å°†å‡†å¤‡åˆ é™¤çš„ Pod åœ¨ <code>Iptable</code> ä¸­å·²ç»æ›´æ–°äº†ä¹‹åå†åˆ é™¤ <code>Pod</code>ã€‚</p><p>è¿™æ ·å¯ä»¥é¿å…ç¬¬äºŒç§æƒ…å†µï¼šå·²ç»åˆ é™¤çš„ <code>Pod</code> ä¾ç„¶è¿˜æœ‰è¯·æ±‚è·¯ç”±è¿‡æ¥ã€‚<br>å…·ä½“å¯ä»¥å‚è€ƒ <code>spring boot</code> æ–‡æ¡£ï¼š<br><a href="https://docs.spring.io/spring-boot/docs/2.4.4/reference/htmlsingle/#cloud-deployment-kubernetes-container-lifecycle">https://docs.spring.io/spring-boot/docs/2.4.4/reference/htmlsingle/#cloud-deployment-kubernetes-container-lifecycle</a></p><h1 id="å›æ»š"><a href="#å›æ»š" class="headerlink" title="å›æ»š"></a>å›æ»š</h1><p>å›æ»šå…¶å®ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯å‡çº§çš„ä¸€ç§ï¼Œåªæ˜¯å‡çº§åˆ°äº†å†å²ç‰ˆæœ¬ï¼Œåœ¨ <code>kubernetes</code> ä¸­å›æ»šåº”ç”¨éå¸¸ç®€å•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</span></span><br><span class="line"> k rollout undo deployment/abc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line">k rollout undo daemonset/abc --to-revision=3</span><br></pre></td></tr></table></figure><p>åŒæ—¶ kubernetes ä¹Ÿèƒ½ä¿è¯æ˜¯æ»šåŠ¨å›æ»šçš„ã€‚</p><h1 id="ä¼˜é›…é‡å¯"><a href="#ä¼˜é›…é‡å¯" class="headerlink" title="ä¼˜é›…é‡å¯"></a>ä¼˜é›…é‡å¯</h1><p>åœ¨ä¹‹å‰çš„ <a href="https://crossoverjie.top/2023/10/19/ob/k8s-restart-pod/">å¦‚ä½•ä¼˜é›…é‡å¯ kubernetes çš„ Pod</a> é‚£ç¯‡æ–‡ç« ä¸­å†™è¿‡ï¼Œå¦‚æœæƒ³è¦ä¼˜é›…é‡å¯ Pod ä¹Ÿå¯ä»¥ä½¿ç”¨ rollout å‘½ä»¤ï¼Œå®ƒä¹Ÿä¹Ÿå¯ä»¥ä¿è¯æ˜¯æ»šåŠ¨é‡å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">k rollout restart deployment/nginx</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>kubernetes</code> çš„æ»šåŠ¨æ›´æ–°ç¡®å®è¦æ¯”æˆ‘ä»¬ä»¥å¾€çš„ä¼ ç»Ÿè¿ç»´ç®€å•è®¸å¤šï¼Œå°±å‡ ä¸ªå‘½ä»¤çš„äº‹æƒ…ä¹‹å‰å¾—å†™ä¸€äº›å¤æ‚çš„è¿ç»´è„šæœ¬æ‰èƒ½å®ç°ã€‚</p><p>æœ¬æ–‡çš„æ‰€æœ‰æºç åœ¨è¿™é‡Œå¯ä»¥è®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a><br>#Blog #K8s </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/29/BPVLoC2UfX5Drv8.png&quot; alt=&quot;rollout.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒå‘å¸ƒåº”ç”¨æ—¶ï¼Œå¿…é¡»è¦è€ƒè™‘åˆ°å½“å‰ç³»ç»Ÿè¿˜æœ‰ç”¨æˆ·æ­£åœ¨ä½¿ç”¨çš„æƒ…å†µï¼Œæ‰€ä»¥å°½é‡éœ€è¦åšåˆ°ä¸åœæœºå‘ç‰ˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
  <entry>
    <title>k8så…¥é—¨åˆ°å®æˆ˜-åº”ç”¨æ¢é’ˆ</title>
    <link href="http://crossoverjie.top/2023/11/25/ob/k8s-probe/"/>
    <id>http://crossoverjie.top/2023/11/25/ob/k8s-probe/</id>
    <published>2023-11-25T15:20:13.000Z</published>
    <updated>2023-11-27T05:29:50.220Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/26/5uwvC1TrsjMYDZF.png" alt="Probe.png"></p><p>ä»Šå¤©è¿›å…¥ <code>kubernetes</code> çš„è¿ç»´éƒ¨åˆ†ï¼ˆå¹¶ä¸æ˜¯è¿ç»´ <code>kubernetes</code>ï¼Œè€Œæ˜¯è¿ç»´åº”ç”¨ï¼‰ï¼Œå…¶å®æ—¥å¸¸æˆ‘ä»¬å¤§éƒ¨åˆ†ä½¿ç”¨ <code>kubernetes</code> çš„åŠŸèƒ½å°±æ˜¯ä»¥å¾€è¿ç»´çš„å·¥ä½œï¼Œç°åœ¨äº‘åŸç”Ÿå°†è¿ç»´å’Œç ”å‘å…³ç³»å˜å¾—æ›´ç´§å¯†äº†ã€‚</p><span id="more"></span><p>ä»Šå¤©ä¸»è¦è®²è§£ <code>Probe</code> æ¢é’ˆç›¸å…³çš„åŠŸèƒ½ï¼Œæ¢é’ˆæœ€å®ç”¨çš„åŠŸèƒ½å°±æ˜¯å¯ä»¥æ§åˆ¶åº”ç”¨ä¼˜é›…ä¸Šçº¿ã€‚</p><h1 id="å°±ç»ªæ¢é’ˆ"><a href="#å°±ç»ªæ¢é’ˆ" class="headerlink" title="å°±ç»ªæ¢é’ˆ"></a>å°±ç»ªæ¢é’ˆ</h1><p>ä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬çš„ service å…³è”äº†å¤šä¸ª Pod çš„æ—¶å€™ï¼Œå…¶ä¸­ä¸€ä¸ª Pod æ­£åœ¨é‡å¯ä½†è¿˜æ²¡è¾¾åˆ°å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡çš„çŠ¶æ€ï¼Œè¿™æ—¶å€™å¦‚æœæœ‰æµé‡è¿›å…¥ã€‚</p><p>é‚£è¿™ä¸ªè¯·æ±‚è‚¯å®šå°±ä¼šå‡ºç°å¼‚å¸¸ï¼Œä»è€Œå¯¼è‡´é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå’Œ <code>kubernetes</code> æ²Ÿé€šçš„æ¸ é“ï¼Œå‘Šè¯‰å®ƒä»€ä¹ˆæ—¶å€™å¯ä»¥å°†æµé‡æ”¾è¿›æ¥ã€‚<br><img src="https://s2.loli.net/2023/11/26/StHngQR4K9vCxjf.png" alt="image.png"><br>æ¯”å¦‚å¦‚å›¾æ‰€ç¤ºçš„æƒ…å†µï¼Œçº¢è‰² <code>Pod</code> åœ¨æœªå°±ç»ªçš„æ—¶å€™å°±ä¸ä¼šæœ‰æµé‡ã€‚</p><p>ä½¿ç”¨å°±ç»ªæ¢é’ˆå°±å¯ä»¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readinessProbe:</span>  </span><br><span class="line">  <span class="attr">failureThreshold:</span> <span class="number">3</span>  </span><br><span class="line">  <span class="attr">httpGet:</span>  </span><br><span class="line">    <span class="attr">path:</span> <span class="string">/ping</span>  </span><br><span class="line">    <span class="attr">port:</span> <span class="number">8081</span>  </span><br><span class="line">    <span class="attr">scheme:</span> <span class="string">HTTP</span>  </span><br><span class="line">  <span class="attr">periodSeconds:</span> <span class="number">3</span>  </span><br><span class="line">  <span class="attr">successThreshold:</span> <span class="number">1</span>  </span><br><span class="line">  <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®ä¹Ÿå¾ˆç›´æ¥ï¼š</p><ul><li>é…ç½®ä¸€ä¸ª HTTP çš„ ping æ¥å£</li><li>æ¯ä¸‰ç§’æ£€æµ‹ä¸€æ¬¡</li><li>å¤±è´¥ 3 æ¬¡åˆ™è®¤ä¸ºæ£€æµ‹å¤±è´¥</li><li>æˆåŠŸä¸€æ¬¡å°±è®¤ä¸ºæ£€æµ‹æˆåŠŸ</li></ul><blockquote><p>ä½†æ²¡æœ‰é…ç½®å°±ç»ªæ¢é’ˆæ—¶ï¼Œä¸€æ—¦ Pod çš„ <code>Endpoint</code> åŠ å…¥åˆ° service ä¸­(Pod è¿›å…¥ <code>Running</code> çŠ¶æ€)ï¼Œè¯·æ±‚å°±æœ‰å¯èƒ½è¢«è½¬å‘è¿‡æ¥ï¼Œæ‰€ä»¥é…ç½®å°±ç»ªæ¢é’ˆæ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p></blockquote><h1 id="å¯åŠ¨æ¢é’ˆ"><a href="#å¯åŠ¨æ¢é’ˆ" class="headerlink" title="å¯åŠ¨æ¢é’ˆ"></a>å¯åŠ¨æ¢é’ˆ</h1><p>è€Œå¯åŠ¨æ¢é’ˆå¾€å¾€æ˜¯å’Œå°±ç»ªæ¢é’ˆæ­é…å¹²æ´»çš„ï¼Œå¦‚æœæˆ‘ä»¬ä¸€ä¸ª Pod å¯åŠ¨æ—¶é—´è¿‡é•¿ï¼Œæ¯”å¦‚è¶…è¿‡ä¸Šé¢é…ç½®çš„å¤±è´¥æ£€æµ‹æ¬¡æ•°ï¼Œæ­¤æ—¶ Pod å°±ä¼šè¢« kubernetes é‡å¯ï¼Œè¿™æ ·å¯èƒ½ä¼šè¿›å…¥æ— é™é‡å¯çš„å¾ªç¯ã€‚</p><p>æ‰€ä»¥å¯åŠ¨æ¢é’ˆå¯ä»¥å…ˆæ£€æµ‹ä¸€æ¬¡æ˜¯å¦å·²ç»å¯åŠ¨ï¼Œç›´åˆ°å¯åŠ¨æˆåŠŸåæ‰ä¼šåšåç»­çš„æ£€æµ‹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">startupProbe:</span>  </span><br><span class="line">  <span class="attr">failureThreshold:</span> <span class="number">30</span>  </span><br><span class="line">  <span class="attr">httpGet:</span>  </span><br><span class="line">    <span class="attr">path:</span> <span class="string">/ping</span>  </span><br><span class="line">    <span class="attr">port:</span> <span class="number">8081</span>  </span><br><span class="line">    <span class="attr">scheme:</span> <span class="string">HTTP</span>  </span><br><span class="line">  <span class="attr">periodSeconds:</span> <span class="number">5</span>  </span><br><span class="line">  <span class="attr">successThreshold:</span> <span class="number">1</span>  </span><br><span class="line">  <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘è¿™é‡Œä¸¤ä¸ªæ£€æµ‹æ¥å£æ˜¯åŒä¸€ä¸ªï¼Œå…·ä½“å¾—æ ¹æ®è‡ªå·±æ˜¯å®é™…ä¸šåŠ¡è¿›è¡Œé…ç½®ï¼›<br>æ¯”å¦‚åº”ç”¨ç«¯å£å¯åŠ¨ä¹‹åå¹¶ä¸ä»£è¡¨ä¸šåŠ¡å·²ç»å°±ç»ªäº†ï¼Œå¯èƒ½æŸäº›åŸºç¡€æ•°æ®è¿˜æ²¡åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦è‡ªå·±å†™å…¶ä»–çš„æ¥å£æ¥é…ç½®å°±ç»ªæ¢é’ˆäº†ã€‚</p></blockquote><p><img src="https://s2.loli.net/2023/11/26/AskpbIJiBovPGZ7.png" alt="image.png"></p><p>æ‰€æœ‰å…³äºæ¢é’ˆç›¸å…³çš„æ—¥å¿—éƒ½å¯ä»¥åœ¨ Pod çš„äº‹ä»¶ä¸­æŸ¥çœ‹ï¼Œæ¯”å¦‚å¦‚æœä¸€ä¸ªåº”ç”¨åœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­é¢‘ç¹é‡å¯ï¼Œé‚£å°±å¯ä»¥çœ‹çœ‹æ˜¯ä¸æ˜¯æŸä¸ªæ¢é’ˆæ£€æµ‹å¤±è´¥äº†ã€‚</p><h1 id="å­˜æ´»æ¢é’ˆ"><a href="#å­˜æ´»æ¢é’ˆ" class="headerlink" title="å­˜æ´»æ¢é’ˆ"></a>å­˜æ´»æ¢é’ˆ</h1><p>å­˜æ´»æ¢é’ˆå¾€å¾€æ˜¯ç”¨äºä¿è¯åº”ç”¨é«˜å¯ç”¨çš„ï¼Œè™½ç„¶ kubernetes å¯ä»¥åœ¨ Pod é€€å‡ºåè‡ªåŠ¨é‡å¯ï¼Œæ¯”å¦‚ <code>Pod OOM</code>ï¼›ä½†åº”ç”¨å‡æ­»ä»–æ˜¯æ£€æµ‹ä¸å‡ºæ¥çš„ã€‚</p><p>ä¸ºäº†ä¿è¯è¿™ç§æƒ…å†µä¸‹ Pod ä¹Ÿèƒ½è¢«è‡ªåŠ¨é‡å¯ï¼Œå°±å¯ä»¥é…åˆå­˜æ´»æ¢é’ˆä½¿ç”¨ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">livenessProbe:</span>  </span><br><span class="line">  <span class="attr">failureThreshold:</span> <span class="number">3</span>  </span><br><span class="line">  <span class="attr">httpGet:</span>  </span><br><span class="line">    <span class="attr">path:</span> <span class="string">/ping</span>  </span><br><span class="line">    <span class="attr">port:</span> <span class="number">8081</span>  </span><br><span class="line">    <span class="attr">scheme:</span> <span class="string">HTTP</span>  </span><br><span class="line">  <span class="attr">periodSeconds:</span> <span class="number">3</span>  </span><br><span class="line">  <span class="attr">successThreshold:</span> <span class="number">1</span>  </span><br><span class="line">  <span class="attr">timeoutSeconds:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä¸€æ—¦æ¥å£å“åº”å¤±è´¥ï¼Œkubernetes å°±ä¼šå°è¯•é‡å¯ã€‚</p><p><img src="https://s2.loli.net/2023/11/26/khZlsDHLyX2WOxT.png" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="https://s2.loli.net/2023/11/26/jRqSIbk4HmnsTWl.png" alt="image.png"></p><p>ä»¥ä¸Šæ¢é’ˆé…ç½®æœ€å¥½æ˜¯å¯ä»¥åœ¨ç ”æ•ˆå¹³å°å¯è§†åŒ–é…ç½®ï¼Œè¿™æ ·ç»´æŠ¤èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</p><p>æ¢é’ˆæ˜¯ç»´æŠ¤åº”ç”¨å¥åº·çš„å¿…è¦æ‰‹æ®µï¼Œå¼ºçƒˆæ¨èå¤§å®¶éƒ½è¿›è¡Œé…ç½®ã€‚</p><p>æœ¬æ–‡çš„æ‰€æœ‰æºç åœ¨è¿™é‡Œå¯ä»¥è®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a><br>#Blog </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/26/5uwvC1TrsjMYDZF.png&quot; alt=&quot;Probe.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»Šå¤©è¿›å…¥ &lt;code&gt;kubernetes&lt;/code&gt; çš„è¿ç»´éƒ¨åˆ†ï¼ˆå¹¶ä¸æ˜¯è¿ç»´ &lt;code&gt;kubernetes&lt;/code&gt;ï¼Œè€Œæ˜¯è¿ç»´åº”ç”¨ï¼‰ï¼Œå…¶å®æ—¥å¸¸æˆ‘ä»¬å¤§éƒ¨åˆ†ä½¿ç”¨ &lt;code&gt;kubernetes&lt;/code&gt; çš„åŠŸèƒ½å°±æ˜¯ä»¥å¾€è¿ç»´çš„å·¥ä½œï¼Œç°åœ¨äº‘åŸç”Ÿå°†è¿ç»´å’Œç ”å‘å…³ç³»å˜å¾—æ›´ç´§å¯†äº†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ç¬¬7ï¸âƒ£æœŸ</title>
    <link href="http://crossoverjie.top/2023/11/24/ob/newsletter/Newsletter07-20231124/"/>
    <id>http://crossoverjie.top/2023/11/24/ob/newsletter/Newsletter07-20231124/</id>
    <published>2023-11-24T09:28:25.000Z</published>
    <updated>2023-11-24T03:32:53.691Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/24/zGKworjfL7JkyQt.png" alt="image.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/">20231022ï¼šç¬¬äºŒæœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/">20231027ï¼šç¬¬ä¸‰æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/">20231103ï¼šç¬¬å››æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/">20231107ï¼šç¬¬äº”æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/17/ob/newsletter/Newsletter06-20231117/">20231117ï¼šç¬¬å…­æœŸ</a><span id="more"></span></li></ul><h2 id="What-is-a-JWT-Understanding-JSON-Web-Tokens"><a href="#What-is-a-JWT-Understanding-JSON-Web-Tokens" class="headerlink" title="What is a JWT? Understanding JSON Web Tokens"></a>What is a JWT? Understanding JSON Web Tokens</h2><p>URL: <a href="https://supertokens.com/blog/what-is-jwt">https://supertokens.com/blog/what-is-jwt</a></p><blockquote><p>æœ¬æ–‡ä¸»è¦è®²äº†ä¸€äº› JWT çš„åŸºæœ¬åŸç†ï¼Œä»¥åŠä¼˜ç¼ºç‚¹<br><img src="https://s2.loli.net/2023/11/20/iltd8qpuH6b75PY.png" alt="image.png"></p></blockquote><ul><li>JWT çš„ç”Ÿæˆè§„åˆ™ <code>&lt;header&gt;.&lt;body&gt;.&lt;signature&gt;</code><ul><li>ä½¿ç”¨è¯ä¹¦+ç­¾åç®—æ³•åˆ›å»ºç­¾å Key</li><li>å°† header å’Œ body çš„ç©ºæ ¼æ¢è¡Œéƒ½å»æ‰åè¿›è¡Œ base64ï¼Œç„¶åä½¿ç”¨ <code>.</code> æ‹¼æ¥èµ·æ¥ã€‚</li><li>å°†åˆšæ‰æ‹¼æ¥çš„å­—ç¬¦ä¸²ä½¿ç”¨ <code>Base64 + HMACSHA256</code> ç”Ÿæˆç­¾åã€‚</li><li>æœ€ç»ˆå°† <code>&lt;header&gt;.&lt;body&gt;.&lt;signature&gt;</code> æ‹¼æ¥æˆ <code>JWT</code>ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Base64URLSafe</span>(   <span class="title class_">HMACSHA256</span>(<span class="string">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiJhYmNkMTIzIiwiZXhwaXJ5IjoxNjQ2NjM1NjExMzAxfQ&quot;</span>, <span class="string">&quot;NTNv7j0TuYARvmNMmWXo6fKvM4o6nv/aUi9ryX38ZH+L1bkrnD1ObOQ8JAUmHCBq7Iy7otZcyAagBLHVKvvYaIpmMuxmARQ97jUVG16Jkpkp1wXOPsrF9zwew6TpczyHkHgX5EuLg2MeBuiT/qJACs1J0apruOOJCg/gOtkjB4c=&quot;</span>)</span><br><span class="line">)</span><br><span class="line"><span class="title class_">Results</span> <span class="attr">in</span>:</span><br><span class="line">3Thp81rDFrKXr3WrY1MyMnNK8kKoZBX9lg-<span class="title class_">JwFznR</span>-M</span><br></pre></td></tr></table></figure></li></ul></li><li>éªŒè¯ JWT<ul><li>å…ˆè·å– headerï¼Œæ ¡éªŒå¤´é‡Œçš„ç­¾åç±»å‹å’Œç®—æ³•</li><li>è·å– bodyï¼Œç„¶åæŒ‰ç…§ä¹‹å‰çš„æ–¹å¼ <code>Base64 + HMACSHA256</code> ç”Ÿæˆç­¾å</li><li>åˆ¤æ–­ä¸¤è€…ç­¾åæ˜¯å¦ç›¸åŒï¼Œä¸åŒåˆ™éªŒè¯å¤±è´¥</li><li>åˆ¤æ–­è¿‡æœŸæ—¶é—´æ˜¯å¦è¿‡æœŸ</li></ul></li><li>JWT çš„ä¼˜ç‚¹<ul><li>å®‰å…¨æ€§ï¼šä½¿ç”¨éå¯¹ç§°åŠ å¯†ä¿è¯æ•°æ®ä¸è¢«ç¯¡æ”¹</li><li>é«˜æ•ˆï¼Œæ— çŠ¶æ€ï¼šä¸éœ€è¦å•ç‹¬ä½¿ç”¨æ•°æ®åº“å­˜å‚¨æ•°æ®ï¼Œåªä½¿ç”¨ç®—æ³•å°±èƒ½éªŒè¯</li></ul></li><li>ç¼ºç‚¹<ul><li>å› ä¸ºä»–çš„ç‹¬ç«‹æ€§å’Œæ— çŠ¶æ€ï¼Œé™¤éæ˜¯ token è¿‡æœŸäº†ï¼Œä¸ç„¶å¾ˆéš¾æ’¤é”€</li><li>ä¾èµ–äºç¬¬ä¸€æ­¥é‡Œç”Ÿæˆçš„ç­¾å Keyï¼Œä¸€æ—¦è¿™ä¸ª Key è¢«æ³„éœ²å°±ä¼šè¢«ä¼ªé€ ã€‚</li></ul></li></ul><h2 id="Go-å¼€å‘ä¸­çš„åå¤§å¸¸è§é™·é˜±-è¯‘"><a href="#Go-å¼€å‘ä¸­çš„åå¤§å¸¸è§é™·é˜±-è¯‘" class="headerlink" title="Go å¼€å‘ä¸­çš„åå¤§å¸¸è§é™·é˜±[è¯‘]"></a>Go å¼€å‘ä¸­çš„åå¤§å¸¸è§é™·é˜±[è¯‘]</h2><p>URL: <a href="https://tomotoes.com/blog/the-top-10-most-common-mistakes-ive-seen-in-go-projects/">https://tomotoes.com/blog/the-top-10-most-common-mistakes-ive-seen-in-go-projects/</a></p><blockquote><p>æœ€è¿‘åœ¨  Reddit ä¸Šçœ‹åˆ°ä¸€ä¸ªå¸–å­ï¼Œè®©æ¨èä¸€æœ¬ Go ç›¸å…³çš„ä¹¦ç±ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯æ¨èçš„ â€œ100 Go Mistakes and How to Avoid Themâ€ï¼Œç›®å‰è¿˜æ²¡æœ‰ä¸­è¯‘ç‰ˆæœ¬ï¼Œä¸è¿‡ä½œè€…ä¹‹å‰å†™è¿‡ä¸€ä¸ªåä¸ªé”™è¯¯çš„åšå®¢ï¼Œä¹Ÿå¯ä»¥é¢„å…ˆçœ‹çœ‹ã€‚</p></blockquote><ul><li>æœªçŸ¥çš„æšä¸¾å€¼ï¼Œå°†æšä¸¾çš„æœªçŸ¥å€¼è®¾ç½®ä¸º 0</li><li>è‡ªåŠ¨ä¼˜åŒ–çš„åŸºå‡†æµ‹è¯•</li><li>è¢«è½¬ç§»çš„æŒ‡é’ˆï¼Œæ—¥å¸¸å¼€å‘ä¸­å»ºè®®ä¼ å€¼ï¼Œé€Ÿåº¦ä¼šæ›´å¿«ã€‚<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">loop:  </span><br><span class="line">  <span class="keyword">for</span> &#123;  </span><br><span class="line">    <span class="keyword">select</span> &#123;  </span><br><span class="line">    <span class="keyword">case</span> &lt;-ch:  </span><br><span class="line">    <span class="comment">// Do something  </span></span><br><span class="line">    <span class="keyword">case</span> &lt;-ctx.Done():  </span><br><span class="line">      <span class="keyword">break</span> loop  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li>å‡ºä¹æ„æ–™çš„ breakï¼Œåœ¨ select è¯­å¥ä¸­æƒ³è¦é€€å‡º for å¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨æ ‡ç­¾ã€‚</li><li>æ­£ç¡®ä¼ é€’é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨ <a href="https://github.com/pkg/errors">https://github.com/pkg/errors</a></li><li>æ‰©å®¹åˆ‡ç‰‡æœ‰æ€§èƒ½æŸè€—ï¼Œå¦‚æœçŸ¥é“é•¿åº¦å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶æŒ‡å®šé•¿åº¦ã€‚</li><li>æ­£ç¡®ä½¿ç”¨ context</li><li>åšå¥½å‡½æ•°æŠ½è±¡ï¼Œå¯ä»¥å‚è€ƒ <code>io.Reader/io.Writer</code></li><li>åœ¨ goroutine ä¸­ä½¿ç”¨å¾ªç¯è°ƒç”¨çš„æ—¶å€™éœ€è¦é¢å¤–èµ‹å€¼ï¼Œè¿™ä¸ªåœ¨  1.22 å·²ç»ä¿®å¤äº†ã€‚</li></ul><h2 id="Dapr-A-Portable-Event-Driven-Runtime-for-Building-Distributed-Applications-by-Seifeddine-Rajhi-Nov-2023-Medium"><a href="#Dapr-A-Portable-Event-Driven-Runtime-for-Building-Distributed-Applications-by-Seifeddine-Rajhi-Nov-2023-Medium" class="headerlink" title="Dapr: A Portable, Event-Driven Runtime for Building Distributed Applications | by Seifeddine Rajhi | Nov, 2023 | Medium"></a>Dapr: A Portable, Event-Driven Runtime for Building Distributed Applications | by Seifeddine Rajhi | Nov, 2023 | Medium</h2><p>URL: <a href="https://medium.com/@seifeddinerajhi/dapr-a-portable-event-driven-runtime-for-building-distributed-applications-c2ea8254406c">https://medium.com/@seifeddinerajhi/dapr-a-portable-event-driven-runtime-for-building-distributed-applications-c2ea8254406c</a></p><blockquote><p>æœ¬æ–‡ä»‹ç»äº† Dapr æ˜¯ä»€ä¹ˆï¼Œä»¥åŠç»™äº†ä¸€ä¸ªå…¥é—¨ç¤ºä¾‹</p></blockquote><p><img src="https://s2.loli.net/2023/11/23/v1LOZia9uxS8PUR.png" alt="image.png"></p><ul><li>Dapr æ˜¯ <strong>Distributed Application Runtime</strong> çš„ç®€ç§°ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯åˆ†å¸ƒå¼åº”ç”¨è¿è¡Œæ—¶ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•è¯­è¨€ï¼Œä»»ä½•æ¡†æ¶ã€è¿è¡Œåœ¨ä»»ä½•åœ°æ–¹æ„å»ºä½ çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åº</li><li>Dapr æŠ½è±¡äº†æˆ‘ä»¬åº”ç”¨å¼€å‘ä¸­æ‰€éœ€è¦çš„å¤§éƒ¨åˆ† APIï¼Œæ‰€æœ‰ä¸è¿™äº› API äº¤äº’çš„ SDK éƒ½æ˜¯ç”± Dapr æä¾›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å…³ç³»ä»–çš„åº•å±‚æ˜¯ä»€ä¹ˆã€‚</li></ul><h2 id="3-years-managing-Kubernetes-clusters-my-10-lessons-by-Herve-Khg-Nov-2023-Medium"><a href="#3-years-managing-Kubernetes-clusters-my-10-lessons-by-Herve-Khg-Nov-2023-Medium" class="headerlink" title="3 years managing Kubernetes clusters, my 10 lessons. | by Herve Khg | Nov, 2023 | Medium"></a>3 years managing Kubernetes clusters, my 10 lessons. | by Herve Khg | Nov, 2023 | Medium</h2><p>URL: <a href="https://hervekhg.medium.com/3-years-managing-kubernetes-clusters-my-10-lessons-b565a5509f0e">https://hervekhg.medium.com/3-years-managing-kubernetes-clusters-my-10-lessons-b565a5509f0e</a></p><blockquote><p>ä½œè€…æè¿°ä»–ä¸‰å¹´çš„ kubernetes é›†ç¾¤ç®¡ç†çš„åæ¡ç»éªŒ</p></blockquote><ul><li>åœ¨äº‘ç¯å¢ƒä½¿ç”¨ kubernetesï¼Œè¿™ä¼šæ¯”è‡ªå·±ç»´æŠ¤è¦ç®€å•å¾ˆå¤šï¼Œå³ä¾¿æ˜¯è‡ªå·±ç»´æŠ¤ä¹Ÿä¸ä¼šè®©è‡ªå·±çš„ä¸šåŠ¡èƒ½åŠ›å¾—åˆ°æˆé•¿ï¼Œæˆ–è€…æ”¶ç›Šæ€§ä»·æ¯”ä¸é«˜</li><li>ä½¿ç”¨ä»£ç æ¥éƒ¨ç½²åº”ç”¨ï¼Œé¿å…ç›´æ¥åœ¨æ§åˆ¶å°ç”¨å‘½ä»¤æ“ä½œï¼Œè¿™æ ·éš¾ä»¥è®°å½•æ“ä½œã€‚</li><li>é¿å…è¿‡åº¦ä½¿ç”¨ helmï¼ŒåŒæ—¶è¦å¯¹å……åˆ†ç†è§£å…¶ä¸­çš„é…ç½®é¡¹ï¼›è¿™ä¸ªä¹Ÿå¾ˆé‡è¦ã€‚</li><li>ä¸è¦ç›´æ¥è¿ç§»åº”ç”¨åˆ° kubernetesï¼Œå¾€å¾€éœ€è¦åšç›¸å…³çš„é€‚é…ã€‚</li><li>éå¿…è¦ä¸è¦ä½¿ç”¨ Mesh</li><li>é¿å…è¿‡å¤šçš„ä½¿ç”¨ç®¡ç†å·¥å…·ï¼Œ<code>kubernetes</code> çš„ç®¡ç†å·¥å…·æœ‰å¾ˆå¤šï¼Œä½†å¤§éƒ¨åˆ†æ“ä½œå°±é  <code>kubectl</code> å°±å¤Ÿç”¨äº†ã€‚</li><li>ä¸€å®šè¦è®°å¾—å®šä¹‰èµ„æºçš„é™åˆ¶ï¼ˆå†…å­˜å’Œ CPUï¼‰ï¼Œé¿å…ç¨‹åº bug å¯¼è‡´ kubernetes é›†ç¾¤å‡ºç°é—®é¢˜</li><li>å°½é‡ä¸è¦åœ¨ Pod ä¸­å­˜å‚¨æ•°æ®ï¼Œæ¨èä½¿ç”¨ NASã€äº‘å­˜å‚¨</li><li>é…ç½® HPAï¼Œå¯ä»¥æ ¹æ®è´Ÿè½½è‡ªåŠ¨æ‰©å®¹ Pod</li><li>ä¸è¦ç•æƒ§æ”¹å˜ï¼Œæ¯å¹´éœ€è¦å¯¹ <code>kubernetes</code> è¿›è¡Œå‡çº§ï¼Œå‡çº§å‰éœ€è¦å……åˆ†é˜…è¯» <code>ReleaseNote</code>.</li></ul><h2 id="Ten-Optimization-Tricks-to-Make-Your-Java-Application-Run-Faster-by-lance-Javarevisited-Medium"><a href="#Ten-Optimization-Tricks-to-Make-Your-Java-Application-Run-Faster-by-lance-Javarevisited-Medium" class="headerlink" title="Ten Optimization Tricks to Make Your Java Application Run Faster | by lance | Javarevisited | Medium"></a>Ten Optimization Tricks to Make Your Java Application Run Faster | by lance | Javarevisited | Medium</h2><p>URL: <a href="https://medium.com/javarevisited/ten-optimization-tricks-to-make-your-java-application-run-faster-9742f568ed6f">https://medium.com/javarevisited/ten-optimization-tricks-to-make-your-java-application-run-faster-9742f568ed6f</a></p><blockquote><p>åä¸ªä¼˜åŒ–è®© Java åº”ç”¨æ›´å¿«</p></blockquote><ol><li>å¾ªç¯æ‹¼æ¥å­—ç¬¦ä¸²ä½¿ç”¨ StringBuilder</li><li>çº¿ç¨‹æ± ä»£æ›¿è‡ªå®šä¹‰çº¿ç¨‹</li><li>å®¹å™¨ç±»é¢„å…ˆåˆ†é…å¤§å°</li><li>ç”¨æšä¸¾ä»£æ›¿å¸¸é‡</li><li>ç”¨ NIO ä»£æ›¿ä¼ ç»Ÿ IO</li><li>ç”¨ä½ç§»æ“ä½œ</li><li>å¤šä½¿ç”¨å•ä¾‹æ¨¡å¼</li><li>å‡å°‘é”çš„èŒƒå›´</li><li>å°½é‡å°‘ä½¿ç”¨å…¨å±€å˜é‡</li><li>å¤šä½¿ç”¨åŸºç¡€æ•°æ®ç±»å‹</li></ol><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://supertokens.com/blog/what-is-jwt">https://supertokens.com/blog/what-is-jwt</a></li><li><a href="https://tomotoes.com/blog/the-top-10-most-common-mistakes-ive-seen-in-go-projects/">https://tomotoes.com/blog/the-top-10-most-common-mistakes-ive-seen-in-go-projects/</a></li><li><a href="https://medium.com/@seifeddinerajhi/dapr-a-portable-event-driven-runtime-for-building-distributed-applications-c2ea8254406c">https://medium.com/@seifeddinerajhi/dapr-a-portable-event-driven-runtime-for-building-distributed-applications-c2ea8254406c</a></li><li><a href="https://hervekhg.medium.com/3-years-managing-kubernetes-clusters-my-10-lessons-b565a5509f0e">https://hervekhg.medium.com/3-years-managing-kubernetes-clusters-my-10-lessons-b565a5509f0e</a></li><li><a href="https://medium.com/javarevisited/ten-optimization-tricks-to-make-your-java-application-run-faster-9742f568ed6f">https://medium.com/javarevisited/ten-optimization-tricks-to-make-your-java-application-run-faster-9742f568ed6f</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/24/zGKworjfL7JkyQt.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/&quot;&gt;20231022ï¼šç¬¬äºŒæœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/&quot;&gt;20231027ï¼šç¬¬ä¸‰æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/&quot;&gt;20231103ï¼šç¬¬å››æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/&quot;&gt;20231107ï¼šç¬¬äº”æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/11/17/ob/newsletter/Newsletter06-20231117/&quot;&gt;20231117ï¼šç¬¬å…­æœŸ&lt;/a&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>å‡çº§åˆ° Pulsar3.0 åæ·±å…¥äº†è§£ JWT é‰´æƒ</title>
    <link href="http://crossoverjie.top/2023/11/19/ob/Pulsar-JWT/"/>
    <id>http://crossoverjie.top/2023/11/19/ob/Pulsar-JWT/</id>
    <published>2023-11-19T08:19:28.000Z</published>
    <updated>2023-11-19T15:41:46.100Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/19/gAadEDNG4piBbSl.png" alt="image.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æœ€è¿‘åœ¨æµ‹è¯•å°† <code>Pulsar</code> 2.11.2 å‡çº§åˆ° <code>3.0.1</code>çš„è¿‡ç¨‹ä¸­ç¢°åˆ°ä¸€ä¸ªé‰´æƒé—®é¢˜ï¼Œæ­£å¥½å€Ÿç€è¿™ä¸ªé—®é¢˜å……åˆ†äº†è§£ä¸‹ <code>Pulsar</code> çš„é‰´æƒæœºåˆ¶æ˜¯å¦‚ä½•è¿è½¬çš„ã€‚</p><span id="more"></span><p>Pulsar æ”¯æŒ <code>Namespace/Topic</code> çº§åˆ«çš„é‰´æƒï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¾€å¾€ä¼šä½¿ç”¨ <code>topic</code> çº§åˆ«çš„é‰´æƒï¼Œä»è€Œé˜²æ­¢æ¶ˆæ¯æ³„éœ²æˆ–è€…å…¶ä»–å› ä¸ºæƒé™ç®¡æ§ä¸ä¸¥æ ¼è€Œå¯¼è‡´çš„é—®é¢˜ã€‚</p><p><img src="https://s2.loli.net/2023/11/19/1HGIlndNFCWwAzK.png" alt="image.png"></p><p>æˆ‘ä»¬ä¼šåœ¨åˆ›å»º <code>topic</code> çš„æ—¶å€™ä¸º <code>topic</code> ç»‘å®šä¸€ä¸ªåº”ç”¨ï¼Œè¿™æ ·å°±åªèƒ½ç”±è¿™ä¸ªåº”ç”¨å‘é€æ¶ˆæ¯ï¼Œå…¶ä»–çš„åº”ç”¨å°è¯•å‘é€æ¶ˆæ¯çš„æ—¶å€™ä¼šé‡åˆ° 401 é‰´æƒçš„å¼‚å¸¸ã€‚</p><blockquote><p>åŒç†ï¼Œå¯¹äºè®¢é˜…è€…ä¹Ÿå¯ä»¥å…³è”æŒ‡å®šçš„åº”ç”¨ï¼Œä»è€Œä½¿å¾—åªæœ‰è§„å®šçš„åº”ç”¨å¯ä»¥æ¶ˆè´¹æ¶ˆæ¯ã€‚</p></blockquote><h1 id="é‰´æƒæµç¨‹"><a href="#é‰´æƒæµç¨‹" class="headerlink" title="é‰´æƒæµç¨‹"></a>é‰´æƒæµç¨‹</h1><p>ä»¥ä¸Šçš„ä¸¤ä¸ªåŠŸèƒ½æœ¬è´¨ä¸Šéƒ½æ˜¯é€šè¿‡ <code>Pulsar</code> çš„ <code>admin-API</code> å®ç°çš„ã€‚</p><p><img src="https://s2.loli.net/2023/11/19/zlLxTZi7rV8XvJg.png" alt="image.png"><br>è¿™é‡Œå…³é”®çš„å°±æ˜¯ <code>role</code>ï¼Œåœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸‹é€šå¸¸æ˜¯ä¸€ä¸ªåº”ç”¨çš„ <code>AppId</code>ï¼Œåªè¦æ˜¯ä¸€ä¸ªå’Œé¡¹ç›®å”¯ä¸€ç»‘å®šçš„ <code>ID</code> å³å¯ã€‚</p><p>è¿™åªæ˜¯æˆæƒçš„ä¸€æ­¥ï¼Œæ•´ä¸ªé‰´æƒæµç¨‹å›¾å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/11/19/mGcIvBYo6SNy8gH.png"></p><h2 id="è¯¦ç»†æ­¥éª¤"><a href="#è¯¦ç»†æ­¥éª¤" class="headerlink" title="è¯¦ç»†æ­¥éª¤"></a>è¯¦ç»†æ­¥éª¤</h2><h3 id="ç”Ÿæˆå…¬ç§é’¥"><a href="#ç”Ÿæˆå…¬ç§é’¥" class="headerlink" title="ç”Ÿæˆå…¬ç§é’¥"></a>ç”Ÿæˆå…¬ç§é’¥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/pulsar tokens create-key-pair --output-private-key my-private.key --output-public-key my-public.key</span><br></pre></td></tr></table></figure><p>å°†å…¬é’¥åˆ†å‘åˆ° <code>broker</code> çš„èŠ‚ç‚¹ä¸Šï¼Œé‰´æƒçš„æ—¶å€™ <code>broker</code> ä¼šä½¿ç”¨å…¬é’¥è¿›è¡ŒéªŒè¯ã€‚</p><p>è€Œç§é’¥é€šå¸¸æ˜¯ç®¡ç†å‘˜å•ç‹¬ä¿å­˜èµ·æ¥ç”¨äºåœ¨åç»­çš„æ­¥éª¤ä¸ºå®¢æˆ·ç«¯ç”Ÿæˆ <code>token</code></p><h3 id="ä½¿ç”¨ç§é’¥ç”Ÿæˆ-token"><a href="#ä½¿ç”¨ç§é’¥ç”Ÿæˆ-token" class="headerlink" title="ä½¿ç”¨ç§é’¥ç”Ÿæˆ token"></a>ä½¿ç”¨ç§é’¥ç”Ÿæˆ token</h3><p>ä¹‹åæˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨è¿™ä¸ªç§é’¥ç”Ÿæˆ <code>token</code> äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bin/pulsar tokens create --private-key file:///path/to/my-private.key \</span><br><span class="line">            --subject 123456</span><br><span class="line"></span><br><span class="line">eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbiJ9</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­çš„ <code>subject</code> å’Œæœ¬æ–‡é•¿æåˆ°çš„ <code>role</code> ç›¸ç­‰</p></blockquote><h3 id="ä½¿ç”¨-subject-æˆæƒ"><a href="#ä½¿ç”¨-subject-æˆæƒ" class="headerlink" title="ä½¿ç”¨ subject æˆæƒ"></a>ä½¿ç”¨ subject æˆæƒ</h3><p>åªæ˜¯å•çº¯ç”Ÿæˆäº† <code>token</code> å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œè¿˜å¾—å°† <code>subject</code>(role) ä¸ <code>topic</code> è¿›è¡Œæˆæƒç»‘å®šã€‚</p><p><img src="https://s2.loli.net/2023/11/19/zlLxTZi7rV8XvJg.png" alt="image.png"><br>ä¹Ÿå°±æ˜¯ä¸Šå›¾çš„è¿™ä¸ªæ­¥éª¤ã€‚</p><blockquote><p>è¿™é‡Œåˆ›å»ºçš„ <code>admin</code> å®¢æˆ·ç«¯ä¹Ÿå¾—ä½¿ç”¨ä¸€ä¸ª <code>superRole</code> è§’è‰²çš„ <code>token</code> æ‰æœ‰æƒé™è¿›è¡Œæˆæƒã€‚<br> <code>superRole</code> ä½¿ç”¨åœ¨  <code>broker.conf</code> ä¸­è¿›è¡Œé…ç½®ã€‚</p></blockquote><h3 id="å®¢æˆ·ç«¯ä½¿ç”¨-token-æ¥å…¥-broker"><a href="#å®¢æˆ·ç«¯ä½¿ç”¨-token-æ¥å…¥-broker" class="headerlink" title="å®¢æˆ·ç«¯ä½¿ç”¨ token æ¥å…¥ broker"></a>å®¢æˆ·ç«¯ä½¿ç”¨ token æ¥å…¥ broker</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PulsarClient</span> <span class="variable">client</span> <span class="operator">=</span> PulsarClient.builder()</span><br><span class="line">    .serviceUrl(<span class="string">&quot;pulsar://broker.example.com:6650/&quot;</span>)</span><br><span class="line">    .authentication(AuthenticationFactory.token(<span class="string">&quot;eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJKb2UifQ.ipevRNuRP6HflG8cFKnmUPtypruRC4fb1DWtoLL62SY&quot;</span>)ï¼‰</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åˆšæ‰ç§é’¥ç”Ÿæˆçš„ token æ¥å…¥ broker æ‰èƒ½ç”Ÿäº§æˆ–è€…æ¶ˆè´¹æ•°æ®ã€‚</p><h2 id="originalPrincipal-cannot-be-a-proxy-role"><a href="#originalPrincipal-cannot-be-a-proxy-role" class="headerlink" title="originalPrincipal cannot be a proxy role"></a>originalPrincipal cannot be a proxy role</h2><p>è¿™äº›æµç¨‹æ­£å¸¸éƒ½æ²¡å•¥é—®é¢˜ï¼Œä½†ç›´åˆ°æˆ‘å‡çº§äº† <code>Pulsar3.0</code> åå®¢æˆ·ç«¯ç›´æ¥å°±è¿ä¸ä¸Šäº†ã€‚</p><p>åœ¨ <code>broker</code> ä¸­çœ‹åˆ°äº† <code>WARN</code> çš„è­¦å‘Šæ—¥å¿—ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cannot specify originalPrincipal when connecting without valid proxy role</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/11/19/8atrUwAj2Tg6GLu.jpg" alt="image.png"><br>ä¹‹ååœ¨ 3.0 çš„å‡çº§æ—¥å¿—ä¸­çœ‹åˆ°ç›¸å…³çš„ <a href="https://github.com/apache/pulsar/pull/19455">Issue</a>ã€‚</p><p>ä»è¿™ä¸ª PR ç›¸å…³çš„ä»£ç å’Œå˜æ›´çš„æ–‡æ¡£å¯ä»¥å¾—çŸ¥ï¼š<br><img src="https://s2.loli.net/2023/11/19/3ktMOS6IjDu9nmE.png" alt="image.png"><br><img src="https://s2.loli.net/2023/11/19/fpJ8CuwnlXdhxWm.png" alt="image.png"></p><p>å‡çº§åˆ° 3.0 ä¹‹åé£é™©æ ¡éªŒç­‰çº§æé«˜äº†ï¼Œ<code>proxyRole</code> è¿™ä¸ªå­—æ®µéœ€è¦åœ¨ <code>broker</code> ä¸­è¿›è¡ŒæŒ‡å®šï¼ˆä¹‹å‰çš„ç‰ˆæœ¬ä¸éœ€è¦å¼ºåˆ¶å¡«å†™ï¼‰ã€‚</p><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† Proxy ç»„ä»¶ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½éœ€è¦ä» proxy ä¸­è½¬ä¸€æ¬¡ï¼Œè¿™ä¸ª proxyRole æ˜¯ä¸ºäº†å‘Šè¯‰ brokerï¼šåªæœ‰ä½¿ç”¨äº† <code>proxyRole</code> ä½œä¸º <code>token</code> çš„ <code>Proxy</code> æ‰èƒ½è®¿é—® brokerï¼Œè¿™æ ·ä¿è¯äº† <code>broker</code> çš„å®‰å…¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">superUserRoles: broker-admin,admin,proxy-admin </span><br><span class="line">proxyRoles: proxy-admin</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯æˆ‘çš„é…ç½®ï¼Œæˆ‘çš„ Proxy é…ç½®çš„ä¹Ÿæ˜¯ <code>proxy-admin</code> è¿™ä¸ª tokenï¼Œæ‰€ä»¥ç†è®ºä¸Šæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†ä¾ç„¶é‰´æƒå¤±è´¥äº†ï¼ŒæŸ¥çœ‹ broker çš„æ—¥å¿—åæ‹¿åˆ°ä»¥ä¸‹æ—¥å¿—ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Illegal combination of role [proxy-admin] and originalPrincipal [proxy-admin]: originalPrincipal cannot be a proxy role.</span><br></pre></td></tr></table></figure><p>æ’æŸ¥äº†è®¸ä¹…ä¾ç„¶æ²¡æœ‰å¤ªå¤šå¤´ç»ªï¼Œæ‰€ä»¥æˆ‘æäº†ç›¸å…³çš„ issue:<br><a href="https://github.com/apache/pulsar/issues/21583">https://github.com/apache/pulsar/issues/21583</a><br>ä¹‹åæˆ‘å’¨è¯¢äº† <code>Pulsar</code> çš„ PMC <a href="https://github.com/Technoboy-">@Technoboy</a>  åœ¨ä»–çš„æç¤ºä¸‹å‘ç°æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ <code>proxy-admin</code>ï¼Œæ­£å¥½å’Œ <code>proxyRoles</code> ç›¸ç­‰ã€‚<br><img src="https://s2.loli.net/2023/11/19/AuoY8Sq4FPUVHjN.png" alt="image.png"><br>é˜…è¯»æºç å’Œè¿™ä¸ª <code>PR</code> çš„ <code>comment</code> ä¹‹åå¾—çŸ¥ï¼š<br><img src="https://s2.loli.net/2023/11/19/pTbQkj2rOKnHNwS.png" alt="image.png"><br>ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯ä¸èƒ½ä½¿ç”¨å’Œ <code>proxyRole</code> ç›¸åŒçš„è§’è‰²è¿›è¡Œè¿æ¥ï¼Œè¿™ä¸ªè§’è‰²åº”å½“ä¹Ÿåªèƒ½ç»™ <code>Proxy</code> ä½¿ç”¨ï¼Œè¿™æ ·çš„å®‰å…¨æ€§æ‰ä¼šé«˜ã€‚</p><p>æ‰€ä»¥è¿™ä¸ª Comment è¿˜åœ¨è®¨è®ºè¿™æ˜¯ä¸€ä¸ª <code>breaking change?</code> è¿˜æ˜¯ä¸€ä¸ªå¢å¼ºè¡¥ä¸ã€‚<br>å› ä¸ºåˆå¹¶è¿™ä¸ª PR åå¯¹æ²¡æœ‰ä½¿ç”¨ <code>proxyRole</code> çš„å®¢æˆ·ç«¯å°†æ— æ³•è¿æ¥ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½å‡ºç°æˆ‘è¿™ç§ <code>proxyRole</code> å°±æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨çš„è§’è‰²ï¼Œè¿™ç§æƒ…å†µä¹Ÿä¼šé‰´æƒå¤±è´¥ã€‚</p><p>æ‰€ä»¥æˆ‘æ¢äº†ä¸€ä¸ª superRole è§’è‰²å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚æ¢æˆäº† <code>admin</code>ã€‚</p><blockquote><p>ä½†å…¶å®å³ä¾¿æ˜¯æ”¾åˆ°æˆ‘ä»¬çš„ç”Ÿäº§ç³»ç»Ÿï¼Œåªè¦é…ç½®äº† <code>proxyRole</code> ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬åº”ç”¨æ‰€ä½¿ç”¨çš„ role éƒ½æ˜¯ä¸è¿™é‡Œçš„ <code>superUserRole</code>ï¼Œå…¨éƒ¨éƒ½æ˜¯ä½¿ç”¨ <code>AppId</code> ç”Ÿæˆçš„ã€‚</p></blockquote><h1 id="token-ä¸ä¸€è‡´"><a href="#token-ä¸ä¸€è‡´" class="headerlink" title="token ä¸ä¸€è‡´"></a>token ä¸ä¸€è‡´</h1><p>ä½†ä¹Ÿæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œæˆ‘åœ¨æ¢ä¸ºå­˜æ”¾åœ¨ <code>configmap</code> ä¸­çš„ admin token ä¹‹å‰(æµ‹è¯•ç¯å¢ƒä½¿ç”¨çš„æ˜¯ helm å®‰è£…é›†ç¾¤ï¼Œæ‰€ä»¥è¿™äº› token éƒ½æ˜¯å­˜æ”¾åœ¨ configmap ä¸­çš„)ï¼Œ</p><p>ä¸ºäº†éªŒè¯æ˜¯å¦åªè¦é <code>proxyRole</code> çš„ <code>superRole</code> éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘å°±è‡ªå·±ä½¿ç”¨äº†ç§é’¥é‡æ–°ç”Ÿæˆäº†ä¸€ä¸ª <code>admin</code> çš„ <code>token</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/pulsar tokens create --private-key file:///pulsar/private/private.key --subject admin</span><br></pre></td></tr></table></figure><p>è¿™æ ·ç”Ÿæˆçš„ <code>token</code> ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œä½†æ˜¯æˆ‘å°† token å¤åˆ¶å‡ºæ¥ä¹‹åå´å‘ç° helm ç”Ÿæˆçš„ <code>token</code> ä¸æˆ‘ç”¨ <code>pulsar</code> å‘½ä»¤è¡Œç”Ÿæˆçš„ <code>token</code> å¹¶ä¸ç›¸åŒã€‚</p><p>ä¸ºäº†ææ¸…æ¥šä¸ºä»€ä¹ˆ token ä¸åŒä½†é‰´æƒä¾ç„¶å¯ä»¥é€šè¿‡çš„åŸå› ï¼Œä¹‹åæˆ‘å°† token decodeä¹‹åçŸ¥é“äº†åŸå› ï¼š<br><img src="https://s2.loli.net/2023/11/19/rKMRqGsmTDvLnZ2.png" alt="image.png"><br><img src="https://s2.loli.net/2023/11/19/xZn4v5EIFwXMRKk.png" alt="image.png"><br>åŸæ¥æ˜¯ Header ä¸åŒä»è€Œå¯¼è‡´æœ€ç»ˆçš„ token ä¸åŒï¼Œhelm ç”Ÿæˆçš„ <code>token</code> ä¸­å¤šäº†ä¸€ä¸ª typ å­—æ®µã€‚</p><hr><p>ä¹‹åæˆ‘æ£€æŸ¥äº† helm å®‰è£…çš„æµç¨‹ï¼Œå‘ç°åŸæ¥ helm çš„è„šæœ¬ä¸­ä½¿ç”¨çš„å¹¶ä¸æ˜¯ Java çš„å‘½ä»¤è¡Œå·¥å…·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">&#123;PULSARCTL_BIN&#125; token create -a RS256 --private-key-file <span class="variable">$&#123;privatekeytmpfile&#125;</span> --subject <span class="variable">$&#123;role&#125;</span> 2&amp;&gt; <span class="variable">$&#123;tokentmpfile&#125;</span></span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ª <code>PULSARCTL_BIN</code> æ˜¯ä¸€ä¸ªç”± Go å†™çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘æŸ¥çœ‹äº†å…¶ä¸­çš„æºç ï¼Œæ‰çŸ¥é“ Go çš„ JWT å·¥å…·ä¼šè‡ªå¸¦ä¸€ä¸ª headerã€‚<br><a href="https://github.com/streamnative/pulsarctl">https://github.com/streamnative/pulsarctl</a></p><p><img src="https://s2.loli.net/2023/11/19/kZ2zaOfo7PbvT4j.png" alt="image.png"><br>è€Œ <code>Java</code> æ˜¯æ²¡æœ‰è¿™ä¸ªé€»è¾‘çš„ï¼Œä½†ä¹Ÿåªæ˜¯åŠ äº† <code>header</code>ï¼Œ<code>payload</code> çš„å€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚<br>è¿™æ ·ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ <code>token</code> ä¸åŒä½†ç¡®ä¾ç„¶èƒ½ä½¿ç”¨çš„åŸå› ã€‚</p><p>#Blog #Pulsar </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/19/gAadEDNG4piBbSl.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;æœ€è¿‘åœ¨æµ‹è¯•å°† &lt;code&gt;Pulsar&lt;/code&gt; 2.11.2 å‡çº§åˆ° &lt;code&gt;3.0.1&lt;/code&gt;çš„è¿‡ç¨‹ä¸­ç¢°åˆ°ä¸€ä¸ªé‰´æƒé—®é¢˜ï¼Œæ­£å¥½å€Ÿç€è¿™ä¸ªé—®é¢˜å……åˆ†äº†è§£ä¸‹ &lt;code&gt;Pulsar&lt;/code&gt; çš„é‰´æƒæœºåˆ¶æ˜¯å¦‚ä½•è¿è½¬çš„ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ç¬¬6ï¸âƒ£æœŸ</title>
    <link href="http://crossoverjie.top/2023/11/17/ob/newsletter/Newsletter06-20231117/"/>
    <id>http://crossoverjie.top/2023/11/17/ob/newsletter/Newsletter06-20231117/</id>
    <published>2023-11-17T09:28:25.000Z</published>
    <updated>2023-11-17T06:00:24.349Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/17/yZANlmctghPTJDj.png" alt="image.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/">20231022ï¼šç¬¬äºŒæœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/">20231027ï¼šç¬¬ä¸‰æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/">20231103ï¼šç¬¬å››æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/ni">20231007ï¼šç¬¬äº”æœŸ</a><span id="more"></span></li></ul><h2 id="5-Skills-the-Best-Engineers-I-Know-Have-in-Common"><a href="#5-Skills-the-Best-Engineers-I-Know-Have-in-Common" class="headerlink" title="5 Skills the Best Engineers I Know Have in Common"></a>5 Skills the Best Engineers I Know Have in Common</h2><p>URL: <a href="https://www.developing.dev/p/5-skills-all-10x-engineers-have?utm_source=post-email-title&amp;publication_id=1340878&amp;post_id=138715343&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email">https://www.developing.dev/p/5-skills-all-10x-engineers-have?utm_source=post-email-title&amp;publication_id=1340878&amp;post_id=138715343&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email</a></p><blockquote><p>ä½œè€…è®²è¿°äº†ä»–èº«è¾¹æœ€å¥½çš„å·¥ç¨‹å¸ˆéƒ½å…·å¤‡çš„äº”ä¸ªé€šç”¨æŠ€èƒ½</p></blockquote><p><img src="https://s2.loli.net/2023/11/13/5NCshr4JWIemotP.png" alt="image.png"></p><ul><li>æŠ€æœ¯çš„æ·±åº¦ä¸å¹¿åº¦<ul><li>å¯¹äºæœ€å¥½çš„å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œæ·±åº¦å’Œå¹¿åº¦ä»–ä»¬éƒ½ä¼šæŒæ¡</li><li>è¦ä¿æŒå¥½å¥‡å¿ƒï¼Œå¥½å¥‡å¿ƒæ˜¯å­¦ä¹ ä»»ä½•æ–°ä¸œè¥¿çš„åŸå§‹åŠ¨åŠ›</li><li>å’Œèº«è¾¹å‰å®³çš„å·¥ç¨‹å¸ˆä¸€èµ·å·¥ä½œï¼Œä¼šå¿«é€Ÿä»ä»–ä»¬èº«ä¸Šå­¦åˆ°ä¸œè¥¿</li></ul></li><li>ä¸ç”¨æƒå¨å»å½±å“ä»–äºº<ul><li>æˆ‘ç†è§£çš„æ˜¯ä¸æ˜¯ä¾é èµ„å†ã€ç»éªŒæ¥å‘ä»–äººè¾“å‡ºè§‚ç‚¹ï¼›è€Œæ˜¯å°±äº‹è®ºäº‹ï¼Œåˆ©ç”¨çŸ¥è¯†ã€æŠ€èƒ½æ¥è¾“å‡ºã€‚</li><li>é”»ç‚¼å†™ä½œå’Œå£è¯­</li><li>å­¦ä¼šé”€å”®</li></ul></li><li>æå‡ä»–äºº<ul><li>åˆ†äº«çŸ¥è¯†ï¼Œå†™ WIKIã€åšåˆ†äº«</li><li>å›¢é˜Ÿåä½œï¼šcodereviewã€å›¢é˜Ÿè®¨è®ºç­‰</li><li>æ„å»ºå·¥å…·ï¼Œè§£å†³å¤§å®¶é‡åˆ°çš„ä¸€äº›å…±æ€§é—®é¢˜ã€‚</li></ul></li><li>è¦æœ‰ä¸»äººå…¬æ„è¯†<ul><li>è¿™äº›å·¥ç¨‹å¸ˆéƒ½æœ‰ä¸»äººå…¬æ„è¯†ã€‚</li><li>åƒè€æ¿ä¸€æ ·æ€è€ƒé—®é¢˜</li></ul></li></ul><h2 id="Explaining-9-Types-of-API-Testing"><a href="#Explaining-9-Types-of-API-Testing" class="headerlink" title="Explaining 9 Types of API Testing"></a>Explaining 9 Types of API Testing</h2><p>URL: <a href="https://blog.bytebytego.com/p/ep83-explaining-9-types-of-api-testing?ref=dailydev">https://blog.bytebytego.com/p/ep83-explaining-9-types-of-api-testing?ref=dailydev</a><br><img src="https://s2.loli.net/2023/11/14/LrPN8GQ4FjuTISa.gif"></p><blockquote><p>ä»‹ç»äº†ä¹ç§å¸¸è§çš„ API æµ‹è¯•æ–¹æ³•</p></blockquote><ul><li>å†’çƒŸæµ‹è¯•ï¼šç®€å•çš„éªŒè¯ API æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œ</li><li>åŠŸèƒ½æµ‹è¯•ï¼šæ ¹æ®éœ€æ±‚è¿›è¡Œæµ‹è¯•ï¼Œæœ‰é¢„æœŸç»“æœè¿›è¡Œæ¯”è¾ƒ</li><li>é›†æˆæµ‹è¯•ï¼šç»“åˆå¤šä¸ª API å®Œæˆé›†æˆæµ‹è¯•ï¼Œæ›´å®Œå–„çš„åŠŸèƒ½æµ‹è¯•</li><li>å›å½’æµ‹è¯•ï¼šç¡®ä¿æ–°å¢åŠŸèƒ½æ²¡æœ‰å½±å“åˆ°åŸæœ‰çš„ API</li><li>è´Ÿè½½æµ‹è¯•ï¼šæ¨¡æ‹Ÿä¸åŒçš„è´Ÿè½½è¿›è¡Œæµ‹è¯•ï¼Œæµ‹å‡ºç³»ç»Ÿå¯æ”¯æŒçš„æœ€å¤§å®¹é‡</li><li>å‹åŠ›æµ‹è¯•ï¼šæ¨¡æ‹Ÿé«˜è´Ÿè½½åœºæ™¯ï¼Œåœ¨è¿™ç§å‹åŠ›æƒ…å†µä¸‹è§‚å¯Ÿ API è¡Œä¸º</li><li>å®‰å…¨æµ‹è¯•ï¼šæ¨¡æ‹Ÿå¤–éƒ¨å®‰å…¨æµ‹è¯•</li><li>UIæµ‹è¯•ï¼šé…åˆ UI äº¤äº’è¿›è¡ŒåŠŸèƒ½æµ‹è¯•</li><li>æ¨¡ç³Šæµ‹è¯•ï¼šå¯¹ API è¿›è¡Œæ— æ•ˆè¾“å…¥ï¼Œå°è¯•è®© API å´©æºƒ</li></ul><blockquote><p>å®é™…æƒ…å†µå¯èƒ½å¹¶ä¸ä¼šåˆ†çš„è¿™ä¹ˆç»†ï¼Œå¾€å¾€ä¼šå°†ä¸€äº›æ­¥éª¤åˆå¹¶åœ¨ä¸€èµ·ã€‚</p></blockquote><h2 id="Prometheus-14-ç‚¹å®è·µç»éªŒåˆ†äº«"><a href="#Prometheus-14-ç‚¹å®è·µç»éªŒåˆ†äº«" class="headerlink" title="Prometheus 14 ç‚¹å®è·µç»éªŒåˆ†äº«"></a>Prometheus 14 ç‚¹å®è·µç»éªŒåˆ†äº«</h2><p>URL: <a href="https://mp.weixin.qq.com/s/z2IVP26swYaTeiPTeOMoQw">https://mp.weixin.qq.com/s/z2IVP26swYaTeiPTeOMoQw</a><br><img src="https://s2.loli.net/2023/11/16/8TKa5VBeX4jfdMr.png" alt="image.png"><br>è¿™æ˜¯ä¸€ç¯‡ 17 å¹´çš„ <code>Prometheus</code> ä½¿ç”¨åˆ†äº«ï¼Œä½†æ”¾åˆ°ç°åœ¨ä¸€ç‚¹ä¹Ÿä¸è¿‡æ—¶ã€‚</p><ul><li>ä½¿ç”¨ USE ç†è®ºæ¥åˆ¤æ–­èµ„æºæ˜¯å¦å¥åº·<ul><li>Utilization åˆ©ç”¨ç‡</li><li>Saturation é¥±å’Œç‡</li><li>Errors é”™è¯¯</li></ul></li><li>ä½¿ç”¨ RED ç†è®º<ul><li>Request rate è¯·æ±‚é€Ÿç‡</li><li>Error rate é”™è¯¯é€Ÿç‡</li><li>Duration æŒç»­æ—¶é—´</li></ul></li><li>æŒ‡æ ‡å‘½åéœ€è¦æœ‰è§„èŒƒ<ul><li>é€šå¸¸ä½¿ç”¨æ¡†æ¶ç”Ÿæˆçš„éƒ½æ²¡å•¥é—®é¢˜</li><li>å¯ä»¥å‚è€ƒ Prometheus çš„å®˜æ–¹å®è·µ <a href="https://prometheus.io/docs/practices/naming/">https://prometheus.io/docs/practices/naming/</a></li></ul></li><li>æ³¨æ„æŒ‡æ ‡åŸºæ•°<ul><li>é¿å…åŸºæ•°çˆ†ç‚¸çš„ï¼Œæ¯”å¦‚ä¸èƒ½ä½¿ç”¨ user_id, trace_id ç­‰ä½œä¸ºæŒ‡æ ‡çš„ label</li></ul></li><li>ç»Ÿè®¡å¤±è´¥+æ€»é‡è€Œä¸è¦ç»Ÿè®¡å¤±è´¥+æˆåŠŸé‡</li><li>å‘Šè­¦ç—‡çŠ¶è€ŒéåŸå› </li><li>å‘Šè­¦è§„åˆ™éœ€è¦é…ç½®æŒç»­æ—¶é—´ï¼Œé¿å…æ— æ•ˆå‘Šè­¦</li><li>æŸ¥è¯¢æ—¶å€™é€šå¸¸å…ˆæ±‚ rate() å†æ±‚ sum()</li></ul><h2 id="ç¨‹åºå‘˜å¯èƒ½å¿…è¯»ä¹¦å•æ¨èï¼ˆä¸€ï¼‰-é¢å‘ä¿¡ä»°ç¼–ç¨‹"><a href="#ç¨‹åºå‘˜å¯èƒ½å¿…è¯»ä¹¦å•æ¨èï¼ˆä¸€ï¼‰-é¢å‘ä¿¡ä»°ç¼–ç¨‹" class="headerlink" title="ç¨‹åºå‘˜å¯èƒ½å¿…è¯»ä¹¦å•æ¨èï¼ˆä¸€ï¼‰ - é¢å‘ä¿¡ä»°ç¼–ç¨‹"></a>ç¨‹åºå‘˜å¯èƒ½å¿…è¯»ä¹¦å•æ¨èï¼ˆä¸€ï¼‰ - é¢å‘ä¿¡ä»°ç¼–ç¨‹</h2><p>URL: <a href="https://draveness.me//books-1">https://draveness.me//books-1</a></p><blockquote><p>draveness å¤§ä½¬æ¨èçš„éƒ½æ˜¯ä¸€äº›åä½å±‚çš„ï¼Œé™å¾—ä¸‹å¿ƒçš„å¯ä»¥çœ‹çœ‹ï¼Œæˆ‘è§‰å¾—æˆ‘æ˜¯çœ‹ä¸ä¸‹æ¥çš„ã€‚</p></blockquote><ul><li>SICP ã€Šè®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Šã€‹</li><li>CTMCP ã€Šè®¡ç®—æœºç¨‹åºè®¾è®¡çš„æ¦‚å¿µã€æŠ€æœ¯å’Œæ¨¡å‹ã€‹</li><li>DDIA ã€Šè®¾è®¡æ•°æ®å¯†é›†å‹åº”ç”¨ã€‹</li></ul><h2 id="TOP-20-Goæœ€ä½³å®è·µ"><a href="#TOP-20-Goæœ€ä½³å®è·µ" class="headerlink" title="TOP 20 Goæœ€ä½³å®è·µ"></a>TOP 20 Goæœ€ä½³å®è·µ</h2><p>URL: <a href="https://colobu.com/2023/11/17/golang-quick-reference-top-20-best-coding-practices/">https://colobu.com/2023/11/17/golang-quick-reference-top-20-best-coding-practices/</a></p><blockquote><p>éƒ½æ˜¯ä¸€äº›åŸºæœ¬å¥—è·¯ï¼Œå„ç§è¯­è¨€çš„ä½¿ç”¨è€…éƒ½æ¨èæŒæ¡</p></blockquote><ul><li>é€‚å½“ä½¿ç”¨ç¼©è¿›ï¼Œæ¨èç»Ÿä¸€ä½¿ç”¨ <code>gofmt</code></li><li>å˜é‡å’Œå‡½æ•°åå…·æœ‰æ„ä¹‰</li><li>é™åˆ¶è¡Œé•¿åº¦ï¼ŒIDE é€šå¸¸éƒ½ä¼šæœ‰æç¤º</li><li>ä½¿ç”¨å¸¸é‡ä»£æ›¿é­”æ³•å€¼</li><li>æ˜¾ç¤ºå¤„ç†é”™è¯¯</li><li>é¿å…ä½¿ç”¨å…¨å±€å˜é‡</li><li>ä½¿ç”¨ç»“æ„ä½“å¤„ç†å¤æ‚é€»è¾‘ï¼Œæ›´æ˜“ç»´æŠ¤</li><li>ä½¿ç”¨ <code>goroutines</code> å¤„ç†å¹¶å‘</li><li>ä½¿ç”¨ Recover å¤„ç† panic</li><li>é¿å…ä½¿ç”¨ Init å‡½æ•°ï¼Œæ›´å®¹æ˜“ç»´æŠ¤</li><li>ä½¿ç”¨ Defer æ¸…ç†èµ„æº</li><li>ä½¿ç”¨å¤åˆå­—é¢å€¼è€Œéæ„é€ å‡½æ•°</li><li>ä½¿ç”¨æ˜¾ç¤ºè¿”å›å€¼è€Œéå…·åè¿”å›å€¼ï¼Œä¹Ÿæ˜¯ä»£ç æ›´æ˜“è¯»</li><li>é¿å…å˜é‡å±è”½ï¼Œæ˜“è¯»æ€§</li><li>ä½¿ç”¨æ¥å£æŠ½è±¡</li></ul><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://www.developing.dev/p/5-skills-all-10x-engineers-have?utm_source=post-email-title&amp;publication_id=1340878&amp;post_id=138715343&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email">https://www.developing.dev/p/5-skills-all-10x-engineers-have?utm_source=post-email-title&amp;publication_id=1340878&amp;post_id=138715343&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email</a></li><li><a href="https://blog.bytebytego.com/p/ep83-explaining-9-types-of-api-testing?ref=dailydev">https://blog.bytebytego.com/p/ep83-explaining-9-types-of-api-testing?ref=dailydev</a></li><li><a href="https://mp.weixin.qq.com/s/z2IVP26swYaTeiPTeOMoQw">https://mp.weixin.qq.com/s/z2IVP26swYaTeiPTeOMoQw</a></li><li><a href="https://draveness.me//books-1">https://draveness.me//books-1</a></li><li><a href="https://colobu.com/2023/11/17/golang-quick-reference-top-20-best-coding-practices/">https://colobu.com/2023/11/17/golang-quick-reference-top-20-best-coding-practices/</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/17/yZANlmctghPTJDj.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/&quot;&gt;20231022ï¼šç¬¬äºŒæœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/&quot;&gt;20231027ï¼šç¬¬ä¸‰æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/&quot;&gt;20231103ï¼šç¬¬å››æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/ni&quot;&gt;20231007ï¼šç¬¬äº”æœŸ&lt;/a&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>k8så®æˆ˜-Istio ç½‘å…³</title>
    <link href="http://crossoverjie.top/2023/11/13/ob/k8s-istio03/"/>
    <id>http://crossoverjie.top/2023/11/13/ob/k8s-istio03/</id>
    <published>2023-11-13T14:07:18.000Z</published>
    <updated>2023-11-14T08:03:13.523Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€æœŸ <a href="https://crossoverjie.top/2023/11/07/ob/k8s-Istio02/">k8s-æœåŠ¡ç½‘æ ¼å®æˆ˜-é…ç½® Mesh</a> ä¸­è®²è§£äº†å¦‚ä½•é…ç½®é›†ç¾¤å†…çš„ Mesh è¯·æ±‚ï¼ŒIstio åŒæ ·ä¹Ÿå¯ä»¥å¤„ç†é›†ç¾¤å¤–éƒ¨æµé‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„ç½‘å…³ã€‚<br><img src="https://s2.loli.net/2023/11/14/TSCmnecrjHKfLzi.png" alt="image.png"></p><span id="more"></span><p>å…¶å®å’Œä¹‹å‰è®²åˆ°çš„<a href="https://crossoverjie.top/2023/09/15/ob/k8s-Ingress/">k8så…¥é—¨åˆ°å®æˆ˜-ä½¿ç”¨Ingress</a> <code>Ingress</code> ä½œç”¨ç±»ä¼¼ï¼Œéƒ½æ˜¯å°†å†…éƒ¨æœåŠ¡æš´éœ²å‡ºå»çš„æ–¹æ³•ã€‚</p><p>åªæ˜¯ä½¿ç”¨ <code>Istio-gateway</code> ä¼šæ›´åŠ çµæ´»ã€‚<br><img src="https://s2.loli.net/2023/11/14/hVFUTLB2CHjeRuM.png" alt="image.png"></p><p>è¿™é‡Œæœ‰ä¸€å¼ åŠŸèƒ½å¯¹æ¯”å›¾ï¼Œå¯ä»¥æ˜æ˜¾çš„çœ‹å‡º <code>Istio-gateway</code> æ”¯æŒçš„åŠŸèƒ½ä¼šæ›´å¤šï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸­å¤§å‹ä¼ä¸šå¹¶ä¸”å·²ç»ç”¨ä¸Š Istio åè¿˜æ˜¯æ›´æ¨èæ˜¯æœ‰ <code>Istio-gateway</code>ï¼Œä½¿ç”¨åŒä¸€ä¸ªæ§åˆ¶é¢å°±å¯ä»¥ç®¡ç†å†…å¤–ç½‘æµé‡ã€‚</p><h2 id="åˆ›å»º-Gateway"><a href="#åˆ›å»º-Gateway" class="headerlink" title="åˆ›å»º Gateway"></a>åˆ›å»º Gateway</h2><p>å¼€å§‹ä¹‹å‰é¦–å…ˆæ˜¯åˆ›å»ºä¸€ä¸ª <code>Istio-Gateway</code> çš„èµ„æºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Gateway</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">istio-ingress-gateway</span>  </span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">servers:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span>  </span><br><span class="line">        <span class="attr">number:</span> <span class="number">80</span>  </span><br><span class="line">        <span class="attr">name:</span> <span class="string">http</span>  </span><br><span class="line">        <span class="attr">protocol:</span> <span class="string">HTTP</span>  </span><br><span class="line">      <span class="attr">hosts:</span>  </span><br><span class="line">        <span class="bullet">-</span> <span class="string">&#x27;www.service1.io&#x27;</span>  </span><br><span class="line">  <span class="attr">selector:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">istio-ingressgateway</span> <span class="comment">#ä¸ç°æœ‰çš„ gateway å…³è”  </span></span><br><span class="line">    <span class="attr">istio:</span> <span class="string">ingressgateway</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„ <code>selector</code> é€‰æ‹©å™¨ä¸­åŒ¹é…çš„ label ä¸æˆ‘ä»¬å®‰è£… <code>Istio</code> æ—¶å€™è‡ªå¸¦çš„ <code>gateway</code> å…³è”å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ gateway çš„ label</span></span><br><span class="line">k get pod -n istio-system</span><br><span class="line">NAME                                    READY   STATUS</span><br><span class="line">istio-ingressgateway-649f75b6b9-klljw   1/1     Running</span><br><span class="line"></span><br><span class="line">k describe pod istio-ingressgateway-649f75b6b9-klljw -n istio-system |grep Labels</span><br><span class="line">Labels:           app=istio-ingressgateway</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/26/3JXneYvyqI4WTgt.png" alt="image.png"></p><blockquote><p>è¿™ä¸ª <code>Gateway</code> åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡å®‰è£… <code>Istio</code> çš„æ—¶å€™å°±ä¼šå®‰è£…è¿™ä¸ªç»„ä»¶ã€‚</p></blockquote><hr><p>è¿™ä¸ªé…ç½®çš„å«ä¹‰æ˜¯ç½‘å…³ä¼šä»£ç†é€šè¿‡ <code>www.service1.io</code> è¿™ä¸ªåŸŸåè®¿é—®çš„æ‰€æœ‰è¯·æ±‚ã€‚</p><p>ä¹‹åéœ€è¦ä½¿ç”¨åˆšæ‰çš„ gateway ä¸æˆ‘ä»¬çš„æœåŠ¡çš„ service è¿›è¡Œç»‘å®šï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨åˆ° <code>VirtualService</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-istio-http-vs</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">gateways:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">istio-ingress-gateway</span> <span class="comment"># ç»‘å®šåˆšæ‰åˆ›å»ºçš„ gateway åç§° </span></span><br><span class="line">  <span class="attr">hosts:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">www.service1.io</span></span><br><span class="line"><span class="attr">http:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">default</span>  </span><br><span class="line">  <span class="attr">route:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span>  </span><br><span class="line">        <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  <span class="comment">#service åç§°</span></span><br><span class="line">        <span class="attr">port:</span>  </span><br><span class="line">          <span class="attr">number:</span> <span class="number">8081</span>  </span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v1</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå’Œæˆ‘ä»¬ä¹‹å‰è®²åˆ°çš„ Mesh å†…éƒ¨æµé‡æ—¶æ‰€ä½¿ç”¨åˆ°çš„ <code>VirtualService</code> é…ç½®æ˜¯ä¸€æ ·çš„ã€‚</p><p>è¿™é‡Œçš„å«ä¹‰ä¹Ÿæ˜¯é€šè¿‡ <code>www.service1.io</code> ä»¥åŠ <code>istio-ingress-gateway</code> ç½‘å…³çš„æµé‡ä¼šè¿›å…¥è¿™ä¸ªè™šæ‹ŸæœåŠ¡ï¼Œä½†æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šè¿›å…¥ <code>subset: v1</code> è¿™ä¸ªåˆ†ç»„ã€‚</p><p>è¿™ä¸ªçš„åˆ†ç»„ä¿¡æ¯åœ¨ä¸Šä¸€èŠ‚å¯ä»¥æŸ¥è¯¢åˆ°ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service-ds</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line">  <span class="attr">subsets:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v1</span>  </span><br><span class="line">      <span class="attr">labels:</span>  </span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-combat-service-v1</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v2</span>  </span><br><span class="line">      <span class="attr">labels:</span>  </span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-combat-service-v2</span></span><br></pre></td></tr></table></figure><p>ä¹‹åæˆ‘ä»¬è®¿é—®è¿™ä¸ªåŸŸåå³å¯æ‹¿åˆ°å“åº”ï¼ŒåŒæ—¶æˆ‘ä»¬æ‰“å¼€ <code>k8s-combat-service-istio-mesh</code> service çš„ Pod æŸ¥çœ‹æ—¥å¿—ï¼Œä¼šå‘ç°æ‰€æœ‰çš„è¯·æ±‚éƒ½è¿›å…¥äº† v1, å¦‚æœä¸éœ€è¦è¿™ä¸ªé™åˆ¶æ¡ä»¶ï¼Œå°† <code>subset: v1</code> åˆ é™¤å³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl  http://www.service1.io/ping</span><br></pre></td></tr></table></figure><blockquote><p>æœ¬åœ°éœ€è¦é…ç½®ä¸‹ host: <code>127.0.0.1 www.service1.io</code></p></blockquote><p><img src="https://s2.loli.net/2023/11/13/ksR9FbdWMEhlLBQ.png" alt="image.png"></p><p>è¿˜æœ‰ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ‹¿åˆ° <code>gateway</code> çš„å¤–éƒ¨IPï¼Œæ‰èƒ½å°† IP å’Œåˆšæ‰çš„åŸŸå<code>www.service1.io</code> è¿›è¡Œç»‘å®šï¼ˆhostï¼Œæˆ–è€…æ˜¯åŸŸåç®¡ç†å°ï¼‰ã€‚</p><p>å¦‚æœä½¿ç”¨çš„æ˜¯ <code>docker-desktop</code> è‡ªå¸¦çš„ <code>kubernetes</code> é›†ç¾¤æ—¶å€™ç›´æ¥ä½¿ç”¨ <code>127.0.0.1</code> å³å¯ï¼Œé»˜è®¤å°±ä¼šç»‘å®šä¸Šã€‚</p><p>å¦‚æœä½¿ç”¨çš„æ˜¯ <code>minikube</code> å®‰è£…çš„ï¼Œé‚£éœ€è¦ä½¿ç”¨ <code>minikube tunnel</code> æ‰‹åŠ¨ä¸º service ä¸º<code>LoadBalancer</code> ç±»å‹çš„ç»‘å®šä¸€ä¸ªæœ¬åœ° IPï¼Œå…·ä½“å¯ä»¥å‚è€ƒæ–‡æ¡£ï¼š<br><a href="https://minikube.sigs.k8s.io/docs/tasks/loadbalancer">https://minikube.sigs.k8s.io/docs/tasks/loadbalancer</a></p><blockquote><p>å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œäº‘æœåŠ¡å‚å•†ä¼šè‡ªåŠ¨ç»‘å®šä¸€ä¸ªå¤–ç½‘ IPã€‚</p></blockquote><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p><img src="https://s2.loli.net/2023/11/14/4yBEDZOcsWKxLpg.png" alt="image.png"></p><p>è¿™ä¸ªçš„è®¿é—®è¯·æ±‚çš„æµç¨‹å’Œä¹‹å‰è®²åˆ°çš„ <code>kubernetes Ingress</code> æµç¨‹æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯ gateway æ˜¯é€šè¿‡ <code>VirtualService</code> æ¥è·¯ç”±çš„ serviceï¼ŒåŒæ—¶åœ¨è¿™ä¸ª <code>VirtualService</code> ä¸­å¯ä»¥è‡ªå®šä¹‰è®¸å¤šçš„è·¯ç”±è§„åˆ™ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœåŠ¡ç½‘æ ¼ <code>Istio</code> åŸºæœ¬ä¸Šè®²å®Œäº†ï¼Œåç»­è¿˜æœ‰å…³äº <code>Telemetry</code> ç›¸å…³çš„ <code>trace</code>ã€<code>log</code>ã€<code>metrics</code> ä¼šåœ¨è¿ç»´ç« èŠ‚æ›´æ–°ï¼Œä¹Ÿä¼šå’Œ Istio æœ‰æ‰€å…³è”ã€‚<br>æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æŒç»­å…³æ³¨ã€‚</p><p>æœ¬æ–‡çš„æ‰€æœ‰æºç åœ¨è¿™é‡Œå¯ä»¥è®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p><p>#Blog #Istio </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ä¸Šä¸€æœŸ &lt;a href=&quot;https://crossoverjie.top/2023/11/07/ob/k8s-Istio02/&quot;&gt;k8s-æœåŠ¡ç½‘æ ¼å®æˆ˜-é…ç½® Mesh&lt;/a&gt; ä¸­è®²è§£äº†å¦‚ä½•é…ç½®é›†ç¾¤å†…çš„ Mesh è¯·æ±‚ï¼ŒIstio åŒæ ·ä¹Ÿå¯ä»¥å¤„ç†é›†ç¾¤å¤–éƒ¨æµé‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„ç½‘å…³ã€‚&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/14/TSCmnecrjHKfLzi.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/k8s/"/>
    
    
    <category term="Istio" scheme="http://crossoverjie.top/tags/Istio/"/>
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ç¬¬5ï¸âƒ£æœŸ</title>
    <link href="http://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/"/>
    <id>http://crossoverjie.top/2023/11/10/ob/newsletter/Newsletter05-20231110/</id>
    <published>2023-11-10T09:28:25.000Z</published>
    <updated>2023-11-10T02:28:00.685Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/10/aywEgYVeC9vL8pZ.png" alt="image.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/">20231022ï¼šç¬¬äºŒæœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/">20231027ï¼šç¬¬ä¸‰æœŸ</a></li><li><a href="https://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/">20231027ï¼šç¬¬å››æœŸ</a><span id="more"></span></li></ul><h2 id="How-to-Use-OpenTelemetry-in-Go-OpenTelemetry-is-a-powerfulâ€¦-by-Akanksha-Rana-KloudMate"><a href="#How-to-Use-OpenTelemetry-in-Go-OpenTelemetry-is-a-powerfulâ€¦-by-Akanksha-Rana-KloudMate" class="headerlink" title="How to Use OpenTelemetry in Go. OpenTelemetry is a powerfulâ€¦ | by Akanksha Rana | KloudMate"></a>How to Use OpenTelemetry in Go. OpenTelemetry is a powerfulâ€¦ | by Akanksha Rana | KloudMate</h2><p>URL: <a href="https://blog.kloudmate.com/how-to-use-opentelemetry-in-go-e416ca01c499">https://blog.kloudmate.com/how-to-use-opentelemetry-in-go-e416ca01c499</a></p><blockquote><p>ä½œè€…ä¸€æ­¥æ­¥å¸¦ä½ ä½¿ç”¨ golang é…ç½®äº† <code>OpenTelemetry</code>ï¼Œä¸è¿‡ç”±äº Go ä¸æ”¯æŒ agentï¼Œè¿˜æ˜¯æ²¡æœ‰ Java æ–¹ä¾¿ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ç¡¬ç¼–ç ã€‚</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tp := trace.NewTracerProvider(  </span><br><span class="line">    trace.WithBatcher(exp),  </span><br><span class="line">    trace.WithResource(newResource()),  </span><br><span class="line">)  </span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">if</span> err := tp.Shutdown(context.Background()); err != <span class="literal">nil</span> &#123;  </span><br><span class="line">        l.Fatal(err)  </span><br><span class="line">    &#125;&#125;()  </span><br><span class="line">otel.SetTracerProvider(tp)</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/11/07/wFtivm6abfVrgSD.png" alt="image.png"></p><p>æœ€ç»ˆä¼šè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œé€‚é…èµ·æ¥å€’ä¹Ÿè›®ç®€å•çš„ã€‚</p><h2 id="What-happens-when-you-create-a-pod-in-Kubernetes-by-Daniele-Polencic-ITNEXT"><a href="#What-happens-when-you-create-a-pod-in-Kubernetes-by-Daniele-Polencic-ITNEXT" class="headerlink" title="What happens when you create a pod in Kubernetes | by Daniele Polencic | ITNEXT"></a>What happens when you create a pod in Kubernetes | by Daniele Polencic | ITNEXT</h2><p>URL: <a href="https://itnext.io/what-happens-when-you-create-a-pod-in-kubernetes-6b789b6db8a8">https://itnext.io/what-happens-when-you-create-a-pod-in-kubernetes-6b789b6db8a8</a></p><blockquote><p>æœ¬æ–‡è®²è§£äº†ä¸€ä¸ª Pod åœ¨ <code>kubernetes</code> ä¸­åˆ›å»ºçš„ä¸»è¦æµç¨‹ã€‚</p></blockquote><p><img src="https://s2.loli.net/2023/11/08/2V6ei8XnJ9t1Zj3.png" alt="image.png"><br><img src="https://s2.loli.net/2023/11/08/gKhrCXLtkzicI4F.png" alt="image.png"><br><img src="https://s2.loli.net/2023/11/08/mfGkSAFtdvOCyLx.png" alt="image.png"><br><img src="https://s2.loli.net/2023/11/08/XG7co1AF9blViaM.png" alt="image.png"><br><img src="https://s2.loli.net/2023/11/08/EXVFnQYz9Arkyx2.png" alt="image.png"></p><ul><li>å®¢æˆ·ç«¯æ ¡éªŒ <code>yaml</code> æ ¼å¼æ˜¯å¦æ­£ç¡®</li><li>æˆåŠŸåä¼šå°† <code>yaml</code> å†™å…¥ <code>etcd</code>.</li><li>ä¹‹åä¼šå°† Pod ä¿¡æ¯å†™å…¥è°ƒåº¦é˜Ÿåˆ—</li><li>è°ƒåº¦é˜Ÿåˆ—è·å–è¯¥ä»»åŠ¡ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ Node èŠ‚ç‚¹éƒ¨ç½² Pod</li><li>ç­‰å¾… Pod å¯åŠ¨æˆåŠŸé€šè¿‡ Prob æ¢é’ˆæ ¡éªŒ</li><li>å°† Pod çš„ <code>IP:Port</code> ä¿¡æ¯ä½œä¸º <code>endpoint</code> å­˜å‚¨åœ¨ <code>etcd</code></li><li>å¦‚æœæœ‰åˆ›å»º <code>service</code>ï¼Œä¼šå°†è¿™ä¸ª <code>endpoint</code> å’Œ <code>service</code> è¿›è¡Œç»‘å®š</li><li>ä¹‹åå…¶ä½™çš„ç»„ä»¶å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ª serviceï¼Œæ¯”å¦‚ <code>service mesh</code>ã€<code>ingress</code>ã€<code>kube-proxy</code>ã€<code>coreDNS</code> ç­‰ç»„ä»¶ã€‚</li></ul><h2 id="åƒRedisä½œè€…é‚£æ ·ï¼Œä½¿ç”¨Goå®ç°ä¸€ä¸ªèŠå¤©æœåŠ¡å™¨ï¼Œä¸åˆ°100è¡Œä»£ç "><a href="#åƒRedisä½œè€…é‚£æ ·ï¼Œä½¿ç”¨Goå®ç°ä¸€ä¸ªèŠå¤©æœåŠ¡å™¨ï¼Œä¸åˆ°100è¡Œä»£ç " class="headerlink" title="åƒRedisä½œè€…é‚£æ ·ï¼Œä½¿ç”¨Goå®ç°ä¸€ä¸ªèŠå¤©æœåŠ¡å™¨ï¼Œä¸åˆ°100è¡Œä»£ç "></a>åƒRedisä½œè€…é‚£æ ·ï¼Œä½¿ç”¨Goå®ç°ä¸€ä¸ªèŠå¤©æœåŠ¡å™¨ï¼Œä¸åˆ°100è¡Œä»£ç </h2><p>URL: <a href="https://colobu.com/2023/10/29/implement-a-small-chat-server-like-antirez-in-100-lines/">https://colobu.com/2023/10/29/implement-a-small-chat-server-like-antirez-in-100-lines/</a></p><blockquote><p>å‰æ®µæ—¶é—´ Redis ä½œè€…ç”¨ C è¯­è¨€å†™äº†ä¸€ä¸ªç®€å•çš„èŠå¤©æœåŠ¡å™¨ï¼Œä½œè€…ä½¿ç”¨ Go å®ç°äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä»£ç é‡ä¹Ÿå¾ˆå°‘ï¼Œé€‚åˆæ–°æ‰‹è”ç³»ï¼ˆ Go +goroutine ç¡®å®æ¯” Java å†™èµ·æ¥è¦ç®€å•ï¼‰<br><img src="https://s2.loli.net/2023/11/09/af9pk2lC51ujIgq.png" alt="image.png"></p></blockquote><p>æœ‰å‡ ä¸ªæ ¸å¿ƒæµç¨‹ï¼š</p><ul><li>æ¯æ¬¡åˆ›å»ºä¸€ä¸ªè¿æ¥æ—¶ï¼Œéƒ½ä¼šå°†è¿™ä¸ªè¿æ¥ä¿å­˜åœ¨å†…å­˜é‡Œï¼Œä½¿ç”¨ conn ä½œä¸º key</li><li>æ¯æ¬¡å‘é€æ¶ˆæ¯æ—¶ä¼šå°†æ¶ˆæ¯å‘åˆ°ä¸€ä¸ªå†…éƒ¨ chan ä¸­ï¼Œç„¶åå¼‚æ­¥è¯»å– chan å¹¶é€šè¿‡ conn å‘é€æ¶ˆæ¯</li></ul><h2 id="Five-API-Performance-Optimization-Tricks-that-Every-Java-Developer-Must-Know-by-lance-Javarevisited-Medium"><a href="#Five-API-Performance-Optimization-Tricks-that-Every-Java-Developer-Must-Know-by-lance-Javarevisited-Medium" class="headerlink" title="Five API Performance Optimization Tricks that Every Java Developer Must Know | by lance | Javarevisited | Medium"></a>Five API Performance Optimization Tricks that Every Java Developer Must Know | by lance | Javarevisited | Medium</h2><p>URL: <a href="https://medium.com/javarevisited/five-api-performance-optimization-tricks-that-every-java-developer-must-know-75324ee1d244">https://medium.com/javarevisited/five-api-performance-optimization-tricks-that-every-java-developer-must-know-75324ee1d244</a></p><blockquote><p>ä½œè€…è®²äº†ä¸€äº›å¸¸è§çš„  API ä¼˜åŒ–æ‰‹æ®µï¼Œä¸æ­¢æ˜¯ Java å¼€å‘è€…é€‚ç”¨ã€‚</p></blockquote><ol><li>å¹¶è¡Œè°ƒç”¨</li><li>é¿å…é•¿äº‹åŠ¡ï¼šé¿å… RPC å’ŒæŸ¥è¯¢é€»è¾‘ä¸äº‹åŠ¡ä»£ç æ”¾åœ¨ä¸€èµ·ï¼Œåº”è¯¥æ‹†åˆ†ã€‚</li><li>æ·»åŠ åˆé€‚çš„ç´¢å¼•</li><li>æ•°æ®åº“è¿”å›å°‘é‡çš„æ•°æ®</li><li>åŠ ç¼“å­˜</li></ol><h2 id="Are-you-correctly-using-Optional-Collections-and-Null-in-your-Java-code-by-Abhishek-Singh-Medium"><a href="#Are-you-correctly-using-Optional-Collections-and-Null-in-your-Java-code-by-Abhishek-Singh-Medium" class="headerlink" title="Are you correctly using Optional, Collections, and Null in your Java code ? | by Abhishek Singh | Medium"></a>Are you correctly using Optional, Collections, and Null in your Java code ? | by Abhishek Singh | Medium</h2><p>URL: <a href="https://medium.com/@abhisheksinghjava/are-you-correctly-using-optional-collections-and-null-in-your-java-code-5d2b8617d47c">https://medium.com/@abhisheksinghjava/are-you-correctly-using-optional-collections-and-null-in-your-java-code-5d2b8617d47c</a></p><blockquote><p>Java ä»‹ç»äº† <code>Optional</code> çš„æ­£ç¡®ç”¨æ³•<br><img src="https://s2.loli.net/2023/11/10/u5xIePQBwz3iS8Z.png" alt="image.png"><br><img src="https://s2.loli.net/2023/11/10/I2AiOCdvaDbXrG4.png" alt="image.png"></p></blockquote><ol><li>å…¥å‚ä¸éœ€è¦ <code>Optional</code></li><li>ç§æœ‰æ–¹æ³•è¿”å›ä¸éœ€è¦ <code>Optional</code></li><li>å…¬å…±æ–¹æ³•è¿”å›ä½¿ç”¨ <code>Optional</code>ï¼Œå› ä¸ºæœ‰äº›å¼€å‘è€…å¯èƒ½ä¸ä¼šåˆ¤æ–­ nullã€‚</li><li>é›†åˆç±»æ•°æ®è¿”å›ä¸éœ€è¦è¿”å› <code>Optional/null</code>, è€Œæ˜¯è¿”å›ç©ºé›†åˆã€‚</li></ol><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://blog.kloudmate.com/how-to-use-opentelemetry-in-go-e416ca01c499">https://blog.kloudmate.com/how-to-use-opentelemetry-in-go-e416ca01c499</a></li><li><a href="https://itnext.io/what-happens-when-you-create-a-pod-in-kubernetes-6b789b6db8a8">https://itnext.io/what-happens-when-you-create-a-pod-in-kubernetes-6b789b6db8a8</a></li><li><a href="https://colobu.com/2023/10/29/implement-a-small-chat-server-like-antirez-in-100-lines/">https://colobu.com/2023/10/29/implement-a-small-chat-server-like-antirez-in-100-lines/</a></li><li><a href="https://medium.com/javarevisited/five-api-performance-optimization-tricks-that-every-java-developer-must-know-75324ee1d244">https://medium.com/javarevisited/five-api-performance-optimization-tricks-that-every-java-developer-must-know-75324ee1d244</a></li><li><a href="https://medium.com/@abhisheksinghjava/are-you-correctly-using-optional-collections-and-null-in-your-java-code-5d2b8617d47c">https://medium.com/@abhisheksinghjava/are-you-correctly-using-optional-collections-and-null-in-your-java-code-5d2b8617d47c</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/10/aywEgYVeC9vL8pZ.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/&quot;&gt;20231022ï¼šç¬¬äºŒæœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/&quot;&gt;20231027ï¼šç¬¬ä¸‰æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/&quot;&gt;20231027ï¼šç¬¬å››æœŸ&lt;/a&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>k8s-æœåŠ¡ç½‘æ ¼å®æˆ˜-é…ç½® Meshï¼ˆç°åº¦å‘å¸ƒï¼‰</title>
    <link href="http://crossoverjie.top/2023/11/07/ob/k8s-Istio02/"/>
    <id>http://crossoverjie.top/2023/11/07/ob/k8s-Istio02/</id>
    <published>2023-11-07T14:30:46.000Z</published>
    <updated>2023-11-07T07:42:58.171Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/07/rmwdGK6TQDuhAEW.png" alt="istio-02.png"></p><p>åœ¨ä¸Šä¸€ç¯‡ <a href="https://crossoverjie.top/2023/10/31/ob/k8s-Istio01/">k8s-æœåŠ¡ç½‘æ ¼å®æˆ˜-å…¥é—¨Istio</a>ä¸­åˆ†äº«äº†å¦‚ä½•å®‰è£…éƒ¨ç½² <code>Istio</code>ï¼ŒåŒæ—¶å¯ä»¥åˆ©ç”¨ <code>Istio</code> å®ç° <code>gRPC</code> çš„è´Ÿè½½å‡è¡¡ã€‚</p><span id="more"></span><p>ä»Šå¤©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥ï¼Œæ·±å…¥äº†è§£ä½¿ç”¨ Istio çš„åŠŸèƒ½ã€‚<br><img src="https://s2.loli.net/2023/11/07/jKIeEH7ir9uqDUd.png" alt="image.png"><br>ä» Istio çš„æµé‡æ¨¡å‹ä¸­å¯ä»¥çœ‹å‡ºï¼šIstio æ”¯æŒç®¡ç†é›†ç¾¤çš„å‡ºå…¥å£è¯·æ±‚ï¼ˆgatewayï¼‰ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç®¡ç†é›†ç¾¤å†…çš„ mesh æµé‡ï¼Œä¹Ÿå°±æ˜¯é›†ç¾¤å†…æœåŠ¡ä¹‹é—´çš„è¯·æ±‚ã€‚</p><p>æœ¬æ¬¡å…ˆè®²è§£é›†ç¾¤å†…éƒ¨çš„è¯·æ±‚ï¼Œé…åˆå®ç°ä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ul><li>ç°åº¦å‘å¸ƒï¼ˆå¯¹æŒ‡å®šçš„è¯·æ±‚åˆ†åˆ«è·¯ç”±åˆ°ä¸åŒçš„ service ä¸­ï¼‰</li><li>é…ç½® service çš„è¯·æ±‚æƒé‡</li></ul><h2 id="ç°åº¦å‘å¸ƒ"><a href="#ç°åº¦å‘å¸ƒ" class="headerlink" title="ç°åº¦å‘å¸ƒ"></a>ç°åº¦å‘å¸ƒ</h2><p>åœ¨å¼€å§‹ä¹‹å‰ä¼šéƒ¨ç½²ä¸¤ä¸ª <code>deployment</code> å’Œä¸€ä¸ª <code>service</code>ï¼ŒåŒæ—¶è¿™ä¸¤ä¸ª <code>deployment</code> æ‰€å…³è”çš„ <code>Pod</code> åˆ†åˆ«å¯¹åº”äº†ä¸¤ä¸ªä¸åŒçš„ <code>label</code>ï¼Œç”±äºåœ¨ç°åº¦çš„æ—¶å€™è¿›è¡Œåˆ†ç»„ã€‚<br><img src="https://s2.loli.net/2023/11/07/tLOYQiNg5HEe2ry.png" alt="image.png"></p><p>ä½¿ç”¨è¿™ä¸ª <code>yaml</code> ä¼šéƒ¨ç½²æ‰€éœ€è¦çš„ <code>deployment</code> å’Œ <code>service</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f https://raw.githubusercontent.com/crossoverJie/k8s-combat/main/deployment/istio-mesh.yaml </span><br></pre></td></tr></table></figure><hr><p>é¦–å…ˆè®¾æƒ³ä¸‹ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç°åº¦å‘å¸ƒï¼Œä¸€èˆ¬æ˜¯æŸä¸ªé‡å¤§åŠŸèƒ½çš„æµ‹è¯•ï¼Œåªå¯¹éƒ¨åˆ†è¿›å…¥å†…æµ‹çš„ç”¨æˆ·å¼€æ”¾å…¥å£ã€‚</p><p>å‡è®¾æˆ‘ä»¬åšçš„æ˜¯ä¸€ä¸ª <code>App</code>ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ‹¿åˆ°äº†å†…æµ‹åŒ…ç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚å¤´ä¸­åŠ å…¥ä¸€ä¸ªç‰ˆæœ¬å·ã€‚</p><p>æ¯”å¦‚ <code>version=200</code> è¡¨ç¤ºæ–°ç‰ˆæœ¬ï¼Œ<code>version=100</code> è¡¨ç¤ºè€ç‰ˆæœ¬ã€‚<br>åŒæ—¶åœ¨æœåŠ¡ç«¯ä¼šå°†è¿™ä¸ªç‰ˆæœ¬å·æ‰“å°å‡ºæ¥ï¼Œç”¨äºåŒºåˆ†è¯·æ±‚æ˜¯å¦è¿›å…¥äº†é¢„æœŸçš„ Podã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Client </span></span><br><span class="line">version := r.URL.Query().Get(<span class="string">&quot;version&quot;</span>)  </span><br><span class="line">name := <span class="string">&quot;world&quot;</span>  </span><br><span class="line">ctx, cancel := context.WithTimeout(context.Background(), time.Second)  </span><br><span class="line">md := metadata.New(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;  </span><br><span class="line">    <span class="string">&quot;version&quot;</span>: version,  </span><br><span class="line">&#125;)  </span><br><span class="line">ctx = metadata.NewOutgoingContext(ctx, md)  </span><br><span class="line"><span class="keyword">defer</span> cancel()  </span><br><span class="line">g, err := c.SayHello(ctx, &amp;pb.HelloRequest&#123;Name: name&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Server</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span></span> SayHello(ctx context.Context, in *pb.HelloRequest) (*pb.HelloReply, <span class="type">error</span>) &#123;  </span><br><span class="line">    md, ok := metadata.FromIncomingContext(ctx)  </span><br><span class="line">    <span class="keyword">var</span> version <span class="type">string</span>  </span><br><span class="line">    <span class="keyword">if</span> ok &#123;  </span><br><span class="line">       version = md.Get(<span class="string">&quot;version&quot;</span>)[<span class="number">0</span>]  </span><br><span class="line">    &#125;    log.Printf(<span class="string">&quot;Received: %v, version: %s&quot;</span>, in.GetName(), version)  </span><br><span class="line">    name, _ := os.Hostname()  </span><br><span class="line">    <span class="keyword">return</span> &amp;pb.HelloReply&#123;Message: fmt.Sprintf(<span class="string">&quot;hostname:%s, in:%s, version:%s&quot;</span>, name, in.Name, version)&#125;, <span class="literal">nil</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯¹-service-åˆ†ç»„"><a href="#å¯¹-service-åˆ†ç»„" class="headerlink" title="å¯¹ service åˆ†ç»„"></a>å¯¹ service åˆ†ç»„</h3><p>è¿›è¡Œç°åº¦æµ‹è¯•æ—¶å¾€å¾€éœ€è¦æ–°å¢éƒ¨ç½²ä¸€ä¸ªç°åº¦æœåŠ¡ï¼Œè¿™é‡Œæˆ‘ä»¬ç§°ä¸º v2ï¼ˆä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„ Pod2ï¼‰ã€‚</p><p>åŒæ—¶éœ€è¦å°† v1 å’Œ v2 åˆ†ç»„ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service-ds</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line">  <span class="attr">subsets:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v1</span>  </span><br><span class="line">      <span class="attr">labels:</span>  </span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-combat-service-v1</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v2</span>  </span><br><span class="line">      <span class="attr">labels:</span>  </span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-combat-service-v2</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Istio çš„ <code>DestinationRule</code> å®šä¹‰ <code>subset</code>ï¼Œä¹Ÿå°±æ˜¯å°†æˆ‘ä»¬çš„ <code>service</code> ä¸‹çš„ Pod åˆ†ä¸º v1&#x2F;v2ã€‚</p><blockquote><p>ä½¿ç”¨ æ ‡ç­¾ <code>app</code> è¿›è¡Œåˆ†ç»„</p></blockquote><p>æ³¨æ„è¿™é‡Œçš„ <code>host: k8s-combat-service-istio-mesh</code> é€šå¸¸é…ç½®çš„æ˜¯ <code>service</code> åç§°ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">selector:</span>  </span><br><span class="line">    <span class="attr">appId:</span> <span class="string">&quot;12345&quot;</span>  </span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span>  </span><br><span class="line">  <span class="attr">ports:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8081</span>  </span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8081</span>  </span><br><span class="line">      <span class="attr">name:</span> <span class="string">app</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grpc</span>  </span><br><span class="line">      <span class="attr">port:</span> <span class="number">50051</span>  </span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">50051</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¿™é‡Œ service çš„åç§°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒé…ç½®ä¸º <code>host: k8s-combat-service-istio-mesh.default.svc.cluster.local</code>ï¼Œå¦‚æœä½¿ç”¨çš„ç®€å†™<code>Istio</code> ä¼šæ ¹æ®å½“å‰æŒ‡å®šçš„ <code>namespace</code> è¿›è¡Œè§£æã€‚</p><blockquote><p>Istio æ›´æ¨èä½¿ç”¨å…¨é™å®šåæ›¿ä»£æˆ‘ä»¬è¿™é‡Œçš„ç®€å†™ï¼Œä»è€Œé¿å…è¯¯æ“ä½œã€‚</p></blockquote><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>DestinationRule</code> ä¸­é…ç½®è´Ÿè½½å‡è¡¡çš„ç­–ç•¥ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆç•¥è¿‡ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service-ds</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span> </span><br><span class="line">  <span class="attr">trafficPolicy:</span></span><br><span class="line">    <span class="attr">loadBalancer:</span></span><br><span class="line">      <span class="attr">simple:</span> <span class="string">ROUND_ROBIN</span>  </span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/11/07/TJyEV6eIiCcapSH.png" alt="image.png"></p><hr><p>è¿™æ ·æˆ‘ä»¬å°±å®šä¹‰å¥½äº†ä¸¤ä¸ªåˆ†ç»„ï¼š</p><ul><li>v1ï¼šapp: k8s-combat-service-v1</li><li>v2ï¼šapp: k8s-combat-service-v2</li></ul><p>ä¹‹åå°±å¯ä»¥é…ç½®è·¯ç”±è§„åˆ™å°†æµé‡åˆ†åˆ«æŒ‡å®šåˆ°ä¸¤ä¸ªä¸åŒçš„ç»„ä¸­ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>VirtualService</code> è¿›è¡Œé…ç½®ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service-vs</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">gateways:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">mesh</span>  </span><br><span class="line">  <span class="attr">hosts:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">k8s-combat-service-istio-mesh</span> <span class="comment"># match this host</span></span><br><span class="line"><span class="attr">http:</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v1</span>  </span><br><span class="line">    <span class="attr">match:</span>  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">headers:</span>  </span><br><span class="line">          <span class="attr">version:</span>  </span><br><span class="line">            <span class="attr">exact:</span> <span class="string">&#x27;100&#x27;</span>  </span><br><span class="line">    <span class="attr">route:</span>  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span>  </span><br><span class="line">          <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line">          <span class="attr">subset:</span> <span class="string">v1</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v2</span>  </span><br><span class="line">    <span class="attr">match:</span>  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">headers:</span>  </span><br><span class="line">          <span class="attr">version:</span>  </span><br><span class="line">            <span class="attr">exact:</span> <span class="string">&#x27;200&#x27;</span>  </span><br><span class="line">    <span class="attr">route:</span>  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span>  </span><br><span class="line">          <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line">          <span class="attr">subset:</span> <span class="string">v2</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">default</span>  </span><br><span class="line">    <span class="attr">route:</span>  </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span>  </span><br><span class="line">          <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line">          <span class="attr">subset:</span> <span class="string">v1</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè§„åˆ™å¾ˆç®€å•ï¼Œä¼šæ£€æµ‹ http åè®®çš„ <code>header</code> ä¸­çš„ <code>version</code> å­—æ®µå€¼ï¼Œå¦‚æœä¸º 100 è¿™è·¯ç”±åˆ° <code>subset=v1</code> è¿™ä¸ªåˆ†ç»„çš„ Pod ä¸­ï¼ŒåŒç†ä¸º 200 æ—¶åˆ™è·¯ç”±åˆ° <code>subset=v2</code> è¿™ä¸ªåˆ†ç»„çš„ Pod ä¸­ã€‚</p><p>å½“æ²¡æœ‰åŒ¹é…åˆ° header æ—¶åˆ™è¿›å…¥é»˜è®¤çš„ <code>subset:v1</code></p><blockquote><p> <code>gRPC</code> ä¹Ÿæ˜¯åŸºäº http åè®®ï¼Œå®ƒçš„ <code>metadata</code> ä¹Ÿå°±å¯¹åº”äº† <code>http</code> åè®®ä¸­çš„ <code>header</code>ã€‚</p></blockquote><h3 id="header-x3D-100"><a href="#header-x3D-100" class="headerlink" title="header&#x3D;100"></a>header&#x3D;100</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Greeting: hostname:k8s-combat-service-v1-5b998dc8c8-hkb72, <span class="keyword">in</span>:world, version:100istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=100&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v1-5b998dc8c8-hkb72, <span class="keyword">in</span>:world, version:100istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=100&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v1-5b998dc8c8-hkb72, <span class="keyword">in</span>:world, version:100istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=100&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v1-5b998dc8c8-hkb72, <span class="keyword">in</span>:world, version:100istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=100&quot;</span></span><br></pre></td></tr></table></figure><h3 id="header-x3D-200"><a href="#header-x3D-200" class="headerlink" title="header&#x3D;200"></a>header&#x3D;200</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®ä»¥ä¸Šçš„ä¸Šé¢çš„æµ‹è¯•è¯·æ±‚æ¥çœ‹ï¼Œåªè¦æˆ‘ä»¬è¯·æ±‚å¤´é‡Œå¸¦ä¸ŠæŒ‡å®šçš„ <code>version</code> å°±ä¼šè¢«è·¯ç”±åˆ°æŒ‡å®šçš„ <code>Pod</code> ä¸­ã€‚</p><p>åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æˆ‘ä»¬å°±å¯ä»¥åœ¨ç°åº¦éªŒè¯çš„æ—¶å€™å•ç‹¬å‘ä¸€ä¸ªç°åº¦ç‰ˆæœ¬çš„ <code>Deployment</code>ï¼ŒåŒæ—¶é…åˆå®¢æˆ·ç«¯æŒ‡å®šç‰ˆæœ¬å°±å¯ä»¥å®ç°ç°åº¦åŠŸèƒ½äº†ã€‚</p><h2 id="é…ç½®æƒé‡"><a href="#é…ç½®æƒé‡" class="headerlink" title="é…ç½®æƒé‡"></a>é…ç½®æƒé‡</h2><p>åŒæ ·åŸºäº <code>VirtualService</code> æˆ‘ä»¬è¿˜å¯ä»¥å¯¹ä¸åŒçš„ <code>subset</code> åˆ†ç»„è¿›è¡Œæƒé‡é…ç½®ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-combat-service-vs</span>  </span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">gateways:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">mesh</span>  </span><br><span class="line">  <span class="attr">hosts:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">k8s-combat-service-istio-mesh</span> <span class="comment"># match this host  </span></span><br><span class="line">  <span class="attr">http:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">match:</span>  </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">uri:</span>  </span><br><span class="line">            <span class="attr">exact:</span> <span class="string">/helloworld.Greeter/SayHello</span>  </span><br><span class="line">      <span class="attr">route:</span>  </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">destination:</span>  </span><br><span class="line">            <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line">            <span class="attr">subset:</span> <span class="string">v1</span>  </span><br><span class="line">          <span class="attr">weight:</span> <span class="number">10</span>  </span><br><span class="line">        <span class="bullet">-</span> <span class="attr">destination:</span>  </span><br><span class="line">            <span class="attr">host:</span> <span class="string">k8s-combat-service-istio-mesh</span>  </span><br><span class="line">            <span class="attr">subset:</span> <span class="string">v2</span>  </span><br><span class="line">          <span class="attr">weight:</span> <span class="number">90</span>  </span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">5000ms</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¼”ç¤ºçš„æ˜¯é’ˆå¯¹ <code>SayHello</code> æ¥å£è¿›è¡Œæƒé‡é…ç½®ï¼ˆå½“ç„¶è¿˜æœ‰å¤šç§åŒ¹é…è§„åˆ™ï¼‰ï¼Œ90% çš„æµé‡ä¼šè¿›å…¥ v2 è¿™ä¸ª subsetï¼Œä¹Ÿå°±æ˜¯åœ¨ <code>k8s-combat-service-istio-mesh</code> service ä¸‹çš„ <code>app: k8s-combat-service-v2</code> Podã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-**v1**-5b998dc8c8-hkb72, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$ curl <span class="string">&quot;http://127.0.0.1:8081/grpc_client?name=k8s-combat-service-istio-mesh&amp;version=200&quot;</span></span><br><span class="line">Greeting: hostname:k8s-combat-service-v2-5db566fb76-xj7j6, <span class="keyword">in</span>:world, version:200istio-proxy@k8s-combat-service-v1-5b998dc8c8-hkb72:/$</span><br></pre></td></tr></table></figure><p>ç»è¿‡æµ‹è¯•ä¼šå‘ç°å¤§éƒ¨åˆ†çš„è¯·æ±‚éƒ½ä¼šæŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸè¿›å…¥ v2 è¿™ä¸ªåˆ†ç»„ã€‚</p><p>å½“ç„¶é™¤ä¹‹å¤–ä¹‹å¤–æˆ‘ä»¬è¿˜å¯ä»¥ï¼š</p><ul><li>è¶…æ—¶æ—¶é—´</li><li>æ•…éšœæ³¨å…¥</li><li>é‡è¯•<br>å…·ä½“çš„é…ç½®å¯ä»¥å‚è€ƒ <a href="https://istio.io/latest/docs/reference/config/networking/virtual-service/#HTTPMatchRequest">Istio</a> å®˜æ–¹æ–‡æ¡£ï¼š<br><img src="https://s2.loli.net/2023/11/07/LBjEtd1MP9VcAgl.png" alt="image.png"><br>å½“ç„¶åœ¨ä¸€äº›äº‘å¹³å°ä¹Ÿæä¾›äº†å¯è§†åŒ–çš„é¡µé¢ï¼Œå¯ä»¥æ›´ç›´è§‚çš„ä½¿ç”¨ã€‚<br><img src="https://s2.loli.net/2023/11/07/2LVTgeiSK9HyxQJ.png" alt="image.png"></li></ul><blockquote><p>ä»¥ä¸Šæ˜¯ é˜¿é‡Œäº‘çš„æˆªå›¾</p></blockquote><p>ä½†ä»–ä»¬çš„ç®¡ç†çš„èµ„æºéƒ½å <code>kubernetes</code>ï¼Œä¸€èˆ¬æ˜¯ç”±è¿ç»´æˆ–è€…æ˜¯ DevOps æ¥é…ç½®ï¼Œä¸æ–¹ä¾¿å¼€å‘ä½¿ç”¨ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸€ä¸ªä»‹äºäº‘å‚å•†å’Œå¼€å‘è€…ä¹‹é—´çš„ç®¡ç†å‘å¸ƒå¹³å°ï¼Œå¯ä»¥ç”±å¼€å‘è€…ä»¥é¡¹ç›®ç»´åº¦ç®¡ç†ç»´æŠ¤è¿™äº›åŠŸèƒ½ã€‚</p><p>æœ¬æ–‡çš„æ‰€æœ‰æºç åœ¨è¿™é‡Œå¯ä»¥è®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p><p>#Blog #Istio </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/07/rmwdGK6TQDuhAEW.png&quot; alt=&quot;istio-02.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡ &lt;a href=&quot;https://crossoverjie.top/2023/10/31/ob/k8s-Istio01/&quot;&gt;k8s-æœåŠ¡ç½‘æ ¼å®æˆ˜-å…¥é—¨Istio&lt;/a&gt;ä¸­åˆ†äº«äº†å¦‚ä½•å®‰è£…éƒ¨ç½² &lt;code&gt;Istio&lt;/code&gt;ï¼ŒåŒæ—¶å¯ä»¥åˆ©ç”¨ &lt;code&gt;Istio&lt;/code&gt; å®ç° &lt;code&gt;gRPC&lt;/code&gt; çš„è´Ÿè½½å‡è¡¡ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/k8s/"/>
    
    
    <category term="Istio" scheme="http://crossoverjie.top/tags/Istio/"/>
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ç¬¬å››æœŸ</title>
    <link href="http://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/"/>
    <id>http://crossoverjie.top/2023/11/03/ob/newsletter/Newsletter04-20231103/</id>
    <published>2023-11-03T09:28:25.000Z</published>
    <updated>2023-11-02T10:09:56.401Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/11/02/bYGoVQFxSL5nqw1.png" alt="image.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/">20231022ï¼šç¬¬äºŒæœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/">20231027ï¼šç¬¬ä¸‰æœŸ</a><span id="more"></span></li></ul><h2 id="Technology-trends-for-Spring-projects-java"><a href="#Technology-trends-for-Spring-projects-java" class="headerlink" title="Technology trends for Spring projects : java"></a>Technology trends for Spring projects : java</h2><p>URL: <a href="https://www.reddit.com/r/java/comments/17ixfzf/technology_trends_for_spring_projects/">https://www.reddit.com/r/java/comments/17ixfzf/technology_trends_for_spring_projects/</a><br>è¿™æ˜¯ä¸€ä¸ª <code>Reddit</code> å¸–å­ï¼Œè®¨è®ºäº† <code>Spring</code> é¡¹ç›®çš„æŠ€æœ¯è¶‹åŠ¿ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ç‚¹èµè¾ƒé«˜çš„å›å¤ï¼š<br>åœ¨æ‹›è˜çš„æ—¶å€™è¿˜ä¼š <code>Spring</code> è€ƒè™‘å‘¨è¾¹çš„æŠ€æœ¯æ ˆï¼šæ¯”å¦‚ Linuxã€Dockerã€<code>kubernetes</code>ã€Git ç­‰ï¼Œä½†å¦‚æœä½ å…·å¤‡ Spring Security å’Œ OpenSSL çš„è¯ä¼šæ›´å—æ¬¢è¿ã€‚</p><blockquote><p>è¿™ç‚¹åœ¨å›½å†…æ„Ÿå—è²Œä¼¼å¹¶ä¸æ˜æ˜¾ï¼Œä¸ç¡®å®šæ˜¯ä¸æ˜¯å›½å¤–æ›´çœ‹é‡ä¸€äº›ã€‚</p></blockquote><p>Kotlin åœ¨æœåŠ¡ç«¯ç›®å‰è¿˜å¤„äºä¸€ä¸ªè¾ƒå°çš„è§„æ¨¡ï¼Œç‰¹åˆ«æ˜¯å¦‚ä»Š Java å‘ç‰ˆèŠ‚å¥åŠ å¿«ï¼Œå¯¹äºå¤§éƒ¨åˆ†äººæ¥è¯´æ²¡æœ‰è¶³å¤Ÿçš„ç†ç”±æ¥æ‘†è„± Javaã€‚</p><p><code>Spring</code> ä¾ç„¶æ˜¯ Java é¢†åŸŸæœ€æµè¡Œçš„æœåŠ¡ç«¯æ¡†æ¶ï¼Œä¸ç®¡ä½ æ˜¯å¦å–œæ¬¢ã€‚</p><p>ä¸ç”¨èŠ±å¤ªå¤šæ—¶é—´å»è¿½å¯»å­¦ä¹ æ–°æŠ€æœ¯ï¼Œæ›´é‡è¦çš„æ˜¯ç¡®ä¿ä½ å·²ç»æ‰“å¥½åŸºç¡€äº†ï¼Œæ¯”å¦‚æ•°æ®åº“å‡ ä¹ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼ŒSpring åº•å±‚ä¾ç„¶æ˜¯åŸºäº Servlet å®ç°çš„ï¼Œç†è§£è¿™äº›åŸºç¡€æŠ€æœ¯æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œä»è€Œé¿å…ä¸€äº›å¸¸è§é—®é¢˜ã€‚<br>    ç°åœ¨ Spring å·²ç»æ²¡æœ‰ä½¿ç”¨ servletï¼Œè€Œæ˜¯è¯¥ç”¨ WebFlux æ›¿ä»£</p><blockquote><p>æ¯”è¾ƒè®¤å¯è¿™ä¸ªè§‚ç‚¹ï¼Œè¿˜æ˜¯æ›´åº”è¯¥èŠ±æ—¶é—´åˆ°ä¸ä¼šå˜çš„æŠ€æœ¯æ ˆä¸Šï¼Œä¸Šå±‚æŠ€æœ¯å¦‚ä½•æ”¹å˜å­¦èµ·æ¥ä¹Ÿä¼šæ›´å®¹æ˜“ã€‚</p></blockquote><p>å…¶ä¸­æœ‰ä¸¤ä¸ªè¯„è®ºæ¯”è¾ƒæœ‰æ„æ€ï¼š<br>Spring å›¢é˜ŸèŠ±äº†å¤§é‡çš„æ—¶é—´æ¥æ¥å…¥ Kotlinï¼Œæ¯”å¦‚ coroutines å’Œä¸€äº›å…¶ä»–èµ„æº<br>    åœ¨ Spring3 å‘å¸ƒçš„æ—¶å€™ï¼Œspring å›¢é˜Ÿä¹ŸæŠ•å…¥äº†å¤§é‡æ—¶é—´åˆ° <code>Groovy</code><br>ç¡®å®å½“ä¸‹ <code>Groovy</code> ä½¿ç”¨çš„è¶Šæ¥è¶Šå°‘äº†ï¼Œæ‰€ä»¥æŠ€æœ¯æ½®æµç¡®å®ä¼šéšæ—¶é—´å˜åŒ–ï¼Œè¿˜æ˜¯æŠ“ä½ä¸å¯å˜çš„æ€§ä»·æ¯”æ›´é«˜ã€‚</p><h2 id="Service-mesh-data-plane-vs-control-plane-by-Matt-Klein-Envoy-Proxy"><a href="#Service-mesh-data-plane-vs-control-plane-by-Matt-Klein-Envoy-Proxy" class="headerlink" title="Service mesh data plane vs. control plane | by Matt Klein | Envoy Proxy"></a>Service mesh data plane vs. control plane | by Matt Klein | Envoy Proxy</h2><p>URL: <a href="https://blog.envoyproxy.io/service-mesh-data-plane-vs-control-plane-2774e720f7fc">https://blog.envoyproxy.io/service-mesh-data-plane-vs-control-plane-2774e720f7fc</a><br><img src="https://s2.loli.net/2023/11/02/chqbKiTEmDrJpvt.png" alt="image.png"></p><p>æœåŠ¡ç½‘æ ¼ä¸­çš„æ•°æ®åº“é¢å’Œæ§åˆ¶é¢å¯¹æ¯”ï¼Œæ•°æ®é¢ä¸»è¦åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>å¥åº·æ£€æµ‹</li><li>è·¯ç”±</li><li>è´Ÿè½½å‡è¡¡</li><li>èº«ä»½éªŒè¯</li><li>å¯è§‚æµ‹æ€§</li></ul><p>æ§åˆ¶é¢ä¸»è¦åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>æœåŠ¡æ³¨å†Œå‘ç°</li><li>å„ç§æ§åˆ¶é¢çš„é…ç½®ç®¡ç†</li></ul><p>å¸¸è§çš„æ•°æ®é¢äº§å“æœ‰ï¼š<a href="https://linkerd.io/">Linkerd</a>,Â <a href="https://www.nginx.com/">NGINX</a>,Â <a href="https://www.haproxy.com/">HAProxy</a>,Â <a href="https://envoyproxy.github.io/">Envoy</a>,Â <a href="https://traefik.io/">Traefik</a><br>æ§åˆ¶é¢äº§å“æœ‰ï¼š<a href="https://istio.io/">Istio</a>,Â <a href="https://verizon.github.io/nelson/">Nelson</a>,Â <a href="https://github.com/airbnb/synapse">SmartStack</a><br>æ•°æ®é¢å’Œæ§åˆ¶é¢æ˜¯æ¾è€¦åˆçš„ï¼Œå¯ä»¥æ›¿æ¢ä¸åŒçš„æ•°æ®é¢äº§å“ã€‚</p><h2 id="Kubewatch-A-Kubernetes-Watcher-for-Observability-and-Monitoring-by-Seifeddine-Rajhi-Oct-2023-Medium"><a href="#Kubewatch-A-Kubernetes-Watcher-for-Observability-and-Monitoring-by-Seifeddine-Rajhi-Oct-2023-Medium" class="headerlink" title="Kubewatch: A Kubernetes Watcher for Observability and Monitoring | by Seifeddine Rajhi | Oct, 2023 | Medium"></a>Kubewatch: A Kubernetes Watcher for Observability and Monitoring | by Seifeddine Rajhi | Oct, 2023 | Medium</h2><p>URL: <a href="https://medium.com/@seifeddinerajhi/kubewatch-a-kubernetes-watcher-for-observability-and-monitoring-d6dea1dbeb06">https://medium.com/@seifeddinerajhi/kubewatch-a-kubernetes-watcher-for-observability-and-monitoring-d6dea1dbeb06</a><br>ä»‹ç»äº†ä¸€ä¸ªåä¸º <a href="https://github.com/robusta-dev/kubewatch">kubewatch</a> çš„å¼€æºé¡¹ç›®ã€‚<br><img src="https://s2.loli.net/2023/11/02/E57lCTrt3fnR2wZ.png" alt="image.png"></p><p>å¯ä»¥å°†å„ç§èµ„æºå˜åŒ–çš„äº‹ä»¶é€šè¿‡ webhook çš„æ–¹å¼å‘å‡ºé€šçŸ¥ï¼Œå¯ä»¥è®©ç»´æŠ¤è€…è¯·æ±‚ <code>kubernetes</code> çš„è¿è¡ŒçŠ¶æ€ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">namespaceToWatch:</span> <span class="string">&quot;default&quot;</span></span><br><span class="line"><span class="attr">resourcesToWatch:</span></span><br><span class="line">  <span class="attr">deployment:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">replicationcontroller:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">replicaset:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">daemonset:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">services:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">pod:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">job:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">node:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">clusterrole:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">clusterrolebinding:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">serviceaccount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">persistentvolume:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">secret:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">configmap:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">ingress:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">coreevent:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">event:</span> <span class="literal">true</span>     </span><br></pre></td></tr></table></figure><blockquote><p>è¿™ç±»å¼€æºé¡¹ç›®å…¶å®è¿˜è›®å¤šçš„ï¼Œæˆ‘ä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ä¸ªç”¨äºç›‘å¬æˆ‘ä»¬åº”ç”¨ Pod çš„å˜åŒ–çš„äº‹ä»¶ï¼Œç„¶åå°†è¿™äº›æ¶ˆæ¯å‘é€ç»™ Pulsarï¼Œåªæ˜¯è¿™ä¸ªé¡¹ç›®åšçš„æ›´å…¨äº†ã€‚</p></blockquote><h2 id="Bye-bye-ChatGPT-AI-Tools-That-Are-As-Good-As-ChatGPT-But-Few-People-Use-by-ArticleAce-Medium"><a href="#Bye-bye-ChatGPT-AI-Tools-That-Are-As-Good-As-ChatGPT-But-Few-People-Use-by-ArticleAce-Medium" class="headerlink" title="Bye-bye, ChatGPT: AI Tools That Are As Good As ChatGPT (But Few People Use) | by ArticleAce | Medium"></a>Bye-bye, ChatGPT: AI Tools That Are As Good As ChatGPT (But Few People Use) | by ArticleAce | Medium</h2><p>URL: <a href="https://medium.com/@Article_Ace/bye-bye-chatgpt-ai-tools-that-are-as-good-as-chatgpt-but-few-people-use-9df4dcdf5ab0">https://medium.com/@Article_Ace/bye-bye-chatgpt-ai-tools-that-are-as-good-as-chatgpt-but-few-people-use-9df4dcdf5ab0</a><br>ä½œè€…åˆ†äº«äº†ä¸€äº›é™¤äº† ChatGPT ä¹‹å¤–çš„å·¥å…·ï¼Œå¤§éƒ¨åˆ†æ˜¯ä¸€äº›å‚ç›´åº”ç”¨ã€‚</p><h3 id="Auto-GPT"><a href="#Auto-GPT" class="headerlink" title="Auto-GPT"></a>Auto-GPT</h3><p><a href="https://github.com/Significant-Gravitas/Auto-GPT">https://github.com/Significant-Gravitas/Auto-GPT</a><br><img src="https://s2.loli.net/2023/11/02/LfYKVmgsy4IarE7.png" alt="image.png"></p><p>è¿™ä¸ªå·¥å…·å·²ç»å¾ˆæµè¡Œäº†ï¼Œå¯ä»¥è‡ªå·±ç»™è‡ªå·±è¾“å…¥ Prompt ç›´åˆ°å®Œæˆä½ çš„ç›®æ ‡ä¸ºæ­¢ã€‚</p><h3 id="OpenAI-Playground"><a href="#OpenAI-Playground" class="headerlink" title="OpenAI-Playground"></a>OpenAI-Playground</h3><p>ChatGPT ç›®å‰åªèƒ½è®©æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨çš„æ¨¡å‹ï¼ˆ3.5&#x2F;4ï¼‰ä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ playground æ¥è‡ªå®šä¹‰ä¸€äº›è¾“å‡ºã€‚<br><a href="https://platform.openai.com/playground">https://platform.openai.com/playground</a><br><img src="https://s2.loli.net/2023/11/02/xjbguH3NhY8PRrw.png" alt="image.png"></p><h3 id="Jasper"><a href="#Jasper" class="headerlink" title="Jasper"></a>Jasper</h3><p> Jasper æ˜¯ä¸€ä¸ªç”¨äºä¸ºç¤¾äº¤åª’ä½“ã€å¹¿å‘Šã€åšå®¢ã€é‚®ä»¶ç”Ÿæˆå†…å®¹çš„ AI å·¥å…·ï¼Œç›¸å½“äºæ˜¯ä¸€äº›ä¸åŒçš„å‚ç›´é¢†åŸŸã€‚<br> <a href="https://www.jasper.ai/">https://www.jasper.ai/</a><br> <img src="https://s2.loli.net/2023/11/02/gfGbBRN8wimklxI.png" alt="image.png"><br>ä½œè€…ä¼šç”¨å®ƒæ¥ç”Ÿæˆä¸€äº›åˆ›æ„ã€å’Œè§†é¢‘è„šæœ¬ã€‚</p><h3 id="Quillbot"><a href="#Quillbot" class="headerlink" title="Quillbot"></a>Quillbot</h3><p><a href="https://quillbot.com/">https://quillbot.com/</a><br>è¿™ä¸ªä¹Ÿæ˜¯æˆ‘è‡ªå·±ç”¨çš„è¾ƒå¤šçš„å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ¶¦è‰²æˆ‘ä»¬çš„è‹±æ–‡è¡¨è¾¾ã€‚<br>ä½†æˆ‘éœ€è¦åœ¨ GitHub ä¸Šæä¸€äº›æ¯”è¾ƒå¤æ‚çš„ issue ã€PR æˆ–è€…æ˜¯è‹±æ–‡é‚®ä»¶æ—¶ï¼Œå°±ä¼šç”¨è¿™ä¸ªå·¥å…·è¿›è¡Œæ¶¦è‰²ï¼Œæ•ˆæœè¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚<br><img src="https://s2.loli.net/2023/11/02/i3bfTUeMvsrEVly.png" alt="image.png"></p><h2 id="å¦‚ä½•ç”¨Goå®ç°ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œåº“ï¼Ÿ"><a href="#å¦‚ä½•ç”¨Goå®ç°ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œåº“ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç”¨Goå®ç°ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œåº“ï¼Ÿ"></a>å¦‚ä½•ç”¨Goå®ç°ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œåº“ï¼Ÿ</h2><p>URL: <a href="https://mp.weixin.qq.com/s/UBcDrPwEdFz7JOfj0UP2Uw">https://mp.weixin.qq.com/s/UBcDrPwEdFz7JOfj0UP2Uw</a><br>æœ¬æ–‡ä¸»è¦è®²è§£äº†ä¸€äº›åœºæ™¯çš„ç½‘ç»œæ¨¡å‹ä»¥åŠ Go åŸç”Ÿç½‘ç»œæ¨¡å‹çš„åŸç†ï¼Œå¹¶å¯¹å¦‚ä½•å®ç°ä¸€ä¸ªç½‘ç»œåº“æä¾›äº†ä¸€äº›æ€è·¯<br>ç½‘ç»œåº“é€šå¸¸æ˜¯ä¸ºäº†è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>C10K&#x2F;100K é—®é¢˜ï¼Œå¦‚ä½•åº”å¯¹æµ·é‡çš„å¹¶å‘è¿æ¥</li><li>æœåŠ¡ç«¯å¦‚ä½•åœ¨é«˜å¹¶å‘çš„æ—¶å€™æ­£ç¡®å“åº”<br>å¯¹æ­¤æœ‰ä¸‰ç§ç½‘ç»œæ¨¡å‹ï¼š</li><li>ä¼ ç»Ÿ IO é˜»å¡æ¨¡å‹</li><li>Reactor æ¨¡å‹</li><li>Proactor æ¨¡å‹<br><img src="https://s2.loli.net/2023/11/02/X2kKESoBzRwjlip.png" alt="image.png"></li></ul><p> Go åŸç”Ÿæ¨¡å‹å…¶å®å·²ç»å¾ˆå¼ºäº†ï¼Œå¯ä»¥æŠŠä»–ç†è§£ä¸º Reactor æ¨¡å‹ã€‚<br> <img src="https://s2.loli.net/2023/11/02/grRPoQ5uIJBVDAS.png" alt="image.png"></p><p>å¯ä»¥åŸºäºä»¥ä¸‹ä¸‰å±‚è®¾è®¡è¿›è¡Œè®¾è®¡ï¼š<br><img src="https://s2.loli.net/2023/11/02/spoJIROb8zWdNL7.png" alt="image.png"><br>ä¹Ÿå¯ä»¥å‚è€ƒä¸€äº›å¼€æºçš„ç½‘ç»œåº“ï¼š</p><ul><li><a href="https://github.com/panjf2000/gnet">https://github.com/panjf2000/gnet</a></li><li><a href="https://github.com/Allenxuxu/gev">https://github.com/Allenxuxu/gev</a></li><li><a href="https://github.com/aceld/zinx">https://github.com/aceld/zinx</a></li></ul><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://www.reddit.com/r/java/comments/17ixfzf/technology_trends_for_spring_projects/">https://www.reddit.com/r/java/comments/17ixfzf/technology_trends_for_spring_projects/</a></li><li><a href="https://blog.envoyproxy.io/service-mesh-data-plane-vs-control-plane-2774e720f7fc">https://blog.envoyproxy.io/service-mesh-data-plane-vs-control-plane-2774e720f7fc</a></li><li><a href="https://medium.com/@seifeddinerajhi/kubewatch-a-kubernetes-watcher-for-observability-and-monitoring-d6dea1dbeb06">https://medium.com/@seifeddinerajhi/kubewatch-a-kubernetes-watcher-for-observability-and-monitoring-d6dea1dbeb06</a></li><li><a href="https://medium.com/@Article_Ace/bye-bye-chatgpt-ai-tools-that-are-as-good-as-chatgpt-but-few-people-use-9df4dcdf5ab0">https://medium.com/@Article_Ace/bye-bye-chatgpt-ai-tools-that-are-as-good-as-chatgpt-but-few-people-use-9df4dcdf5ab0</a></li><li><a href="https://mp.weixin.qq.com/s/UBcDrPwEdFz7JOfj0UP2Uw">https://mp.weixin.qq.com/s/UBcDrPwEdFz7JOfj0UP2Uw</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/11/02/bYGoVQFxSL5nqw1.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/&quot;&gt;20231022ï¼šç¬¬äºŒæœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/&quot;&gt;20231027ï¼šç¬¬ä¸‰æœŸ&lt;/a&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>k8s-æœåŠ¡ç½‘æ ¼å®æˆ˜-å…¥é—¨Istio</title>
    <link href="http://crossoverjie.top/2023/10/31/ob/k8s-Istio01/"/>
    <id>http://crossoverjie.top/2023/10/31/ob/k8s-Istio01/</id>
    <published>2023-10-31T14:30:46.000Z</published>
    <updated>2023-10-31T15:29:38.024Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/31/QChAqoOVcxbP4tU.png" alt="istio-01.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ç»ˆäºè¿›å…¥å¤§å®¶éƒ½æ¯”è¾ƒæ„Ÿå…´è¶£çš„æœåŠ¡ç½‘æ ¼ç³»åˆ—äº†ï¼Œåœ¨å‰é¢å·²ç»è®²è§£äº†ï¼š</p><ul><li>å¦‚ä½•éƒ¨ç½²åº”ç”¨åˆ° <code>kubernetes</code></li><li>æœåŠ¡ä¹‹é—´å¦‚ä½•è°ƒç”¨</li><li>å¦‚ä½•é€šè¿‡åŸŸåè®¿é—®æˆ‘ä»¬çš„æœåŠ¡</li><li>å¦‚ä½•ä½¿ç”¨ <code>kubernetes</code> è‡ªå¸¦çš„é…ç½® <code>ConfigMap</code></li></ul><p>åŸºæœ¬ä¸Šå·²ç»å¤Ÿæˆ‘ä»¬å¼€å‘ä¸€èˆ¬è§„æ¨¡çš„ web åº”ç”¨äº†ï¼›ä½†åœ¨ä¼ä¸šä¸­å¾€å¾€æœ‰ç€å¤æ‚çš„åº”ç”¨è°ƒç”¨å…³ç³»ï¼Œåº”ç”¨ä¸åº”ç”¨ä¹‹é—´çš„è¯·æ±‚ä¹Ÿéœ€è¦è¿›è¡Œç®¡ç†ã€‚<br>æ¯”å¦‚å¸¸è§çš„é™æµã€é™çº§ã€traceã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ç­‰åŠŸèƒ½ã€‚</p><p>åœ¨æˆ‘ä»¬ä½¿ç”¨ <code>kubernetes</code> ä¹‹å‰å¾€å¾€éƒ½æ˜¯ç”±å¾®æœåŠ¡æ¡†æ¶æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œæ¯”å¦‚ Dubboã€SpringCloud éƒ½æœ‰å¯¹åº”çš„åŠŸèƒ½ã€‚</p><p>ä½†å½“æˆ‘ä»¬ä¸Šäº† <code>kubernetes</code> ä¹‹åè¿™äº›äº‹æƒ…å°±åº”è¯¥äº¤ç»™ä¸€ä¸ªä¸“é—¨çš„äº‘åŸç”Ÿç»„ä»¶æ¥è§£å†³ï¼Œä¹Ÿå°±æ˜¯æœ¬æ¬¡ä¼šè®²åˆ°çš„ <code>Istio</code>ï¼Œå®ƒæ˜¯ç›®å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><p><img src="https://s2.loli.net/2023/10/31/CtJsogSyPD7cjEW.png" alt="image.png"><br>å®˜æ–¹å¯¹äº Istio çš„è§£é‡Šæ¯”è¾ƒç®€æ´ï¼Œè½åˆ°å…·ä½“çš„åŠŸèƒ½ç‚¹ä¹Ÿå°±æ˜¯åˆšæ‰æåˆ°çš„ï¼š</p><ul><li>é™æµé™çº§</li><li>è·¯ç”±è½¬å‘ã€è´Ÿè½½å‡è¡¡</li><li>å…¥å£ç½‘å…³ã€<code>TLSå®‰å…¨è®¤è¯</code></li><li>ç°åº¦å‘å¸ƒç­‰</li></ul><p><img src="https://s2.loli.net/2023/10/31/aXnNZhu91m7V2Tw.png" alt="image.png"></p><p>å†ç»“åˆå®˜æ–¹çš„æ¶æ„å›¾å¯çŸ¥ï¼šIstio åˆ†ä¸ºæ§åˆ¶é¢ <code>control plane</code> å’Œæ•°æ®é¢ <code>data plane</code>ã€‚</p><p>æ§åˆ¶é¢å¯ä»¥ç†è§£ä¸º Istio è‡ªèº«çš„ç®¡ç†åŠŸèƒ½ï¼š</p><ul><li>æ¯”å¦‚æœåŠ¡æ³¨å†Œå‘ç°</li><li>ç®¡ç†é…ç½®æ•°æ®é¢æ‰€éœ€è¦çš„ç½‘ç»œè§„åˆ™ç­‰</li></ul><p>è€Œæ•°æ®é¢å¯ä»¥ç®€å•çš„æŠŠä»–ç†è§£ä¸ºç”± <code>Envoy</code> ä»£ç†çš„æˆ‘ä»¬çš„ä¸šåŠ¡åº”ç”¨ï¼Œæˆ‘ä»¬åº”ç”¨ä¸­æ‰€æœ‰çš„æµé‡è¿›å‡ºéƒ½ä¼šç»è¿‡ <code>Envoy</code> ä»£ç†ã€‚</p><p>æ‰€ä»¥å®ƒå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡ã€ç†”æ–­ä¿æŠ¤ã€è®¤è¯æˆæƒç­‰åŠŸèƒ½ã€‚</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>é¦–å…ˆå®‰è£… Istio å‘½ä»¤è¡Œå·¥å…·</p><blockquote><p>è¿™é‡Œçš„å‰ææ˜¯æœ‰ä¸€ä¸ª kubernetes è¿è¡Œç¯å¢ƒ</p></blockquote><p>Linux ä½¿ç”¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://istio.io/downloadIstio | sh -</span><br></pre></td></tr></table></figure><p>Mac å¯ä»¥ä½¿ç”¨ brewï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install istioctl</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç¯å¢ƒå¯ä»¥ä¸‹è½½ Istio åé…ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PWD/bin:$PATH</span><br></pre></td></tr></table></figure><p>ä¹‹åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>install</code> å‘½ä»¤å®‰è£…æ§åˆ¶é¢ã€‚</p><blockquote><p>è¿™é‡Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ <code>kubectl</code> æ‰€é…ç½®çš„ <code>kubernetes</code> é›†ç¾¤</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istioctl install --<span class="built_in">set</span> profile=demo -y</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/30/DLOeRGrA7gNC1Xa.png"><br>è¿™ä¸ªçš„ <code>profile</code> è¿˜æœ‰ä»¥ä¸‹ä¸åŒçš„å€¼ï¼Œä¸ºäº†æ¼”ç¤ºæˆ‘ä»¬ä½¿ç”¨ <code>demo</code> å³å¯ã€‚<br><img src="https://s2.loli.net/2023/10/26/3JXneYvyqI4WTgt.png" alt="image.png"></p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯ default å‘½åç©ºé—´è‡ªåŠ¨æ³¨å…¥</span></span><br><span class="line">$ k label namespace default istio-injection=enabled</span><br><span class="line"></span><br><span class="line">$ k describe ns default</span><br><span class="line">Name:         default</span><br><span class="line">Labels:       istio-injection=enabled</span><br><span class="line">              kubernetes.io/metadata.name=default</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Status:       Active</span><br><span class="line">No resource quota.</span><br><span class="line">No LimitRange resource.</span><br></pre></td></tr></table></figure><p>ä¹‹åæˆ‘ä»¬ä¸º <code>namespace</code> æ‰“ä¸Š <code>label</code>ï¼Œä½¿å¾— Istio æ§åˆ¶é¢çŸ¥é“å“ªä¸ª <code>namespace</code> ä¸‹çš„ <code>Pod</code> ä¼šè‡ªåŠ¨æ³¨å…¥ <code>sidecar</code>ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä¸º default è¿™ä¸ªå‘½åç©ºé—´æ‰“å¼€è‡ªåŠ¨æ³¨å…¥ <code>sidecar</code>ï¼Œç„¶ååœ¨è¿™é‡Œéƒ¨ç½²æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨åˆ°çš„ <a href="https://github.com/crossoverJie/k8s-combat/blob/main/deployment/deployment-istio.yaml">deployment-istio.yaml</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ k apply -f deployment/deployment-istio.yaml</span><br><span class="line"></span><br><span class="line">$ k get pod</span><br><span class="line">NAME                                  READY   STATUS    RESTARTS</span><br><span class="line">k8s-combat-service-5bfd78856f-8zjjf   2/2     Running   0          </span><br><span class="line">k8s-combat-service-5bfd78856f-mblqd   2/2     Running   0          </span><br><span class="line">k8s-combat-service-5bfd78856f-wlc8z   2/2     Running   0       </span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¼šçœ‹åˆ°æ¯ä¸ªPod æœ‰ä¸¤ä¸ª containerï¼ˆå…¶ä¸­ä¸€ä¸ªå°±æ˜¯ istio-proxy sidecarï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰åš <a href="https://crossoverjie.top/2023/10/16/ob/k8s-grpc-lb/">gRPC è´Ÿè½½å‡è¡¡</a>æµ‹è¯•æ—¶çš„ä»£ç ã€‚</p><p><img src="https://s2.loli.net/2023/10/31/js1Gz5yVCNLep9W.png" alt="image.png"><br>è¿˜æ˜¯è¿›è¡Œè´Ÿè½½å‡è¡¡æµ‹è¯•ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œè¯´æ˜ <code>Istio</code> èµ·ä½œç”¨äº†ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬å†è§‚å¯Ÿ <code>sidecar</code> çš„æ—¥å¿—æ—¶ï¼Œä¼šçœ‹åˆ°åˆšæ‰æˆ‘ä»¬æ‰€å‘å‡ºå’Œæ¥å—åˆ°çš„æµé‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ k logs -f k8s-combat-service-5bfd78856f-wlc8z -c istio-proxy</span><br><span class="line"></span><br><span class="line">[2023-10-31T14:52:14.279Z] <span class="string">&quot;POST /helloworld.Greeter/SayHello HTTP/2&quot;</span> 200 - via_upstream - <span class="string">&quot;-&quot;</span> 12 61 14 9 <span class="string">&quot;-&quot;</span> <span class="string">&quot;grpc-go/1.58.3&quot;</span> <span class="string">&quot;6d293d32-af96-9f87-a8e4-6665632f7236&quot;</span> <span class="string">&quot;k8s-combat-service:50051&quot;</span> <span class="string">&quot;172.17.0.9:50051&quot;</span> inbound|50051|| 127.0.0.6:42051 172.17.0.9:50051 172.17.0.9:40804 outbound_.50051_._.k8s-combat-service.default.svc.cluster.local default</span><br><span class="line">[2023-10-31T14:52:14.246Z] <span class="string">&quot;POST /helloworld.Greeter/SayHello HTTP/2&quot;</span> 200 - via_upstream - <span class="string">&quot;-&quot;</span> 12 61 58 39 <span class="string">&quot;-&quot;</span> <span class="string">&quot;grpc-go/1.58.3&quot;</span> <span class="string">&quot;6d293d32-af96-9f87-a8e4-6665632f7236&quot;</span> <span class="string">&quot;k8s-combat-service:50051&quot;</span> <span class="string">&quot;172.17.0.9:50051&quot;</span> outbound|50051||k8s-combat-service.default.svc.cluster.local 172.17.0.9:40804 10.101.204.13:50051 172.17.0.9:54012 - default</span><br><span class="line">[2023-10-31T14:52:15.659Z] <span class="string">&quot;POST /helloworld.Greeter/SayHello HTTP/2&quot;</span> 200 - via_upstream - <span class="string">&quot;-&quot;</span> 12 61 35 34 <span class="string">&quot;-&quot;</span> <span class="string">&quot;grpc-go/1.58.3&quot;</span> <span class="string">&quot;ed8ab4f2-384d-98da-81b7-d4466eaf0207&quot;</span> <span class="string">&quot;k8s-combat-service:50051&quot;</span> <span class="string">&quot;172.17.0.10:50051&quot;</span> outbound|50051||k8s-combat-service.default.svc.cluster.local 172.17.0.9:39800 10.101.204.13:50051 172.17.0.9:54012 - default</span><br><span class="line">[2023-10-31T14:52:16.524Z] <span class="string">&quot;POST /helloworld.Greeter/SayHello HTTP/2&quot;</span> 200 - via_upstream - <span class="string">&quot;-&quot;</span> 12 61 28 26 <span class="string">&quot;-&quot;</span> <span class="string">&quot;grpc-go/1.58.3&quot;</span> <span class="string">&quot;67a22028-dfb3-92ca-aa23-573660b30dd4&quot;</span> <span class="string">&quot;k8s-combat-service:50051&quot;</span> <span class="string">&quot;172.17.0.8:50051&quot;</span> outbound|50051||k8s-combat-service.default.svc.cluster.local 172.17.0.9:44580 10.101.204.13:50051 172.17.0.9:54012 - default</span><br><span class="line">[2023-10-31T14:52:16.680Z] <span class="string">&quot;POST /helloworld.Greeter/SayHello HTTP/2&quot;</span> 200 - via_upstream - <span class="string">&quot;-&quot;</span> 12 61 2 2 <span class="string">&quot;-&quot;</span> <span class="string">&quot;grpc-go/1.58.3&quot;</span> <span class="string">&quot;b4761d9f-7e4c-9f2c-b06f-64a028faa5bc&quot;</span> <span class="string">&quot;k8s-combat-service:50051&quot;</span> <span class="string">&quot;172.17.0.10:50051&quot;</span> outbound|50051||k8s-combat-service.default.svc.cluster.local 172.17.0.9:39800 10.101.204.13:50051 172.17.0.9:54012 - default</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æœŸçš„å†…å®¹æ¯”è¾ƒç®€å•ï¼Œä¸»è¦å’Œå®‰è£…é…ç½®ç›¸å…³ï¼Œä¸‹ä¸€æœŸæ›´æ–°å¦‚ä½•é…ç½®å†…éƒ¨æœåŠ¡è°ƒç”¨çš„è¶…æ—¶ã€é™æµç­‰åŠŸèƒ½ã€‚</p><p>å…¶å®ç›®å‰å¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯åè¿ç»´çš„ï¼Œå³ä¾¿æ˜¯åç»­çš„è¶…æ—¶é…ç½®ç­‰åŠŸèƒ½éƒ½åªæ˜¯ç¼–å†™ yaml èµ„æºã€‚</p><p>ä½†åœ¨ç”Ÿäº§ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¼šç»™å¼€å‘è€…æä¾›ä¸€ä¸ªç®¡ç†å°çš„å¯è§†åŒ–é¡µé¢ï¼Œå¯ä¾›ä»–ä»¬è‡ªå·±çµæ´»é…ç½®è¿™äº›åŸæœ¬éœ€è¦åœ¨ <code>yaml</code> ä¸­é…ç½®çš„åŠŸèƒ½ã€‚</p><p><img src="https://s2.loli.net/2023/10/31/B3TiC9rJwPbGVHQ.png" alt="image.png"><br>å…¶å®å„å¤§äº‘å¹³å°å‚å•†éƒ½æœ‰æä¾›ç±»ä¼¼çš„èƒ½åŠ›ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘çš„ EDAS ç­‰ã€‚</p><p>æœ¬æ–‡çš„æ‰€æœ‰æºç åœ¨è¿™é‡Œå¯ä»¥è®¿é—®ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p><p>#Blog #Istio </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/31/QChAqoOVcxbP4tU.png&quot; alt=&quot;istio-01.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;ç»ˆäºè¿›å…¥å¤§å®¶éƒ½æ¯”è¾ƒæ„Ÿå…´è¶£çš„æœåŠ¡ç½‘æ ¼ç³»åˆ—äº†ï¼Œåœ¨å‰é¢å·²ç»è®²è§£äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚ä½•éƒ¨ç½²åº”ç”¨åˆ° &lt;code&gt;kubernetes&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æœåŠ¡ä¹‹é—´å¦‚ä½•è°ƒç”¨&lt;/li&gt;
&lt;li&gt;å¦‚ä½•é€šè¿‡åŸŸåè®¿é—®æˆ‘ä»¬çš„æœåŠ¡&lt;/li&gt;
&lt;li&gt;å¦‚ä½•ä½¿ç”¨ &lt;code&gt;kubernetes&lt;/code&gt; è‡ªå¸¦çš„é…ç½® &lt;code&gt;ConfigMap&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸºæœ¬ä¸Šå·²ç»å¤Ÿæˆ‘ä»¬å¼€å‘ä¸€èˆ¬è§„æ¨¡çš„ web åº”ç”¨äº†ï¼›ä½†åœ¨ä¼ä¸šä¸­å¾€å¾€æœ‰ç€å¤æ‚çš„åº”ç”¨è°ƒç”¨å…³ç³»ï¼Œåº”ç”¨ä¸åº”ç”¨ä¹‹é—´çš„è¯·æ±‚ä¹Ÿéœ€è¦è¿›è¡Œç®¡ç†ã€‚&lt;br&gt;æ¯”å¦‚å¸¸è§çš„é™æµã€é™çº§ã€traceã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;kubernetes&lt;/code&gt; ä¹‹å‰å¾€å¾€éƒ½æ˜¯ç”±å¾®æœåŠ¡æ¡†æ¶æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œæ¯”å¦‚ Dubboã€SpringCloud éƒ½æœ‰å¯¹åº”çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å½“æˆ‘ä»¬ä¸Šäº† &lt;code&gt;kubernetes&lt;/code&gt; ä¹‹åè¿™äº›äº‹æƒ…å°±åº”è¯¥äº¤ç»™ä¸€ä¸ªä¸“é—¨çš„äº‘åŸç”Ÿç»„ä»¶æ¥è§£å†³ï¼Œä¹Ÿå°±æ˜¯æœ¬æ¬¡ä¼šè®²åˆ°çš„ &lt;code&gt;Istio&lt;/code&gt;ï¼Œå®ƒæ˜¯ç›®å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„æœåŠ¡ç½‘æ ¼è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/k8s/"/>
    
    
    <category term="Istio" scheme="http://crossoverjie.top/tags/Istio/"/>
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ä¸‰æœŸ</title>
    <link href="http://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/"/>
    <id>http://crossoverjie.top/2023/10/27/ob/newsletter/Newsletter03-20231027/</id>
    <published>2023-10-27T09:28:25.000Z</published>
    <updated>2023-11-02T10:05:09.441Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/27/pLbBGguZfWicwUj.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li><li><a href="https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/">20231022ï¼šç¬¬äºŒæœŸ</a><span id="more"></span></li></ul><h2 id="Understanding-The-Linux-TTY-Subsystem"><a href="#Understanding-The-Linux-TTY-Subsystem" class="headerlink" title="Understanding The Linux TTY Subsystem"></a>Understanding The Linux TTY Subsystem</h2><p>URL: <a href="https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/">https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/</a><br><img src="https://s2.loli.net/2023/10/25/bnzXueWDiyfLdc4.png"><br>æœ¬æ–‡è®²è§£äº† Linux TTY çš„å†å²æ•…äº‹å’Œæ¥æºã€‚</p><ol><li>TTY æ˜¯ teletype çš„ç®€å†™ï¼Œç”µä¼ æ‰“å°æœºï¼›æœ€æ—©æ˜¯åœ¨äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜å‘æŒ¥é‡è¦ä½œç”¨ã€‚</li><li>60 å¹´ä»£çš„è®¡ç®—æœºä½¿ç”¨äº†teletype ä½œä¸ºè¾“å…¥ç»ˆç«¯ã€‚</li><li>åç»­éšç€æŠ€æœ¯è¿›æ­¥ä½¿ç”¨äº†è½¯ä»¶æ¨¡æ‹Ÿæ›¿ä»£äº†ç‰©ç†çš„ç”µä¼ æ‰“å°æœºã€‚</li><li>TTY æ—©èµ·ä½äº Linux çš„å†…æ ¸ç©ºé—´ï¼Œå¯¼è‡´ç¼ºä¹çµæ´»æ€§ï¼Œåç»­ç§»åŠ¨åˆ°äº†ç”¨æˆ·ç©ºé—´ã€‚</li><li>ä¹‹ååˆå‡ºç°äº† shellï¼Œç”¨æˆ·ä½¿ç”¨ shell ç™»å½•ç³»ç»Ÿæ—¶ä¼šåˆ†é…ä¸€ä¸ª TTY ç»™ shellé•œåƒæ“ä½œã€‚</li><li>TTY ä½œä¸º shell çš„ç¡¬ä»¶è¿è¡Œç¯å¢ƒï¼Œæ­é…åœ¨ä¸€èµ·æä¾›äº†åŸºç¡€çš„ Linux æ“ä½œç¯å¢ƒã€‚</li></ol><h2 id="100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯"><a href="#100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯" class="headerlink" title="100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯"></a>100è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯</h2><p>URL: <a href="https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/">https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/</a><br>æœ¬æ–‡åœ¨ä¹‹å‰ä»‹ç» TTY èƒŒæ™¯çŸ¥è¯†çš„å‰æä¸‹ï¼Œè®²è§£ä½¿ç”¨ 100 è¡Œä»£ç å®ç°ä¸€ä¸ªæ¨¡æ‹Ÿç»ˆç«¯çš„ Appã€‚<br>æœ€ç»ˆä½¿ç”¨æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/10/27/dUYHwo1nufDgli7.png"></p><ol><li>ç¬¬ä¸€æ­¥ä½¿ç”¨äº†  Go  çš„ä¸€ä¸ª GUI åº“ <code>fyne</code> æ¸²æŸ“äº†ä¸€ä¸ªæ™®é€šæ–‡æœ¬æ¡†</li><li>è®²è§£äº†ä¸€ä¸ªç»ˆç«¯å’Œå†…æ ¸é€šè®¯çš„æµç¨‹å›¾<br><img src="https://s2.loli.net/2023/10/27/DP8qJwjEBIcyMFQ.png" alt="image.png"></li><li>PTY master è·å–ç”¨æˆ·è¾“å…¥å‘é€ç»™ PTY slaverï¼Œslave ä¼šæ‰§è¡Œæœ€ç»ˆçš„ shellï¼Œå¹¶å°†æ‰§è¡Œç»“æœè¿”å›åˆ° PTY master</li><li>è¿™é‡Œä½¿ç”¨äº†  Go  çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“å®ç°äº† PTY çš„åŠŸèƒ½<br><img src="https://s2.loli.net/2023/10/27/1LmBXSg6hlNGDkq.png" alt="image.png"></li><li>ä½¿ç”¨ <code>fyne</code> è·å–é”®ç›˜äº‹ä»¶ï¼Œç¼“å­˜ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œç›´åˆ°æ£€æµ‹åˆ°è¾“å…¥äº†å›è½¦é”®ï¼Œæ­¤æ—¶å°†ç¼“å­˜å†…å®¹å‘å¾€ pty</li><li>ä¼˜åŒ–å“åº”ç»“æœï¼Œç›®å‰åªèƒ½è¾“å‡ºæœ€æ–°çš„ä¸€è¡Œå†…å®¹ï¼Œæ‰€ä»¥æ–°å¢ä¸€ä¸ªç¼“å†²åŒºå­˜æ”¾å†å²è¾“å‡ºã€‚<br><img src="https://s2.loli.net/2023/10/27/9fhpFxztEAXjdun.png" alt="image.png"><br>æœ€ç»ˆä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿç»ˆç«¯ä¾¿å®ç°äº†ï¼Œå½“ç„¶åŠŸèƒ½è¿˜å¾ˆç®€å•ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥åœ¨è¿™åŸºç¡€ä¸ŠæŒç»­ä¼˜åŒ–ã€‚</li></ol><h2 id="æ··æ²Œå·¥ç¨‹"><a href="#æ··æ²Œå·¥ç¨‹" class="headerlink" title="æ··æ²Œå·¥ç¨‹"></a>æ··æ²Œå·¥ç¨‹</h2><blockquote><p>æœ€è¿‘åœ¨å¤ç°ä¸€ä¸ªå¯èƒ½çš„ç½‘ç»œé—®é¢˜çš„æ—¶å€™ï¼Œæ¥è§¦åˆ°äº†æ··æ²Œå·¥ç¨‹ï¼Œä»¥ä¸‹æ˜¯æˆ‘å¯¹å®ƒçš„ä¸€äº›ç†è§£</p></blockquote><p>æ··æ²Œå·¥ç¨‹ï¼ˆChaos-Meshï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„æ··æ²Œå¹³å°ï¼Œ<code>æ··æ²Œ</code>è¿™è¯å¯èƒ½ä¸å¥½ç†è§£ï¼Œä¸è¿‡é€šè¿‡ä»–æ‰€æä¾›çš„åŠŸèƒ½å°±çŸ¥é“å…·ä½“æ˜¯å¹²ä»€ä¹ˆçš„äº†ã€‚</p><p>æ ¸å¿ƒåŠŸèƒ½æ˜¯æä¾›äº†ä¸€äº›åˆ—çš„æ•…éšœæ³¨å…¥ï¼Œæ¯”å¦‚ï¼š</p><ul><li>Pod æ•…éšœï¼šé‡å¯ã€OOMç­‰</li><li>ç½‘ç»œæ•…éšœï¼šå»¶è¿Ÿã€ä¸¢åŒ…ã€æ–­ç½‘</li><li>DNS æ•…éšœ</li><li>HTTP æ•…éšœ</li><li>ç”šè‡³è¿˜èƒ½æ¨¡æ‹Ÿ JVM æ•…éšœ<br><img src="https://s2.loli.net/2023/10/27/JcxZdUfARIPDXWh.png" alt="image.png"></li></ul><blockquote><p>è¿™æ˜¯å¯¹ä¸€ä¸ª Pod çš„ http è¯·æ±‚ 80 ç«¯å£è¿›è¡Œä¸­æ–­çš„é…ç½®ã€‚</p></blockquote><p>é€šè¿‡è¿™äº›åŠŸèƒ½å¯ä»¥çœ‹å‡ºå®ƒæ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿæ•…éšœå¹³å°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ƒçš„ç®¡ç†å°è¿›è¡Œä¸°å¯Œçš„æ•…éšœæ¨¡æ‹Ÿï¼Œå¯ä»¥åœ¨å¼€å‘æµ‹è¯•è¿‡ç¨‹ä¸­å¢å¼ºæˆ‘ä»¬ç³»ç»Ÿçš„å¥å£®æ€§ã€‚</p><h2 id="Hacking-Your-iTerm-Boost-your-command-line-productivity-byâ€¦-by-Chandan-Kumar-Better-Programming"><a href="#Hacking-Your-iTerm-Boost-your-command-line-productivity-byâ€¦-by-Chandan-Kumar-Better-Programming" class="headerlink" title="Hacking Your iTerm. Boost your command line productivity byâ€¦ | by Chandan Kumar | Better Programming"></a>Hacking Your iTerm. Boost your command line productivity byâ€¦ | by Chandan Kumar | Better Programming</h2><p>URL: <a href="https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf">https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf</a></p><blockquote><p>ä½œè€…åˆ†äº«äº†å®ƒä½¿ç”¨ç»ˆç«¯çš„ä¸€äº›æŠ€å·§å’Œå·¥å…·</p></blockquote><h3 id="iTerm"><a href="#iTerm" class="headerlink" title="iTerm"></a>iTerm</h3><p>æ¨èä½¿ç”¨ <code>iTerm</code> è¿™ä¸ªå°±ä¸å¤šè¯´äº†</p><h3 id="powerlevel10k"><a href="#powerlevel10k" class="headerlink" title="powerlevel10k"></a>powerlevel10k</h3><p><img src="https://s2.loli.net/2023/10/27/4OKyMHjQwRBT9Ui.png" alt="image.png"></p><p> powerlevel10k æ˜¯ä¸€ä¸ª zsh ä¸»é¢˜ï¼Œæä¾›äº†è®¸å¤šè‡ªå®šä¹‰çš„é€‰é¡¹ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯å®šåˆ¶ã€‚<br><a href="https://github.com/romkatv/powerlevel10k">https://github.com/romkatv/powerlevel10k</a></p><h3 id="Syntax-highlighting"><a href="#Syntax-highlighting" class="headerlink" title="Syntax highlighting"></a>Syntax highlighting</h3><p><img src="https://s2.loli.net/2023/10/27/4rzmkBG3OD1LvXP.png" alt="image.png"><br>è¯­æ³•é«˜äº®å¯ä»¥è®©è‡ªå·±çŸ¥é“è¾“å…¥æ˜¯å¦æ­£ç¡®<br><a href="https://github.com/zsh-users/zsh-syntax-highlighting">https://github.com/zsh-users/zsh-syntax-highlighting</a></p><h3 id="Auto-suggestion"><a href="#Auto-suggestion" class="headerlink" title="Auto-suggestion"></a>Auto-suggestion</h3><p>è‡ªåŠ¨æç¤ºæ’ä»¶ï¼Œå¯ä»¥ç±»ä¼¼äº IDE çš„æ–¹å¼ä½¿ç”¨å‘½ä»¤è¡Œï¼Œè¿™ä¸ªè¿˜è›®å¥½ç”¨çš„ã€‚<br><img src="https://miro.medium.com/v2/resize:fit:4800/0*HbzHqgfrcPT7VvUE.gif"><br><a href="https://github.com/zsh-users/zsh-autosuggestions">https://github.com/zsh-users/zsh-autosuggestions</a></p><h3 id="Autojump"><a href="#Autojump" class="headerlink" title="Autojump"></a>Autojump</h3><p><img src="https://s2.loli.net/2023/10/27/TKcgMWXSmBiD2kj.png" alt="image.png"><br>è‡ªåŠ¨è·³è½¬ï¼Œå¯ä»¥æ›´å¿«çš„è·³è½¬åˆ°æˆ‘ä»¬å°ä½¿ç”¨çš„ç›®å½•ï¼Œæé«˜æ•ˆç‡ã€‚<br><a href="https://github.com/wting/autojump">https://github.com/wting/autojump</a></p><h3 id="iTerm-çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®"><a href="#iTerm-çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®" class="headerlink" title="iTerm çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®"></a>iTerm çš„ä¸€äº›çª—å£å¯¼èˆªå¿«æ·é”®</h3><ul><li>æ–°çª—å£ â€”Â <code>âŒ˜</code>Â +Â <code>T</code></li><li>å…³é—­çª—å£ â€”Â <code>âŒ˜</code>Â +Â <code>W</code>Â </li><li>åˆ‡æ¢ Tab<code>âŒ˜</code>Â +Â <code>Number Key</code>Â â€” (Â <code>âŒ˜2</code>Â åˆ‡æ¢åˆ°ç¬¬äºŒä¸ª Tab)</li><li>å‚ç›´åˆ†å‰²çª—å£ (same profile) â€”Â <code>âŒ˜</code>Â +Â <code>D</code></li><li>æ°´å¹³åˆ†å‰²çª—å£(same profile) â€”Â <code>âŒ˜</code>Â +Â <code>Shift</code>Â +Â <code>D</code>Â </li><li>æ ¹æ®é¡ºåºåˆ‡æ¢çª—å£ â€”Â <code>âŒ˜</code>Â +Â <code>]</code>Â ,Â <code>âŒ˜</code>Â +Â <code>[</code></li><li>ä¸Šä¸€ä¸ª tab<code>âŒ˜</code>+Â <code>&lt;-</code>Â â€” </li><li>ä¸‹ä¸€ä¸ªçª—å£<code>âŒ˜</code>+Â <code>-&gt;</code></li><li>æœ€å¤§åŒ–çª—å£<code>âŒ˜</code>Â +Â <code>Shift</code>Â +Â <code>Enter</code></li></ul><h2 id="å½“æˆ‘ä»¬èŠ-Kubernetes-Operator-æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ-äº‘åŸç”Ÿ-å¾æ–°å¤-InfoQç²¾é€‰æ–‡ç« "><a href="#å½“æˆ‘ä»¬èŠ-Kubernetes-Operator-æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ-äº‘åŸç”Ÿ-å¾æ–°å¤-InfoQç²¾é€‰æ–‡ç« " class="headerlink" title="å½“æˆ‘ä»¬èŠ Kubernetes Operator æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ_äº‘åŸç”Ÿ_å¾æ–°å¤_InfoQç²¾é€‰æ–‡ç« "></a>å½“æˆ‘ä»¬èŠ Kubernetes Operator æ—¶ï¼Œæˆ‘ä»¬åœ¨èŠäº›ä»€ä¹ˆ_äº‘åŸç”Ÿ_å¾æ–°å¤_InfoQç²¾é€‰æ–‡ç« </h2><p>URL: <a href="https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR">https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR</a></p><blockquote><p>ä½œè€…è®²è§£äº† Dockerã€Helmã€Operatorã€kubernetes Controller ä¹‹é—´çš„å…³ç³»ä»¥åŠä¸€äº›æ ¸å¿ƒæ¦‚å¿µã€‚</p></blockquote><ol><li>Dockerçš„æ ¸å¿ƒä»·å€¼æ˜¯æä¾›äº†æ ‡å‡†åŒ–çš„äº¤ä»˜æµç¨‹ï¼Œç°åœ¨å‡ ä¹æ²¡äººå†äº¤ä»˜æºç äº†</li><li>Operator å’Œ Docker ç±»ä¼¼çš„æ˜¯æ ‡å‡†åŒ–äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„äº¤ä»˜æµç¨‹ã€‚</li><li>Helm ä¹Ÿå¯ä»¥åšåˆ†å¸ƒå¼ç³»ç»Ÿäº¤ä»˜ï¼Œä½†ä»–æ›´ä¾§é‡äºåè°ƒå¤šä¸ªèµ„æºç®¡ç†ï¼Œæ¯”å¦‚å¯ä»¥è®© A Pod å¯åŠ¨ä¹‹åå†å¯åŠ¨ B Podã€‚</li><li>ä½† Helm æ— æ³•æ„ŸçŸ¥æ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œæ—¶çŠ¶æ€ï¼Œè€Œ <code>Operator</code> åˆ™å¯ä»¥ï¼Œé€šè¿‡è¿™ä¸ªæ„ŸçŸ¥å¯ä»¥è‡ªåŠ¨å®ç°æ‰©å®¹ã€æ•…éšœæ¢å¤ã€å¼‚å¸¸å¤„ç†ç­‰å·¥ä½œï¼Œåœ¨å®ç°äº† Helm çš„è‡ªåŠ¨åŒ–çš„åŒæ—¶è¿˜å®ç°äº†æ™ºèƒ½åŒ–ã€‚</li><li><code>Operator</code> æ˜¯å¤„äºä¸€ä¸ªç¬¬ä¸‰æ–¹è§†è§’è§‚å¯Ÿæ•´ä¸ªç³»ç»Ÿï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ‹¿åˆ°å…¨å±€çš„ä¿¡æ¯ï¼Œä»è€Œæœ€ç»ˆè¾¾åˆ°å£°æ˜çŠ¶æ€çš„ä¸€ä¸ªç›®çš„ã€‚</li><li><code>Operator</code> å¯ä»¥å½“åšå¦ä¸€ç§ <code>Controller</code>ï¼Œå¯ä»¥ç†è§£ä¸ºç¬¬ä¸‰æ–¹çš„ <code>controller</code>ï¼Œä¸€èˆ¬æ˜¯è¿ç»´æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ã€‚</li><li><code>Operator</code> å¯ä»¥å°†ä»¥å¾€è¿ç»´çš„ç»éªŒæ²‰æ·€ä¸ºä»£ç ï¼Œæ›´åˆ©äºæ¨è¿› Devã€Ops åˆå¹¶ä¸º <code>DevOps</code>ã€‚</li></ol><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/">https://ishuah.com/2021/02/04/understanding-the-linux-tty-subsystem/</a></li><li><a href="https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/">https://ishuah.com/2021/03/10/build-a-terminal-emulator-in-100-lines-of-go/</a></li><li><a href="https://chaos-mesh.org/zh/docs/">https://chaos-mesh.org/zh/docs/</a></li><li><a href="https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf">https://betterprogramming.pub/hacking-your-iterm-5d2bdacdaccf</a></li><li><a href="https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR">https://www.infoq.cn/article/SJMUvMg_0H7BS5d99euR</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/27/pLbBGguZfWicwUj.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/&quot;&gt;20231022ï¼šç¬¬äºŒæœŸ&lt;/a&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬äºŒæœŸ</title>
    <link href="http://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/"/>
    <id>http://crossoverjie.top/2023/10/22/ob/newsletter/Newsletter02-20231022/</id>
    <published>2023-10-22T08:22:13.000Z</published>
    <updated>2023-10-22T11:21:47.713Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/22/1nblhKQu6o4HMjk.png" alt="image.png"></p><p><strong>æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚</strong></p><h2 id="å†å²æ›´æ–°"><a href="#å†å²æ›´æ–°" class="headerlink" title="å†å²æ›´æ–°"></a>å†å²æ›´æ–°</h2><ul><li><a href="https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/">20231013ï¼šç¬¬ä¸€æœŸ</a></li></ul><span id="more"></span><h2 id="Google-Software-Engineer-Interview-Experience-â€”-OfferğŸŒŸğŸŒŸğŸŒŸ"><a href="#Google-Software-Engineer-Interview-Experience-â€”-OfferğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Google Software Engineer Interview Experience â€” OfferğŸŒŸğŸŒŸğŸŒŸ"></a>Google Software Engineer Interview Experience â€” OfferğŸŒŸğŸŒŸğŸŒŸ</h2><blockquote><p>è°·æ­Œè½¯ä»¶å·¥ç¨‹å¸ˆçš„é¢è¯•ç»éªŒã€‚</p></blockquote><p>ä½œè€…èƒŒæ™¯ï¼š2020 å¹´æ¯•ä¸šäº MIT Puneï¼ˆå°åº¦åŸå¸‚ï¼‰ï¼Œå°†è¿‘ 3å¹´çš„å¼€å‘ç»éªŒ<br>åœ¨è¿™æ¬¡æ‹¿åˆ° Google offer ä¹‹å‰å‚ä¸è¿‡3ï½4 æ¬¡ Google é¢è¯•ï¼Œä¸Šä¸€æ¬¡æ˜¯2019 å¹´ã€‚<br>å› ä¸ºæœ‰ä¹‹å‰çš„é¢è¯•ç»éªŒï¼Œæ‰€ä»¥ç›´æ¥è·³è¿‡äº†ç”µè¯é¢è¯•ï¼Œç›´æ¥å‡†å¤‡ç°åœºé¢è¯•ã€‚</p><p>ä½œè€…èŠ±äº†ä¸‰å‘¨æ—¶é—´åšå‡†å¤‡ã€‚</p><h3 id="1st-Leetcode-Medium-Coding-45min"><a href="#1st-Leetcode-Medium-Coding-45min" class="headerlink" title="1st Leetcode Medium Coding(45min)"></a>1st Leetcode Medium Coding(45min)</h3><p>ä¸»é¢˜ï¼š</p><ul><li>æ·±åº¦ä¼˜å…ˆæŸ¥è¯¢</li><li>å¹¿åº¦ä¼˜å…ˆæŸ¥è¯¢</li><li>å“ˆå¸Œè¡¨ç›¸å…³ã€‚<br>ä¸é¢è¯•å®˜äº¤æµä½œè€…çš„æ–¹æ³•ï¼Œæœ€ç»ˆé¡ºåˆ©è¿‡äº†ç¬¬ä¸€è½®ã€‚</li></ul><h3 id="2nd-Leetcode-Medium-Coding-45min"><a href="#2nd-Leetcode-Medium-Coding-45min" class="headerlink" title="2nd Leetcode Medium Coding(45min)"></a>2nd Leetcode Medium Coding(45min)</h3><p>ä¸»é¢˜ï¼š</p><ul><li>æ»‘åŠ¨çª—å£</li><li>å“ˆå¸Œè¡¨</li><li>å­—ç¬¦ä¸²<br>ä½œè€…åˆšå¼€å§‹ç”¨äº†ä¸€ä¸ªæš´åŠ›è§£æ³•ï¼Œç»è¿‡æ€è€ƒåå¾—å‡ºä¸€ä¸ªæœ€ä¼˜è§£ã€‚<br>å…¶ä»–çš„é—®é¢˜éƒ½å¾—å‡ºäº†æ­£ç¡®çš„æ—¶é—´å¤æ‚åº¦ã€‚</li></ul><h3 id="3rd-Leetcode-Hard-Coding-45min"><a href="#3rd-Leetcode-Hard-Coding-45min" class="headerlink" title="3rd Leetcode Hard Coding(45min)"></a>3rd Leetcode Hard Coding(45min)</h3><p>ä¸»é¢˜ï¼š</p><ul><li>å¹¿åº¦ä¼˜å…ˆæŸ¥è¯¢</li><li>å †æ’åºï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰</li><li>çŸ©é˜µ</li><li>æ•°ç»„<br>è¿™è½®é¢è¯•æ¯”è¾ƒæœ‰éš¾åº¦ï¼Œåœ¨é¢è¯•å®˜çš„æé†’ä¸‹å®Œæˆäº†ã€‚</li></ul><h3 id="4th-è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®"><a href="#4th-è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®" class="headerlink" title="4th è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®"></a>4th è°·æ­Œå‘³é¢è¯•ï¼Œé¢†å¯¼è½®</h3><p>è¿™ä¸€è½®å°±æ˜¯ä¸€äº›è¡Œä¸ºé¢è¯•ï¼Œè®¨è®ºäº†ä¸€äº›è¿‡å»çš„ç»å†ï¼Œå’Œå‡è®¾çš„ä¸€äº›æƒ…å†µã€‚<br>ä½œè€…ä½¿ç”¨äº† STAR(Situation, Task, Action, Result) è¿›è¡Œäº†å›ç­”ï¼Œæ•´ä¸ªè¿‡ç¨‹æ¯”è¾ƒé¡ºåˆ©ã€‚</p><p>è¯„è®ºåŒºï¼š</p><ul><li>å¸Œæœ›å¯ä»¥åˆ†äº«ä¸‹è‡ªå·±å‡†å¤‡çš„èµ„æ–™</li><li>æ²¡æœ‰ç³»ç»Ÿè®¾è®¡é¢˜å—ï¼Ÿ</li></ul><blockquote><p>çœ‹æ¥å›½é™…ä¸€çº¿å¤§å‚å¯¹ç®—æ³•çš„è€ƒå¯Ÿå æ¯”ä¹Ÿæ˜¯éå¸¸é«˜çš„ï¼Œä½†ä½œè€…å¯èƒ½ä¹Ÿæœ‰ä¸€äº›è€ƒè™‘æ²¡æœ‰æ”¾å‡ºé¢è¯•çš„å…·ä½“é¢˜ç›®ã€‚</p></blockquote><h2 id="From-JetBrains-to-Vim-A-modern-Vim-configuration-and-plugin-set-by-devsjc-Sep-2023-MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#From-JetBrains-to-Vim-A-modern-Vim-configuration-and-plugin-set-by-devsjc-Sep-2023-MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="From JetBrains to Vim: A modern Vim configuration and plugin set | by devsjc | Sep, 2023 | MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>From JetBrains to Vim: A modern Vim configuration and plugin set | by devsjc | Sep, 2023 | MediumğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h2><p>ä½œè€…ä» JetBrains åˆ‡æ¢åˆ° Vimï¼Œåœ¨ Vim ä¸­ä¸»è¦ä½¿ç”¨åˆ°çš„æ’ä»¶ã€‚<br><img src="https://s2.loli.net/2023/10/20/GsWbix7aUzlMQ6t.png" alt="image.png"><br>ä½œè€…æ˜¯ç”±äº Vim ä½œè€…çš„ç¦»ä¸–æ‰å†³å®šèŠ±æ—¶é—´ç ”ç©¶ä¸‹ Vimï¼Œä»¥ä¸‹æ˜¯ä»–å¸¸ç”¨çš„ä¸€äº›æ’ä»¶ï¼š</p><h3 id="Plugin-kristijanhusak-x2F-vim-packager"><a href="#Plugin-kristijanhusak-x2F-vim-packager" class="headerlink" title="Plugin:Â kristijanhusak&#x2F;vim-packager"></a>Plugin:Â <a href="https://github.com/kristijanhusak/vim-packager"><strong>kristijanhusak&#x2F;vim-packager</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/DsRxePkVrEMUtio.png" alt="image.png"><br>ä»åå­—å¯ä»¥çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†æ’ä»¶ã€‚</p><h3 id="Plugin-junegunn-x2F-fzf-vim"><a href="#Plugin-junegunn-x2F-fzf-vim" class="headerlink" title="Plugin:Â junegunn&#x2F;fzf.vim"></a>Plugin:Â <a href="https://github.com/junegunn/fzf.vim"><strong>junegunn&#x2F;fzf.vim</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/CzrZPsWBORpEiHn.png" alt="image.png"><br>æ¨¡ç³Šæœç´¢æ’ä»¶ã€‚</p><h3 id="Plugin-yegappan-x2F-lsp"><a href="#Plugin-yegappan-x2F-lsp" class="headerlink" title="Plugin:Â yegappan&#x2F;lsp"></a>Plugin:Â <a href="https://github.com/yegappan/lsp"><strong>yegappan&#x2F;lsp</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/fPC9sqQNbXjcuwY.png" alt="image.png"></p><p>è¿™ä¸ªæ’ä»¶åŠŸèƒ½å¼ºå¤§ï¼š</p><ul><li>è‡ªåŠ¨è¡¥å…¨</li><li>å˜é‡å£°æ˜è·³è½¬</li><li>é‡å‘½åå˜é‡<blockquote><p>å…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è§ IDE ä¸€äº›åŸºæœ¬åŠŸèƒ½</p></blockquote></li></ul><h3 id="Plugin-dense-analysis-x2F-ale"><a href="#Plugin-dense-analysis-x2F-ale" class="headerlink" title="Plugin:Â dense-analysis&#x2F;ale"></a>Plugin:Â <a href="https://github.com/dense-analysis/ale"><strong>dense-analysis&#x2F;ale</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/cdJfVMWm8vA2wqO.png" alt="image.png"><br>é”™è¯¯æç¤ºæ’ä»¶ï¼Œå¯ä»¥é«˜äº®å¹¶ä¿®å¤é”™è¯¯ã€‚</p><h3 id="Plugin-907th-x2F-vim-auto-save"><a href="#Plugin-907th-x2F-vim-auto-save" class="headerlink" title="Plugin:Â 907th&#x2F;vim-auto-save"></a>Plugin:Â <a href="https://github.com/907th/vim-auto-save"><strong>907th&#x2F;vim-auto-save</strong></a></h3><p>è‡ªåŠ¨ä¿å­˜æ’ä»¶ï¼Œä½œè€…ä» IDE åˆ‡æ¢åˆ° Vim åä¸èƒ½è‡ªåŠ¨ä¿å­˜ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥å¼¥è¡¥è¿™ä¸ªç¼ºå¤±ã€‚</p><h3 id="Plugin-jiangmiao-x2F-auto-pairs"><a href="#Plugin-jiangmiao-x2F-auto-pairs" class="headerlink" title="Plugin:Â jiangmiao&#x2F;auto-pairs"></a>Plugin:Â <a href="https://github.com/jiangmiao/auto-pairs"><strong>jiangmiao&#x2F;auto-pairs</strong></a></h3><p>è‡ªåŠ¨æ·»åŠ ã€åˆ é™¤æˆå¯¹çš„æ‹¬å·ï¼Œå¼•å·ç­‰ç¬¦å·ã€‚</p><h3 id="Plugin-airblade-x2F-vim-gitgutter"><a href="#Plugin-airblade-x2F-vim-gitgutter" class="headerlink" title="Plugin:Â airblade&#x2F;vim-gitgutter"></a>Plugin:Â <a href="https://github.com/airblade/vim-gitgutter"><strong>airblade&#x2F;vim-gitgutter</strong></a></h3><p>ç”¨äºæ˜¾ç¤º git é¢æ¿çš„æ’ä»¶ï¼Œæ¯”è¾ƒæäº¤è®°å½•ã€å¯¹æ¯”ç­‰ã€‚</p><h3 id="Plugin-bluz71-x2F-vim-mistfly-statusline"><a href="#Plugin-bluz71-x2F-vim-mistfly-statusline" class="headerlink" title="Plugin:Â bluz71&#x2F;vim-mistfly-statusline"></a>Plugin:Â <a href="https://github.com/bluz71/vim-mistfly-statusline"><strong>bluz71&#x2F;vim-mistfly-statusline</strong></a></h3><p><img src="https://s2.loli.net/2023/10/20/qX2cEQ3rDCu5sZP.png" alt="image.png"><br>ç”¨äºæ˜¾ç¤ºä¸€äº›çŠ¶æ€ï¼Œæ¯”å¦‚ vim æ¨¡å¼ã€git ç­‰ã€‚</p><p>å¯ä»¥å‘ç°å¤§éƒ¨åˆ†çš„æ’ä»¶åŠŸèƒ½ IDE éƒ½æ˜¯è‡ªå¸¦çš„ï¼Œè€Œä½œè€…ä¹‹æ‰€ä»¥é€‰æ‹© Vim ä¹Ÿæ˜¯å› ä¸ºä»–æ›´åŠ çš„è½»é‡ï¼Œç›¸å¯¹äº <code>Jetbrains</code> å®¶çš„ IDE æ¥è¯´ã€‚</p><h2 id="Building-your-brand-How-I-reached-10k-subscribers-in-6-months"><a href="#Building-your-brand-How-I-reached-10k-subscribers-in-6-months" class="headerlink" title="Building your brand: How I reached 10k subscribers in 6 months"></a>Building your brand: How I reached 10k subscribers in 6 months</h2><blockquote><p>ä½œè€…è®²è¿°äº†ä»–ç”¨äº†åŠå¹´æ—¶é—´åšçš„Â newsletterÂ ä¸ªäººå“ç‰Œè·å¾—äº† 1wä¸ªè®¢é˜…çš„ç»å†ï¼š</p></blockquote><p><img src="https://s2.loli.net/2023/10/22/CaZWOu6iMrxb8PE.png" alt="image.png"></p><p>1.Â åšè¿™ä¸ªè¿‡ç¨‹ä¸­æ”¶è·äº†ä¸¤ä¸ªå¥½å¤„ï¼Œå¦‚æœä½ æƒ³æŒæ¡æŸæ ·æŠ€èƒ½ï¼Œé‚£æ•™ä¼šåˆ«äººæ˜¯æœ€å¿«çš„ï¼Œä¹Ÿå°±æ˜¯åšåˆ†äº«</p><p>2.Â å¯ä»¥å’Œæœ‰è®¸å¤šä¸åŒè§‚ç‚¹çš„äººäº¤æµï¼Œè·å¾—ä¸åŒçš„æ”¶è·</p><p>3.Â å’Œè®¸å¤šäººä¿æŒäº†è¿æ¥ï¼Œè·å¾—èµåŠ©ã€é¢è¯•æœºä¼š</p><p>4.Â å…¬å¼€å­¦ä¹ ï¼šå…¬å¼€åˆ†äº«ä½ å­¦åˆ°çš„å’Œä½ ç›´åˆ°çš„ä¸œè¥¿ã€‚</p><p>5.Â é•¿æœŸåšæŒåˆé€‚ä½ çš„æ–¹æ³•å»å­¦ä¹ æ²‰æ·€ä¸€ä»¶äº‹æƒ…</p><h2 id="How-companies-Ship-code-to-ProductionğŸŒŸğŸŒŸğŸŒŸ"><a href="#How-companies-Ship-code-to-ProductionğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="HowÂ companiesÂ ShipÂ codeÂ toÂ ProductionğŸŒŸğŸŒŸğŸŒŸ"></a>HowÂ companiesÂ ShipÂ codeÂ toÂ ProductionğŸŒŸğŸŒŸğŸŒŸ</h2><p><img src="https://s2.loli.net/2023/10/22/vonCAaQWdqgS6HU.png" alt="image.png"></p><blockquote><p>ä¼ä¸šå¦‚ä½•ä»£ç äº¤ä»˜åˆ°ç”Ÿäº§ç¯å¢ƒ:</p></blockquote><p>1.Â äº§å“è´Ÿè´£äººåˆ›å»ºéœ€æ±‚</p><p>2.Â å’Œç ”å‘äººå‘˜è®¨è®ºéœ€æ±‚</p><p>3.Â å¼€å‘éœ€æ±‚</p><p>4.Â æ„å»ºæ‰“åŒ…ï¼Œéœ€è¦é€šè¿‡å•å…ƒæµ‹è¯•ã€è¦†ç›–ç‡ã€SonarÂ æ‰«æç­‰æµç¨‹</p><p>5.Â æ„å»ºæˆåŠŸåå‘å¸ƒåˆ°å¼€å‘ç¯å¢ƒ</p><p>6.Â å¯èƒ½ä¼šæœ‰å¤šä¸ªå›¢é˜Ÿåœ¨å¼€å‘ä¸åŒçš„åˆ†æ”¯ï¼Œæ‰€ä»¥éœ€è¦å°†ä»£ç éƒ¨ç½²åˆ° QA1ã€QA2</p><p>7.Â æµ‹è¯•å›¢é˜Ÿä¼šåˆ°ä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•ç¯å¢ƒæ‰§è¡Œå›å½’æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•</p><p>8.Â æµ‹è¯•é€šè¿‡åä¼šéƒ¨ç½²åˆ°Â UATÂ ç¯å¢ƒ</p><p>9.Â UATÂ æµ‹è¯•é€šè¿‡åï¼Œå°†ä¼šæŒ‰ç…§å‘å¸ƒè®¡åˆ’å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ</p><p>10.Â SREÂ å›¢é˜Ÿè´Ÿè´£å¯¹ç”Ÿäº§ç¯å¢ƒè¿›è¡Œè¿ç»´å’Œç›‘æ§</p><blockquote><p>åœ¨å›½å†…è¿™ç®—æ˜¯ä¸€ä¸ªä¸­å¤§å‹å›¢é˜Ÿçš„äº¤ä»˜æµç¨‹äº†ï¼Œéœ€è¦å°å‹å›¢é˜Ÿå¯èƒ½å¹¶ä¸ä¼šæœ‰å•æµ‹ã€ä»£ç æ‰«æã€å¤šä¸ªæµ‹è¯•ç¯å¢ƒã€SRE ç­‰æµç¨‹ã€‚</p></blockquote><h2 id="Understanding-Database-TypesğŸŒŸğŸŒŸğŸŒŸ"><a href="#Understanding-Database-TypesğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Understanding Database TypesğŸŒŸğŸŒŸğŸŒŸ"></a>Understanding Database TypesğŸŒŸğŸŒŸğŸŒŸ</h2><p>ä»‹ç»äº†ç›®å‰æµè¡Œçš„æ•°æ®åº“ç±»å‹ï¼š<br><img src="https://s2.loli.net/2023/10/22/lQJDZ9KAIeNuqiW.png" alt="image.png"></p><ul><li>å…³ç³»å‹æ•°æ®åº“<ul><li>MySQL</li><li>Oracle</li><li>SQL Server</li><li>PG</li></ul></li><li>æ—¶åºæ•°æ®åº“<ul><li>InfluxDB</li><li>TimeScale DB</li><li>Graphite</li><li>Prometheus</li></ul></li><li>NoSQL æ•°æ®åº“<ul><li>MongoDB</li><li>Cassandra</li><li>Redis</li><li>Couchbase<br><img src="https://s2.loli.net/2023/10/22/6vgpl1Y9G8EqsF2.png" alt="image.png"></li></ul></li></ul><blockquote><p>æ˜¯ä¸€ç¯‡ç§‘æ™®æ–‡ç« ï¼Œä½†å› ä¸ºæ˜¯ä¸€ä¸ªä»˜è´¹è®¢é˜…çš„ Newsletter æˆ‘ä¹Ÿå°±æ²¡æœ‰çœ‹è¿‡ï¼Œå¯¹è¿™äº›æ•°æ®åº“ç±»å‹çš„æ•´ç†è¿˜æ˜¯æ¯”è¾ƒå®Œå–„çš„ã€‚</p></blockquote><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://medium.com/@lahotipranali/google-software-engineer-interview-experience-offer-25e4eb6a0a5c">https://medium.com/@lahotipranali/google-software-engineer-interview-experience-offer-25e4eb6a0a5c</a></li><li><a href="https://medium.com/@devsjc/from-jetbrains-to-vim-a-modern-vim-configuration-and-plugin-set-d58472a7d53d">https://medium.com/@devsjc/from-jetbrains-to-vim-a-modern-vim-configuration-and-plugin-set-d58472a7d53d</a></li><li><a href="https://careercutler.substack.com/p/building-your-brand-how-i-reached">https://careercutler.substack.com/p/building-your-brand-how-i-reached</a></li><li><a href="https://blog.bytebytego.com/p/ep81-how-companies-ship-code-to-production?utm_source=post-email-title&amp;publication_id=817132&amp;post_id=137944253&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email">https://blog.bytebytego.com/p/ep81-how-companies-ship-code-to-production?utm_source=post-email-title&amp;publication_id=817132&amp;post_id=137944253&amp;utm_campaign=email-post-title&amp;isFreemail=true&amp;r=4buvd&amp;utm_medium=email</a></li><li><a href="https://blog.bytebytego.com/p/understanding-database-types">https://blog.bytebytego.com/p/understanding-database-types</a></li></ul><p>#Newletters </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/22/1nblhKQu6o4HMjk.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯é˜…è¯»å‘¨åˆŠï¼Œæ¯å‘¨æ›´æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†å²æ›´æ–°&quot;&gt;&lt;a href=&quot;#å†å²æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;å†å²æ›´æ–°&quot;&gt;&lt;/a&gt;å†å²æ›´æ–°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/&quot;&gt;20231013ï¼šç¬¬ä¸€æœŸ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
    <category term="Tech" scheme="http://crossoverjie.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¼˜é›…é‡å¯ kubernetes çš„ Pod</title>
    <link href="http://crossoverjie.top/2023/10/19/ob/k8s-restart-pod/"/>
    <id>http://crossoverjie.top/2023/10/19/ob/k8s-restart-pod/</id>
    <published>2023-10-19T02:58:44.000Z</published>
    <updated>2023-10-19T10:34:44.918Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/19/IW8kEDatFlMhz1O.png" alt="restart pod.png"></p><p>æœ€è¿‘åœ¨å‡çº§æœåŠ¡ç½‘æ ¼ Istioï¼Œå‡çº§åæœ‰ä¸ªå¿…è¦çš„æµç¨‹å°±æ˜¯éœ€è¦é‡å¯æ•°æ®é¢çš„æ‰€æœ‰çš„ Podï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡çš„ Podï¼Œè¿™æ ·æ‰èƒ½å°†è¿™äº› Pod çš„ sidecar æ›´æ–°ä¸ºæ–°ç‰ˆæœ¬ã€‚</p><span id="more"></span><h1 id="æ–¹æ¡ˆ-1"><a href="#æ–¹æ¡ˆ-1" class="headerlink" title="æ–¹æ¡ˆ 1"></a>æ–¹æ¡ˆ 1</h1><p>å› ä¸ºæˆ‘ä»¬ä¸åŒç¯å¢ƒçš„ Pod æ•°ä¸å°‘ï¼Œä¸å¯èƒ½æ‰‹åŠ¨ä¸€ä¸ªä¸ªé‡å¯ï¼›ä¹‹å‰ä¹Ÿåšè¿‡ç±»ä¼¼çš„æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete --all pods --namespace=dev</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥ä¸€é”®å°† dev è¿™ä¸ªå‘½åç©ºé—´ä¸‹çš„ Pod åˆ æ‰ï¼Œkubernetes ä¹‹åä¼šè‡ªåŠ¨å°†è¿™äº› Pod é‡å¯ï¼Œä¿è¯å’Œåº”ç”¨çš„å¯ç”¨æ€§ã€‚</p><p>ä½†è¿™æœ‰ä¸ªå¤§é—®é¢˜æ˜¯å¯¹ <code>kubernetes</code> çš„è°ƒåº¦å‹åŠ›è¾ƒå¤§ï¼Œä¸€èˆ¬ä¸€ä¸ª <code>namespace</code> ä¸‹å°‘è¯´ä¹Ÿæ˜¯å‡ ç™¾ä¸ª Podï¼Œå…¨éƒ¨éœ€è¦é‡æ–°è°ƒåº¦å¯åŠ¨å¯¹ <code>kubernetes</code> çš„è´Ÿè½½ä¼šå¾ˆé«˜ï¼Œç¨æœ‰ä¸æ…å°±ä¼šæœ‰ä¸¥é‡çš„åæœã€‚</p><p>æ‰€ä»¥å½“æ—¶æˆ‘çš„ç¬¬ä¸€ç‰ˆæ–¹æ¡ˆæ˜¯éå†æ‰€æœ‰çš„  deploymentï¼Œåˆ é™¤ä¸€ä¸ª Pod åä¼‘çœ  5 åˆ†é’Ÿå†åˆ ä¸‹ä¸€ä¸ªï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">deployments, err := clientSet.AppsV1().Deployments(ns).List(ctx, metav1.ListOptions&#123;&#125;)  </span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> err  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, deployment := <span class="keyword">range</span> deployments.Items &#123;</span><br><span class="line">podList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;  </span><br><span class="line">    LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),  </span><br><span class="line">&#125;)</span><br><span class="line">err = clientSet.CoreV1().Pods(pod.Namespace).Delete(ctx, pod.Name, metav1.DeleteOptions&#123;&#125;)  </span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">    <span class="keyword">return</span> err  </span><br><span class="line">&#125;  </span><br><span class="line">log.Printf(<span class="string">&quot;    Pod %s rebuild success.\n&quot;</span>, pod.Name)</span><br><span class="line">time.Sleep(time.Minute * <span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h2><p>è¿™ä¸ªæ–¹æ¡ˆç¡®å®æ˜¯ç®€å•ç²—æš´ï¼Œä½†åœ¨æµ‹è¯•çš„æ—¶å€™å°±å‘ç°äº†é—®é¢˜ã€‚</p><p>å½“æŸäº›ä¸šåŠ¡åªæœ‰ä¸€ä¸ª Pod çš„æ—¶å€™ï¼Œç›´æ¥åˆ æ‰ä¹‹åè¿™ä¸ªä¸šåŠ¡å°±æŒ‚äº†ï¼Œæ²¡æœ‰å¤šä½™çš„å‰¯æœ¬å¯ä»¥æä¾›æœåŠ¡äº†ã€‚</p><p><strong>è¿™è‚¯å®šæ˜¯ä¸èƒ½æ¥å—çš„ã€‚</strong></p><p>ç”šè‡³è¿˜æœ‰åˆ é™¤ä¹‹åæ²¡æœ‰é‡å¯æˆåŠŸçš„ï¼š</p><ul><li>é•¿æœŸæ²¡æœ‰é‡å¯å¯¼è‡´é•œåƒç¼“å­˜æ²¡æœ‰äº†ï¼Œç”šè‡³é•œåƒå·²ç»è¢«åˆ é™¤äº†ï¼Œè¿™ç§æ ¹æœ¬å°±æ²¡æ³•å¯åŠ¨æˆåŠŸã€‚</li><li>ä¹Ÿæœ‰ä¸€äº› Pod æœ‰ <code>Init-Container</code> ä¼šåœ¨å¯åŠ¨çš„æ—¶å€™åšä¸€äº›äº‹æƒ…ï¼Œå¦‚æœå¤±è´¥äº†ä¹Ÿæ˜¯æ²¡æ³•å¯åŠ¨æˆåŠŸçš„ã€‚<br>æ€»ä¹‹å°±æ˜¯æœ‰å¤šç§æƒ…å†µå¯¼è‡´ä¸€ä¸ª Pod æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œè¿™åœ¨çº¿ä¸Šå°±ä¼šç›´æ¥å¯¼è‡´ç”Ÿäº§é—®é¢˜ï¼Œæ‰€ä»¥æ–¹æ¡ˆä¸€è‚¯å®šæ˜¯ä¸èƒ½ç”¨çš„ã€‚</li></ul><h1 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h1><p>ä¸ºæ­¤æˆ‘å°±å‡†å¤‡äº†æ–¹æ¡ˆäºŒï¼š</p><p><img src="https://s2.loli.net/2023/10/19/reKiba4XtWSnP6z.png" alt="image.png"></p><ul><li>å…ˆå°†å‰¯æœ¬æ•°+1ï¼Œè¿™æ˜¯ä¼šæ–°å¢ä¸€ä¸ª Podï¼Œä¹Ÿä¼šä½¿ç”¨æœ€æ–°çš„ sidecar é•œåƒã€‚</li><li>ç­‰å¾…æ–°å»ºçš„ Pod é‡å¯æˆåŠŸã€‚</li><li>é‡å¯æˆåŠŸååˆ é™¤åŸæœ‰çš„ Podã€‚</li><li>å†å°†å‰¯æœ¬æ•°è¿˜åŸä¸ºä¹‹å‰çš„æ•°é‡ã€‚</li></ul><p>è¿™æ ·å¯ä»¥å°†åŸæœ‰çš„ Pod å¹³æ»‘çš„é‡å¯ï¼ŒåŒæ—¶å¦‚æœæ–°çš„ Pod å¯åŠ¨å¤±è´¥ä¹Ÿä¸ä¼šç»§ç»­é‡å¯å…¶ä»– <code>Deployment</code> çš„ Podï¼Œè€çš„ Pod ä¹Ÿæ˜¯ä¸€ç›´ä¿ç•™çš„ï¼Œå¯¹æœåŠ¡æœ¬èº«æ²¡æœ‰ä»»ä½•å½±å“ã€‚</p><h2 id="å­˜åœ¨çš„é—®é¢˜-1"><a href="#å­˜åœ¨çš„é—®é¢˜-1" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h2><p>çœ‹èµ·æ¥æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ï¼Œå°±æ˜¯å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæµç¨‹å¾ˆç¹çï¼Œè¿™é‡Œæˆ‘è´´äº†éƒ¨åˆ†æ ¸å¿ƒä»£ç ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RebuildDeploymentV2</span><span class="params">(ctx context.Context, clientSet kubernetes.Interface, ns <span class="type">string</span>)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">deployments, err := clientSet.AppsV1().Deployments(ns).List(ctx, metav1.ListOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, deployment := <span class="keyword">range</span> deployments.Items &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Print each Deployment</span></span><br><span class="line">log.Printf(<span class="string">&quot;Ready deployment: %s\n&quot;</span>, deployment.Name)</span><br><span class="line"></span><br><span class="line">originPodList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;</span><br><span class="line">LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Check if there are any Pods</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(originPodList.Items) == <span class="number">0</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;No pod in %s\n&quot;</span>, deployment.Name)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Skip Pods that have already been upgraded</span></span><br><span class="line">updateSkip := <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> _, container := <span class="keyword">range</span> pod.Spec.Containers &#123;</span><br><span class="line"><span class="keyword">if</span> container.Name == <span class="string">&quot;istio-proxy&quot;</span> &amp;&amp; container.Image == <span class="string">&quot;proxyv2:1.x.x&quot;</span> &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;  Pod: %s Container: %s has already upgrade, skip\n&quot;</span>, pod.Name, container.Name)</span><br><span class="line">updateSkip = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> updateSkip &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Scale the Deployment, create a new pod.</span></span><br><span class="line">scale, err := clientSet.AppsV1().Deployments(ns).GetScale(ctx, deployment.Name, metav1.GetOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">scale.Spec.Replicas = scale.Spec.Replicas + <span class="number">1</span></span><br><span class="line">_, err = clientSet.AppsV1().Deployments(ns).UpdateScale(ctx, deployment.Name, scale, metav1.UpdateOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait for pods to be scaled</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">podList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;</span><br><span class="line">LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(podList.Items) != <span class="type">int</span>(scale.Spec.Replicas) &#123;</span><br><span class="line">time.Sleep(time.Second * <span class="number">10</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Wait for pods to be running</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">podList, err := clientSet.CoreV1().Pods(ns).List(ctx, metav1.ListOptions&#123;</span><br><span class="line">LabelSelector: fmt.Sprintf(<span class="string">&quot;app=%s&quot;</span>, deployment.Name),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">isPending := <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> _, item := <span class="keyword">range</span> podList.Items &#123;</span><br><span class="line"><span class="keyword">if</span> item.Status.Phase != v1.PodRunning &#123;</span><br><span class="line">log.Printf(<span class="string">&quot;Deployment: %s Pod: %s Not Running Status: %s\n&quot;</span>, deployment.Name, item.Name, item.Status.Phase)</span><br><span class="line">isPending = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> isPending == <span class="literal">true</span> &#123;</span><br><span class="line">time.Sleep(time.Second * <span class="number">10</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remove origin pod</span></span><br><span class="line"><span class="keyword">for</span> _, pod := <span class="keyword">range</span> originPodList.Items &#123;</span><br><span class="line">err = clientSet.CoreV1().Pods(ns).Delete(context.Background(), pod.Name, metav1.DeleteOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">&quot;Remove origin %s success.\n&quot;</span>, pod.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Recover scale</span></span><br><span class="line">newScale, err := clientSet.AppsV1().Deployments(ns).GetScale(ctx, deployment.Name, metav1.GetOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">newScale.Spec.Replicas = newScale.Spec.Replicas - <span class="number">1</span></span><br><span class="line">newScale.ResourceVersion = <span class="string">&quot;&quot;</span></span><br><span class="line">newScale.UID = <span class="string">&quot;&quot;</span></span><br><span class="line">_, err = clientSet.AppsV1().Deployments(ns).UpdateScale(ctx, deployment.Name, newScale, metav1.UpdateOptions&#123;&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">&quot;Depoloyment %s rebuild success.\n&quot;</span>, deployment.Name)</span><br><span class="line">log.Println()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹çš„å‡ºæ¥ä»£ç æ˜¯æ¯”è¾ƒå¤šçš„ã€‚</p><h1 id="æœ€ç»ˆæ–¹æ¡ˆ"><a href="#æœ€ç»ˆæ–¹æ¡ˆ" class="headerlink" title="æœ€ç»ˆæ–¹æ¡ˆ"></a>æœ€ç»ˆæ–¹æ¡ˆ</h1><p>æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•å‘¢ï¼Œå½“æˆ‘æŠŠä¸Šè¿°çš„æ–¹æ¡ˆå’Œé¢†å¯¼æ²Ÿé€šåä»–äººéƒ½å‚»äº†ï¼Œè¿™ä¹Ÿå¤ªå¤æ‚äº†ï¼š<code>kubectl</code> ä¸æ˜¯æœ‰ä¸€ä¸ªç›´æ¥æ»šåŠ¨é‡å¯çš„å‘½ä»¤å—ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â¯ k rollout -h</span><br><span class="line">Manage the rollout of one or many resources.</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  <span class="built_in">history</span>       View rollout <span class="built_in">history</span></span><br><span class="line">  pause         Mark the provided resource as paused</span><br><span class="line">  restart       Restart a resource</span><br><span class="line">  resume        Resume a paused resource</span><br><span class="line">  status        Show the status of the rollout</span><br><span class="line">  undo          Undo a previous rollout</span><br></pre></td></tr></table></figure><p><code>kubectl rollout restart deployment/abc</code><br>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥å°† <code>abc</code> è¿™ä¸ª <code>deployment</code> è¿›è¡Œæ»šåŠ¨æ›´æ–°ï¼Œè¿™ä¸ªæ›´æ–°æ“ä½œå‘ç”Ÿåœ¨  kubernetes çš„æœåŠ¡ç«¯ï¼Œæ‰§è¡Œçš„æ­¥éª¤å’Œæ–¹æ¡ˆäºŒå·®ä¸å¤šï¼Œåªæ˜¯ kubernetes å®ç°çš„æ¯”æˆ‘çš„æ›´åŠ ä¸¥è°¨ã€‚</p><p>åæ¥æˆ‘åœ¨æŸ¥çœ‹ <code>Istio</code> çš„å®˜æ–¹å‡çº§æŒ‡å—ä¸­ä¹Ÿæ˜¯æåˆ°äº†è¿™ä¸ªå‘½ä»¤ï¼š<br><img src="https://s2.loli.net/2023/10/19/IjckD8GK2pzXfyn.png" alt="image.png"></p><blockquote><p>æ‰€ä»¥è¿˜æ˜¯å¾—å¥½å¥½çœ‹å®˜æ–¹æ–‡æ¡£</p></blockquote><h2 id="æ•´åˆ-kubectl"><a href="#æ•´åˆ-kubectl" class="headerlink" title="æ•´åˆ kubectl"></a>æ•´åˆ kubectl</h2><p>æ—¢ç„¶æœ‰ç°æˆçš„äº†ï¼Œé‚£å°±å°†è¿™ä¸ªå‘½ä»¤æ•´åˆåˆ°æˆ‘çš„è„šæœ¬é‡Œå³å¯ï¼Œå†éå† namespace ä¸‹çš„ deployment çš„æ—¶å€™å¾ªç¯è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p><p>ä½†è¿™ä¸ª <code>rollout</code> å‘½ä»¤åœ¨ <code>kubernetes</code> çš„ <code>client-go</code> çš„ <code>SDK</code> ä¸­æ˜¯æ²¡æœ‰è¿™ä¸ª API çš„ã€‚</p><p>æ‰€ä»¥æˆ‘åªæœ‰å‚è€ƒ kubectl çš„æºç ï¼Œå°†è¿™éƒ¨åˆ†åŠŸèƒ½å¤åˆ¶è¿‡æ¥ï¼›ä¸è¿‡å¥½åœ¨å¯ä»¥ç›´æ¥ä¾èµ– kubect åˆ°æˆ‘çš„é¡¹ç›®é‡Œã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">require (  </span><br><span class="line">    k8s.io/api v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/apimachinery v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/cli-runtime v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/client-<span class="keyword">go</span> v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">    k8s.io/klog/v2 v2<span class="number">.100</span><span class="number">.1</span>  </span><br><span class="line">    k8s.io/kubectl v0<span class="number">.28</span><span class="number">.2</span>  </span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/19/7beuKWadX8M9y5c.png" alt="image.png"></p><p>æºç é‡Œä½¿ç”¨åˆ°çš„ <code>RestartOptions</code> ç»“æ„ä½“æ˜¯å…¬å…±è®¿é—®çš„ï¼Œæ‰€ä»¥æˆ‘å°±å‚è€ƒå®ƒæºç é­”æ”¹äº†ä¸€ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestRollOutRestart</span><span class="params">(t *testing.T)</span></span> &#123;  </span><br><span class="line">    kubeConfigFlags := defaultConfigFlags()  </span><br><span class="line">    streams, _, _, _ := genericiooptions.NewTestIOStreams()  </span><br><span class="line">    ns := <span class="string">&quot;dev&quot;</span>  </span><br><span class="line">    kubeConfigFlags.Namespace = &amp;ns  </span><br><span class="line">    matchVersionKubeConfigFlags := cmdutil.NewMatchVersionFlags(kubeConfigFlags)  </span><br><span class="line">    f := cmdutil.NewFactory(matchVersionKubeConfigFlags)  </span><br><span class="line">    deploymentName := <span class="string">&quot;deployment/abc&quot;</span>  </span><br><span class="line">    r := &amp;rollout.RestartOptions&#123;  </span><br><span class="line">       PrintFlags: genericclioptions.NewPrintFlags(<span class="string">&quot;restarted&quot;</span>).WithTypeSetter(scheme.Scheme),  </span><br><span class="line">       Resources:  []<span class="type">string</span>&#123;deploymentName&#125;,  </span><br><span class="line">       IOStreams:  streams,  </span><br><span class="line">    &#125;  </span><br><span class="line">    err := r.Complete(f, <span class="literal">nil</span>, []<span class="type">string</span>&#123;deploymentName&#125;)  </span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">       log.Fatal(err)  </span><br><span class="line">    &#125;  </span><br><span class="line">    err = r.RunRestart()  </span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">       log.Fatal(err)  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆåœ¨å‡ æ¬¡ debug åç»ˆäºå¯ä»¥è¿è¡Œäº†ï¼Œåªéœ€è¦å°†è¿™éƒ¨åˆ†é€»è¾‘ç§»åŠ¨åˆ°å¾ªç¯é‡Œï¼ŒåŠ ä¸Š <code>sleep</code> ä¾¿å¯ä»¥æœ‰è§„å¾‹çš„é‡å¯ Pod äº†ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://istio.io/latest/docs/setup/upgrade/canary/#data-plane">https://istio.io/latest/docs/setup/upgrade/canary/#data-plane</a></li><li><a href="https://github.com/kubernetes/kubectl/blob/master/pkg/cmd/rollout/rollout_restart.go">https://github.com/kubernetes/kubectl/blob/master/pkg/cmd/rollout/rollout_restart.go</a></li></ul><p>#Blog #K8s </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/19/IW8kEDatFlMhz1O.png&quot; alt=&quot;restart pod.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘åœ¨å‡çº§æœåŠ¡ç½‘æ ¼ Istioï¼Œå‡çº§åæœ‰ä¸ªå¿…è¦çš„æµç¨‹å°±æ˜¯éœ€è¦é‡å¯æ•°æ®é¢çš„æ‰€æœ‰çš„ Podï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡çš„ Podï¼Œè¿™æ ·æ‰èƒ½å°†è¿™äº› Pod çš„ sidecar æ›´æ–°ä¸ºæ–°ç‰ˆæœ¬ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/OB/k8s/"/>
    
    
    <category term="client-go" scheme="http://crossoverjie.top/tags/client-go/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ kubernetes ç¯å¢ƒä¸­å®ç° gRPC è´Ÿè½½å‡è¡¡</title>
    <link href="http://crossoverjie.top/2023/10/16/ob/k8s-grpc-lb/"/>
    <id>http://crossoverjie.top/2023/10/16/ob/k8s-grpc-lb/</id>
    <published>2023-10-16T07:55:50.000Z</published>
    <updated>2023-10-17T06:01:48.484Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/16/wJiKvMAaWUyOCpX.png" alt="Istio-grpc-lb.png"></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰æ®µæ—¶é—´å†™è¿‡ä¸€ç¯‡ <code>gRPC</code> çš„å…¥é—¨æ–‡ç« ï¼Œåœ¨æœ€åè¿˜ç•™äº†ä¸€ä¸ªå‘æ²¡æœ‰å¡«ï¼š<br><img src="https://s2.loli.net/2023/10/16/41I2RZXeQanFgdB.png" alt="image.png"><br>ä¹Ÿå°±æ˜¯ <code>gRPC</code> çš„è´Ÿè½½å‡è¡¡é—®é¢˜ï¼Œå› ä¸ºå½“æ—¶çš„ä¸šåŠ¡è¯·æ±‚é‡ä¸ç®—å¤§ï¼Œå†åŠ ä¸Šå…¬å¸æ²¡æœ‰å¯¹ Istio è¿™ç±»æœåŠ¡ç½‘æ ¼æ¯”è¾ƒç†Ÿæ‚‰çš„å¤§ç‰›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå°±ä¸€ç›´æ‹–ç€æ²¡æœ‰è§£å†³ï¼Œä¾ç„¶åªæ˜¯ä½¿ç”¨äº† kubernetes çš„ service è¿›è¡Œè´Ÿè½½ï¼Œå¥½åœ¨ä¹Ÿæ²¡æœ‰å‡ºä»€ä¹ˆé—®é¢˜ã€‚</p><span id="more"></span><p>ç”±äºç°åœ¨æ¢äº†å…¬å¸åä¹Ÿéœ€è¦ç»´æŠ¤å…¬å¸çš„æœåŠ¡ç½‘æ ¼æœåŠ¡ï¼Œç»“åˆå…¬å¸å†…éƒ¨å¯¹ Istio çš„ä½¿ç”¨ç°åœ¨ç»ˆäºä¸å†åœç•™åœ¨ç†è®ºé˜¶æ®µäº†ã€‚</p><p>æ‰€ä»¥ä¹Ÿç»ˆæœ‰æœºä¼šå°†è¿™ä¸ªå‘å¡«äº†ã€‚</p><h1 id="gRPC-è´Ÿè½½å‡è¡¡"><a href="#gRPC-è´Ÿè½½å‡è¡¡" class="headerlink" title="gRPC è´Ÿè½½å‡è¡¡"></a>gRPC è´Ÿè½½å‡è¡¡</h1><h2 id="è´Ÿè½½ä¸å‡è¡¡"><a href="#è´Ÿè½½ä¸å‡è¡¡" class="headerlink" title="è´Ÿè½½ä¸å‡è¡¡"></a>è´Ÿè½½ä¸å‡è¡¡</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å…ˆæ¥å›é¡¾ä¸‹èƒŒæ™¯ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ <code>gRPC</code> è´Ÿè½½ä¸å‡è¡¡çš„é—®é¢˜ã€‚<br>ç”±äº <code>gRPC</code> æ˜¯åŸºäº HTTP&#x2F;2 åè®®çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¼šä¿æŒé•¿é“¾æ¥ï¼Œä¸€æ—¦é“¾æ¥å»ºç«‹æˆåŠŸåå°±ä¼šä¸€ç›´ä½¿ç”¨è¿™ä¸ªè¿æ¥å¤„ç†åç»­çš„è¯·æ±‚ã€‚</p><p><img src="https://s2.loli.net/2023/10/16/NxJqPM49vAgEBtX.png" alt="image.png"></p><p>é™¤éæˆ‘ä»¬æ¯æ¬¡è¯·æ±‚ä¹‹åéƒ½æ–°å»ºä¸€ä¸ªè¿æ¥ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚</p><p>æ‰€ä»¥è¦è§£å†³ <code>gRPC</code> çš„è´Ÿè½½å‡è¡¡é€šå¸¸æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p><ul><li>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡</li><li>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡<br>åœ¨ <code>gRPC</code> è¿™ä¸ªåœºæ™¯æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ä¸æ˜¯å¾ˆåˆé€‚ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½éœ€è¦ç»è¿‡ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œè¿™æ ·å®ƒå°±æˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆï¼Œæ‰€ä»¥æ›´æ¨èä½¿ç”¨å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€‚</li></ul><p>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç›®å‰ä¹Ÿæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œæœ€å¸¸è§ä¹Ÿæ˜¯ä¼ ç»Ÿæ–¹æ¡ˆã€‚<br><img src="https://s2.loli.net/2023/10/16/x31gJLImRlfXa9i.png" alt="image.png"><br>è¿™é‡Œä»¥ Dubbo çš„è°ƒç”¨è¿‡ç¨‹ä¸ºä¾‹ï¼Œè°ƒç”¨çš„æ—¶å€™éœ€è¦ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–åˆ°æä¾›è€…çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯æœ¬åœ°æ ¹æ®ä¸€å®šçš„è´Ÿè½½å‡è¡¡ç®—æ³•å¾—å‡ºä¸€ä¸ªèŠ‚ç‚¹ç„¶åå‘èµ·è¯·æ±‚ã€‚</p><p>æ¢æˆ <code>gRPC</code> ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œè¿™é‡Œä»¥ <code>go-zero</code> è´Ÿè½½å‡è¡¡çš„åŸç†ä¸ºä¾‹ï¼š<br><img src="https://s2.loli.net/2023/10/16/PLnyAKsmDZQRoeh.png" alt="image.png"></p><p>gRPC å®˜æ–¹åº“ä¹Ÿæä¾›äº†å¯¹åº”çš„è´Ÿè½½å‡è¡¡æ¥å£ï¼Œä½†æˆ‘ä»¬ä¾ç„¶éœ€è¦è‡ªå·±ç»´æŠ¤æœåŠ¡åˆ—è¡¨ç„¶ååœ¨å®¢æˆ·ç«¯ç¼–å†™è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œè¿™é‡Œæœ‰ä¸ªå®˜æ–¹ demo:</p><p><a href="https://github.com/grpc/grpc-go/blob/87eb5b7502493f758e76c4d09430c0049a81a557/examples/features/load_balancing/client/main.go">https://github.com/grpc/grpc-go/blob/87eb5b7502493f758e76c4d09430c0049a81a557/examples/features/load_balancing&#x2F;client&#x2F;main.go</a></p><p>ä½†åˆ‡æ¢åˆ° kubernetes ç¯å¢ƒä¸­æ—¶å†ä½¿ç”¨ä»¥ä¸Šçš„æ–¹å¼å°±ä¸å¤Ÿä¼˜é›…äº†ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ kubernetes çš„ç›®çš„å°±æ˜¯ä¸æƒ³å†é¢å¤–çš„ç»´æŠ¤è¿™ä¸ªå®¢æˆ·ç«¯åŒ…ï¼Œè¿™éƒ¨åˆ†èƒ½åŠ›æœ€å¥½æ˜¯ç”± kubernetes è‡ªå·±å°±èƒ½æä¾›ã€‚</p><p>ä½†é—æ†¾çš„æ˜¯ kubernetes æä¾›çš„ service åªæ˜¯åŸºäº L4 çš„è´Ÿè½½ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½åªèƒ½å°†è¯·æ±‚å‘å¾€åŒä¸€ä¸ª Provider èŠ‚ç‚¹ã€‚</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>è¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ªå°ç¨‹åºæ¥éªŒè¯è´Ÿè½½ä¸å‡è¡¡çš„ç¤ºä¾‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create gRPC server</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">   <span class="keyword">var</span> port = <span class="string">&quot;:50051&quot;</span>  </span><br><span class="line">   lis, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, port)  </span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">      log.Fatalf(<span class="string">&quot;failed to listen: %v&quot;</span>, err)  </span><br><span class="line">   &#125;  </span><br><span class="line">   s := grpc.NewServer()  </span><br><span class="line">   pb.RegisterGreeterServer(s, &amp;server&#123;&#125;)  </span><br><span class="line">   <span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;  </span><br><span class="line">      log.Fatalf(<span class="string">&quot;failed to serve: %v&quot;</span>, err)  </span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">      log.Printf(<span class="string">&quot;served on %s \n&quot;</span>, port)  </span><br><span class="line">   &#125;  </span><br><span class="line">&#125;()</span><br><span class="line"><span class="comment">// server is used to implement helloworld.GreeterServer.  </span></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span> &#123;  </span><br><span class="line">   pb.UnimplementedGreeterServer  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// SayHello implements helloworld.GreeterServer  </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span></span> SayHello(ctx context.Context, in *pb.HelloRequest) (*pb.HelloReply, <span class="type">error</span>) &#123;  </span><br><span class="line">   log.Printf(<span class="string">&quot;Received: %v&quot;</span>, in.GetName())  </span><br><span class="line">   name, _ := os.Hostname()  </span><br><span class="line">   <span class="comment">// Return hostname of Server</span></span><br><span class="line">   <span class="keyword">return</span> &amp;pb.HelloReply&#123;Message: fmt.Sprintf(<span class="string">&quot;hostname:%s, in:%s&quot;</span>, name, in.Name)&#125;, <span class="literal">nil</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åŒä¸€ä¸ª gRPC è¿æ¥å‘èµ·ä¸€æ¬¡ gRPC è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›å®ƒçš„ <code>hostname</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (  </span><br><span class="line">   once sync.Once  </span><br><span class="line">   c    pb.GreeterClient  </span><br><span class="line">)  </span><br><span class="line">http.HandleFunc(<span class="string">&quot;/grpc_client&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;  </span><br><span class="line">   once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;  </span><br><span class="line">      service := r.URL.Query().Get(<span class="string">&quot;name&quot;</span>)  </span><br><span class="line">      conn, err := grpc.Dial(fmt.Sprintf(<span class="string">&quot;%s:50051&quot;</span>, service), grpc.WithInsecure(), grpc.WithBlock())  </span><br><span class="line">      <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">         log.Fatalf(<span class="string">&quot;did not connect: %v&quot;</span>, err)  </span><br><span class="line">      &#125;  </span><br><span class="line">      c = pb.NewGreeterClient(conn)  </span><br><span class="line">   &#125;)  </span><br><span class="line">  </span><br><span class="line">   <span class="comment">// Contact the server and print out its response.  </span></span><br><span class="line">   name := <span class="string">&quot;world&quot;</span>  </span><br><span class="line">   ctx, cancel := context.WithTimeout(context.Background(), time.Second)  </span><br><span class="line">   <span class="keyword">defer</span> cancel()  </span><br><span class="line">   g, err := c.SayHello(ctx, &amp;pb.HelloRequest&#123;Name: name&#125;)  </span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;  </span><br><span class="line">      log.Fatalf(<span class="string">&quot;could not greet: %v&quot;</span>, err)  </span><br><span class="line">   &#125;  </span><br><span class="line">   fmt.Fprint(w, fmt.Sprintf(<span class="string">&quot;Greeting: %s&quot;</span>, g.GetMessage()))  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª service ç”¨äºç»™ <code>gRPC</code> æä¾›åŸŸåï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span>  </span><br><span class="line"><span class="attr">metadata:</span>  </span><br><span class="line">  <span class="attr">name:</span> <span class="string">native-tools-2</span></span><br><span class="line"><span class="attr">spec:</span>  </span><br><span class="line">  <span class="attr">selector:</span>  </span><br><span class="line">    <span class="attr">app:</span> <span class="string">native-tools-2</span></span><br><span class="line">  <span class="attr">ports:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span>  </span><br><span class="line">      <span class="attr">port:</span> <span class="number">8081</span>  </span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8081</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grpc</span>  </span><br><span class="line">      <span class="attr">port:</span> <span class="number">50051</span>  </span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">50051</span></span><br></pre></td></tr></table></figure><p>åŒæ—¶å°†æˆ‘ä»¬çš„ gRPC server éƒ¨ç½²ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œå†éƒ¨ç½²äº†ä¸€ä¸ªå®¢æˆ·ç«¯èŠ‚ç‚¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â¯ k get pod</span><br><span class="line">NAME                                READY   STATUS    RESTARTS</span><br><span class="line">native-tools-2-d6c454689-52wgd      1/1     Running   0              </span><br><span class="line">native-tools-2-d6c454689-67rx4      1/1     Running   0              </span><br><span class="line">native-tools-2-d6c454689-zpwxt      1/1     Running   0              </span><br><span class="line">native-tools-65c5bd87fc-2fsmc       2/2     Running   0             </span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿›å…¥å®¢æˆ·ç«¯èŠ‚ç‚¹æ‰§è¡Œå¤šæ¬¡ grpc è¯·æ±‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">k <span class="built_in">exec</span> -it native-tools-65c5bd87fc-2fsmc bash</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line">Greeting: hostname:native-tools-2-d6c454689-zpwxt, <span class="keyword">in</span>:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br></pre></td></tr></table></figure><p>ä¼šå‘ç°æ¯æ¬¡è¯·æ±‚çš„éƒ½æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ <code>native-tools-2-d6c454689-zpwxt</code>ï¼Œè¿™ä¹Ÿå°±è¯æ˜äº†åœ¨ kubernetes ä¸­ç›´æ¥ä½¿ç”¨ gRPC è´Ÿè½½æ˜¯ä¸å‡è¡¡çš„ï¼Œä¸€æ—¦è¿æ¥å»ºç«‹åå°±åªèƒ½å°†è¯·æ±‚å‘å¾€é‚£ä¸ªèŠ‚ç‚¹ã€‚</p><h2 id="ä½¿ç”¨-Istio"><a href="#ä½¿ç”¨-Istio" class="headerlink" title="ä½¿ç”¨ Istio"></a>ä½¿ç”¨ Istio</h2><p>Istio å¯ä»¥æ‹¿æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¢åˆ°ä¸€ä¸ªæ³¨å…¥äº† Istio çš„ namespace ä¸‹è¿˜æ˜¯åŒæ ·çš„ ä»£ç ï¼ŒåŒæ ·çš„ service èµ„æºè¿›è¡Œæµ‹è¯•ã€‚</p><blockquote><p>å…³äºå¼€å¯ namespace çš„ Istio æ³¨å…¥ä¼šåœ¨åç»­æ›´æ–°ï¼Œç°åœ¨æ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š<br><a href="https://istio.io/latest/docs/setup/additional-setup/sidecar-injection/">https://istio.io/latest/docs/setup/additional-setup/sidecar-injection/</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-xprjz, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-xprjz, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-xprjz, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-5m7dl, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-nz8h5, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br><span class="line"></span><br><span class="line">Greeting: hostname:native-tools-2-5fbf46cf54-nz8h5, in:worldistio-proxy@n:/$ curl http://127.0.0.1:8081/grpc_client?name=native-tools-2</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°åŒæ ·çš„è¯·æ±‚å·²ç»è¢«è´Ÿè½½åˆ°äº†å¤šä¸ª server åç«¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸å†å•ç‹¬ç»´æŠ¤ä¸€ä¸ªå®¢æˆ·ç«¯ SDK çš„æƒ…å†µä¸‹å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚</p><h2 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>å…¶å®æœ¬è´¨ä¸Š Istio ä¹Ÿæ˜¯å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„ä¸€ç§å®ç°ã€‚<br><img src="https://s2.loli.net/2023/10/16/XOU1TGtvm7PeJ8o.png" alt="image.png"><br>ä»¥ Istio çš„æ¶æ„å›¾ä¸ºä¾‹ï¼š</p><ul><li>æ¯ä¸€ä¸ª Pod ä¸‹ä¼šæ–°å¢ä¸€ä¸ª <code>Proxy</code> çš„ <code>container</code>ï¼Œæ‰€æœ‰çš„æµé‡å…¥å£å’Œå‡ºå£éƒ½ä¼šç»è¿‡å®ƒã€‚</li><li>å®ƒä¼šä»æ§åˆ¶å¹³é¢ <code>Istiod</code> ä¸­æ‹¿åˆ°æœåŠ¡çš„æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ <code>kubernetes</code> ä¸­çš„ serviceã€‚</li><li>å‘ç”Ÿè¯·æ±‚æ—¶ç”± proxy å®¹å™¨ä¸­çš„ <code>Envoy</code> è¿›è¡Œæœ€ç»ˆçš„è´Ÿè½½è¯·æ±‚ã€‚</li></ul><p>å¯ä»¥åœ¨ä½¿ç”¨äº† Istio çš„ Pod ä¸­æŸ¥çœ‹åˆ°å…·ä½“çš„å®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ k get pod native-tools-2-5fbf46cf54-5m7dl -n istio-test-2 -o json | jq <span class="string">&#x27;.spec.containers[].name&#x27;</span></span><br><span class="line"><span class="string">&quot;istio-proxy&quot;</span></span><br><span class="line"><span class="string">&quot;native-tools-2&quot;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°è¿™é‡Œå­˜åœ¨ä¸€ä¸ª <code>istio-proxy</code> çš„å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ <code>sidecar</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠåŸæœ¬çš„ SDK é‡Œçš„åŠŸèƒ½å…¨éƒ¨äº¤ç»™ Istio å»å¤„ç†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å½“ç„¶ Istio çš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ç»Ÿä¸€ç½‘å…³ï¼Œå¤„ç†ä¸œè¥¿ã€å—åŒ—å‘æµé‡ã€‚</li><li>ç°åº¦å‘å¸ƒ</li><li>æµé‡æ§åˆ¶</li><li>æ¥å£ç²’åº¦çš„è¶…æ—¶é…ç½®</li><li>è‡ªåŠ¨é‡è¯•ç­‰</li></ul><p>è¿™æ¬¡åªæ˜¯ä¸€ä¸ªå¼€èƒƒèœï¼Œæ›´å¤šå…³äº <code>Istio</code> çš„å†…å®¹ä¼šåœ¨åç»­æ›´æ–°ï¼Œæ¯”å¦‚ä¼šä»å¦‚ä½•åœ¨ <code>kubernetes</code> é›†ç¾¤ä¸­å®‰è£… <code>Istio</code> è®²èµ·ï¼Œå¸¦å¤§å®¶ä¸€æ­¥æ­¥ä½¿ç”¨å¥½ <code>Istio</code>ã€‚</p><p>æœ¬æ–‡ç›¸å…³æºç ï¼š<br><a href="https://github.com/crossoverJie/k8s-combat">https://github.com/crossoverJie/k8s-combat</a></p><p><sub>å‚è€ƒé“¾æ¥ï¼š</sub></p><ul><li><a href="https://istio.io/latest/docs/setup/getting-started/">https://istio.io/latest/docs/setup/getting-started/</a></li><li><a href="https://segmentfault.com/a/1190000042295402">https://segmentfault.com/a/1190000042295402</a></li><li><a href="https://go-zero.dev/docs/tutorials/service/governance/lb">https://go-zero.dev/docs/tutorials/service/governance/lb</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/16/wJiKvMAaWUyOCpX.png&quot; alt=&quot;Istio-grpc-lb.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å‰æ®µæ—¶é—´å†™è¿‡ä¸€ç¯‡ &lt;code&gt;gRPC&lt;/code&gt; çš„å…¥é—¨æ–‡ç« ï¼Œåœ¨æœ€åè¿˜ç•™äº†ä¸€ä¸ªå‘æ²¡æœ‰å¡«ï¼š&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/16/41I2RZXeQanFgdB.png&quot; alt=&quot;image.png&quot;&gt;&lt;br&gt;ä¹Ÿå°±æ˜¯ &lt;code&gt;gRPC&lt;/code&gt; çš„è´Ÿè½½å‡è¡¡é—®é¢˜ï¼Œå› ä¸ºå½“æ—¶çš„ä¸šåŠ¡è¯·æ±‚é‡ä¸ç®—å¤§ï¼Œå†åŠ ä¸Šå…¬å¸æ²¡æœ‰å¯¹ Istio è¿™ç±»æœåŠ¡ç½‘æ ¼æ¯”è¾ƒç†Ÿæ‚‰çš„å¤§ç‰›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå°±ä¸€ç›´æ‹–ç€æ²¡æœ‰è§£å†³ï¼Œä¾ç„¶åªæ˜¯ä½¿ç”¨äº† kubernetes çš„ service è¿›è¡Œè´Ÿè½½ï¼Œå¥½åœ¨ä¹Ÿæ²¡æœ‰å‡ºä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="k8s" scheme="http://crossoverjie.top/categories/OB/k8s/"/>
    
    
    <category term="gRPC" scheme="http://crossoverjie.top/tags/gRPC/"/>
    
  </entry>
  
  <entry>
    <title>æŠ€æœ¯é˜…è¯»å‘¨åˆŠç¬¬ä¸€æœŸ</title>
    <link href="http://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/"/>
    <id>http://crossoverjie.top/2023/10/13/ob/newsletter/Newsletter01-20231013/</id>
    <published>2023-10-13T08:22:13.000Z</published>
    <updated>2023-10-18T02:54:40.821Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/13/qHMR6zDI529ZsEf.png" alt="Newsletter01.png"></p><p>æˆ‘è‡ªå·±å¹³æ—¶æœ‰æ¯å¤©é˜…è¯»æ–‡ç« çš„ä¹ æƒ¯ï¼Œä¹Ÿä¼šå°†è¿™äº›æ–‡ç« ä¿å­˜èµ·æ¥å¹¶åšä¸€äº›è®°å½•ï¼Œä»Šå¤©åœ¨çœ‹é˜®ä¸€å³°çš„ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠæ—¶çªç„¶æƒ³åˆ°æˆ‘ä¹Ÿå¯ä»¥å°†è¿™äº›çœ‹è¿‡çš„è§‰å¾—ä¸é”™çš„å†…å®¹åˆ†äº«å‡ºæ¥ã€‚<br><img src="https://s2.loli.net/2023/10/13/TaQZ2MyX4xEIedR.png" alt="image.png"></p><p>é¡ºä¾¿ä¹Ÿå¯ä»¥è®©å¤§ä¼™å‚ä¸ç•™ä¸‹è‡ªå·±è§‰å¾—ä¸é”™çš„å†…å®¹ï¼Œäº’ç›¸å­¦ä¹ ã€‚</p><span id="more"></span><p>ä»¥ä¸‹ä¾¿æ˜¯ç¬¬ä¸€æœŸçš„å†…å®¹ï¼š</p><h1 id="Istio-ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ-ğŸŒŸğŸŒŸğŸŒŸ"><a href="#Istio-ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ-ğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Istio ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ ğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://jimmysong.io/blog/demystifying-the-load-balancing-in-istio/">Istio ä¸­çš„è´Ÿè½½å‡è¡¡è¯¦è§£åŠå¤šé›†ç¾¤è·¯ç”±å®è·µ</a> ğŸŒŸğŸŒŸğŸŒŸ</h1><p>1.Â ä»‹ç»äº†å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡ç«¯è´Ÿè½½å‡è¡¡çš„ç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯ã€‚<br>2.Â å¼•ç”³å‡ºÂ IstioÂ ä½¿ç”¨Â EnvoyÂ åšå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„æ–¹æ¡ˆã€‚<br>3.Â ä»‹ç»Â IstioÂ æ”¯æŒçš„ä¸€äº›è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚<br>4.Â å¦‚ä½•ä¸ºå…·ä½“çš„æœåŠ¡é…ç½®è´Ÿè½½å‡è¡¡ï¼Œä»¥åŠå¦‚ä½•ç¼–å†™ <code>DestinationRule</code>Â <code>å’ŒVirtualService</code></p><h1 id="ç†è§£-gRPC-åè®®ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#ç†è§£-gRPC-åè®®ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="ç†è§£ gRPC åè®®ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://taoshu.in/grpc.html">ç†è§£ gRPC åè®®</a>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><p>1.Â é¦–å…ˆæ˜¯ä»‹ç»äº†Â JSONÂ ç¼–ç çš„ç¼ºç‚¹ï¼Œå¯è¯»æ€§é«˜ï¼Œä½†æ€§èƒ½å·®ã€‚<br>2.Â PBÂ æ€§èƒ½å¥½ï¼Œä½†å¯è¯»æ€§å·®ï¼ŒåŒæ—¶è¿˜éœ€è¦é…å¥—å·¥å…·ï¼Œæ¯”å¦‚Â .protoÂ æ ¼å¼Â IDLÂ æ–‡ä»¶æ¥åšé¢å¤–çš„æ¥å£æè¿°ã€‚<br>3.Â æ¥å£è¯·æ±‚æ˜¯åº•å±‚ä¾ç„¶æ˜¯Â httpÂ åè®®ï¼Œä¸è¿‡æ˜¯ http&#x2F;2Â åè®®ï¼Œä½†æ˜¯è¯·æ±‚çš„æ˜ å°„æ˜¯ç›´æ¥ä½¿ç”¨Â .protoÂ æ–‡ä»¶çš„æè¿°ã€‚<br>4.Â æ¶ˆæ¯æ ¼å¼æè¿°äº†æ¶ˆæ¯ä½“å‰æœ‰äº”ä¸ªå­—èŠ‚ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚æè¿°äº†æ˜¯å¦å‹ç¼©ï¼Œåç»­å››ä¸ªå­—èŠ‚æè¿°äº†æ¶ˆæ¯å¤§å°ã€‚<br>5.Â å› ä¸ºæ˜¯Â streamÂ åè®®çš„å…³ç³»ï¼Œæ‰åŠ äº†è¿™äº”ä¸ªå­—èŠ‚ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯åŒä¸€ä¸ªè¿æ¥ï¼Œä¸ºäº†è¦åŒºåˆ†ä¸åŒçš„è¯·æ±‚å°±éœ€è¦åœ¨è¿™äº”ä¸ªå­—èŠ‚æ¥åŒºåˆ†äº†ã€‚</p><h1 id="Protocol-Buffers-ç¼–ç ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#Protocol-Buffers-ç¼–ç ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="Protocol BuffersÂ ç¼–ç ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://taoshu.in/pb-encoding.html">Protocol BuffersÂ ç¼–ç </a>ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><blockquote><p>é…åˆä¸Šä¸€ç¯‡ä¸€èµ·é˜…è¯»æ›´åŠ </p></blockquote><p>è¯¦ç»†è®²è§£äº†Â PBÂ ç¼–ç çš„åŸç†ã€‚<br>1.Â å®šé•¿æ•°æ®éƒ½æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯è§£å†³å˜é•¿å­—ç¬¦ä¸²çš„é—®é¢˜ã€‚<br>2.Â ä»¥Â <code>websocket</code>Â ä¸ºä¾‹ï¼Œ<code>websocket</code>Â çš„æ˜¯ä¸‰æŒ¡å˜é€Ÿï¼Œè€ŒÂ PBÂ å¼•å…¥äº†Â â€¨VarIntsÂ å®ç°äº†æ— çº§å˜é€Ÿï¼Œ<strong>ä½†å‰ææ˜¯å­—æ®µä¸èƒ½å¤ªå¤š</strong>ã€‚<br>3.Â ä½¿ç”¨äº†Â TagÂ ä»£æ›¿äº†å­—æ®µåï¼Œä½†åå¤„å°±æ˜¯è§£ç å¿…é¡»éœ€è¦Â PBÂ æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯éœ€è¦é€šè¿‡Â PBÂ æ–‡ä»¶ç”Ÿæˆç›®æ ‡è¯­è¨€ã€‚<br>4.Â åŒæ—¶Â TagÂ ä¹Ÿä¸èƒ½æ›´æ”¹ï¼Œæ›´æ”¹åè§£ç ç«¯å¾—åŒæ­¥æ›´æ–°ã€‚</p><h1 id="The-top-7-software-engineering-workflow-tips-I-wish-I-knew-earlier-ğŸ§°-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#The-top-7-software-engineering-workflow-tips-I-wish-I-knew-earlier-ğŸ§°-ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="The top 7 software engineering workflow tips I wish I knew earlier ğŸ§° ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a>The top 7 software engineering workflow tips I wish I knew earlier ğŸ§° ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><blockquote><p>ä½œè€…ä½¿ç”¨å¤šå¹´çš„æé«˜å·¥ä½œæ•ˆç‡çš„ä¸ƒä¸ªä¹ æƒ¯<br>1.Â GitÂ ç›¸å…³ï¼Œåˆ«åï¼Œæˆ‘è§‰å¾—å¯¹æˆ‘æ¥è¯´æ˜¯è‡ªåŠ¨è¡¥å…¨+å†å²è®°å½•æ›´å¥½ç”¨<br>2.Â ç¼–ç ç›¸å…³ï¼Œåˆ«ç›´æ¥ä½¿ç”¨æŸ¥æ‰¾ï¼Œå¯ä»¥å¤šä½¿ç”¨Â IDEÂ å¿«æ·é”®+AI ç¼–ç¨‹<br>3.Â è®°å½•å­¦åˆ°çš„çŸ¥è¯†ï¼Œæ¯”å¦‚ Notionï¼Œç°åœ¨æˆ‘ä½¿ç”¨Â Obsidian<br>4.Â ä½¿ç”¨Â Todo è®°å½•è‡ªå·±çš„çµæ„Ÿï¼Œè„‘å­ä¸æ˜¯æ‹¿æ¥å­˜å‚¨è¿™äº›ä¸œè¥¿çš„ï¼Œæ˜¯æ‹¿æ¥åšåˆ›é€ åŠ›ç›¸å…³çš„äº‹æƒ…ï¼ˆè¿™ä¸ªæˆ‘ä¹Ÿæ˜¯ä½¿ç”¨çš„ Obsidian æ’ä»¶ Memosï¼‰ã€‚<br>5.Â å¯è§†åŒ–æ²Ÿé€šï¼Œæ¯”å¦‚ä½¿ç”¨æˆªå›¾ Appï¼Œå†™æ–‡æ¡£ç­‰ã€‚<br>6.Â ä½¿ç”¨å¯†ç  Appï¼Œæ¯”å¦‚Â 1Password<br>7.Â ä½¿ç”¨çª—å£ç®¡ç† App</p></blockquote><h1 id="concï¼šGo-è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"><a href="#concï¼šGo-è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ" class="headerlink" title="concï¼šGo è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ"></a><a href="https://github.com/sourcegraph/conc">conc</a>ï¼šGo è¯­è¨€çš„å¹¶å‘å·¥å…·åº“ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</h1><blockquote><p>Better structured concurrency for go</p></blockquote><p>è¿™æ˜¯é¡¹ç›®çš„ä»‹ç»ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°è£…äº†ä¸€äº›ä½¿ç”¨  goroutine çš„å¸¸ç”¨æ“ä½œï¼š</p><ul><li>ä½¿ç”¨ <code>conc.WaitGroup</code> æ›¿ä»£æ ‡å‡†çš„ <code>sync.WaitGroup</code>ï¼Œå¹¶æä¾›äº†å®‰å…¨è¿è¡Œçš„ç‰¹æ€§ï¼Œä¸ç”¨æ‹…å¿ƒ panicã€‚</li><li>ä½¿ç”¨ <code>pool.ResultPool</code> å¯ä»¥æ‹¿åˆ°æ‰§è¡Œçš„ç»“æœï¼Œ<code>Javaer</code> æ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†ã€‚</li><li><code>iter.Map/iter.ForEach</code> å¯ä»¥ç›´æ¥å¹¶å‘ Map æˆ–è€…æ˜¯è¿­ä»£ sliceã€‚</li></ul><p><img src="https://s2.loli.net/2023/10/13/iwhN8qW5MmpXfQV.png" alt="image.png"><br>è¿™é‡Œä¸¾äº†ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å†™å‡ºä¸€ä¸ªå®‰å…¨çš„ <code>goroutine</code> ç¨‹åºï¼Œå¤§æ¦‚éœ€è¦å†™å·¦è¾¹é‚£ä¹ˆå¤šçš„ä»£ç ï¼Œè€Œä½¿ç”¨ <code>conc</code> ä¼šç®€å•å¾ˆå¤šï¼Œä¹Ÿæ›´åŠ æ˜“è¯»ã€‚</p><p>å…¶å®ä»è¿™é‡Œå°±ä¸éš¾çœ‹å‡ºï¼Œ<code>conc</code> åªæ˜¯å°†è¿™äº›ä»£ç å°è£…å¥½äº†ï¼Œæ„Ÿå…´è¶£çš„ä¹Ÿå¯ä»¥çœ‹çœ‹æºç ï¼Œä»£ç ä¸å¤šï¼Œå¾ˆå¿«å°±å¯ä»¥çœ‹å®Œã€‚</p><blockquote><p>ä»¥ä¸Šå†…å®¹å’Œè¯„åˆ†çº¯ä¸»è§‚å‚è€ƒï¼Œå‡æ²¡æœ‰ä½¿ç”¨ç±»ä¼¼äº ChatGPT è¿™ç±» AI å·¥å…·è¿›è¡Œæ€»ç»“ï¼Œç»å¯¹æ˜¯ä¼ ç»Ÿäººè‚‰é˜…è¯»å½’çº³ï¼ŒåŒ å¿ƒå·¥è‰ºã€‚</p><p>ä¸Šæ¦œæ–‡ç« éƒ½å¾ˆä¸é”™ï¼Œæ¨èå¤§å®¶å»é˜…è¯»åŸæ–‡ã€‚</p></blockquote><p>æ–‡ç« é“¾æ¥ï¼š</p><ul><li><a href="https://jimmysong.io/blog/demystifying-the-load-balancing-in-istio/">https://jimmysong.io/blog/demystifying-the-load-balancing-in-istio/</a></li><li><a href="https://github.com/sourcegraph/conc">https://github.com/sourcegraph/conc</a></li><li><a href="https://taoshu.in/pb-encoding.html">https://taoshu.in/pb-encoding.html</a></li><li><a href="https://taoshu.in/grpc.html">https://taoshu.in/grpc.html</a></li><li><a href="https://careercutler.substack.com/p/the-top-7-software-engineering-workflow?ref=dailydev">https://careercutler.substack.com/p/the-top-7-software-engineering-workflow?ref=dailydev</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/13/qHMR6zDI529ZsEf.png&quot; alt=&quot;Newsletter01.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘è‡ªå·±å¹³æ—¶æœ‰æ¯å¤©é˜…è¯»æ–‡ç« çš„ä¹ æƒ¯ï¼Œä¹Ÿä¼šå°†è¿™äº›æ–‡ç« ä¿å­˜èµ·æ¥å¹¶åšä¸€äº›è®°å½•ï¼Œä»Šå¤©åœ¨çœ‹é˜®ä¸€å³°çš„ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠæ—¶çªç„¶æƒ³åˆ°æˆ‘ä¹Ÿå¯ä»¥å°†è¿™äº›çœ‹è¿‡çš„è§‰å¾—ä¸é”™çš„å†…å®¹åˆ†äº«å‡ºæ¥ã€‚&lt;br&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/13/TaQZ2MyX4xEIedR.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;é¡ºä¾¿ä¹Ÿå¯ä»¥è®©å¤§ä¼™å‚ä¸ç•™ä¸‹è‡ªå·±è§‰å¾—ä¸é”™çš„å†…å®¹ï¼Œäº’ç›¸å­¦ä¹ ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="OB" scheme="http://crossoverjie.top/categories/OB/"/>
    
    <category term="Newsletter" scheme="http://crossoverjie.top/categories/OB/Newsletter/"/>
    
    
    <category term="Tech" scheme="http://crossoverjie.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Helm ç®¡ç†åº”ç”¨çš„ä¸€äº› Tips</title>
    <link href="http://crossoverjie.top/2023/10/07/ob/Helm-tips/"/>
    <id>http://crossoverjie.top/2023/10/07/ob/Helm-tips/</id>
    <published>2023-10-07T12:36:14.000Z</published>
    <updated>2023-10-08T09:49:14.476Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/10/08/9HKS1lNqyGMson5.png" alt="Helm tips.png"></p><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p><code>Helm</code> æ˜¯ä¸€ä¸ª <strong>Kubernetes</strong> çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæœ‰ç‚¹ç±»ä¼¼äº <code>Mac</code> ä¸Šçš„ <code>brew</code>ï¼Œ<code>Python</code> ä¸­çš„ <code>PIP</code>ï¼›å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¸®æˆ‘ä»¬ç›´æ¥åœ¨ <code>kubernetes</code> ä¸­å®‰è£…æŸä¸ªåº”ç”¨ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–¹ä¾¿çš„åœ¨ k8s é›†ç¾¤å®‰è£…å’Œå¸è½½ <code>MySQL</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm install my-sql oci://registry-1.docker.io/bitnamicharts/mysql -n mysql</span><br><span class="line"></span><br><span class="line">helm uninstall my-mysql -n mysql</span><br></pre></td></tr></table></figure><span id="more"></span><p>å¯¹äºä¸€äº›å¤æ‚çš„åº”ç”¨ä½¿ç”¨ Helm ä¸€é”®å®‰è£…ä¼šæ›´ç®€å•ï¼Œä»¥ Pulsar ä¸¾ä¾‹ï¼š<br><img src="https://s2.loli.net/2023/10/08/ig4koZIFlUT5Bt1.png" alt="image.png"><br>å®ƒæœ‰ç€å¤šä¸ªç»„ä»¶ï¼Œæ¯”å¦‚ bookkeeperã€zookeeperã€brokerã€proxy ç­‰ï¼Œå„ä¸ªç»„ä»¶è¿˜æœ‰ç€ä¾èµ–å…³ç³»ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨å®‰è£…æµç¨‹ä¼šæ¯”è¾ƒç¹çï¼Œè€Œä½¿ç”¨ Helm æ—¶ä¾¿éå¸¸ç®€å•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm repo add apache https://pulsar.apache.org/charts</span><br><span class="line"></span><br><span class="line">helm install my-pulsar apache/pulsar --version 3.0.0 -n pulsar</span><br></pre></td></tr></table></figure><blockquote><p>å½“ç„¶ä»–ä¹Ÿåªæ˜¯å¸®æˆ‘ä»¬ç”Ÿæˆäº†éƒ¨ç½²æ‰€éœ€è¦çš„ yaml æ–‡ä»¶ï¼Œä¹Ÿæ²¡æœ‰å¤ªå¤šé»‘ç§‘æŠ€ã€‚</p></blockquote><h1 id="å‡çº§"><a href="#å‡çº§" class="headerlink" title="å‡çº§"></a>å‡çº§</h1><p>çœ‹ä¼¼ç®€å•çš„å·¥å…·æˆ‘åœ¨å®é™…çº¿ä¸Šä½¿ç”¨çš„æ—¶å€™ä¹Ÿè¸©è¿‡ä¸€ä¸ªå‘ï¼Œæœ€å¤§çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æŸæ¬¡å‡çº§ Pulsar çš„æ—¶å€™ç”Ÿæˆçš„ yaml æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œå¯¼è‡´æ•´ä¸ªé›†ç¾¤è¢«åˆ é™¤äº†ğŸ˜­ã€‚</p><p>è¿˜å¥½æœ€åä½¿ç”¨ <code>helm  rollback version</code> å°†é›†ç¾¤æ¢å¤è¿‡æ¥äº†ï¼Œæˆ‘ä»¬çš„æŒä¹…åŒ–æ•°æ®ä¹Ÿè¿˜åœ¨ã€‚</p><p>è€Œå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯æˆ‘æ‰§è¡Œäº†ä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm upgrade pulsar ./charts/pulsar --version 2.9.2 -f charts/pulsar/values-2.10.3.yaml -n pulsar</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ˜¯å°† <code>pulsar</code> çš„ <code>Helm-Chart</code> æºç ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åä¿®æ”¹ <code>value.yaml</code> çš„æ–¹å¼æ‰§è¡Œå‡çº§çš„ã€‚</p><p>å½“æ—¶æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™æ²¡æœ‰æ³¨æ„ï¼Œåœ¨ä¸€ä¸ªæ²¡æœ‰ <code>values-2.10.3.yaml</code> æ–‡ä»¶çš„ç›®å½•ä¸‹æ‰§è¡Œçš„ï¼Œå¯¼è‡´ç”Ÿæˆçš„ <code>yaml</code> æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œä¹Ÿå°±å¯¼è‡´ k8s åœ¨ <code>pulsar</code> è¿™ä¸ª <code>namespace</code> ä¸‹åˆ é™¤äº†æ‰€æœ‰çš„èµ„æºã€‚</p><h2 id="æ¨¡æ‹Ÿå‡çº§"><a href="#æ¨¡æ‹Ÿå‡çº§" class="headerlink" title="æ¨¡æ‹Ÿå‡çº§"></a>æ¨¡æ‹Ÿå‡çº§</h2><p>ä¸ºäº†é¿å…ä»Šåå†æ¬¡å‡ºç°ç±»ä¼¼çš„é—®é¢˜ï¼Œéœ€è¦åœ¨å‡çº§å‰å…ˆæ¨¡æ‹Ÿå‡çº§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm upgrade pulsar ./charts/pulsar --version 2.9.2 -f charts/pulsar/values-2.10.3.yaml -n pulsar --dry-run --debug &gt; debug.yaml</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å…³é”®çš„ <code>dry-run</code> å’Œ <code>debug</code> å‚æ•°å¯ä»¥æŒ‡å®šæ¨¡æ‹Ÿå‡çº§å’Œè¾“å‡ºè¯¦ç»†çš„å†…å®¹ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å‡çº§å‰å…ˆæŸ¥çœ‹ <code>debug.yaml</code> é‡Œçš„å†…å®¹æ˜¯ä¸æ˜¯ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><h1 id="å¯¹æ¯”å‡çº§"><a href="#å¯¹æ¯”å‡çº§" class="headerlink" title="å¯¹æ¯”å‡çº§"></a>å¯¹æ¯”å‡çº§</h1><p>ä½†è¿™æ ·å¹¶ä¸èƒ½ç›´è§‚çš„çœ‹å‡ºå“ªäº›åœ°æ–¹æ˜¯æˆ‘ä»¬ä¿®æ”¹çš„ï¼Œè¿˜å¥½ç¤¾åŒºå·²ç»æœ‰äº†ç›¸å…³çš„æ’ä»¶ï¼Œå¯ä»¥å¸®æˆ‘ä»¬é«˜äº®æ˜¾ç¤ºä¿®æ”¹çš„åœ°æ–¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm plugin install https://github.com/databus23/helm-diff</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆå®‰è£…å¥½è¿™ä¸ª helm æ’ä»¶ã€‚</p><p>ç„¶ååœ¨å‡çº§å‰å…ˆä½¿ç”¨è¯¥æ’ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm diff upgrade pulsar ./charts/pulsar --version 2.9.2 -f charts/pulsar/values-2.10.3.yaml -n pulsar</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/08/V1k5gdhLASfq9JR.png" alt="image.png"></p><p>è¿™æ ·å°±å¯ä»¥é«˜äº®æ˜¾ç¤ºå‡ºä¿®æ”¹çš„å†…å®¹ã€‚</p><blockquote><p>ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªå‘½ä»¤ä¼šç›´æ¥å‡çº§ï¼Œå®ƒä¼šè‡ªåŠ¨åŠ ä¸Š â€“dry-run â€“debug å‚æ•°ã€‚</p></blockquote><p>æ›´å¤šå‘½ä»¤å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<br><a href="https://github.com/databus23/helm-diff">https://github.com/databus23/helm-diff</a></p><p>Helm åŠŸèƒ½å¾ˆå¼ºï¼Œåœ¨æ“ä½œç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™å¿…é¡»å¾—è°¨æ…ï¼Œéƒ½æ˜¯è¡€æ·‹æ·‹çš„æ•™è®­å•Šã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2023/10/08/9HKS1lNqyGMson5.png&quot; alt=&quot;Helm tips.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;&lt;code&gt;Helm&lt;/code&gt; æ˜¯ä¸€ä¸ª &lt;strong&gt;Kubernetes&lt;/strong&gt; çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæœ‰ç‚¹ç±»ä¼¼äº &lt;code&gt;Mac&lt;/code&gt; ä¸Šçš„ &lt;code&gt;brew&lt;/code&gt;ï¼Œ&lt;code&gt;Python&lt;/code&gt; ä¸­çš„ &lt;code&gt;PIP&lt;/code&gt;ï¼›å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¸®æˆ‘ä»¬ç›´æ¥åœ¨ &lt;code&gt;kubernetes&lt;/code&gt; ä¸­å®‰è£…æŸä¸ªåº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–¹ä¾¿çš„åœ¨ k8s é›†ç¾¤å®‰è£…å’Œå¸è½½ &lt;code&gt;MySQL&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;helm install my-sql oci://registry-1.docker.io/bitnamicharts/mysql -n mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;helm uninstall my-mysql -n mysql&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Helm" scheme="http://crossoverjie.top/categories/Helm/"/>
    
    
    <category term="CloudNative" scheme="http://crossoverjie.top/tags/CloudNative/"/>
    
  </entry>
  
</feed>
